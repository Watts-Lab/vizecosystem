var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t,e,n){t.$$.on_destroy.push(l(e,n))}function u(t,e,n,r){if(t){const i=f(t,e,n,r);return t[0](i)}}function f(t,e,r,i){return t[1]&&i?n(r.ctx.slice(),t[1](i(e))):r.ctx}function d(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function h(t,e,n,r,i,o){if(i){const a=f(e,n,r,o);t.p(a,i)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function m(t){return null==t?"":t}function g(t,e,n){return t.set(n),e}function v(e){return e&&a(e.destroy)?e.destroy:t}const y="undefined"!=typeof window;let x=y?()=>window.performance.now():()=>Date.now(),b=y?t=>requestAnimationFrame(t):t;const w=new Set;function $(t){w.forEach((e=>{e.c(t)||(w.delete(e),e.f())})),0!==w.size&&b($)}function _(t){let e;return 0===w.size&&b($),{promise:new Promise((n=>{w.add(e={c:t,f:n})})),abort(){w.delete(e)}}}function k(t,e){t.appendChild(e)}function M(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function C(t){const e=T("style");return function(t,e){k(t.head||t,e)}(M(t),e),e.sheet}function N(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode.removeChild(t)}function S(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function D(t){return document.createTextNode(t)}function E(){return D(" ")}function L(){return D("")}function P(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function j(t){return function(e){return e.preventDefault(),t.call(this,e)}}function R(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function O(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function F(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function q(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function U(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let H;function Y(){if(void 0===H){H=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){H=!0}}return H}function V(t,e,n){t.classList[n?"add":"remove"](e)}function B(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}const W=new Map;let Z,G=0;function X(t,e,n,r,i,o,a,s=0){const l=16.666/r;let c="{\n";for(let t=0;t<=1;t+=l){const r=e+(n-e)*o(t);c+=100*t+`%{${a(r,1-r)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,d=M(t),{stylesheet:h,rules:p}=W.get(d)||function(t,e){const n={stylesheet:C(e),rules:{}};return W.set(t,n),n}(d,t);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${u}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${i}ms 1 both`,G+=1,f}function K(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),G-=i,G||b((()=>{G||(W.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),W.clear())})))}function Q(n,r,i,o){if(!r)return t;const a=n.getBoundingClientRect();if(r.left===a.left&&r.right===a.right&&r.top===a.top&&r.bottom===a.bottom)return t;const{delay:s=0,duration:l=300,easing:c=e,start:u=x()+s,end:f=u+l,tick:d=t,css:h}=i(n,{from:r,to:a},o);let p,m=!0,g=!1;function v(){h&&K(n,p),m=!1}return _((t=>{if(!g&&t>=u&&(g=!0),g&&t>=f&&(d(1,0),v()),!m)return!1;if(g){const e=0+1*c((t-u)/l);d(e,1-e)}return!0})),h&&(p=X(n,0,1,l,s,c,h)),s||(g=!0),d(0,1),v}function J(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),i="none"===r.transform?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,i)}}function tt(t){Z=t}function et(){if(!Z)throw new Error("Function called outside component initialization");return Z}function nt(t){et().$$.on_mount.push(t)}function rt(){const t=et();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=B(e,n,{cancelable:r});return i.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function it(t){return et().$$.context.get(t)}const ot=[],at=[],st=[],lt=[],ct=Promise.resolve();let ut=!1;function ft(t){st.push(t)}function dt(t){lt.push(t)}const ht=new Set;let pt,mt=0;function gt(){const t=Z;do{for(;mt<ot.length;){const t=ot[mt];mt++,tt(t),vt(t.$$)}for(tt(null),ot.length=0,mt=0;at.length;)at.pop()();for(let t=0;t<st.length;t+=1){const e=st[t];ht.has(e)||(ht.add(e),e())}st.length=0}while(ot.length);for(;lt.length;)lt.pop()();ut=!1,ht.clear(),tt(t)}function vt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ft)}}function yt(){return pt||(pt=Promise.resolve(),pt.then((()=>{pt=null}))),pt}function xt(t,e,n){t.dispatchEvent(B(`${e?"intro":"outro"}${n}`))}const bt=new Set;let wt;function $t(){wt={r:0,c:[],p:wt}}function _t(){wt.r||o(wt.c),wt=wt.p}function kt(t,e){t&&t.i&&(bt.delete(t),t.i(e))}function Mt(t,e,n,r){if(t&&t.o){if(bt.has(t))return;bt.add(t),wt.c.push((()=>{bt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const Ct={duration:0};function Nt(n,r,i){let o,s,l=r(n,i),c=!1,u=0;function f(){o&&K(n,o)}function d(){const{delay:r=0,duration:i=300,easing:a=e,tick:d=t,css:h}=l||Ct;h&&(o=X(n,0,1,i,r,a,h,u++)),d(0,1);const p=x()+r,m=p+i;s&&s.abort(),c=!0,ft((()=>xt(n,!0,"start"))),s=_((t=>{if(c){if(t>=m)return d(1,0),xt(n,!0,"end"),f(),c=!1;if(t>=p){const e=a((t-p)/i);d(e,1-e)}}return c}))}let h=!1;return{start(){h||(h=!0,K(n),a(l)?(l=l(),yt().then(d)):d())},invalidate(){h=!1},end(){c&&(f(),c=!1)}}}function At(n,r,i){let s,l=r(n,i),c=!0;const u=wt;function f(){const{delay:r=0,duration:i=300,easing:a=e,tick:f=t,css:d}=l||Ct;d&&(s=X(n,1,0,i,r,a,d));const h=x()+r,p=h+i;ft((()=>xt(n,!1,"start"))),_((t=>{if(c){if(t>=p)return f(0,1),xt(n,!1,"end"),--u.r||o(u.c),!1;if(t>=h){const e=a((t-h)/i);f(1-e,e)}}return c}))}return u.r+=1,a(l)?yt().then((()=>{l=l(),f()})):f(),{end(t){t&&l.tick&&l.tick(1,0),c&&(s&&K(n,s),c=!1)}}}function St(t,e){t.f(),function(t,e){t.d(1),e.delete(t.key)}(t,e)}function Tt(t,e,n,r,i,o,a,s,l,c,u,f){let d=t.length,h=o.length,p=d;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,y=new Map;for(p=h;p--;){const t=f(i,o,p),s=n(t);let l=a.get(s);l?r&&l.p(t,e):(l=c(s,t),l.c()),v.set(s,g[p]=l),s in m&&y.set(s,Math.abs(p-m[s]))}const x=new Set,b=new Set;function w(t){kt(t,1),t.m(s,u),a.set(t.key,t),u=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],r=e.key,i=n.key;e===n?(u=e.first,d--,h--):v.has(i)?!a.has(r)||x.has(r)?w(e):b.has(i)?d--:y.get(r)>y.get(i)?(b.add(r),w(e)):(x.add(i),d--):(l(n,a),d--)}for(;d--;){const e=t[d];v.has(e.key)||l(e,a)}for(;h;)w(g[h-1]);return g}function zt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Dt(t){t&&t.c()}function Et(t,e,n,i){const{fragment:s,on_mount:l,on_destroy:c,after_update:u}=t.$$;s&&s.m(e,n),i||ft((()=>{const e=l.map(r).filter(a);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(ft)}function Lt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pt(t,e){-1===t.$$.dirty[0]&&(ot.push(t),ut||(ut=!0,ct.then(gt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function jt(e,n,r,a,s,l,c,u=[-1]){const f=Z;tt(e);const d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};c&&c(d.root);let h=!1;if(d.ctx=r?r(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),h&&Pt(e,t)),n})):[],d.update(),h=!0,o(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(A)}else d.fragment&&d.fragment.c();n.intro&&kt(e.$$.fragment),Et(e,n.target,n.anchor,n.customElement),gt()}tt(f)}class Rt{$destroy(){Lt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ot(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function It(t){const e=t-1;return e*e*e+1}function Ft(t,{delay:n=0,duration:r=400,easing:i=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>"opacity: "+t*o}}function qt(t,{delay:e=0,duration:n=400,easing:r=It,x:i=0,y:o=0,opacity:a=0}={}){const s=getComputedStyle(t),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-a);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${l-u*e}`}}function Ut(t,{delay:e=0,duration:n=400,easing:r=It,start:i=0,opacity:o=0}={}){const a=getComputedStyle(t),s=+a.opacity,l="none"===a.transform?"":a.transform,c=1-i,u=s*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${l} scale(${1-c*e});\n\t\t\topacity: ${s-u*e}\n\t\t`}}function Ht(t,{delay:e=0,speed:n,duration:r,easing:i=Ot}={}){let o=t.getTotalLength();const a=getComputedStyle(t);return"butt"!==a.strokeLinecap&&(o+=parseInt(a.strokeWidth)),void 0===r?r=void 0===n?800:o/n:"function"==typeof r&&(r=r(o)),{delay:e,duration:r,easing:i,css:(t,e)=>`stroke-dasharray: ${t*o} ${e*o}`}}function Yt(e){let n,r,i,o,a,s,l,c,u,f,d,h,p;return{c(){n=T("header"),r=T("div"),i=T("div"),i.innerHTML='<a class="logo_anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/"><img class="logo_img svelte-xuc4ey" src="https://css.seas.upenn.edu/wp-content/uploads/2021/09/WEBSITE-LOGO.png" alt="Computational Social Science Lab" id="logo"/></a>',o=E(),a=T("div"),a.innerHTML='<nav id="top-menu-nav" class="svelte-xuc4ey"><ul id="top-menu" class="nav svelte-xuc4ey"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-2731 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/about/">About</a> \n                        <ul class="sub-menu svelte-xuc4ey"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1554 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/about/lab/">The Lab</a></li> \n                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2232 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/about/community/">CSS Community</a></li></ul></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1747 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/people/">People</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-37 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/research/">Research</a> \n                        <ul class="sub-menu svelte-xuc4ey"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-735 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/project/penn-map/">PennMAP</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-292 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/project/virtual-lab/">Group Dynamics</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-291 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/project/covid-philadelphia/">COVID-Philadelphia</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-377 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/project/common-sense/">Common Sense</a></li></ul></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-344 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/partnerships/">Partners</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-58 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/publications/">Publications</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-105 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/blog-news-events/">News</a></li></ul></nav>',s=E(),l=T("div"),c=T("nav"),u=T("div"),u.innerHTML='<div class="line svelte-xuc4ey"></div> \n                    <div class="line svelte-xuc4ey"></div> \n                    <div class="line svelte-xuc4ey"></div>',f=E(),d=T("ul"),d.innerHTML='<li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/about/">About</a> \n                        <ul class="sub-menu-mobile"><li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/about/lab/">The Lab</a></li> \n                            <li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/about/community/">CSS Community</a></li></ul></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/people/">People</a></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/research/">Research</a> \n                        <ul class="sub-menu-mobile"><li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/project/penn-map/">PennMAP</a></li> \n                            <li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/project/virtual-lab/">Group Dynamics</a></li> \n                            <li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/project/covid-philadelphia/">COVID-Philadelphia</a></li> \n                            <li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/project/common-sense/">Common Sense</a></li></ul></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/partnerships/">Partners</a></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/publications/">Publications</a></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/blog-news-events/">News</a></li>',O(i,"class","logo_container svelte-xuc4ey"),O(a,"id","et-top-navigation"),O(a,"class","svelte-xuc4ey"),O(u,"class","icon svelte-xuc4ey"),O(d,"id","nav-mobile"),O(d,"class","nav-mobile nav-mobile-hidden svelte-xuc4ey"),O(c,"id","top-menu-nav-mobile"),O(c,"class","svelte-xuc4ey"),O(l,"id","et-top-navigation-mobile"),O(l,"class","svelte-xuc4ey"),O(r,"class","container clearfix et_menu_container svelte-xuc4ey"),O(n,"id","main-header"),O(n,"data-height-onload","84"),O(n,"data-height-loaded","true"),O(n,"data-fixed-height-onload","84"),F(n,"top","0px"),O(n,"class","svelte-xuc4ey")},m(t,m){N(t,n,m),k(n,r),k(r,i),k(r,o),k(r,a),k(r,s),k(r,l),k(l,c),k(c,u),k(c,f),k(c,d),h||(p=P(u,"click",e[0]),h=!0)},p:t,i:t,o:t,d(t){t&&A(n),h=!1,p()}}}function Vt(t){let e=null;return nt((()=>{e=document.getElementById("nav-mobile")})),[function(t){const{classList:n}=e;n.contains("nav-mobile-active")?(n.remove("nav-mobile-active"),n.add("nav-mobile-hidden")):(n.add("nav-mobile-active"),n.remove("nav-mobile-hidden"))}]}class Bt extends Rt{constructor(t){super(),jt(this,t,Vt,Yt,s,{})}}function Wt(e){let n;return{c(){n=T("footer"),n.innerHTML='<div class="et_builder_inner_content et_pb_gutters3"><div class="et_pb_section et_pb_section_0_tb_footer et_pb_with_background et_section_regular et_pb_section--with-menu svelte-1fl836e"><div class="et_pb_row et_pb_row_0_tb_footer et_pb_row--with-menu et_pb_row_4col svelte-1fl836e" style="z-index: 3;"><div class="et_pb_column et_pb_column_1_4 et_pb_column_0_tb_footer global-footer-column-1 et_pb_css_mix_blend_mode_passthrough svelte-1fl836e"><div class="et_pb_module et_pb_image et_pb_image_0_tb_footer et_pb_image_sticky svelte-1fl836e"><a href="https://www.seas.upenn.edu/" target="_blank" class="svelte-1fl836e"><span class="et_pb_image_wrap  svelte-1fl836e"><img loading="lazy" width="480" height="123" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas-300x77.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3438 svelte-1fl836e"/></span></a></div> \n                    <div class="et_pb_module et_pb_image et_pb_image_1_tb_footer et_pb_image_sticky svelte-1fl836e"><a href="https://www.asc.upenn.edu/" target="_blank" class="svelte-1fl836e"><span class="et_pb_image_wrap  svelte-1fl836e"><img loading="lazy" width="480" height="123" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc-300x77.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3440 svelte-1fl836e"/></span></a></div> \n                    <div class="et_pb_module et_pb_image et_pb_image_2_tb_footer et_pb_image_sticky svelte-1fl836e"><a href="https://www.wharton.upenn.edu/" target="_blank" class="svelte-1fl836e"><span class="et_pb_image_wrap  svelte-1fl836e"><img loading="lazy" width="480" height="111" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton-300x69.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3439 svelte-1fl836e"/></span></a></div></div> \n\n            <div class="et_pb_column et_pb_column_1_4 et_pb_column_1_tb_footer global-footer-column-2 et_pb_css_mix_blend_mode_passthrough et_pb_column--with-menu svelte-1fl836e"><div class="et_pb_module et_pb_text et_pb_text_0_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><h2 class="svelte-1fl836e">Navigate</h2></div></div> \n                <div class="et_pb_module et_pb_divider et_pb_divider_0_tb_footer et_pb_divider_position_ et_pb_space svelte-1fl836e"><div class="et_pb_divider_internal svelte-1fl836e"></div></div> \n                <div class="et_pb_module et_pb_menu et_pb_menu_0_tb_footer footer-vertical-menu et_pb_bg_layout_light et_pb_text_align_left et_dropdown_animation_fade et_pb_menu--without-logo et_pb_menu--style-left_aligned svelte-1fl836e"><div class="et_pb_menu_inner_container clearfix"><div class="et_pb_menu__wrap"><div class="et_pb_menu__menu svelte-1fl836e"><nav class="et-menu-nav svelte-1fl836e"><ul id="menu-footer-menu-new" class="et-menu nav svelte-1fl836e"><li id="menu-item-3425" class="et_pb_menu_page_id-2233 menu-item menu-item-type-post_type menu-item-object-page menu-item-3425 svelte-1fl836e"><a href="https://css.seas.upenn.edu/about/" class="svelte-1fl836e">About</a></li> \n                                        <li id="menu-item-3426" class="et_pb_menu_page_id-1732 menu-item menu-item-type-post_type menu-item-object-page menu-item-3426 svelte-1fl836e"><a href="https://css.seas.upenn.edu/people/" class="svelte-1fl836e">People</a></li> \n                                        <li id="menu-item-3430" class="et_pb_menu_page_id-22 menu-item menu-item-type-post_type menu-item-object-page menu-item-3430 svelte-1fl836e"><a href="https://css.seas.upenn.edu/research/" class="svelte-1fl836e">Research</a></li> \n                                        <li id="menu-item-3428" class="et_pb_menu_page_id-65 menu-item menu-item-type-post_type menu-item-object-page menu-item-3428 svelte-1fl836e"><a href="https://css.seas.upenn.edu/partnerships/" class="svelte-1fl836e">Partners</a></li> \n                                        <li id="menu-item-3429" class="et_pb_menu_page_id-52 menu-item menu-item-type-post_type menu-item-object-page menu-item-3429 svelte-1fl836e"><a href="https://css.seas.upenn.edu/publications/" class="svelte-1fl836e">Publications</a></li> \n                                        <li id="menu-item-3427" class="et_pb_menu_page_id-92 menu-item menu-item-type-post_type menu-item-object-page menu-item-3427 svelte-1fl836e"><a href="https://css.seas.upenn.edu/blog-news-events/" class="svelte-1fl836e">News</a></li></ul></nav></div></div></div></div></div> \n    \n    <div class="et_pb_column et_pb_column_1_4 et_pb_column_2_tb_footer global-footer-column-3 et_pb_css_mix_blend_mode_passthrough svelte-1fl836e"><div class="et_pb_module et_pb_text et_pb_text_1_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><h2 class="svelte-1fl836e">Contact</h2></div></div> \n        <div class="et_pb_module et_pb_divider et_pb_divider_1_tb_footer et_pb_divider_position_ et_pb_space svelte-1fl836e"><div class="et_pb_divider_internal svelte-1fl836e"></div></div> \n        <div class="et_pb_module et_pb_text et_pb_text_2_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><p class="svelte-1fl836e">3401 Walnut Street<br/>Suite 417B<br/>Philadelphia PA, 19104</p> \n                <p class="svelte-1fl836e">CSSLab@seas.upenn.edu</p> \n                <p class="svelte-1fl836e">(215) 573-7098</p></div></div></div></div> \n    <div class="et_pb_row et_pb_row_1_tb_footer et_pb_equal_columns svelte-1fl836e"><div class="et_pb_column et_pb_column_4_4 et_pb_column_4_tb_footer et_pb_css_mix_blend_mode_passthrough et-last-child"><div class="et_pb_module et_pb_text et_pb_text_4_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><p style="text-align: center;" class="svelte-1fl836e"><a href="https://www.upenn.edu/" class="svelte-1fl836e">Penn Homepage</a> \n                        <a href="https://www.upenn.edu/about/disclaimer" class="svelte-1fl836e">Disclaimer</a> \n                        <a href="https://www.publicsafety.upenn.edu/contact/" class="svelte-1fl836e">Emergency Services</a> \n                        <a href="https://www.upenn.edu/about/privacy-policy" class="svelte-1fl836e">Privacy Policy</a> \n                        <a href="https://accessibility.web-resources.upenn.edu/get-help" class="svelte-1fl836e">Report Accessibility Issues and Get Help</a> \n                        <a href="https://www.upenn.edu/about/report-copyright-infringement" class="svelte-1fl836e">Report Copyright Infringement</a></p></div></div> \n            <div class="et_pb_module et_pb_text et_pb_text_5_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><p style="text-align: center;" class="svelte-1fl836e"><em><strong></strong></em></p> \n                    <p style="text-align: center;" class="svelte-1fl836e"><em><a href="https://css.seas.upenn.edu/research-assistant-positions/" class="svelte-1fl836e"><strong>Interested in working at the CSSLab?</strong> Click here to view opportunities for Penn students</a></em></p></div></div></div></div></div></div>',O(n,"class","et-l et-l--footer svelte-1fl836e")},m(t,e){N(t,n,e)},p:t,i:t,o:t,d(t){t&&A(n)}}}class Zt extends Rt{constructor(t){super(),jt(this,t,null,Wt,s,{})}}var Gt={title:"Mapping the (Political) Information Ecosystem",controls:{medium:{title:"Medium",description:"Internet or TV"},partisanship:{title:"Partisanship",description:"On the web, we use a popular, Twitter-based method to give each news domain a partisanship score. Lenient means that websites more to the left of TheGuardian.com, and to the right of FoxNews.com are counted as highly partisan. Stringent means that Slate.com and Breitbart.com—more less centrist news sources—define “highly partisan”."},"node-size":{title:"Node size",description:"Audience size or average consumption"}},intro:[{type:"text",value:"Where do Americans get their news? Who is the typical consumer of news? And how many people are really in partisan “echo chambers”? We had these questions in mind when putting together the four interactive charts on this page."},{type:"buttons",value:[{title:"The fake news problem",url:"https://www.science.org/doi/10.1126/sciadv.aay3539"},{title:"Partisan news diets",url:"https://www.science.org/doi/10.1126/sciadv.abn0083"}]},{type:"tiles",value:[{title:"Overall News Consumption",tag:"overall-news-consumption"},{title:"Echo Chambers part 1",tag:"echo-chambers-part1"},{title:"Echo Chambers part 2",tag:"echo-chambers-part2"},{title:"Changing TV Audiences",tag:"changing-tv-audiences"}]}],"overall-news-consumption":[{type:"title",value:"Overall News Consumption"},{type:"text",value:"In the first figure, we tally the average time spent watching news and non-news on TV; online content is analyzed in terms of a larger set of categories, including social media platforms and hyper-partisan and fake-news sites. The clearest pattern is that older Americans spend significantly more time on news than younger Americans. Moreover, across all age groups, and especially for older Americans, TV news dominates online news articles in terms of total time spent."},{type:"text",value:"When we talk about traditional news audiences in the US, we are primarily referring to people who get their news through TV."},{type:"chart",value:{type:"line-area",title:"Chart title 1 - overall news consumption",captions:"Minutes per person per day spent with news and other categories of content on TV and desktop browsing. *Local TV News is not included."}}],"echo-chambers-part1":[{type:"title",value:'On partisan "Echo Chambers"'},{type:"text",value:"The 2022 article was inspired by ongoing discussions on “echo chambers,” the idea that social media exposes people to overwhelmingly partisan and like-minded news content. To gauge the scale of the echo chamber problem, we asked: how many people have a news diet that is made of majority highly partisan sources? The figure below is somewhat unique because we present results corresponding to multiple definitions of “majority”--50% and 75% of an individual’s total news consumption. You can also adjust the “strictness” of the highly partisan content definition with the lenient/stringent button."},{type:"chart",value:{type:"line-area",title:"Chart title 2 - echo chambers part 1",captions:"The monthly percent of Americans experiencing partisan segregation via TV or Web news. Bounds represent a range of percentages—from 50 to 75—of individual-level news diets that must be partisan for partisan segregation.",caption1:"State-level timeline of echo chamber size as % of total population with TV/desktop computers.",caption2:"We define audience size on the program and domain level as our estimate of the number of people spent at least one hour in a given month"}}],"echo-chambers-part2":[{type:"title",value:'"Echo Chambers" by state'},{type:"text",value:'In this map, the size of each semi-circle corresponds to the extent of partisan news segregation, or the size of echo chambers, in each state. You can click on a state for additional details, including the most-watched news programs and domains. The blue and red shading of each circle indicates the degree of partisan segregation, independent of a state\'s population. Surprisingly, when we break down TV audience segregation by political leanings, there is minimal geographic variation. Even in a "lenient" view where CNN is considered left-wing partisan, Fox News tends to dominate partisan viewership in almost every state, with New York and California being notable exceptions. When considering MSNBC as the left-wing partisan source, Fox News dominates in every state (though not Washington DC).'},{type:"chart",value:{type:"line-area",title:"Chart title 3 - echo chambers part 2",captions:"Each state is represented in terms of the total number of residents whose news diets are dominated by right-wing and left-wing partisan sources. The shades of red and blue indicate the percentage of residents. Click on a state for more info."}}],"changing-tv-audiences":[{type:"title",value:"Changing TV news audiences"},{type:"text",value:"In this final figure we introduce a key concept: the news consumption archetype. We surface eight archetypes of news consumption by clustering panelists with similarly distributed news diets, including those who watch 30 minutes or less of news in a given month. Each archetype is dominated by a single news category; we tracked changes as individuals migrated between these archetypes (arrows between nodes represent “net flow” between archetypes) and noticed two major trends. Notably, tens of millions of Americans are discontinuing TV news consumption, a mass exodus that is surely due in part to cord-cutting and the rise of streaming services. Second, those who continue to watch news on TV are increasingly engaging with partisan cable news channels including MSNBC and Fox News. In summary, the TV news audience is shrinking and becoming more polarized."},{type:"chart",value:{type:"flow-chart",title:"Chart title 4 - changing audiences",captions:"Television news consumption archetypes are each labeled according to the category of news most prominently consumed within the archetype, along with a large ninth group of people who are exposed to less than 30 min of news in a month, calculated independently in each month over the 4 years of analysis. The figure represents the direction and magnitude of turnover between each pair of archetypes. For example, if—over a given period of time—1M individuals moved from archetype A to archetype B, and over the same period of time 4M individuals did the reverse and moved from archetype B to A, then the net flow over that time period would be 3M from B to A."}}],methodology:[{type:"title",value:"Methodology"},{type:"text",value:"The analyses here are mostly reproductions of figures from two articles published in 2020 and 2022. The underlying datasets are derived from large panels (50-100k) of individuals who agreed to having their desktop internet browsing and TV viewing behavior passively tracked. The data spanned over a period of seven years from February 2016 to January 2023."}]},Xt=[{name:"Jenny Allen",detail:["MIT Sloan School of Management, 100 Main St., Cambridge, MA 02142"]},{name:"Homa Hosseinmardi",detail:["Department of Computer and Information Science, University of Pennsylvania, Philadelphia, PA 19104","homahm@seas.upenn.edu"]},{name:"Baird Howland",detail:["The Annenberg School for Communication, University of Pennsylvania, Philadelphia, PA 19104"]},{name:"Markus Mobius",detail:["Microsoft Research New England, Cambridge, MA 02142"]},{name:"Dan Muise",detail:["Department of Communication, Stanford University, Stanford, CA 94305","muise.dan@gmail.comm"]},{name:"David M. Rothschild",detail:["Microsoft Research New York, New York, NY 10012"]},{name:"Duncan J. Watts",detail:["Department of Computer and Information Science, University of Pennsylvania, Philadelphia, PA 19104","The Annenberg School of Communication, University of Pennsylvania, Philadelphia, PA 19104","Operations, Information, and Decisions Department, University of Pennsylvania, Philadelphia, PA 19104","djwatts@seas.upenn.edu"]}];function Kt(e){let n,r;return{c(){n=T("h1"),r=D(e[0]),O(n,"class","svelte-13hcpph")},m(t,e){N(t,n,e),k(n,r)},p(t,[e]){1&e&&I(r,t[0])},i:t,o:t,d(t){t&&A(n)}}}function Qt(t,e,n){let{title:r}=e;return t.$$set=t=>{"title"in t&&n(0,r=t.title)},[r]}class Jt extends Rt{constructor(t){super(),jt(this,t,Qt,Kt,s,{title:0})}}function te(e){let n,r,i,o,a,s,l,c;return{c(){n=T("div"),r=T("a"),i=D(e[0]),o=E(),a=z("svg"),s=z("path"),l=z("polyline"),c=z("line"),O(s,"d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"),O(l,"points","15 3 21 3 21 9"),O(c,"x1","10"),O(c,"y1","14"),O(c,"x2","21"),O(c,"y2","3"),O(a,"xmlns","http://www.w3.org/2000/svg"),O(a,"viewBox","0 0 24 24"),O(a,"fill","none"),O(a,"stroke","currentColor"),O(a,"stroke-width","2"),O(a,"stroke-linecap","round"),O(a,"stroke-linejoin","round"),O(a,"class","feather feather-external-link svelte-2zzv87"),O(r,"class","btn svelte-2zzv87"),O(r,"href",e[1]),O(r,"target","_top"),O(n,"class","btn-container svelte-2zzv87")},m(t,e){N(t,n,e),k(n,r),k(r,i),k(r,o),k(r,a),k(a,s),k(a,l),k(a,c)},p(t,[e]){1&e&&I(i,t[0]),2&e&&O(r,"href",t[1])},i:t,o:t,d(t){t&&A(n)}}}function ee(t,e,n){let{title:r}=e,{url:i}=e;return t.$$set=t=>{"title"in t&&n(0,r=t.title),"url"in t&&n(1,i=t.url)},[r,i]}class ne extends Rt{constructor(t){super(),jt(this,t,ee,te,s,{title:0,url:1})}}function re(t,e={}){let n;const r=r=>{const i=r[0].isIntersecting?"enter":"exit";"enter"===i&&t.dispatchEvent(new CustomEvent(i)),"enter"===i&&e.once&&n.disconnect()},i=({root:e,top:i,bottom:o})=>{const a={root:e,rootMargin:`${i?-1*i:0}px 0px ${o?-1*o:0}px 0px`};n&&n.disconnect(),n=new IntersectionObserver(r,a),n.observe(t)};return i(e),{update(t){i(t)},destroy(){n&&n.disconnect()}}}function ie(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function oe(t){let e,n,r=t[9].value+"";return{c(){e=T("p"),n=D(r),O(e,"class","copy svelte-mfvti6")},m(t,r){N(t,e,r),k(e,n)},p(t,e){4&e&&r!==(r=t[9].value+"")&&I(n,r)},d(t){t&&A(e)}}}function ae(t){let e,n="text"===t[9].type&&oe(t);return{c(){n&&n.c(),e=L()},m(t,r){n&&n.m(t,r),N(t,e,r)},p(t,r){"text"===t[9].type?n?n.p(t,r):(n=oe(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&A(e)}}}function se(e){let n,r,i,s,l,c,u,f,d,h=e[3].value+"",p=e[2],m=[];for(let t=0;t<p.length;t+=1)m[t]=ae(ie(e,p,t));return{c(){n=T("div"),r=T("h1"),i=D(h),s=E();for(let t=0;t<m.length;t+=1)m[t].c();l=E(),c=T("div"),c.textContent="GO BACK",O(r,"class","section-title svelte-mfvti6"),O(c,"class","close-button bottom svelte-mfvti6"),O(n,"class","section svelte-mfvti6")},m(t,o){N(t,n,o),k(n,r),k(r,i),k(n,s);for(let t=0;t<m.length;t+=1)m[t].m(n,null);k(n,l),k(n,c),f||(d=[P(c,"click",e[7]),v(u=re.call(null,n,{once:e[1]})),P(n,"enter",e[8])],f=!0)},p(t,[e]){if(8&e&&h!==(h=t[3].value+"")&&I(i,h),4&e){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=ie(t,p,r);m[r]?m[r].p(i,e):(m[r]=ae(i),m[r].c(),m[r].m(n,l))}for(;r<m.length;r+=1)m[r].d(1);m.length=p.length}u&&a(u.update)&&2&e&&u.update.call(null,{once:t[1]})},i:t,o:t,d(t){t&&A(n),S(m,t),f=!1,o(d)}}}function le(t,e,n){let r=!1,{once:i}=e,{body:o}=e,{title:a}=e,{refs:s}=e,{modal:l}=e,{chart:c}=e;return t.$$set=t=>{"once"in t&&n(1,i=t.once),"body"in t&&n(2,o=t.body),"title"in t&&n(3,a=t.title),"refs"in t&&n(5,s=t.refs),"modal"in t&&n(0,l=t.modal),"chart"in t&&n(6,c=t.chart)},[l,i,o,a,r,s,c,()=>n(0,l=!1),()=>n(4,r=!0)]}class ce extends Rt{constructor(t){super(),jt(this,t,le,se,s,{once:1,body:2,title:3,refs:5,modal:0,chart:6})}}function ue(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function fe(t,e,n){const r=t.slice();return r[7]=e[n],r}function de(e){let n,r,i,o,a=e[4].value+"",s=0===e[6]&&function(e){let n,r,i;return{c(){n=T("span"),n.textContent="Read more about the data",O(n,"class","methodology svelte-1scq5it")},m(t,o){N(t,n,o),r||(i=P(n,"click",e[3]),r=!0)},p:t,d(t){t&&A(n),r=!1,i()}}}(e);return{c(){n=T("p"),r=D(a),i=E(),s&&s.c(),o=E(),O(n,"class","svelte-1scq5it")},m(t,e){N(t,n,e),k(n,r),k(n,i),s&&s.m(n,null),k(n,o)},p(t,e){2&e&&a!==(a=t[4].value+"")&&I(r,a),0===t[6]&&s.p(t,e)},i:t,o:t,d(t){t&&A(n),s&&s.d()}}}function he(t){let e,n,r,i,o=t[4].value,a=[];for(let e=0;e<o.length;e+=1)a[e]=pe(fe(t,o,e));const s=t=>Mt(a[t],1,1,(()=>{a[t]=null}));return{c(){e=T("div"),n=D("Read the original research:\n\n\t\t\t\t");for(let t=0;t<a.length;t+=1)a[t].c();r=E(),O(e,"class","svelte-1scq5it")},m(t,o){N(t,e,o),k(e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null);k(e,r),i=!0},p(t,n){if(2&n){let i;for(o=t[4].value,i=0;i<o.length;i+=1){const s=fe(t,o,i);a[i]?(a[i].p(s,n),kt(a[i],1)):(a[i]=pe(s),a[i].c(),kt(a[i],1),a[i].m(e,r))}for($t(),i=o.length;i<a.length;i+=1)s(i);_t()}},i(t){if(!i){for(let t=0;t<o.length;t+=1)kt(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)Mt(a[t]);i=!1},d(t){t&&A(e),S(a,t)}}}function pe(t){let e,r;const i=[t[7]];let o={};for(let t=0;t<i.length;t+=1)o=n(o,i[t]);return e=new ne({props:o}),{c(){Dt(e.$$.fragment)},m(t,n){Et(e,t,n),r=!0},p(t,n){const r=2&n?function(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)i[t]||(n[t]=s[t],i[t]=1);t[o]=s}else for(const t in a)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(i,[(o=t[7],"object"==typeof o&&null!==o?o:{})]):{};var o;e.$set(r)},i(t){r||(kt(e.$$.fragment,t),r=!0)},o(t){Mt(e.$$.fragment,t),r=!1},d(t){Lt(e,t)}}}function me(t){let e,n,r,i;const o=[he,de],a=[];function s(t,e){return"buttons"===t[4].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function ge(t){let e,n,r=t[1],i=[];for(let e=0;e<r.length;e+=1)i[e]=me(ue(t,r,e));const o=t=>Mt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=T("div");for(let t=0;t<i.length;t+=1)i[t].c();O(e,"class","intro-wrapper svelte-1scq5it")},m(t,r){N(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,[n]){if(7&n){let a;for(r=t[1],a=0;a<r.length;a+=1){const o=ue(t,r,a);i[a]?(i[a].p(o,n),kt(i[a],1)):(i[a]=me(o),i[a].c(),kt(i[a],1),i[a].m(e,null))}for($t(),a=r.length;a<i.length;a+=1)o(a);_t()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)kt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Mt(i[t]);n=!1},d(t){t&&A(e),S(i,t)}}}function ve(t,e,n){let{content:r}=e,{modal:i}=e;const o={tag:"methodology",renderer:ce};return t.$$set=t=>{"content"in t&&n(1,r=t.content),"modal"in t&&n(0,i=t.modal)},[i,r,o,()=>n(0,i=o)]}class ye extends Rt{constructor(t){super(),jt(this,t,ve,ge,s,{content:1,modal:0})}}function xe(t,e,n){const r=t.slice();return r[1]=e[n],r[3]=n,r}function be(t,e,n){const r=t.slice();return r[4]=e[n],r}function we(t){let e,n,r=t[4]+"";return{c(){e=T("p"),n=D(r),O(e,"class","detail-list-value svelte-tk6zyo")},m(t,r){N(t,e,r),k(e,n)},p(t,e){1&e&&r!==(r=t[4]+"")&&I(n,r)},d(t){t&&A(e)}}}function $e(t){let e,n,r,i,a,s,l,c,u,f=t[1].name+"",d=t[1].detail,h=[];for(let e=0;e<d.length;e+=1)h[e]=we(be(t,d,e));return{c(){e=T("div"),n=T("p"),r=D(f),i=E(),a=T("div"),s=T("div");for(let t=0;t<h.length;t+=1)h[t].c();l=E(),O(n,"class","author-name svelte-tk6zyo"),O(s,"class","detail-list svelte-tk6zyo"),O(a,"class","detail svelte-tk6zyo"),O(e,"class","author-container svelte-tk6zyo")},m(t,o){N(t,e,o),k(e,n),k(n,r),k(e,i),k(e,a),k(a,s);for(let t=0;t<h.length;t+=1)h[t].m(s,null);k(e,l),c||(u=[P(e,"mouseover",ke),P(e,"focus",ke),P(e,"mouseout",Me),P(e,"blur",Me)],c=!0)},p(t,e){if(1&e&&f!==(f=t[1].name+"")&&I(r,f),1&e){let n;for(d=t[1].detail,n=0;n<d.length;n+=1){const r=be(t,d,n);h[n]?h[n].p(r,e):(h[n]=we(r),h[n].c(),h[n].m(s,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}},d(t){t&&A(e),S(h,t),c=!1,o(u)}}}function _e(e){let n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=$e(xe(e,r,t));return{c(){n=T("div");for(let t=0;t<i.length;t+=1)i[t].c();O(n,"class","authors svelte-tk6zyo")},m(t,e){N(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(1&e){let o;for(r=t[0],o=0;o<r.length;o+=1){const a=xe(t,r,o);i[o]?i[o].p(a,e):(i[o]=$e(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&A(n),S(i,t)}}}function ke(t){t.target.classList.add("active")}function Me(t){t.target.classList.remove("active")}function Ce(t,e,n){let{authors:r}=e;return t.$$set=t=>{"authors"in t&&n(0,r=t.authors)},[r]}class Ne extends Rt{constructor(t){super(),jt(this,t,Ce,_e,s,{authors:0})}}var Ae={},Se={};function Te(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function ze(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function De(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Ee(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+De(-t,6):t>9999?"+"+De(t,6):De(t,4)}(t.getUTCFullYear())+"-"+De(t.getUTCMonth()+1,2)+"-"+De(t.getUTCDate(),2)+(i?"T"+De(e,2)+":"+De(n,2)+":"+De(r,2)+"."+De(i,3)+"Z":r?"T"+De(e,2)+":"+De(n,2)+":"+De(r,2)+"Z":n||e?"T"+De(e,2)+":"+De(n,2)+"Z":"")}var Le=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return Se;if(c)return c=!1,Ae;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?l=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=u())!==Se;){for(var f=[];r!==Ae&&r!==Se;)f.push(r),r=u();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?Ee(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Te(t);return function(r,i){return e(n(r),i,t)}}(t,e):Te(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=ze(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=ze(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}(","),Pe=Le.parse;function je(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Re&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const Re=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Oe(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ie(t,e){return fetch(t,e).then(Oe)}var Fe,qe=(Fe=Pe,function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),Ie(t,e).then((function(t){return Fe(t,n)}))});function Ue(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function He(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ye(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=Ue,n=(e,n)=>Ue(t(e),n),r=(e,n)=>t(e)-n):(e=t===Ue||t===He?t:Ve,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function Ve(){return 0}const Be=Ye(Ue).right;Ye((function(t){return null===t?NaN:+t})).center;var We=Be;function Ze(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Ge{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}class Xe extends Map{constructor(t,e=Qe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Ke(this,t))}has(t){return super.has(Ke(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);t.has(r)&&(n=t.get(r),t.delete(r));return n}(this,t))}}function Ke({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Qe(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Je(t){return t}function tn(t,...e){return rn(t,Je,Je,e)}function en(t,...e){return rn(t,Array.from,Je,e)}function nn(t,e,...n){return rn(t,Je,e,n)}function rn(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new Xe,s=r[o++];let l=-1;for(const t of i){const e=s(t,++l,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function on(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var an=Math.sqrt(50),sn=Math.sqrt(10),ln=Math.sqrt(2);function cn(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=an?10:o>=sn?5:o>=ln?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=an?10:o>=sn?5:o>=ln?2:1)}function un(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=an?i*=10:o>=sn?i*=5:o>=ln&&(i*=2),e<t?-i:i}function fn(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function dn(t,e=Ue){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=Ue);const i=(t,r)=>e(n[t],n[r]);let o,a;return Uint32Array.from(n,((t,e)=>e)).sort(e===Ue?(t,e)=>on(n[t],n[e]):function(t=Ue){if(t===Ue)return on;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}(i)).forEach(((t,e)=>{const n=i(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,a=e),r[t]=a):r[t]=NaN})),r}function hn(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function pn(t){if(!(i=t.length))return[];for(var e=-1,n=function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}(t,mn),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function mn(t){return t.length}function gn(){return pn(arguments)}function vn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function yn(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const xn=Symbol("implicit");function bn(){var t=new Xe,e=[],n=[],r=xn;function i(i){let o=t.get(i);if(void 0===o){if(r!==xn)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Xe;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return bn(e,n).unknown(r)},vn.apply(i,arguments),i}function wn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $n(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _n(){}var kn=.7,Mn=1/kn,Cn="\\s*([+-]?\\d+)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sn=/^#([0-9a-f]{3,8})$/,Tn=new RegExp(`^rgb\\(${Cn},${Cn},${Cn}\\)$`),zn=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),Dn=new RegExp(`^rgba\\(${Cn},${Cn},${Cn},${Nn}\\)$`),En=new RegExp(`^rgba\\(${An},${An},${An},${Nn}\\)$`),Ln=new RegExp(`^hsl\\(${Nn},${An},${An}\\)$`),Pn=new RegExp(`^hsla\\(${Nn},${An},${An},${Nn}\\)$`),jn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Rn(){return this.rgb().formatHex()}function On(){return this.rgb().formatRgb()}function In(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Sn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Fn(e):3===n?new Yn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?qn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?qn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Tn.exec(t))?new Yn(e[1],e[2],e[3],1):(e=zn.exec(t))?new Yn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Dn.exec(t))?qn(e[1],e[2],e[3],e[4]):(e=En.exec(t))?qn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ln.exec(t))?Xn(e[1],e[2]/100,e[3]/100,1):(e=Pn.exec(t))?Xn(e[1],e[2]/100,e[3]/100,e[4]):jn.hasOwnProperty(t)?Fn(jn[t]):"transparent"===t?new Yn(NaN,NaN,NaN,0):null}function Fn(t){return new Yn(t>>16&255,t>>8&255,255&t,1)}function qn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Yn(t,e,n,r)}function Un(t){return t instanceof _n||(t=In(t)),t?new Yn((t=t.rgb()).r,t.g,t.b,t.opacity):new Yn}function Hn(t,e,n,r){return 1===arguments.length?Un(t):new Yn(t,e,n,null==r?1:r)}function Yn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Vn(){return`#${Gn(this.r)}${Gn(this.g)}${Gn(this.b)}`}function Bn(){const t=Wn(this.opacity);return`${1===t?"rgb(":"rgba("}${Zn(this.r)}, ${Zn(this.g)}, ${Zn(this.b)}${1===t?")":`, ${t})`}`}function Wn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gn(t){return((t=Zn(t))<16?"0":"")+t.toString(16)}function Xn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qn(t,e,n,r)}function Kn(t){if(t instanceof Qn)return new Qn(t.h,t.s,t.l,t.opacity);if(t instanceof _n||(t=In(t)),!t)return new Qn;if(t instanceof Qn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Qn(a,s,l,t.opacity)}function Qn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Jn(t){return(t=(t||0)%360)<0?t+360:t}function tr(t){return Math.max(0,Math.min(1,t||0))}function er(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}wn(_n,In,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Rn,formatHex:Rn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Kn(this).formatHsl()},formatRgb:On,toString:On}),wn(Yn,Hn,$n(_n,{brighter(t){return t=null==t?Mn:Math.pow(Mn,t),new Yn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?kn:Math.pow(kn,t),new Yn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Yn(Zn(this.r),Zn(this.g),Zn(this.b),Wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vn,formatHex:Vn,formatHex8:function(){return`#${Gn(this.r)}${Gn(this.g)}${Gn(this.b)}${Gn(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Bn,toString:Bn})),wn(Qn,(function(t,e,n,r){return 1===arguments.length?Kn(t):new Qn(t,e,n,null==r?1:r)}),$n(_n,{brighter(t){return t=null==t?Mn:Math.pow(Mn,t),new Qn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?kn:Math.pow(kn,t),new Qn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Yn(er(t>=240?t-240:t+120,i,r),er(t,i,r),er(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Qn(Jn(this.h),tr(this.s),tr(this.l),Wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wn(this.opacity);return`${1===t?"hsl(":"hsla("}${Jn(this.h)}, ${100*tr(this.s)}%, ${100*tr(this.l)}%${1===t?")":`, ${t})`}`}}));var nr=t=>()=>t;function rr(t){return 1==(t=+t)?ir:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):nr(isNaN(e)?n:e)}}function ir(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):nr(isNaN(t)?e:t)}var or=function t(e){var n=rr(e);function r(t,e){var r=n((t=Hn(t)).r,(e=Hn(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=ir(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function ar(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function sr(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=pr(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function lr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function cr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ur(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=pr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var fr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dr=new RegExp(fr.source,"g");function hr(t,e){var n,r,i,o=fr.lastIndex=dr.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=fr.exec(t))&&(r=dr.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:cr(n,r)})),o=dr.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function pr(t,e){var n,r=typeof e;return null==e||"boolean"===r?nr(e):("number"===r?cr:"string"===r?(n=In(e))?(e=n,or):hr:e instanceof In?or:e instanceof Date?lr:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?ar:Array.isArray(e)?sr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ur:cr)(t,e)}function mr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function gr(t,e){void 0===e&&(e=t,t=pr);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function vr(t){return+t}var yr=[0,1];function xr(t){return t}function br(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function wr(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=br(i,r),o=n(a,o)):(r=br(r,i),o=n(o,a)),function(t){return o(r(t))}}function $r(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=br(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=We(t,e,1,r)-1;return o[n](i[n](e))}}function _r(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kr(){var t,e,n,r,i,o,a=yr,s=yr,l=pr,c=xr;function u(){var t=Math.min(a.length,s.length);return c!==xr&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?$r:wr,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,l)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),cr)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,vr),u()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),l=mr,u()},f.clamp=function(t){return arguments.length?(c=!!t||xr,u()):c!==xr},f.interpolate=function(t){return arguments.length?(l=t,u()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,u()}}function Mr(){return kr()(xr,xr)}function Cr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Nr(t){return(t=Cr(Math.abs(t)))?t[1]:NaN}var Ar,Sr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tr(t){if(!(e=Sr.exec(t)))throw new Error("invalid format: "+t);var e;return new zr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function zr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Dr(t,e){var n=Cr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Tr.prototype=zr.prototype,zr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Er={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Dr(100*t,e),r:Dr,s:function(t,e){var n=Cr(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ar=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Cr(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Lr(t){return t}var Pr,jr,Rr,Or=Array.prototype.map,Ir=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fr(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Lr:(e=Or.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Lr:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Or.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Tr(t)).fill,n=t.align,f=t.sign,d=t.symbol,h=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Er[y]||(void 0===g&&(g=12),v=!0,y="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var x="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?o:/[%p]/.test(y)?l:"",w=Er[y],$=/[defgprs%]/.test(y);function _(t){var i,o,l,d=x,_=b;if("c"===y)_=w(t)+_,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),g),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==f&&(k=!1),d=(k?"("===f?f:c:"-"===f||"("===f?"":f)+d,_=("s"===y?Ir[8+Ar/3]:"")+_+(k&&"("===f?")":""),$)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){_=(46===l?a+t.slice(i+1):t.slice(i))+_,t=t.slice(0,i);break}}m&&!h&&(t=r(t,1/0));var M=d.length+t.length+_.length,C=M<p?new Array(p-M+1).join(e):"";switch(m&&h&&(t=r(C+t,C.length?p-_.length:1/0),C=""),n){case"<":t=d+t+_+C;break;case"=":t=d+C+t+_;break;case"^":t=C.slice(0,M=C.length>>1)+d+t+_+C.slice(M);break;default:t=C+d+t+_}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return t+""},_}return{format:f,formatPrefix:function(t,e){var n=f(((t=Tr(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Nr(e)/3))),i=Math.pow(10,-r),o=Ir[8+r/3];return function(t){return n(i*t)+o}}}}function qr(t,e,n,r){var i,o=un(t,e,n);switch((r=Tr(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Nr(e)/3)))-Nr(Math.abs(t)))}(o,a))||(r.precision=i),Rr(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nr(e)-Nr(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Nr(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return jr(r)}function Ur(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=cn(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),r=Math.round(e/a);for(n*a<t&&++n,r*a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),r=Math.round(e*a);for(n/a<t&&++n,r/a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return qr(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=cn(l,c,n))===r)return o[a]=l,o[s]=c,e(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Hr(){var t=Mr();return t.copy=function(){return _r(t,Hr())},vn.apply(t,arguments),Ur(t)}function Yr(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Vr(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Br(t){return t<0?-t*t:t*t}function Wr(t){var e=t(xr,xr),n=1;function r(){return 1===n?t(xr,xr):.5===n?t(Vr,Br):t(Yr(n),Yr(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Ur(e)}function Zr(){var t=Wr(kr());return t.copy=function(){return _r(t,Zr()).exponent(t.exponent())},vn.apply(t,arguments),t}function Gr(){return Zr.apply(null,arguments).exponent(.5)}function Xr(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[We(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Xr().domain(e).range(n).unknown(t)},vn.apply(i,arguments)}Pr=Fr({thousands:",",grouping:[3],currency:["$",""]}),jr=Pr.format,Rr=Pr.formatPrefix;var Kr=new Date,Qr=new Date;function Jr(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Jr((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Kr.setTime(+e),Qr.setTime(+r),t(Kr),t(Qr),Math.floor(n(Kr,Qr))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ti=Jr((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));ti.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Jr((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):ti:null};var ei=ti;ti.range;const ni=1e3,ri=6e4,ii=36e5,oi=864e5,ai=6048e5,si=2592e6,li=31536e6;var ci=Jr((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*ni)}),(function(t,e){return(e-t)/ni}),(function(t){return t.getUTCSeconds()})),ui=ci;ci.range;var fi=Jr((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ni)}),(function(t,e){t.setTime(+t+e*ri)}),(function(t,e){return(e-t)/ri}),(function(t){return t.getMinutes()})),di=fi;fi.range;var hi=Jr((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ni-t.getMinutes()*ri)}),(function(t,e){t.setTime(+t+e*ii)}),(function(t,e){return(e-t)/ii}),(function(t){return t.getHours()})),pi=hi;hi.range;var mi=Jr((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ri)/oi),(t=>t.getDate()-1)),gi=mi;function vi(t){return Jr((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ri)/ai}))}mi.range;var yi=vi(0),xi=vi(1),bi=vi(2),wi=vi(3),$i=vi(4),_i=vi(5),ki=vi(6);yi.range,xi.range,bi.range,wi.range,$i.range,_i.range,ki.range;var Mi=Jr((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Ci=Mi;Mi.range;var Ni=Jr((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Ni.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Jr((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Ai=Ni;Ni.range;var Si=Jr((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/oi}),(function(t){return t.getUTCDate()-1})),Ti=Si;function zi(t){return Jr((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/ai}))}Si.range;var Di=zi(0),Ei=zi(1),Li=zi(2),Pi=zi(3),ji=zi(4),Ri=zi(5),Oi=zi(6);Di.range,Ei.range,Li.range,Pi.range,ji.range,Ri.range,Oi.range;var Ii=Jr((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Ii.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Jr((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Fi=Ii;Ii.range;const[qi,Ui]=function(t,e,n,r,i,o){const a=[[ui,1,ni],[ui,5,5e3],[ui,15,15e3],[ui,30,3e4],[o,1,ri],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,ii],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,oi],[r,2,1728e5],[n,1,ai],[e,1,si],[e,3,7776e6],[t,1,li]];function s(e,n,r){const i=Math.abs(n-e)/r,o=Ye((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(un(e/li,n/li,r));if(0===o)return ei.every(Math.max(un(e,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}(Ai,Ci,yi,gi,pi,di);function Hi(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Yi(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vi(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Bi,Wi,Zi={"-":"",_:" ",0:"0"},Gi=/^\s*\d+/,Xi=/^%/,Ki=/[\\^$*+?|[\]().{}]/g;function Qi(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Ji(t){return t.replace(Ki,"\\$&")}function to(t){return new RegExp("^(?:"+t.map(Ji).join("|")+")","i")}function eo(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function no(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ro(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function io(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function oo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ao(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function so(t,e,n){var r=Gi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function lo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function co(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function uo(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function fo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ho(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function po(t,e,n){var r=Gi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function mo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function go(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function vo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function yo(t,e,n){var r=Gi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function xo(t,e,n){var r=Gi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function bo(t,e,n){var r=Xi.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function wo(t,e,n){var r=Gi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function $o(t,e,n){var r=Gi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _o(t,e){return Qi(t.getDate(),e,2)}function ko(t,e){return Qi(t.getHours(),e,2)}function Mo(t,e){return Qi(t.getHours()%12||12,e,2)}function Co(t,e){return Qi(1+gi.count(Ai(t),t),e,3)}function No(t,e){return Qi(t.getMilliseconds(),e,3)}function Ao(t,e){return No(t,e)+"000"}function So(t,e){return Qi(t.getMonth()+1,e,2)}function To(t,e){return Qi(t.getMinutes(),e,2)}function zo(t,e){return Qi(t.getSeconds(),e,2)}function Do(t){var e=t.getDay();return 0===e?7:e}function Eo(t,e){return Qi(yi.count(Ai(t)-1,t),e,2)}function Lo(t){var e=t.getDay();return e>=4||0===e?$i(t):$i.ceil(t)}function Po(t,e){return t=Lo(t),Qi($i.count(Ai(t),t)+(4===Ai(t).getDay()),e,2)}function jo(t){return t.getDay()}function Ro(t,e){return Qi(xi.count(Ai(t)-1,t),e,2)}function Oo(t,e){return Qi(t.getFullYear()%100,e,2)}function Io(t,e){return Qi((t=Lo(t)).getFullYear()%100,e,2)}function Fo(t,e){return Qi(t.getFullYear()%1e4,e,4)}function qo(t,e){var n=t.getDay();return Qi((t=n>=4||0===n?$i(t):$i.ceil(t)).getFullYear()%1e4,e,4)}function Uo(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qi(e/60|0,"0",2)+Qi(e%60,"0",2)}function Ho(t,e){return Qi(t.getUTCDate(),e,2)}function Yo(t,e){return Qi(t.getUTCHours(),e,2)}function Vo(t,e){return Qi(t.getUTCHours()%12||12,e,2)}function Bo(t,e){return Qi(1+Ti.count(Fi(t),t),e,3)}function Wo(t,e){return Qi(t.getUTCMilliseconds(),e,3)}function Zo(t,e){return Wo(t,e)+"000"}function Go(t,e){return Qi(t.getUTCMonth()+1,e,2)}function Xo(t,e){return Qi(t.getUTCMinutes(),e,2)}function Ko(t,e){return Qi(t.getUTCSeconds(),e,2)}function Qo(t){var e=t.getUTCDay();return 0===e?7:e}function Jo(t,e){return Qi(Di.count(Fi(t)-1,t),e,2)}function ta(t){var e=t.getUTCDay();return e>=4||0===e?ji(t):ji.ceil(t)}function ea(t,e){return t=ta(t),Qi(ji.count(Fi(t),t)+(4===Fi(t).getUTCDay()),e,2)}function na(t){return t.getUTCDay()}function ra(t,e){return Qi(Ei.count(Fi(t)-1,t),e,2)}function ia(t,e){return Qi(t.getUTCFullYear()%100,e,2)}function oa(t,e){return Qi((t=ta(t)).getUTCFullYear()%100,e,2)}function aa(t,e){return Qi(t.getUTCFullYear()%1e4,e,4)}function sa(t,e){var n=t.getUTCDay();return Qi((t=n>=4||0===n?ji(t):ji.ceil(t)).getUTCFullYear()%1e4,e,4)}function la(){return"+0000"}function ca(){return"%"}function ua(t){return+t}function fa(t){return Math.floor(+t/1e3)}function da(t){return new Date(t)}function ha(t){return t instanceof Date?+t:+new Date(+t)}function pa(t,e,n,r,i,o,a,s,l,c){var u=Mr(),f=u.invert,d=u.domain,h=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),x=c("%B"),b=c("%Y");function w(t){return(l(t)<t?h:s(t)<t?p:a(t)<t?m:o(t)<t?g:r(t)<t?i(t)<t?v:y:n(t)<t?x:b)(t)}return u.invert=function(t){return new Date(f(t))},u.domain=function(t){return arguments.length?d(Array.from(t,ha)):d().map(da)},u.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?w:c(e)},u.nice=function(t){var n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}(n,t)):u},u.copy=function(){return _r(u,pa(t,e,n,r,i,o,a,s,l,c))},u}function ma(){return vn.apply(pa(qi,Ui,Ai,Ci,yi,gi,pi,di,ui,Wi).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ga(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function va(){var t,e,n,r,i,o,a,s=0,l=.5,c=1,u=1,f=xr,d=!1;function h(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(u*t<u*e?r:i),f(d?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=gr(t,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(a){return arguments.length?([s,l,c]=a,t=o(s=+s),e=o(l=+l),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,h):[s,l,c]},h.clamp=function(t){return arguments.length?(d=!!t,h):d},h.interpolator=function(t){return arguments.length?(f=t,h):f},h.range=p(pr),h.rangeRound=p(mr),h.unknown=function(t){return arguments.length?(a=t,h):a},function(a){return o=a,t=a(s),e=a(l),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,h}}function ya(){var t=Ur(va()(xr));return t.copy=function(){return ga(t,ya())},yn.apply(t,arguments)}!function(t){Bi=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=to(i),u=eo(i),f=to(o),d=eo(o),h=to(a),p=eo(a),m=to(s),g=eo(s),v=to(l),y=eo(l),x={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:_o,e:_o,f:Ao,g:Io,G:qo,H:ko,I:Mo,j:Co,L:No,m:So,M:To,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ua,s:fa,S:zo,u:Do,U:Eo,V:Po,w:jo,W:Ro,x:null,X:null,y:Oo,Y:Fo,Z:Uo,"%":ca},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ho,e:Ho,f:Zo,g:oa,G:sa,H:Yo,I:Vo,j:Bo,L:Wo,m:Go,M:Xo,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ua,s:fa,S:Ko,u:Qo,U:Jo,V:ea,w:na,W:ra,x:null,X:null,y:ia,Y:aa,Z:la,"%":ca},w={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return k(t,e,n,r)},d:ho,e:ho,f:xo,g:lo,G:so,H:mo,I:mo,j:po,L:yo,m:fo,M:go,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:uo,Q:wo,s:$o,S:vo,u:ro,U:io,V:oo,w:no,W:ao,x:function(t,e,r){return k(t,n,e,r)},X:function(t,e,n){return k(t,r,e,n)},y:lo,Y:so,Z:co,"%":bo};function $(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=Zi[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function _(t,e){return function(n){var r,i,o=Vi(1900,void 0,1);if(k(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Yi(Vi(o.y,0,1))).getUTCDay(),r=i>4||0===i?Ei.ceil(r):Ei(r),r=Ti.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Hi(Vi(o.y,0,1))).getDay(),r=i>4||0===i?xi.ceil(r):xi(r),r=gi.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Yi(Vi(o.y,0,1)).getUTCDay():Hi(Vi(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Yi(o)):Hi(o)}}function k(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in Zi?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=$(n,x),x.X=$(r,x),x.c=$(e,x),b.x=$(n,b),b.X=$(r,b),b.c=$(e,b),{format:function(t){var e=$(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=_(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=$(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=_(t+="",!0);return e.toString=function(){return t},e}}}(t),Wi=Bi.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const xa=[];function ba(e,n=t){let r;const i=new Set;function o(t){if(s(e,t)&&(e=t,r)){const t=!xa.length;for(const t of i)t[1](),xa.push(t,e);if(t){for(let t=0;t<xa.length;t+=2)xa[t][0](xa[t+1]);xa.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const l=[a,s];return i.add(l),1===i.size&&(r=n(o)||t),a(e),()=>{i.delete(l),0===i.size&&(r(),r=null)}}}}function wa(e,n,r){const i=!Array.isArray(e),s=i?[e]:e,c=n.length<2;return u=e=>{let r=!1;const u=[];let f=0,d=t;const h=()=>{if(f)return;d();const r=n(i?u[0]:u,e);c?e(r):d=a(r)?r:t},p=s.map(((t,e)=>l(t,(t=>{u[e]=t,f&=~(1<<e),r&&h()}),(()=>{f|=1<<e}))));return r=!0,h(),function(){o(p),d()}},{subscribe:ba(r,u).subscribe};var u}function $a(t){return 0===(e=t)||e?Array.isArray(t)?e=>t.map((t=>"function"!=typeof t?e[t]:t(e))):"function"!=typeof t?e=>e[t]:t:null;var e}function _a(t,e={}){return function(t){const e={};for(const n of t){if(Object(n)!==n)throw new TypeError("iterable for fromEntries should yield objects");const{0:t,1:r}=n;Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r})}return e}(Object.entries(t).filter((([t,n])=>void 0!==n&&void 0===e[t])))}function ka(t,e){if(!Array.isArray(t))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const n={},r=Object.keys(e),i=r.length;let o,a,s,l,c,u,f,d;const h=t.length;for(o=0;o<i;o+=1){for(l=r[o],f=e[l],c=null,u=null,a=0;a<h;a+=1)if(d=f(t[a]),Array.isArray(d)){const t=d.length;for(s=0;s<t;s+=1)!1!==d[s]&&void 0!==d[s]&&null!==d[s]&&!1===Number.isNaN(d[s])&&((null===c||d[s]<c)&&(c=d[s]),(null===u||d[s]>u)&&(u=d[s]))}else!1!==d&&null!=d&&!1===Number.isNaN(d)&&((null===c||d<c)&&(c=d),(null===u||d>u)&&(u=d));n[l]=[c,u]}return n}function Ma(t,e,n){const r=Object.keys(n).reduce(((t,r)=>{const i=function(t){return"function"==typeof t.bandwidth?"ordinal":(e=Object.keys(t),n=["domain","range","unknown","copy"],e.length===n.length&&e.every((t=>n.includes(t)))?"ordinal":"other");var e,n}(n[r]);return t[i]||(t[i]={}),t[i][r]=e[r],t}),{ordinal:!1,other:!1});let i={};return r.ordinal&&(i=function(t,e,{sort:n=!1}={}){if(!Array.isArray(t))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const r={},i=Object.keys(e),o=i.length;let a,s,l,c,u,f,d;const h=t.length;for(a=0;a<o;a+=1){for(d=new Set,c=i[a],u=e[c],s=0;s<h;s+=1)if(f=u(t[s]),Array.isArray(f)){const t=f.length;for(l=0;l<t;l+=1)d.add(f[l])}else d.add(f);const o=Array.from(d);r[c]=!0===n?o.sort():o}return r}(t,r.ordinal)),r.other&&(i={...i,...ka(t,r.other)}),i}function Ca(t){return function([e,n]){return"function"==typeof n&&(n=n(e[t])),e?function(t=[],e){return!0===Array.isArray(e)?e.map(((e,n)=>null===e?t[n]:e)):t}(e[t],n):n}}var Na={x:Hr,y:Hr,z:Hr,r:Gr};function Aa(t){return t}function Sa(t){return e=>Math.log(t*e)}function Ta(t){return e=>t*Math.exp(e)}function za(t){return e=>Math.sign(e)*Math.log1p(Math.abs(e/t))}function Da(t){return e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}function Ea(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function La(t,e){if("function"!=typeof t.range)throw new Error("Scale method `range` must be a function");if("function"!=typeof t.domain)throw new Error("Scale method `domain` must be a function");if(!Array.isArray(e))return t.domain();2!==t.domain().length&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",t.domain()),2!==t.range().length&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",t.range());const{lift:n,ground:r}=function(t){const e=function(t){return t.constant?"symlog":t.base?"log":t.exponent?.5===t.exponent()?"sqrt":"pow":"other"}(t);if("log"===e){const n=Math.sign(t.domain()[0]);return{lift:Sa(n),ground:Ta(n),scaleType:e}}if("pow"===e){const t=1;return{lift:Ea(t),ground:Ea(1/t),scaleType:e}}if("sqrt"===e){const t=.5;return{lift:Ea(t),ground:Ea(1/t),scaleType:e}}if("symlog"===e){const t=1;return{lift:za(t),ground:Da(t),scaleType:e}}return{lift:Aa,ground:Aa,scaleType:e}}(t),i=t.domain()[0],o="[object Date]"===Object.prototype.toString.call(i),[a,s]=t.domain().map((t=>n(o?t.getTime():t))),[l,c]=t.range(),u=e[0]||0,f=e[1]||0,d=(s-a)/(Math.abs(c-l)-u-f);return[a-u*d,f*d+s].map((t=>r(o?new Date(t):t)))}function Pa(t){return function([e,n,r,i,o,a,s,l,c,u]){if(null===n)return null;const f=function(t,e,n,r,i,o){return i?"function"==typeof i?i({width:e,height:n}):i:function(t,e,n,r,i){let o,a;return!0===i?(o=0,a=100):(o="r"===t?1:0,a="y"===t?n:"r"===t?25:e),!0===r?[a,o]:[o,a]}(t,e,n,r,o)}(t,s,l,a,c,u),d=e===Na[t]?e():e.copy();return d.domain(r),(!d.interpolator||"function"==typeof d.interpolator&&d.interpolator().name.startsWith("identity"))&&d.range(f),i&&d.domain(La(d,i)),!0!==o&&"number"!=typeof o||("function"==typeof d.nice?d.nice("number"==typeof o?o:void 0):console.error(`[Layer Cake] You set \`${t}Nice: true\` but the ${t}Scale does not have a \`.nice\` method. Ignoring...`)),d}}function ja([t,e]){return n=>{const r=t(n);return Array.isArray(r)?r.map((t=>e(t))):e(r)}}function Ra([t]){if("function"==typeof t){if("function"==typeof t.range)return t.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const Oa=t=>({element:4&t[0],width:256&t[0],height:512&t[0],aspectRatio:1024&t[0],containerWidth:128&t[0],containerHeight:64&t[0]}),Ia=t=>({element:t[2],width:t[8],height:t[9],aspectRatio:t[10],containerWidth:t[7],containerHeight:t[6]});function Fa(t){let e,n,r;const i=t[90].default,o=u(i,t,t[89],Ia);return{c(){e=T("div"),o&&o.c(),O(e,"class","layercake-container svelte-1ll0j6t"),ft((()=>t[92].call(e))),F(e,"position",t[5],!1),F(e,"top","absolute"===t[5]?"0":null,!1),F(e,"right","absolute"===t[5]?"0":null,!1),F(e,"bottom","absolute"===t[5]?"0":null,!1),F(e,"left","absolute"===t[5]?"0":null,!1),F(e,"pointer-events",!1===t[4]?"none":null,!1)},m(i,a){N(i,e,a),o&&o.m(e,null),t[91](e),n=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=T("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=Y();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=P(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=P(n.contentWindow,"resize",e)}),k(t,n),()=>{(r||i&&n.contentWindow)&&i(),A(n)}}(e,t[92].bind(e)),r=!0},p(t,n){o&&o.p&&(!r||1988&n[0]|134217728&n[2])&&h(o,i,t,t[89],r?d(i,t[89],n,Oa):p(t[89]),Ia),32&n[0]&&F(e,"position",t[5],!1),32&n[0]&&F(e,"top","absolute"===t[5]?"0":null,!1),32&n[0]&&F(e,"right","absolute"===t[5]?"0":null,!1),32&n[0]&&F(e,"bottom","absolute"===t[5]?"0":null,!1),32&n[0]&&F(e,"left","absolute"===t[5]?"0":null,!1),16&n[0]&&F(e,"pointer-events",!1===t[4]?"none":null,!1)},i(t){r||(kt(o,t),r=!0)},o(t){Mt(o,t),r=!1},d(r){r&&A(e),o&&o.d(r),t[91](null),n()}}}function qa(t){let e,n,r=(!0===t[3]||"undefined"!=typeof window)&&Fa(t);return{c(){r&&r.c(),e=L()},m(t,i){r&&r.m(t,i),N(t,e,i),n=!0},p(t,n){!0===t[3]||"undefined"!=typeof window?r?(r.p(t,n),8&n[0]&&kt(r,1)):(r=Fa(t),r.c(),kt(r,1),r.m(e.parentNode,e)):r&&($t(),Mt(r,1,1,(()=>{r=null})),_t())},i(t){n||(kt(r),n=!0)},o(t){Mt(r),n=!1},d(t){r&&r.d(t),t&&A(e)}}}function Ua(t,e,n){let r,i,o,a,s,l,u,f,d,h,p,m,v,y,x,b,w,$,_,k,M,C,N,A,S,T,z,D,E,L,P,j,R,O,I,F,q,U,H,Y,V,{$$slots:B={},$$scope:W}=e,{ssr:Z=!1}=e,{pointerEvents:G=!0}=e,{position:X="relative"}=e,{percentRange:K=!1}=e,{width:Q}=e,{height:J}=e,{containerWidth:tt=Q||100}=e,{containerHeight:rt=J||100}=e,{element:it}=e,{x:ot}=e,{y:st}=e,{z:lt}=e,{r:ct}=e,{data:ut=[]}=e,{xDomain:ft}=e,{yDomain:dt}=e,{zDomain:ht}=e,{rDomain:pt}=e,{xNice:mt=!1}=e,{yNice:gt=!1}=e,{zNice:vt=!1}=e,{rNice:yt=!1}=e,{xPadding:xt}=e,{yPadding:bt}=e,{zPadding:wt}=e,{rPadding:$t}=e,{xScale:_t=Na.x}=e,{yScale:kt=Na.y}=e,{zScale:Mt=Na.z}=e,{rScale:Ct=Na.r}=e,{xRange:Nt}=e,{yRange:At}=e,{zRange:St}=e,{rRange:Tt}=e,{xReverse:zt=!1}=e,{yReverse:Dt="function"!=typeof kt.bandwidth}=e,{zReverse:Et=!1}=e,{rReverse:Lt=!1}=e,{padding:Pt={}}=e,{extents:jt={}}=e,{flatData:Rt}=e,{custom:Ot={}}=e,It=!1;nt((()=>{It=!0}));const Ft={},qt=ba(K);c(t,qt,(t=>n(128,U=t)));const Ut=ba(tt);c(t,Ut,(t=>n(7,q=t)));const Ht=ba(rt);c(t,Ht,(t=>n(6,F=t)));const Yt=ba(_a(jt));c(t,Yt,(t=>n(127,I=t)));const Vt=ba(ut);c(t,Vt,(t=>n(126,O=t)));const Bt=ba(Rt||ut);c(t,Bt,(t=>n(125,R=t)));const Wt=ba(Pt);c(t,Wt,(t=>n(124,j=t)));const Zt=ba($a(ot));c(t,Zt,(t=>n(123,P=t)));const Gt=ba($a(st));c(t,Gt,(t=>n(122,L=t)));const Xt=ba($a(lt));c(t,Xt,(t=>n(121,E=t)));const Kt=ba($a(ct));c(t,Kt,(t=>n(120,D=t)));const Qt=ba(ft);c(t,Qt,(t=>n(119,z=t)));const Jt=ba(dt);c(t,Jt,(t=>n(118,T=t)));const te=ba(ht);c(t,te,(t=>n(117,S=t)));const ee=ba(pt);c(t,ee,(t=>n(116,A=t)));const ne=ba(mt);c(t,ne,(t=>n(115,N=t)));const re=ba(gt);c(t,re,(t=>n(114,C=t)));const ie=ba(vt);c(t,ie,(t=>n(113,M=t)));const oe=ba(yt);c(t,oe,(t=>n(112,k=t)));const ae=ba(zt);c(t,ae,(t=>n(111,_=t)));const se=ba(Dt);c(t,se,(t=>n(110,$=t)));const le=ba(Et);c(t,le,(t=>n(109,w=t)));const ce=ba(Lt);c(t,ce,(t=>n(108,b=t)));const ue=ba(xt);c(t,ue,(t=>n(107,x=t)));const fe=ba(bt);c(t,fe,(t=>n(106,y=t)));const de=ba(wt);c(t,de,(t=>n(105,v=t)));const he=ba($t);c(t,he,(t=>n(104,m=t)));const pe=ba(Nt);c(t,pe,(t=>n(103,p=t)));const me=ba(At);c(t,me,(t=>n(102,h=t)));const ge=ba(St);c(t,ge,(t=>n(101,d=t)));const ve=ba(Tt);c(t,ve,(t=>n(100,f=t)));const ye=ba(_t);c(t,ye,(t=>n(99,u=t)));const xe=ba(kt);c(t,xe,(t=>n(98,l=t)));const be=ba(Mt);c(t,be,(t=>n(97,s=t)));const we=ba(Ct);c(t,we,(t=>n(96,a=t)));const $e=ba(Ft);c(t,$e,(t=>n(94,i=t)));const _e=ba(Ot);c(t,_e,(t=>n(95,o=t)));const ke=wa([Zt,Gt,Xt,Kt],(([t,e,n,r])=>{const i={};return t&&(i.x=t),e&&(i.y=e),n&&(i.z=n),r&&(i.r=r),i})),Me=wa([Wt,Ut,Ht],(([t])=>Object.assign({top:0,right:0,bottom:0,left:0},t))),Ce=wa([Ut,Ht,Me],(([t,e,n])=>{const r={};return r.top=n.top,r.right=t-n.right,r.bottom=e-n.bottom,r.left=n.left,r.width=r.right-r.left,r.height=r.bottom-r.top,r.width<=0&&!0===It&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),r.height<=0&&!0===It&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),r})),Ne=wa([Ce],(([t])=>t.width));c(t,Ne,(t=>n(8,H=t)));const Ae=wa([Ce],(([t])=>t.height));c(t,Ae,(t=>n(9,Y=t)));const Se=wa([Bt,ke,Yt,ye,xe,we,be],(([t,e,n,r,i,o,a])=>{const s={x:r,y:i,r:o,z:a},l=_a(e,n),c=Object.fromEntries(Object.keys(l).map((t=>[t,s[t]])));if(Object.keys(l).length>0){return{...Ma(t,l,c),...n}}return{}})),Te=wa([Se,Qt],Ca("x")),ze=wa([Se,Jt],Ca("y")),De=wa([Se,te],Ca("z")),Ee=wa([Se,ee],Ca("r")),Le=wa([ye,Se,Te,ue,ne,ae,Ne,Ae,pe,qt],Pa("x")),Pe=wa([Zt,Le],ja),je=wa([xe,Se,ze,fe,re,se,Ne,Ae,me,qt],Pa("y")),Re=wa([Gt,je],ja),Oe=wa([be,Se,De,de,ie,le,Ne,Ae,ge,qt],Pa("z")),Ie=wa([Xt,Oe],ja),Fe=wa([we,Se,Ee,he,oe,ce,Ne,Ae,ve,qt],Pa("r")),qe=wa([Kt,Fe],ja),Ue=wa([Le],Ra),He=wa([je],Ra),Ye=wa([Oe],Ra),Ve=wa([Fe],Ra),Be=wa([Ne,Ae],(([t,e])=>t/e));return c(t,Be,(t=>n(10,V=t))),t.$$set=t=>{"ssr"in t&&n(3,Z=t.ssr),"pointerEvents"in t&&n(4,G=t.pointerEvents),"position"in t&&n(5,X=t.position),"percentRange"in t&&n(51,K=t.percentRange),"width"in t&&n(52,Q=t.width),"height"in t&&n(53,J=t.height),"containerWidth"in t&&n(0,tt=t.containerWidth),"containerHeight"in t&&n(1,rt=t.containerHeight),"element"in t&&n(2,it=t.element),"x"in t&&n(54,ot=t.x),"y"in t&&n(55,st=t.y),"z"in t&&n(56,lt=t.z),"r"in t&&n(57,ct=t.r),"data"in t&&n(58,ut=t.data),"xDomain"in t&&n(59,ft=t.xDomain),"yDomain"in t&&n(60,dt=t.yDomain),"zDomain"in t&&n(61,ht=t.zDomain),"rDomain"in t&&n(62,pt=t.rDomain),"xNice"in t&&n(63,mt=t.xNice),"yNice"in t&&n(64,gt=t.yNice),"zNice"in t&&n(65,vt=t.zNice),"rNice"in t&&n(66,yt=t.rNice),"xPadding"in t&&n(67,xt=t.xPadding),"yPadding"in t&&n(68,bt=t.yPadding),"zPadding"in t&&n(69,wt=t.zPadding),"rPadding"in t&&n(70,$t=t.rPadding),"xScale"in t&&n(71,_t=t.xScale),"yScale"in t&&n(72,kt=t.yScale),"zScale"in t&&n(73,Mt=t.zScale),"rScale"in t&&n(74,Ct=t.rScale),"xRange"in t&&n(75,Nt=t.xRange),"yRange"in t&&n(76,At=t.yRange),"zRange"in t&&n(77,St=t.zRange),"rRange"in t&&n(78,Tt=t.rRange),"xReverse"in t&&n(79,zt=t.xReverse),"yReverse"in t&&n(80,Dt=t.yReverse),"zReverse"in t&&n(81,Et=t.zReverse),"rReverse"in t&&n(82,Lt=t.rReverse),"padding"in t&&n(83,Pt=t.padding),"extents"in t&&n(84,jt=t.extents),"flatData"in t&&n(85,Rt=t.flatData),"custom"in t&&n(86,Ot=t.custom),"$$scope"in t&&n(89,W=t.$$scope)},t.$$.update=()=>{8388608&t.$$.dirty[1]&&ot&&n(87,Ft.x=ot,Ft),16777216&t.$$.dirty[1]&&st&&n(87,Ft.y=st,Ft),33554432&t.$$.dirty[1]&&lt&&n(87,Ft.z=lt,Ft),67108864&t.$$.dirty[1]&&ct&&n(87,Ft.r=ct,Ft),268435456&t.$$.dirty[1]&&ft&&n(87,Ft.xDomain=ft,Ft),536870912&t.$$.dirty[1]&&dt&&n(87,Ft.yDomain=dt,Ft),1073741824&t.$$.dirty[1]&&ht&&n(87,Ft.zDomain=ht,Ft),1&t.$$.dirty[2]&&pt&&n(87,Ft.rDomain=pt,Ft),8192&t.$$.dirty[2]&&Nt&&n(87,Ft.xRange=Nt,Ft),16384&t.$$.dirty[2]&&At&&n(87,Ft.yRange=At,Ft),32768&t.$$.dirty[2]&&St&&n(87,Ft.zRange=St,Ft),65536&t.$$.dirty[2]&&Tt&&n(87,Ft.rRange=Tt,Ft),1048576&t.$$.dirty[1]&&g(qt,U=K,U),1&t.$$.dirty[0]&&g(Ut,q=tt,q),2&t.$$.dirty[0]&&g(Ht,F=rt,F),4194304&t.$$.dirty[2]&&g(Yt,I=_a(jt),I),134217728&t.$$.dirty[1]&&g(Vt,O=ut,O),134217728&t.$$.dirty[1]|8388608&t.$$.dirty[2]&&g(Bt,R=Rt||ut,R),2097152&t.$$.dirty[2]&&g(Wt,j=Pt,j),8388608&t.$$.dirty[1]&&g(Zt,P=$a(ot),P),16777216&t.$$.dirty[1]&&g(Gt,L=$a(st),L),33554432&t.$$.dirty[1]&&g(Xt,E=$a(lt),E),67108864&t.$$.dirty[1]&&g(Kt,D=$a(ct),D),268435456&t.$$.dirty[1]&&g(Qt,z=ft,z),536870912&t.$$.dirty[1]&&g(Jt,T=dt,T),1073741824&t.$$.dirty[1]&&g(te,S=ht,S),1&t.$$.dirty[2]&&g(ee,A=pt,A),2&t.$$.dirty[2]&&g(ne,N=mt,N),4&t.$$.dirty[2]&&g(re,C=gt,C),8&t.$$.dirty[2]&&g(ie,M=vt,M),16&t.$$.dirty[2]&&g(oe,k=yt,k),131072&t.$$.dirty[2]&&g(ae,_=zt,_),262144&t.$$.dirty[2]&&g(se,$=Dt,$),524288&t.$$.dirty[2]&&g(le,w=Et,w),1048576&t.$$.dirty[2]&&g(ce,b=Lt,b),32&t.$$.dirty[2]&&g(ue,x=xt,x),64&t.$$.dirty[2]&&g(fe,y=bt,y),128&t.$$.dirty[2]&&g(de,v=wt,v),256&t.$$.dirty[2]&&g(he,m=$t,m),8192&t.$$.dirty[2]&&g(pe,p=Nt,p),16384&t.$$.dirty[2]&&g(me,h=At,h),32768&t.$$.dirty[2]&&g(ge,d=St,d),65536&t.$$.dirty[2]&&g(ve,f=Tt,f),512&t.$$.dirty[2]&&g(ye,u=_t,u),1024&t.$$.dirty[2]&&g(xe,l=kt,l),2048&t.$$.dirty[2]&&g(be,s=Mt,s),4096&t.$$.dirty[2]&&g(we,a=Ct,a),16777216&t.$$.dirty[2]&&g(_e,o=Ot,o),33554432&t.$$.dirty[2]&&g($e,i=Ft,i),67108864&t.$$.dirty[2]&&function(t,e){et().$$.context.set(t,e)}("LayerCake",r)},n(88,r={activeGetters:ke,width:Ne,height:Ae,percentRange:qt,aspectRatio:Be,containerWidth:Ut,containerHeight:Ht,x:Zt,y:Gt,z:Xt,r:Kt,custom:_e,data:Vt,xNice:ne,yNice:re,zNice:ie,rNice:oe,xReverse:ae,yReverse:se,zReverse:le,rReverse:ce,xPadding:ue,yPadding:fe,zPadding:de,rPadding:he,padding:Me,flatData:Bt,extents:Se,xDomain:Te,yDomain:ze,zDomain:De,rDomain:Ee,xRange:Ue,yRange:He,zRange:Ye,rRange:Ve,config:$e,xScale:Le,xGet:Pe,yScale:je,yGet:Re,zScale:Oe,zGet:Ie,rScale:Fe,rGet:qe}),[tt,rt,it,Z,G,X,F,q,H,Y,V,qt,Ut,Ht,Yt,Vt,Bt,Wt,Zt,Gt,Xt,Kt,Qt,Jt,te,ee,ne,re,ie,oe,ae,se,le,ce,ue,fe,de,he,pe,me,ge,ve,ye,xe,be,we,$e,_e,Ne,Ae,Be,K,Q,J,ot,st,lt,ct,ut,ft,dt,ht,pt,mt,gt,vt,yt,xt,bt,wt,$t,_t,kt,Mt,Ct,Nt,At,St,Tt,zt,Dt,Et,Lt,Pt,jt,Rt,Ot,Ft,r,W,B,function(t){at[t?"unshift":"push"]((()=>{it=t,n(2,it)}))},function(){tt=this.clientWidth,rt=this.clientHeight,n(0,tt),n(1,rt)}]}class Ha extends Rt{constructor(t){super(),jt(this,t,Ua,qa,s,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const Ya=t=>({element:1&t}),Va=t=>({element:t[0]});function Ba(t){let e,n;const r=t[6].default,i=u(r,t,t[5],Va);return{c(){e=T("div"),i&&i.c(),O(e,"class","layercake-layout-html svelte-1u9nfei"),F(e,"z-index",t[1],!1),F(e,"pointer-events",!1===t[2]?"none":null,!1),F(e,"top",t[3].top+"px",!1),F(e,"right",t[3].right+"px",!1),F(e,"bottom",t[3].bottom+"px",!1),F(e,"left",t[3].left+"px",!1)},m(r,o){N(r,e,o),i&&i.m(e,null),t[7](e),n=!0},p(t,[o]){i&&i.p&&(!n||33&o)&&h(i,r,t,t[5],n?d(r,t[5],o,Ya):p(t[5]),Va),2&o&&F(e,"z-index",t[1],!1),4&o&&F(e,"pointer-events",!1===t[2]?"none":null,!1),8&o&&F(e,"top",t[3].top+"px",!1),8&o&&F(e,"right",t[3].right+"px",!1),8&o&&F(e,"bottom",t[3].bottom+"px",!1),8&o&&F(e,"left",t[3].left+"px",!1)},i(t){n||(kt(i,t),n=!0)},o(t){Mt(i,t),n=!1},d(n){n&&A(e),i&&i.d(n),t[7](null)}}}function Wa(t,e,n){let r,{$$slots:i={},$$scope:o}=e,{element:a}=e,{zIndex:s}=e,{pointerEvents:l}=e;const{padding:u}=it("LayerCake");return c(t,u,(t=>n(3,r=t))),t.$$set=t=>{"element"in t&&n(0,a=t.element),"zIndex"in t&&n(1,s=t.zIndex),"pointerEvents"in t&&n(2,l=t.pointerEvents),"$$scope"in t&&n(5,o=t.$$scope)},[a,s,l,r,u,o,i,function(t){at[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}class Za extends Rt{constructor(t){super(),jt(this,t,Wa,Ba,s,{element:0,zIndex:1,pointerEvents:2})}}const Ga=t=>({element:1&t}),Xa=t=>({element:t[0]}),Ka=t=>({element:1&t}),Qa=t=>({element:t[0]});function Ja(t){let e,n,r,i,o;const a=t[12].defs,s=u(a,t,t[11],Qa),l=t[12].default,c=u(l,t,t[11],Xa);return{c(){e=z("svg"),n=z("defs"),s&&s.c(),r=z("g"),c&&c.c(),O(r,"class","layercake-layout-svg_g"),O(r,"transform",i="translate("+t[7].left+", "+t[7].top+")"),O(e,"class","layercake-layout-svg svelte-17l4rdd"),O(e,"viewBox",t[4]),O(e,"width",t[5]),O(e,"height",t[6]),F(e,"z-index",t[2],!1),F(e,"pointer-events",!1===t[3]?"none":null,!1)},m(i,a){N(i,e,a),k(e,n),s&&s.m(n,null),k(e,r),c&&c.m(r,null),t[13](r),t[14](e),o=!0},p(t,[n]){s&&s.p&&(!o||2049&n)&&h(s,a,t,t[11],o?d(a,t[11],n,Ka):p(t[11]),Qa),c&&c.p&&(!o||2049&n)&&h(c,l,t,t[11],o?d(l,t[11],n,Ga):p(t[11]),Xa),(!o||128&n&&i!==(i="translate("+t[7].left+", "+t[7].top+")"))&&O(r,"transform",i),(!o||16&n)&&O(e,"viewBox",t[4]),(!o||32&n)&&O(e,"width",t[5]),(!o||64&n)&&O(e,"height",t[6]),4&n&&F(e,"z-index",t[2],!1),8&n&&F(e,"pointer-events",!1===t[3]?"none":null,!1)},i(t){o||(kt(s,t),kt(c,t),o=!0)},o(t){Mt(s,t),Mt(c,t),o=!1},d(n){n&&A(e),s&&s.d(n),c&&c.d(n),t[13](null),t[14](null)}}}function ts(t,e,n){let r,i,o,{$$slots:a={},$$scope:s}=e,{element:l}=e,{innerElement:u}=e,{zIndex:f}=e,{pointerEvents:d}=e,{viewBox:h}=e;const{containerWidth:p,containerHeight:m,padding:g}=it("LayerCake");return c(t,p,(t=>n(5,r=t))),c(t,m,(t=>n(6,i=t))),c(t,g,(t=>n(7,o=t))),t.$$set=t=>{"element"in t&&n(0,l=t.element),"innerElement"in t&&n(1,u=t.innerElement),"zIndex"in t&&n(2,f=t.zIndex),"pointerEvents"in t&&n(3,d=t.pointerEvents),"viewBox"in t&&n(4,h=t.viewBox),"$$scope"in t&&n(11,s=t.$$scope)},[l,u,f,d,h,r,i,o,p,m,g,s,a,function(t){at[t?"unshift":"push"]((()=>{u=t,n(1,u)}))},function(t){at[t?"unshift":"push"]((()=>{l=t,n(0,l)}))}]}class es extends Rt{constructor(t){super(),jt(this,t,ts,Ja,s,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function ns(t){if(Array.isArray(t)&&Array.isArray(t[0])){let e=[];const n=t.length;for(let r=0;r<n;r+=1)e=e.concat(t[r]);return e}return t}var rs=1e-6,is=Math.PI,os=is/2,as=is/4,ss=2*is,ls=180/is,cs=is/180,us=Math.abs,fs=Math.atan,ds=Math.atan2,hs=Math.cos,ps=Math.sin,ms=Math.sign||function(t){return t>0?1:t<0?-1:0},gs=Math.sqrt;function vs(t){return t>1?os:t<-1?-os:Math.asin(t)}function ys(){}function xs(t,e){t&&ws.hasOwnProperty(t.type)&&ws[t.type](t,e)}var bs={Feature:function(t,e){xs(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)xs(n[r].geometry,e)}},ws={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){$s(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)$s(n[r],e,0)},Polygon:function(t,e){_s(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)_s(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)xs(n[r],e)}};function $s(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function _s(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)$s(t[n],e,1);e.polygonEnd()}function ks(t){return[ds(t[1],t[0]),vs(t[2])]}function Ms(t){var e=t[0],n=t[1],r=hs(n);return[r*hs(e),r*ps(e),ps(n)]}function Cs(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ns(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function As(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ss(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ts(t){var e=gs(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zs(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Ds(t,e){return[us(t)>is?t+Math.round(-t/ss)*ss:t,e]}function Es(t){return function(e,n){return[(e+=t)>is?e-ss:e<-is?e+ss:e,n]}}function Ls(t){var e=Es(t);return e.invert=Es(-t),e}function Ps(t,e){var n=hs(t),r=ps(t),i=hs(e),o=ps(e);function a(t,e){var a=hs(e),s=hs(t)*a,l=ps(t)*a,c=ps(e),u=c*n+s*r;return[ds(l*i-u*o,s*n-c*r),vs(u*i+l*o)]}return a.invert=function(t,e){var a=hs(e),s=hs(t)*a,l=ps(t)*a,c=ps(e),u=c*i-l*o;return[ds(l*i+c*o,s*n+u*r),vs(u*n-s*r)]},a}function js(t,e){(e=Ms(e))[0]-=t,Ts(e);var n=function(t){return t>1?0:t<-1?is:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+ss-rs)%ss}function Rs(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:ys,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Os(t,e){return us(t[0]-e[0])<rs&&us(t[1]-e[1])<rs}function Is(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Fs(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Os(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new Is(r,t,null,!0)),l.push(n.o=new Is(r,null,n,!1)),s.push(n=new Is(a,t,null,!1)),l.push(n.o=new Is(a,null,n,!0))}})),s.length){for(l.sort(e),qs(s),qs(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var c,u,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,a=c.length;o<a;++o)i.point((u=c[o])[0],u[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,o=c.length-1;o>=0;--o)i.point((u=c[o])[0],u[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function qs(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Us(t){return us(t[0])<=is?t[0]:ms(t[0])*((us(t[0])+is)%ss-is)}function Hs(t,e,n,r){return function(i){var o,a,s,l=e(i),c=Rs(),u=e(c),f=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=x,a=[],o=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,a=fn(a);var t=function(t,e){var n=Us(e),r=e[1],i=ps(r),o=[ps(n),-hs(n),0],a=0,s=0,l=new Ge;1===i?r=os+rs:-1===i&&(r=-os-rs);for(var c=0,u=t.length;c<u;++c)if(d=(f=t[c]).length)for(var f,d,h=f[d-1],p=Us(h),m=h[1]/2+as,g=ps(m),v=hs(m),y=0;y<d;++y,p=b,g=$,v=_,h=x){var x=f[y],b=Us(x),w=x[1]/2+as,$=ps(w),_=hs(w),k=b-p,M=k>=0?1:-1,C=M*k,N=C>is,A=g*$;if(l.add(ds(A*M*ps(C),v*_+A*hs(C))),a+=N?k+M*ss:k,N^p>=n^b>=n){var S=Ns(Ms(h),Ms(x));Ts(S);var T=Ns(o,S);Ts(T);var z=(N^k>=0?-1:1)*vs(T[2]);(r>z||r===z&&(S[0]||S[1]))&&(s+=N^k>=0?1:-1)}}return(a<-1e-6||a<rs&&l<-1e-12)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),Fs(a,Vs,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function p(t,e){l.point(t,e)}function m(){d.point=p,l.lineStart()}function g(){d.point=h,l.lineEnd()}function v(t,e){s.push([t,e]),u.point(t,e)}function y(){u.lineStart(),s=[]}function x(){v(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),d=c.result(),h=d.length;if(s.pop(),o.push(s),s=null,h)if(1&l){if((e=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&l&&d.push(d.pop().concat(d.shift())),a.push(d.filter(Ys))}return d}}function Ys(t){return t.length>1}function Vs(t,e){return((t=t.x)[0]<0?t[1]-os-rs:os-t[1])-((e=e.x)[0]<0?e[1]-os-rs:os-e[1])}Ds.invert=Ds;var Bs=Hs((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?is:-is,l=us(o-n);us(l-is)<rs?(t.point(n,r=(r+a)/2>0?os:-os),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=is&&(us(n-i)<rs&&(n-=i*rs),us(o-s)<rs&&(o-=s*rs),r=function(t,e,n,r){var i,o,a=ps(t-n);return us(a)>rs?fs((ps(e)*(o=hs(r))*ps(n)-ps(r)*(i=hs(e))*ps(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*os,r.point(-is,i),r.point(0,i),r.point(is,i),r.point(is,0),r.point(is,-i),r.point(0,-i),r.point(-is,-i),r.point(-is,0),r.point(-is,i);else if(us(t[0]-e[0])>rs){var o=t[0]<e[0]?is:-is;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-is,-os]);function Ws(t){var e=hs(t),n=6*cs,r=e>0,i=us(e)>rs;function o(t,n){return hs(t)*hs(n)>e}function a(t,n,r){var i=[1,0,0],o=Ns(Ms(t),Ms(n)),a=Cs(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var c=e*a/l,u=-e*s/l,f=Ns(i,o),d=Ss(i,c);As(d,Ss(o,u));var h=f,p=Cs(d,h),m=Cs(h,h),g=p*p-m*(Cs(d,d)-1);if(!(g<0)){var v=gs(g),y=Ss(h,(-p-v)/m);if(As(y,d),y=ks(y),!r)return y;var x,b=t[0],w=n[0],$=t[1],_=n[1];w<b&&(x=b,b=w,w=x);var k=w-b,M=us(k-is)<rs;if(!M&&_<$&&(x=$,$=_,_=x),M||k<rs?M?$+_>0^y[1]<(us(y[0]-b)<rs?$:_):$<=y[1]&&y[1]<=_:k>is^(b<=y[0]&&y[0]<=w)){var C=Ss(h,(-p+v)/m);return As(C,d),[y,ks(C)]}}}function s(e,n){var i=r?t:is-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Hs(o,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(f,d){var h,p=[f,d],m=o(f,d),g=r?m?0:s(f,d):m?s(f+(f<0?is:-is),d):0;if(!e&&(c=l=m)&&t.lineStart(),m!==l&&(!(h=a(e,p))||Os(e,h)||Os(p,h))&&(p[2]=1),m!==l)u=0,m?(t.lineStart(),h=a(p,e),t.point(h[0],h[1])):(h=a(e,p),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(i&&e&&r^m){var v;g&n||!(v=a(p,e,!0))||(u=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!m||e&&Os(e,p)||t.point(p[0],p[1]),e=p,l=m,n=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var a=hs(e),s=ps(e),l=r*n;null==i?(i=e+r*ss,o=e-l/2):(i=js(a,i),o=js(a,o),(r>0?i<o:i>o)&&(i+=r*ss));for(var c,u=i;r>0?u>o:u<o;u-=l)c=ks([a,-s*hs(u),-s*ps(u)]),t.point(c[0],c[1])}}(o,t,n,i,e,r)}),r?[0,-t]:[-is,t-is])}var Zs=1e9,Gs=-Zs;function Xs(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var u=0,f=0;if(null==i||(u=a(i,s))!==(f=a(o,s))||l(i,o)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return us(r[0]-t)<rs?i>0?0:3:us(r[0]-n)<rs?i>0?2:1:us(r[1]-e)<rs?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,c,u,f,d,h,p,m,g,v,y,x=a,b=Rs(),w={point:$,lineStart:function(){w.point=_,c&&c.push(u=[]);v=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(_(f,d),h&&g&&b.rejoin(),l.push(b.result()));w.point=$,g&&x.lineEnd()},polygonStart:function(){x=b,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],l=1,u=s.length,f=s[0],d=f[0],h=f[1];l<u;++l)o=d,a=h,d=(f=s[l])[0],h=f[1],a<=r?h>r&&(d-o)*(r-a)>(h-a)*(t-o)&&++e:h<=r&&(d-o)*(r-a)<(h-a)*(t-o)&&--e;return e}(),n=y&&e,i=(l=fn(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Fs(l,s,e,o,a),a.polygonEnd());x=a,l=c=u=null}};function $(t,e){i(t,e)&&x.point(t,e)}function _(o,a){var s=i(o,a);if(c&&u.push([o,a]),v)f=o,d=a,h=s,v=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&g)x.point(o,a);else{var l=[p=Math.max(Gs,Math.min(Zs,p)),m=Math.max(Gs,Math.min(Zs,m))],b=[o=Math.max(Gs,Math.min(Zs,o)),a=Math.max(Gs,Math.min(Zs,a))];!function(t,e,n,r,i,o){var a,s=t[0],l=t[1],c=0,u=1,f=e[0]-s,d=e[1]-l;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<u&&(u=a)}else if(f>0){if(a>u)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>u)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<u&&(u=a)}if(a=r-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<u&&(u=a)}else if(d>0){if(a>u)return;a>c&&(c=a)}if(a=o-l,d||!(a<0)){if(a/=d,d<0){if(a>u)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<u&&(u=a)}return c>0&&(t[0]=s+c*f,t[1]=l+c*d),u<1&&(e[0]=s+u*f,e[1]=l+u*d),!0}}}}}(l,b,t,e,n,r)?s&&(x.lineStart(),x.point(o,a),y=!1):(g||(x.lineStart(),x.point(l[0],l[1])),x.point(b[0],b[1]),s||x.lineEnd(),y=!1)}p=o,m=a,g=s}return w}}var Ks=t=>t,Qs=1/0,Js=Qs,tl=-Qs,el=tl,nl={point:function(t,e){t<Qs&&(Qs=t);t>tl&&(tl=t);e<Js&&(Js=e);e>el&&(el=e)},lineStart:ys,lineEnd:ys,polygonStart:ys,polygonEnd:ys,result:function(){var t=[[Qs,Js],[tl,el]];return tl=el=-(Js=Qs=1/0),t}};var rl=nl;function il(t){return function(e){var n=new ol;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ol(){}function al(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),function(t,e){t&&bs.hasOwnProperty(t.type)?bs[t.type](t,e):xs(t,e)}(n,t.stream(rl)),e(rl.result()),null!=r&&t.clipExtent(r),t}function sl(t,e,n){return al(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function ll(t,e,n){return sl(t,[[0,0],e],n)}function cl(t,e,n){return al(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function ul(t,e,n){return al(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}ol.prototype={constructor:ol,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var fl=hs(30*cs);function dl(t,e){return+e?function(t,e){function n(r,i,o,a,s,l,c,u,f,d,h,p,m,g){var v=c-r,y=u-i,x=v*v+y*y;if(x>4*e&&m--){var b=a+d,w=s+h,$=l+p,_=gs(b*b+w*w+$*$),k=vs($/=_),M=us(us($)-1)<rs||us(o-f)<rs?(o+f)/2:ds(w,b),C=t(M,k),N=C[0],A=C[1],S=N-r,T=A-i,z=y*S-v*T;(z*z/x>e||us((v*S+y*T)/x-.5)>.3||a*d+s*h+l*p<fl)&&(n(r,i,o,a,s,l,N,A,M,b/=_,w/=_,$,m,g),g.point(N,A),n(N,A,M,b,w,$,c,u,f,d,h,p,m,g))}}return function(e){var r,i,o,a,s,l,c,u,f,d,h,p,m={point:g,lineStart:v,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){u=NaN,m.point=y,e.lineStart()}function y(r,i){var o=Ms([r,i]),a=t(r,i);n(u,f,c,d,h,p,u=a[0],f=a[1],c=r,d=o[0],h=o[1],p=o[2],16,e),e.point(u,f)}function x(){m.point=g,e.lineEnd()}function b(){v(),m.point=w,m.lineEnd=$}function w(t,e){y(r=t,e),i=u,o=f,a=d,s=h,l=p,m.point=y}function $(){n(u,f,c,d,h,p,i,o,r,a,s,l,16,e),m.lineEnd=x,x()}return m}}(t,e):function(t){return il({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var hl=il({point:function(t,e){this.stream.point(t*cs,e*cs)}});function pl(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=hs(o),s=ps(o),l=a*t,c=s*t,u=a/t,f=s/t,d=(s*n-a*e)/t,h=(s*e+a*n)/t;function p(t,o){return[l*(t*=r)-c*(o*=i)+e,n-c*t-l*o]}return p.invert=function(t,e){return[r*(u*t-f*e+d),i*(h-f*t-u*e)]},p}function ml(t){var e,n,r,i,o,a,s,l,c,u,f=150,d=480,h=250,p=0,m=0,g=0,v=0,y=0,x=0,b=1,w=1,$=null,_=Bs,k=null,M=Ks,C=.5;function N(t){return l(t[0]*cs,t[1]*cs)}function A(t){return(t=l.invert(t[0],t[1]))&&[t[0]*ls,t[1]*ls]}function S(){var t=pl(f,0,0,b,w,x).apply(null,e(p,m)),r=pl(f,d-t[0],h-t[1],b,w,x);return n=function(t,e,n){return(t%=ss)?e||n?zs(Ls(t),Ps(e,n)):Ls(t):e||n?Ps(e,n):Ds}(g,v,y),s=zs(e,r),l=zs(n,s),a=dl(s,C),T()}function T(){return c=u=null,N}return N.stream=function(t){return c&&u===t?c:c=hl(function(t){return il({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(_(a(M(u=t)))))},N.preclip=function(t){return arguments.length?(_=t,$=void 0,T()):_},N.postclip=function(t){return arguments.length?(M=t,k=r=i=o=null,T()):M},N.clipAngle=function(t){return arguments.length?(_=+t?Ws($=t*cs):($=null,Bs),T()):$*ls},N.clipExtent=function(t){return arguments.length?(M=null==t?(k=r=i=o=null,Ks):Xs(k=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),T()):null==k?null:[[k,r],[i,o]]},N.scale=function(t){return arguments.length?(f=+t,S()):f},N.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],S()):[d,h]},N.center=function(t){return arguments.length?(p=t[0]%360*cs,m=t[1]%360*cs,S()):[p*ls,m*ls]},N.rotate=function(t){return arguments.length?(g=t[0]%360*cs,v=t[1]%360*cs,y=t.length>2?t[2]%360*cs:0,S()):[g*ls,v*ls,y*ls]},N.angle=function(t){return arguments.length?(x=t%360*cs,S()):x*ls},N.reflectX=function(t){return arguments.length?(b=t?-1:1,S()):b<0},N.reflectY=function(t){return arguments.length?(w=t?-1:1,S()):w<0},N.precision=function(t){return arguments.length?(a=dl(s,C=t*t),T()):gs(C)},N.fitExtent=function(t,e){return sl(N,t,e)},N.fitSize=function(t,e){return ll(N,t,e)},N.fitWidth=function(t,e){return cl(N,t,e)},N.fitHeight=function(t,e){return ul(N,t,e)},function(){return e=t.apply(this,arguments),N.invert=e.invert&&A,S()}}function gl(t,e){var n=ps(t),r=(n+ps(e))/2;if(us(r)<rs)return function(t){var e=hs(t);function n(t,n){return[t*e,ps(n)/e]}return n.invert=function(t,n){return[t/e,vs(n*e)]},n}(t);var i=1+n*(2*r-n),o=gs(i)/r;function a(t,e){var n=gs(i-2*r*ps(e))/r;return[n*ps(t*=r),o-n*hs(t)]}return a.invert=function(t,e){var n=o-e,a=ds(t,us(n))*ms(n);return n*r<0&&(a-=is*ms(t)*ms(n)),[a/r,vs((i-(t*t+n*n)*r*r)/(2*r))]},a}function vl(){return function(t){var e=0,n=is/3,r=ml(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*cs,n=t[1]*cs):[e*ls,n*ls]},i}(gl).scale(155.424).center([0,33.6442])}function yl(){var t,e,n,r,i,o,a=vl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),s=vl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=vl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function u(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(t)},u.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),l.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},u.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),f()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],u=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,u-.238*e],[o+.455*e,u+.238*e]]).stream(c),r=s.translate([o-.307*e,u+.201*e]).clipExtent([[o-.425*e+rs,u+.12*e+rs],[o-.214*e-rs,u+.234*e-rs]]).stream(c),i=l.translate([o-.205*e,u+.212*e]).clipExtent([[o-.214*e+rs,u+.166*e+rs],[o-.115*e-rs,u+.234*e-rs]]).stream(c),f()},u.fitExtent=function(t,e){return sl(u,t,e)},u.fitSize=function(t,e){return ll(u,t,e)},u.fitWidth=function(t,e){return cl(u,t,e)},u.fitHeight=function(t,e){return ul(u,t,e)},u.scale(1070)}function xl(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,l,c,u,f,d,h=t._root,p={data:r},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+y)/2))?g=a:y=a,i=h,!(h=h[f=u<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,h.data),l=+t._y.call(null,h.data),e===s&&n===l)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+y)/2))?g=a:y=a}while((f=u<<1|c)==(d=(l>=a)<<1|s>=o));return i[d]=h,i[f]=p,t}function bl(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function wl(t){return t[0]}function $l(t){return t[1]}function _l(t,e,n){var r=new kl(null==e?wl:e,null==n?$l:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function kl(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Ml(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Cl=_l.prototype=kl.prototype;function Nl(t){return function(){return t}}function Al(t){return 1e-6*(t()-.5)}function Sl(t){return t.x+t.vx}function Tl(t){return t.y+t.vy}Cl.copy=function(){var t,e,n=new kl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Ml(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Ml(e));return n},Cl.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return xl(this.cover(e,n),e,n,t)},Cl.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>f&&(f=i));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<o;++n)xl(this,a[n],s[n],t[n]);return this},Cl.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,l=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Cl.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Cl.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Cl.find=function(t,e,n){var r,i,o,a,s,l,c,u=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],m=this._root;for(m&&p.push(new bl(m,u,f,d,h)),null==n?n=1/0:(u=t-n,f=e-n,d=t+n,h=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(i=l.x0)>d||(o=l.y0)>h||(a=l.x1)<u||(s=l.y1)<f))if(m.length){var g=(i+a)/2,v=(o+s)/2;p.push(new bl(m[3],g,v,a,s),new bl(m[2],i,v,g,s),new bl(m[1],g,o,a,v),new bl(m[0],i,o,g,v)),(c=(e>=v)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var y=t-+this._x.call(null,m.data),x=e-+this._y.call(null,m.data),b=y*y+x*x;if(b<n){var w=Math.sqrt(n=b);u=t-w,f=e-w,d=t+w,h=e+w,r=m.data}}return r},Cl.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,l,c,u,f,d,h=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(u=a>=(l=(m+v)/2))?m=l:v=l,e=h,!(h=h[f=u<<1|c]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},Cl.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Cl.root=function(){return this._root},Cl.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Cl.visit=function(t){var e,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new bl(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&l.length){var c=(r+o)/2,u=(i+a)/2;(n=l[3])&&s.push(new bl(n,c,u,o,a)),(n=l[2])&&s.push(new bl(n,r,u,c,a)),(n=l[1])&&s.push(new bl(n,c,i,o,u)),(n=l[0])&&s.push(new bl(n,r,i,c,u))}return this},Cl.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new bl(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(a+l)/2,f=(s+c)/2;(o=i[0])&&n.push(new bl(o,a,s,u,f)),(o=i[1])&&n.push(new bl(o,u,s,l,f)),(o=i[2])&&n.push(new bl(o,a,f,u,c)),(o=i[3])&&n.push(new bl(o,u,f,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Cl.x=function(t){return arguments.length?(this._x=t,this):this._x},Cl.y=function(t){return arguments.length?(this._y=t,this):this._y};var zl={value:()=>{}};function Dl(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new El(r)}function El(t){this._=t}function Ll(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Pl(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function jl(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=zl,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}El.prototype=Dl.prototype={constructor:El,on:function(t,e){var n,r=this._,i=Ll(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=jl(r[n],t.name,e);else if(null==e)for(n in r)r[n]=jl(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=Pl(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new El(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Rl,Ol,Il=0,Fl=0,ql=0,Ul=0,Hl=0,Yl=0,Vl="object"==typeof performance&&performance.now?performance:Date,Bl="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Wl(){return Hl||(Bl(Zl),Hl=Vl.now()+Yl)}function Zl(){Hl=0}function Gl(){this._call=this._time=this._next=null}function Xl(t,e,n){var r=new Gl;return r.restart(t,e,n),r}function Kl(){Hl=(Ul=Vl.now())+Yl,Il=Fl=0;try{!function(){Wl(),++Il;for(var t,e=Rl;e;)(t=Hl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Il}()}finally{Il=0,function(){var t,e,n=Rl,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Rl=e);Ol=t,Jl(r)}(),Hl=0}}function Ql(){var t=Vl.now(),e=t-Ul;e>1e3&&(Yl-=e,Ul=t)}function Jl(t){Il||(Fl&&(Fl=clearTimeout(Fl)),t-Hl>24?(t<1/0&&(Fl=setTimeout(Kl,t-Vl.now()-Yl)),ql&&(ql=clearInterval(ql))):(ql||(Ul=Vl.now(),ql=setInterval(Ql,1e3)),Il=1,Bl(Kl)))}Gl.prototype=Xl.prototype={constructor:Gl,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Wl():+n)+(null==e?0:+e),this._next||Ol===this||(Ol?Ol._next=this:Rl=this,Ol=this),this._call=t,this._time=n,Jl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jl())}};const tc=4294967296;function ec(t){return t.x}function nc(t){return t.y}var rc=Math.PI*(3-Math.sqrt(5));function ic(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=Xl(f),c=Dl("tick","end"),u=function(){let t=1;return()=>(t=(1664525*t+1013904223)%tc)/tc}();function f(){d(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function d(r){var l,c,u=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),l=0;l<u;++l)null==(c=t[l]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*rc;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),h(),e={tick:d,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(u=t,s.forEach(p),e):u},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,l,c=0,u=t.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(l=s,r=a);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}const oc=Math.PI,ac=2*oc,sc=1e-6,lc=ac-sc;function cc(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function uc(){return new cc}function fc(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function dc(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function hc(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function pc(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function mc(t){let e,n,r,i,o,a,s,l=t[6],c=[];for(let e=0;e<l.length;e+=1)c[e]=gc(pc(t,l,e));let u=t[7],f=[];for(let e=0;e<u.length;e+=1)f[e]=vc(hc(t,u,e));let d=t[6],h=[];for(let e=0;e<d.length;e+=1)h[e]=yc(dc(t,d,e));let p=t[7],m=[];for(let e=0;e<p.length;e+=1)m[e]=xc(fc(t,p,e));return{c(){e=z("g"),n=z("foreignObject"),r=T("div");for(let t=0;t<c.length;t+=1)c[t].c();i=E();for(let t=0;t<f.length;t+=1)f[t].c();o=E();for(let t=0;t<h.length;t+=1)h[t].c();a=L();for(let t=0;t<m.length;t+=1)m[t].c();O(r,"class","annotation-wrapper svelte-1opdl67"),O(n,"width",t[1]),O(n,"height",t[2]),O(e,"class","intro-annotation"),O(e,"transform",s="translate(-35, 0)")},m(t,s){N(t,e,s),k(e,n),k(n,r);for(let t=0;t<c.length;t+=1)c[t].m(r,null);k(r,i);for(let t=0;t<f.length;t+=1)f[t].m(r,null);k(r,o);for(let t=0;t<h.length;t+=1)h[t].m(e,null);k(e,a);for(let t=0;t<m.length;t+=1)m[t].m(e,null)},p(t,s){if(64&s){let e;for(l=t[6],e=0;e<l.length;e+=1){const n=pc(t,l,e);c[e]?c[e].p(n,s):(c[e]=gc(n),c[e].c(),c[e].m(r,i))}for(;e<c.length;e+=1)c[e].d(1);c.length=l.length}if(160&s){let e;for(u=t[7],e=0;e<u.length;e+=1){const n=hc(t,u,e);f[e]?f[e].p(n,s):(f[e]=vc(n),f[e].c(),f[e].m(r,o))}for(;e<f.length;e+=1)f[e].d(1);f.length=u.length}if(2&s&&O(n,"width",t[1]),4&s&&O(n,"height",t[2]),64&s){let n;for(d=t[6],n=0;n<d.length;n+=1){const r=dc(t,d,n);h[n]?h[n].p(r,s):(h[n]=yc(r),h[n].c(),h[n].m(e,a))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}if(128&s){let n;for(p=t[7],n=0;n<p.length;n+=1){const r=fc(t,p,n);m[n]?m[n].p(r,s):(m[n]=xc(r),m[n].c(),m[n].m(e,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=p.length}},d(t){t&&A(e),S(c,t),S(f,t),S(h,t),S(m,t)}}}function gc(e){let n,r,i,o;return{c(){n=T("div"),r=D("In "),i=T("b"),i.textContent="NY",o=D(", 5 to 10% of the population\n            experience partisanship in their news\n            diets."),O(n,"class","annotation svelte-1opdl67"),F(n,"top",e[9].y-(e[9].r_L+80)+"px"),F(n,"left",e[9].x-(e[9].r_L+80)+"px")},m(t,e){N(t,n,e),k(n,r),k(n,i),k(n,o)},p:t,d(t){t&&A(n)}}}function vc(e){let n,r,i,o,a,s;return{c(){n=T("div"),r=T("b"),r.textContent="ND",i=D("'s right-leaning echo chamber is\n            much more sizeable and intense: over \n            10% of the population.\n            "),o=T("div"),O(o,"class","close-button svelte-1opdl67"),O(n,"class","annotation svelte-1opdl67"),F(n,"top",e[9].y-(e[9].r_L+140)+"px"),F(n,"left",e[9].x+(e[9].r_R+20)+"px")},m(t,l){N(t,n,l),k(n,r),k(n,i),k(n,o),a||(s=P(o,"click",e[5]),a=!0)},p:t,d(t){t&&A(n),a=!1,s()}}}function yc(e){let n;return{c(){n=z("line"),O(n,"class","annotation-line svelte-1opdl67"),O(n,"x1",e[9].x-(e[9].r_L+5)),O(n,"x2",e[9].x-(e[9].r_L-10)),O(n,"y1",e[9].y-(e[9].r_L+16)),O(n,"y2",e[9].y-(e[9].r_L-16))},m(t,e){N(t,n,e)},p:t,d(t){t&&A(n)}}}function xc(e){let n;return{c(){n=z("line"),O(n,"class","annotation-line svelte-1opdl67"),O(n,"x1",e[9].x+(e[9].r_R+45)),O(n,"x2",e[9].x-(e[9].r_L-35)),O(n,"y1",e[9].y-(e[9].r_L+45)),O(n,"y2",e[9].y-e[9].r_L)},m(t,e){N(t,n,e)},p:t,d(t){t&&A(n)}}}function bc(e){let n,r=e[0]&&mc(e);return{c(){r&&r.c(),n=L()},m(t,e){r&&r.m(t,e),N(t,n,e)},p(t,[e]){t[0]?r?r.p(t,e):(r=mc(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&A(n)}}}function wc(t,e,n){let r,i,o;const{width:a,height:s}=it("LayerCake");c(t,a,(t=>n(1,i=t))),c(t,s,(t=>n(2,o=t)));let{data:l}=e;const u=l.filter((t=>"NY"===t.abbr)),f=l.filter((t=>"ND"===t.abbr));return t.$$set=t=>{"data"in t&&n(8,l=t.data)},n(0,r=!0),[r,i,o,a,s,function(){n(0,r=!1)},u,f,l]}cc.prototype=uc.prototype={constructor:cc,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,l=r-e,c=o-t,u=a-e,f=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>sc)if(Math.abs(u*s-l*c)>sc&&i){var d=n-o,h=r-a,p=s*s+l*l,m=d*d+h*h,g=Math.sqrt(p),v=Math.sqrt(f),y=i*Math.tan((oc-Math.acos((p+f-m)/(2*g*v)))/2),x=y/v,b=y/g;Math.abs(x-1)>sc&&(this._+="L"+(t+x*c)+","+(e+x*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*h)+","+(this._x1=t+b*s)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,u=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>sc||Math.abs(this._y1-c)>sc)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%ac+ac),f>lc?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):f>sc&&(this._+="A"+n+","+n+",0,"+ +(f>=oc)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};class $c extends Rt{constructor(t){super(),jt(this,t,wc,bc,s,{data:8})}}function _c(t,e,n){const r=t.slice();return r[26]=e[n],r}function kc(t){let e,n;return e=new $c({props:{data:t[1]}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.data=t[1]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Mc(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,g,v,y,x,b,w,$=t[26].abbr+"";function _(...e){return t[18](t[26],...e)}return{c(){e=z("g"),n=z("path"),o=z("path"),l=z("path"),d=z("text"),h=D($),O(n,"class","node svelte-1xz61ek"),O(n,"fill",r=t[26].fillR),O(n,"d",i=t[26].rightPathString),O(o,"class","node svelte-1xz61ek"),O(o,"fill",a=t[26].fillL),O(o,"d",s=t[26].leftPathString),O(l,"class","node node-stroke svelte-1xz61ek"),O(l,"fill",c="none"),O(l,"stroke",u="black"),O(l,"d",f=t[26].fullPath),O(d,"class",p=m("state-label "+(t[2]?"active":""))+" svelte-1xz61ek"),O(d,"fill","black"),O(d,"dx",g=(t[26].r_L+3)*Math.cos(3*Math.PI/4)),O(d,"dy",v=-(t[26].r_L+3)*Math.cos(3*Math.PI/4)),O(e,"class",y=m(`node-group node-group-${t[26].abbr}`)+" svelte-1xz61ek"),O(e,"transform",x=`translate(${t[26].x}, ${t[26].y})`)},m(t,r){N(t,e,r),k(e,n),k(e,o),k(e,l),k(e,d),k(d,h),b||(w=P(e,"click",_),b=!0)},p(c,u){t=c,2&u&&r!==(r=t[26].fillR)&&O(n,"fill",r),2&u&&i!==(i=t[26].rightPathString)&&O(n,"d",i),2&u&&a!==(a=t[26].fillL)&&O(o,"fill",a),2&u&&s!==(s=t[26].leftPathString)&&O(o,"d",s),2&u&&f!==(f=t[26].fullPath)&&O(l,"d",f),2&u&&$!==($=t[26].abbr+"")&&I(h,$),4&u&&p!==(p=m("state-label "+(t[2]?"active":""))+" svelte-1xz61ek")&&O(d,"class",p),2&u&&g!==(g=(t[26].r_L+3)*Math.cos(3*Math.PI/4))&&O(d,"dx",g),2&u&&v!==(v=-(t[26].r_L+3)*Math.cos(3*Math.PI/4))&&O(d,"dy",v),2&u&&y!==(y=m(`node-group node-group-${t[26].abbr}`)+" svelte-1xz61ek")&&O(e,"class",y),2&u&&x!==(x=`translate(${t[26].x}, ${t[26].y})`)&&O(e,"transform",x)},d(t){t&&A(e),b=!1,w()}}}function Cc(t){let e,n,r,i=t[0]&&kc(t),o=t[1],a=[];for(let e=0;e<o.length;e+=1)a[e]=Mc(_c(t,o,e));return{c(){i&&i.c(),e=E(),n=z("g");for(let t=0;t<a.length;t+=1)a[t].c();O(n,"class","bee-group"),O(n,"transform","translate(-35, 0)")},m(t,o){i&&i.m(t,o),N(t,e,o),N(t,n,o);for(let t=0;t<a.length;t+=1)a[t].m(n,null);r=!0},p(t,[r]){if(t[0]?i?(i.p(t,r),1&r&&kt(i,1)):(i=kc(t),i.c(),kt(i,1),i.m(e.parentNode,e)):i&&($t(),Mt(i,1,1,(()=>{i=null})),_t()),262&r){let e;for(o=t[1],e=0;e<o.length;e+=1){const i=_c(t,o,e);a[e]?a[e].p(i,r):(a[e]=Mc(i),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=o.length}},i(t){r||(kt(i),r=!0)},o(t){Mt(i),r=!1},d(t){i&&i.d(t),t&&A(e),t&&A(n),S(a,t)}}}function Nc(t,e){return t.arc(0,0,e.r,e.start,e.end),t.closePath(),t}function Ac(t,e,n){let r,i,o,a,s,l;const{height:u,width:f,rScale:d,zScale:h,data:p}=it("LayerCake");c(t,u,(t=>n(16,o=t))),c(t,f,(t=>n(17,a=t))),c(t,d,(t=>n(21,l=t))),c(t,h,(t=>n(20,s=t))),c(t,p,(t=>n(15,i=t)));let{collideStrength:m=1}=e,{manyBodyStrength:g=1}=e,{medium:v}=e,{diet_threshold:y}=e,{partisanship_scenario:x}=e,{renderAnnotation:b}=e;const w=rt(),$=yl();function _(){M.alpha(1).restart()}$.translate([a/2,o/2]);let k=[],M=ic().alpha(0).alphaMin(.4).force("collide",function(t){var e,n,r,i=1,o=1;function a(){for(var t,a,l,c,u,f,d,h=e.length,p=0;p<o;++p)for(a=_l(e,Sl,Tl).visitAfter(s),t=0;t<h;++t)l=e[t],f=n[l.index],d=f*f,c=l.x+l.vx,u=l.y+l.vy,a.visit(m);function m(t,e,n,o,a){var s=t.data,h=t.r,p=f+h;if(!s)return e>c+p||o<c-p||n>u+p||a<u-p;if(s.index>l.index){var m=c-s.x-s.vx,g=u-s.y-s.vy,v=m*m+g*g;v<p*p&&(0===m&&(v+=(m=Al(r))*m),0===g&&(v+=(g=Al(r))*g),v=(p-(v=Math.sqrt(v)))/v*i,l.vx+=(m*=v)*(p=(h*=h)/(d+h)),l.vy+=(g*=v)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Nl(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,l()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Nl(+e),l(),a):t},a}((t=>t.r+9.5)).strength(m).iterations(5)).force("charge",function(){var t,e,n,r,i,o=Nl(-30),a=1,s=1/0,l=.81;function c(n){var i,o=t.length,a=_l(t,ec,nc).visitAfter(f);for(r=n,i=0;i<o;++i)e=t[i],a.visit(d)}function u(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function f(t){var e,n,r,o,a,s=0,l=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,o+=n*e.y);t.x=r/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function d(t,o,c,u){if(!t.value)return!0;var f=t.x-e.x,d=t.y-e.y,h=u-o,p=f*f+d*d;if(h*h/l<p)return p<s&&(0===f&&(p+=(f=Al(n))*f),0===d&&(p+=(d=Al(n))*d),p<a&&(p=Math.sqrt(a*p)),e.vx+=f*t.value*r/p,e.vy+=d*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===f&&(p+=(f=Al(n))*f),0===d&&(p+=(d=Al(n))*d),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(h=i[t.data.index]*r/p,e.vx+=f*h,e.vy+=d*h)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,u()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:Nl(+t),u(),c):o},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(l=t*t,c):Math.sqrt(l)},c}().strength(g));function C(t){return t.map(((t,e)=>{const[n,r]=$(t.coordinates),i=l(Math.abs(t.data.left_size)),o=l(Math.abs(t.data.right_size)),a=Nc(uc(),{r:o,start:-Math.PI/2,end:Math.PI/2}),c=s(1*t.data.right_pct),u=Nc(uc(),{r:i,start:Math.PI/2,end:-Math.PI/2}),f=s(-1*t.data.left_pct),d=(h=uc(),p={r:o},m={r:i},h.arc(0,0,p.r,-Math.PI/2,Math.PI/2),h.arc(0,0,m.r,Math.PI/2,-Math.PI/2),h.closePath(),h);var h,p,m;return{...t,x:n,y:r,r:Math.max(i,o),r_L:i,r_R:o,rightPathString:a,fillR:c,leftPathString:u,fillL:f,fullPath:d}}))}function N(t,e){w("click",{target:t.target,node:e})}return t.$$set=t=>{"collideStrength"in t&&n(9,m=t.collideStrength),"manyBodyStrength"in t&&n(10,g=t.manyBodyStrength),"medium"in t&&n(11,v=t.medium),"diet_threshold"in t&&n(12,y=t.diet_threshold),"partisanship_scenario"in t&&n(13,x=t.partisanship_scenario),"renderAnnotation"in t&&n(0,b=t.renderAnnotation)},t.$$.update=()=>{32768&t.$$.dirty&&n(1,k=C(i)),16386&t.$$.dirty&&n(14,M=M.nodes(k).on("tick",(()=>{n(1,k=M.nodes())})).on("end",(()=>{n(2,r=!0)}))),14336&t.$$.dirty&&_(),229376&t.$$.dirty&&($.translate([a/2,o/2]),n(1,k=n(1,k=C(i))),_())},n(2,r=!1),[b,k,r,u,f,d,h,p,N,m,g,v,y,x,M,i,o,a,(t,e)=>N(e,t)]}class Sc extends Rt{constructor(t){super(),jt(this,t,Ac,Cc,s,{collideStrength:9,manyBodyStrength:10,medium:11,diet_threshold:12,partisanship_scenario:13,renderAnnotation:0})}}function Tc(t){return function(){return t}}function zc(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Dc(t){this._context=t}function Ec(t){return new Dc(t)}function Lc(t){return t[0]}function Pc(t){return t[1]}function jc(t,e){var n=Tc(!0),r=null,i=Ec,o=null;function a(a){var s,l,c,u=(a=zc(a)).length,f=!1;for(null==r&&(o=i(c=uc())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(l,s,a),+e(l,s,a));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?Lc:Tc(t),e="function"==typeof e?e:void 0===e?Pc:Tc(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:Tc(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:Tc(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:Tc(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function Rc(t,e,n){var r=null,i=Tc(!0),o=null,a=Ec,s=null;function l(l){var c,u,f,d,h,p=(l=zc(l)).length,m=!1,g=new Array(p),v=new Array(p);for(null==o&&(s=a(h=uc())),c=0;c<=p;++c){if(!(c<p&&i(d=l[c],c,l))===m)if(m=!m)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=u;--f)s.point(g[f],v[f]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+t(d,c,l),v[c]=+e(d,c,l),s.point(r?+r(d,c,l):g[c],n?+n(d,c,l):v[c]))}if(h)return s=null,h+""||null}function c(){return jc().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?Lc:Tc(+t),e="function"==typeof e?e:Tc(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?Pc:Tc(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:Tc(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:Tc(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Tc(+t),l):r},l.y=function(t){return arguments.length?(e="function"==typeof t?t:Tc(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:Tc(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Tc(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:Tc(!!t),l):i},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l}function Oc(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ic(t){this._context=t}function Fc(t){return new Ic(t)}function qc(t){this._context=t}function Uc(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Hc(t){return new qc(t)}function Yc(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Vc(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Bc(t,e){return t[e]}function Wc(t){const e=[];return e.key=t,e}function Zc(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function Gc(t){return function(t){var e=t.map(Zc);return Vc(t).sort((function(t,n){return e[t]-e[n]}))}(t).reverse()}function Xc(t,e,n){const r=t.slice();r[13]=e[n],r[17]=n;const i=r[13][1][0][1].map(((t,e)=>({...t,value_2:r[13][1][1][1][e].value})));r[14]=i;const o=r[4](r[13][0]);return r[15]=o,r}function Kc(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function Qc(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function Jc(e,n){let r,i,o,a,s,l=t;return{key:e,first:null,c(){r=z("path"),O(r,"class",i=m(`path-line path-line-${n[18][0]}`)+" svelte-15ylodm"),O(r,"d",o=n[2](n[18][1])),O(r,"stroke",a=n[15]),this.first=r},m(t,e){N(t,r,e)},p(t,e){n=t,8&e&&i!==(i=m(`path-line path-line-${n[18][0]}`)+" svelte-15ylodm")&&O(r,"class",i),12&e&&o!==(o=n[2](n[18][1]))&&O(r,"d",o),24&e&&a!==(a=n[15])&&O(r,"stroke",a)},r(){s=r.getBoundingClientRect()},f(){J(r),l()},a(){l(),l=Q(r,s,ru,{delay:0,duration:500})},d(t){t&&A(r)}}}function tu(e,n){let r,i,o,a,s,l=t;return{key:e,first:null,c(){r=z("path"),O(r,"class",i=m(`path-polygon path-polygon-${n[18][0]}`)+" svelte-15ylodm"),O(r,"d",o=n[1](n[14])),O(r,"fill",a=n[15]),this.first=r},m(t,e){N(t,r,e)},p(t,e){n=t,8&e&&i!==(i=m(`path-polygon path-polygon-${n[18][0]}`)+" svelte-15ylodm")&&O(r,"class",i),10&e&&o!==(o=n[1](n[14]))&&O(r,"d",o),24&e&&a!==(a=n[15])&&O(r,"fill",a)},r(){s=r.getBoundingClientRect()},f(){J(r),l()},a(){l(),l=Q(r,s,iu,{delay:500,duration:500})},d(t){t&&A(r)}}}function eu(t){let e,n,r,i=[],o=new Map,a=[],s=new Map,l=t[13][1].filter(ou);const c=t=>t[18];for(let e=0;e<l.length;e+=1){let n=Qc(t,l,e),r=c(n);o.set(r,i[e]=Jc(r,n))}let u=t[13][1].filter(au);const f=t=>t[18];for(let e=0;e<u.length;e+=1){let n=Kc(t,u,e),r=f(n);s.set(r,a[e]=tu(r,n))}return{c(){e=z("g");for(let t=0;t<i.length;t+=1)i[t].c();n=L();for(let t=0;t<a.length;t+=1)a[t].c();O(e,"class",r="threshold-group threshold-group-"+t[13][0]+" svelte-15ylodm")},m(t,r){N(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);k(e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null)},p(t,d){if(28&d){l=t[13][1].filter(ou);for(let t=0;t<i.length;t+=1)i[t].r();i=Tt(i,d,c,1,t,l,o,e,St,Jc,n,Qc);for(let t=0;t<i.length;t+=1)i[t].a()}if(26&d){u=t[13][1].filter(au);for(let t=0;t<a.length;t+=1)a[t].r();a=Tt(a,d,f,1,t,u,s,e,St,tu,null,Kc);for(let t=0;t<a.length;t+=1)a[t].a()}8&d&&r!==(r="threshold-group threshold-group-"+t[13][0]+" svelte-15ylodm")&&O(e,"class",r)},d(t){t&&A(e);for(let t=0;t<i.length;t+=1)i[t].d();for(let t=0;t<a.length;t+=1)a[t].d()}}}function nu(e){let n,r,i=e[3],o=[];for(let t=0;t<i.length;t+=1)o[t]=eu(Xc(e,i,t));return{c(){n=z("g");for(let t=0;t<o.length;t+=1)o[t].c();O(n,"class",r=m(`line-group line-group-${e[0]}`)+" svelte-15ylodm")},m(t,e){N(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(30&e){let r;for(i=t[3],r=0;r<i.length;r+=1){const a=Xc(t,i,r);o[r]?o[r].p(a,e):(o[r]=eu(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}1&e&&r!==(r=m(`line-group line-group-${t[0]}`)+" svelte-15ylodm")&&O(n,"class",r)},i:t,o:t,d(t){t&&A(n),S(o,t)}}}function ru(t,{from:e,to:n},{delay:r,duration:i}){const o=t.getTotalLength();return{delay:r,duration:i,css:(t,e)=>`stroke-dasharray: ${t*o} ${e*o}`}}function iu(t,{from:e,to:n},{delay:r,duration:i}){return{delay:r,duration:i,css:(t,e)=>"opacity: "+1*t}}Dc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Ic.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Oc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Oc(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},qc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Uc(t),i=Uc(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const ou=t=>50===t[0],au=t=>50===t[0];function su(t,e,n){let r,i,o,a,s,l,u;const{data:f,xGet:d,yGet:h,yScale:p,zScale:m}=it("LayerCake");c(t,f,(t=>n(3,o=t))),c(t,d,(t=>n(12,u=t))),c(t,h,(t=>n(11,l=t))),c(t,p,(t=>n(10,s=t))),c(t,m,(t=>n(4,a=t)));let{activeChart:g}=e;return console.log(a.domain(),a.range()),console.log(o),t.$$set=t=>{"activeChart"in t&&n(0,g=t.activeChart)},t.$$.update=()=>{6144&t.$$.dirty&&n(2,r=jc().x((t=>u(t))).y((t=>l(t))).curve(Fc)),7168&t.$$.dirty&&n(1,i=Rc().x((t=>u(t))).y0((t=>l(t))).y1((t=>s(t.value_2))).curve(Fc))},[g,i,r,o,a,f,d,h,p,m,s,l,u]}class lu extends Rt{constructor(t){super(),jt(this,t,su,nu,s,{activeChart:0})}}function cu(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function uu(t){let e,n;return{c(){e=z("line"),O(e,"class","gridline svelte-yu0ewn"),O(e,"y1",n=-1*t[11]),O(e,"y2","0"),O(e,"x1","0"),O(e,"x2","0")},m(t,n){N(t,e,n)},p(t,r){2048&r&&n!==(n=-1*t[11])&&O(e,"y1",n)},d(t){t&&A(e)}}}function fu(t){let e,n,r;return{c(){e=z("line"),O(e,"class","tick-mark svelte-yu0ewn"),O(e,"y1",0),O(e,"y2",6),O(e,"x1",n=t[5]||t[7]?t[8].bandwidth()/2:0),O(e,"x2",r=t[5]||t[7]?t[8].bandwidth()/2:0)},m(t,n){N(t,e,n)},p(t,i){416&i&&n!==(n=t[5]||t[7]?t[8].bandwidth()/2:0)&&O(e,"x1",n),416&i&&r!==(r=t[5]||t[7]?t[8].bandwidth()/2:0)&&O(e,"x2",r)},d(t){t&&A(e)}}}function du(t){let e,n,r,i,o,a,s,l,c=t[4](t[19])+"",u=!1!==t[0]&&uu(t),f=!0===t[1]&&fu(t);return{c(){e=z("g"),u&&u.c(),n=L(),f&&f.c(),r=z("text"),i=D(c),O(r,"x",o=t[5]||t[7]?t[8].bandwidth()/2:0),O(r,"y",t[6]),O(r,"dx",""),O(r,"dy",""),O(r,"text-anchor",a=t[17](t[21])),O(r,"class","svelte-yu0ewn"),O(e,"class",s="tick tick-"+t[21]+" svelte-yu0ewn"),O(e,"transform",l="translate("+t[8](t[19])+","+t[10][0]+")")},m(t,o){N(t,e,o),u&&u.m(e,null),k(e,n),f&&f.m(e,null),k(e,r),k(r,i)},p(t,a){!1!==t[0]?u?u.p(t,a):(u=uu(t),u.c(),u.m(e,n)):u&&(u.d(1),u=null),!0===t[1]?f?f.p(t,a):(f=fu(t),f.c(),f.m(e,r)):f&&(f.d(1),f=null),528&a&&c!==(c=t[4](t[19])+"")&&I(i,c),416&a&&o!==(o=t[5]||t[7]?t[8].bandwidth()/2:0)&&O(r,"x",o),64&a&&O(r,"y",t[6]),1792&a&&l!==(l="translate("+t[8](t[19])+","+t[10][0]+")")&&O(e,"transform",l)},d(t){t&&A(e),u&&u.d(),f&&f.d()}}}function hu(t){let e,n,r;return{c(){e=z("line"),O(e,"class","baseline svelte-yu0ewn"),O(e,"y1",n=t[11]+.5),O(e,"y2",r=t[11]+.5),O(e,"x1","0"),O(e,"x2",t[12])},m(t,n){N(t,e,n)},p(t,i){2048&i&&n!==(n=t[11]+.5)&&O(e,"y1",n),2048&i&&r!==(r=t[11]+.5)&&O(e,"y2",r),4096&i&&O(e,"x2",t[12])},d(t){t&&A(e)}}}function pu(e){let n,r,i=e[9],o=[];for(let t=0;t<i.length;t+=1)o[t]=du(cu(e,i,t));let a=!0===e[2]&&hu(e);return{c(){n=z("g");for(let t=0;t<o.length;t+=1)o[t].c();r=L(),a&&a.c(),O(n,"class","axis x-axis svelte-yu0ewn"),V(n,"snapTicks",e[3])},m(t,e){N(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);k(n,r),a&&a.m(n,null)},p(t,[e]){if(135155&e){let a;for(i=t[9],a=0;a<i.length;a+=1){const s=cu(t,i,a);o[a]?o[a].p(s,e):(o[a]=du(s),o[a].c(),o[a].m(n,r))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}!0===t[2]?a?a.p(t,e):(a=hu(t),a.c(),a.m(n,null)):a&&(a.d(1),a=null),8&e&&V(n,"snapTicks",t[3])},i:t,o:t,d(t){t&&A(n),S(o,t),a&&a.d()}}}function mu(t,e,n){let r,i,o,a,s,l;const{width:u,height:f,xScale:d,yRange:h}=it("LayerCake");c(t,u,(t=>n(12,l=t))),c(t,f,(t=>n(11,s=t))),c(t,d,(t=>n(8,o=t))),c(t,h,(t=>n(10,a=t)));let{gridlines:p=!0}=e,{tickMarks:m=!1}=e,{baseline:g=!1}=e,{snapTicks:v=!1}=e,{formatTick:y=(t=>t)}=e,{ticks:x}=e,{xTick:b=0}=e,{yTick:w=16}=e;return t.$$set=t=>{"gridlines"in t&&n(0,p=t.gridlines),"tickMarks"in t&&n(1,m=t.tickMarks),"baseline"in t&&n(2,g=t.baseline),"snapTicks"in t&&n(3,v=t.snapTicks),"formatTick"in t&&n(4,y=t.formatTick),"ticks"in t&&n(18,x=t.ticks),"xTick"in t&&n(5,b=t.xTick),"yTick"in t&&n(6,w=t.yTick)},t.$$.update=()=>{256&t.$$.dirty&&n(7,r="function"==typeof o.bandwidth),262528&t.$$.dirty&&n(9,i=Array.isArray(x)?x:r?o.domain():"function"==typeof x?x(o.ticks()):o.ticks(x))},[p,m,g,v,y,b,w,r,o,i,a,s,l,u,f,d,h,function(t){if(!0===v){if(0===t)return"start";if(t===i.length-1)return"end"}return"middle"},x]}class gu extends Rt{constructor(t){super(),jt(this,t,mu,pu,s,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:18,xTick:5,yTick:6})}}function vu(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function yu(t){let e,n,r;return{c(){e=z("line"),O(e,"class","gridline svelte-6edweo"),O(e,"x2","100%"),O(e,"y1",n=t[4]+(t[8]?t[9].bandwidth()/2:0)),O(e,"y2",r=t[4]+(t[8]?t[9].bandwidth()/2:0))},m(t,n){N(t,e,n)},p(t,i){784&i&&n!==(n=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(e,"y1",n),784&i&&r!==(r=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(e,"y2",r)},d(t){t&&A(e)}}}function xu(t){let e,n,r,i;return{c(){e=z("line"),O(e,"class","tick-mark svelte-6edweo"),O(e,"x1","0"),O(e,"x2",n=t[8]?-6:6),O(e,"y1",r=t[4]+(t[8]?t[9].bandwidth()/2:0)),O(e,"y2",i=t[4]+(t[8]?t[9].bandwidth()/2:0))},m(t,n){N(t,e,n)},p(t,o){256&o&&n!==(n=t[8]?-6:6)&&O(e,"x2",n),784&o&&r!==(r=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(e,"y1",r),784&o&&i!==(i=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(e,"y2",i)},d(t){t&&A(e)}}}function bu(t){let e,n,r,i,o,a,s,l,c,u=t[2](t[17],t[19],t[10].length)+"",f=!1!==t[0]&&yu(t),d=!0===t[1]&&xu(t);return{c(){e=z("g"),f&&f.c(),n=L(),d&&d.c(),r=z("text"),i=D(u),O(r,"x",t[3]),O(r,"y",o=t[4]+(t[8]?t[9].bandwidth()/2:0)),O(r,"dx",a=t[8]?-9:t[5]),O(r,"dy",s=t[8]?4:t[6]),F(r,"text-anchor",t[8]?"end":t[7]),O(r,"class","svelte-6edweo"),O(e,"class",l="tick tick-"+t[17]+" svelte-6edweo"),O(e,"transform",c="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")},m(t,o){N(t,e,o),f&&f.m(e,null),k(e,n),d&&d.m(e,null),k(e,r),k(r,i)},p(t,h){!1!==t[0]?f?f.p(t,h):(f=yu(t),f.c(),f.m(e,n)):f&&(f.d(1),f=null),!0===t[1]?d?d.p(t,h):(d=xu(t),d.c(),d.m(e,r)):d&&(d.d(1),d=null),1028&h&&u!==(u=t[2](t[17],t[19],t[10].length)+"")&&I(i,u),8&h&&O(r,"x",t[3]),784&h&&o!==(o=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(r,"y",o),288&h&&a!==(a=t[8]?-9:t[5])&&O(r,"dx",a),320&h&&s!==(s=t[8]?4:t[6])&&O(r,"dy",s),384&h&&F(r,"text-anchor",t[8]?"end":t[7]),1024&h&&l!==(l="tick tick-"+t[17]+" svelte-6edweo")&&O(e,"class",l),7936&h&&c!==(c="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")&&O(e,"transform",c)},d(t){t&&A(e),f&&f.d(),d&&d.d()}}}function wu(e){let n,r,i=e[10],o=[];for(let t=0;t<i.length;t+=1)o[t]=bu(vu(e,i,t));return{c(){n=z("g");for(let t=0;t<o.length;t+=1)o[t].c();O(n,"class","axis y-axis"),O(n,"transform",r="translate("+-e[11].left+", 0)")},m(t,e){N(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(8191&e){let r;for(i=t[10],r=0;r<i.length;r+=1){const a=vu(t,i,r);o[r]?o[r].p(a,e):(o[r]=bu(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}2048&e&&r!==(r="translate("+-t[11].left+", 0)")&&O(n,"transform",r)},i:t,o:t,d(t){t&&A(n),S(o,t)}}}function $u(t,e,n){let r,i,o,a,s;const{padding:l,xRange:u,yScale:f}=it("LayerCake");c(t,l,(t=>n(11,a=t))),c(t,u,(t=>n(12,s=t))),c(t,f,(t=>n(9,o=t)));let{gridlines:d=!0}=e,{tickMarks:h=!1}=e,{formatTick:p=(t=>t)}=e,{ticks:m=4}=e,{xTick:g=0}=e,{yTick:v=0}=e,{dxTick:y=0}=e,{dyTick:x=-4}=e,{textAnchor:b="start"}=e;return t.$$set=t=>{"gridlines"in t&&n(0,d=t.gridlines),"tickMarks"in t&&n(1,h=t.tickMarks),"formatTick"in t&&n(2,p=t.formatTick),"ticks"in t&&n(16,m=t.ticks),"xTick"in t&&n(3,g=t.xTick),"yTick"in t&&n(4,v=t.yTick),"dxTick"in t&&n(5,y=t.dxTick),"dyTick"in t&&n(6,x=t.dyTick),"textAnchor"in t&&n(7,b=t.textAnchor)},t.$$.update=()=>{512&t.$$.dirty&&n(8,r="function"==typeof o.bandwidth),66304&t.$$.dirty&&n(10,i=Array.isArray(m)?m:r?o.domain():"function"==typeof m?m(o.ticks()):o.ticks(m))},[d,h,p,g,v,y,x,b,r,o,i,a,s,l,u,f,m]}class _u extends Rt{constructor(t){super(),jt(this,t,$u,wu,s,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}function ku(e){let n,r,i,o,a,s,l,c,u,f,d;return{c(){n=T("div"),r=T("span"),i=D(e[0]),o=E(),a=T("a"),s=D("Download data "),l=z("svg"),c=z("path"),u=z("polyline"),f=z("line"),O(r,"class","caption-text svelte-1v7brqt"),O(c,"d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"),O(u,"points","7 10 12 15 17 10"),O(f,"x1","12"),O(f,"y1","15"),O(f,"x2","12"),O(f,"y2","3"),O(l,"xmlns","http://www.w3.org/2000/svg"),O(l,"width","24"),O(l,"height","24"),O(l,"viewBox","0 0 24 24"),O(l,"fill","none"),O(l,"stroke","currentColor"),O(l,"stroke-width","2"),O(l,"stroke-linecap","round"),O(l,"stroke-linejoin","round"),O(l,"class","feather feather-download svelte-1v7brqt"),O(a,"class","download-button svelte-1v7brqt"),O(a,"href",e[1]),O(a,"download",""),O(n,"class",d="caption caption-"+e[2]+" svelte-1v7brqt")},m(t,e){N(t,n,e),k(n,r),k(r,i),k(n,o),k(n,a),k(a,s),k(a,l),k(l,c),k(l,u),k(l,f)},p(t,[e]){1&e&&I(i,t[0]),2&e&&O(a,"href",t[1]),4&e&&d!==(d="caption caption-"+t[2]+" svelte-1v7brqt")&&O(n,"class",d)},i:t,o:t,d(t){t&&A(n)}}}function Mu(t,e,n){let{caption:r}=e,{url:i}=e,{type:o}=e;return t.$$set=t=>{"caption"in t&&n(0,r=t.caption),"url"in t&&n(1,i=t.url),"type"in t&&n(2,o=t.type)},[r,i,o]}class Cu extends Rt{constructor(t){super(),jt(this,t,Mu,ku,s,{caption:0,url:1,type:2})}}function Nu(t,e,n){const r=t.slice();return r[0]=e[n],r}function Au(e){let n,r,i,o,a,s,l,c;return{c(){n=T("div"),r=T("div"),o=E(),a=T("div"),s=D(e[0]),l=D("% of diet"),c=E(),O(r,"class",i="legend-icon legend-icon-"+e[0]+" svelte-i72d3i"),O(n,"class","legend-item svelte-i72d3i")},m(t,e){N(t,n,e),k(n,r),k(n,o),k(n,a),k(a,s),k(a,l),k(n,c)},p:t,d(t){t&&A(n)}}}function Su(e){let n,r=[50,75],i=[];for(let t=0;t<2;t+=1)i[t]=Au(Nu(e,r,t));return{c(){n=T("div");for(let t=0;t<2;t+=1)i[t].c();O(n,"class","legend svelte-i72d3i")},m(t,e){N(t,n,e);for(let t=0;t<2;t+=1)i[t].m(n,null)},p:t,i:t,o:t,d(t){t&&A(n),S(i,t)}}}class Tu extends Rt{constructor(t){super(),jt(this,t,null,Su,s,{})}}const zu=new Map([["L","#011f5b"],["R","#990000"]]);function Du(t){let e,n;return e=new Ha({props:{padding:t[0],flatData:t[2].filter(t[23]),data:en(t[4].filter(t[24]),t[25],Ou),x:t[5],xScale:"date"===t[5]?ma():Hr(),y:t[6],yDomain:t[8],yNice:!0,z:t[7],zScale:bn(),zDomain:t[18],zRange:t[19],$$slots:{default:[Pu]},$$scope:{ctx:t}}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.padding=t[0]),196612&n&&(r.flatData=t[2].filter(t[23])),196624&n&&(r.data=en(t[4].filter(t[24]),t[25],Ou)),32&n&&(r.x=t[5]),32&n&&(r.xScale="date"===t[5]?ma():Hr()),64&n&&(r.y=t[6]),256&n&&(r.yDomain=t[8]),128&n&&(r.z=t[7]),67145216&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Eu(t){let e,n,r,i,o,a;return e=new gu({props:{gridlines:!1,ticks:t[10],formatTick:t[9],snapTicks:!1,tickMarks:!0}}),r=new _u({props:{ticks:4,formatTick:t[11]}}),o=new Tu({}),{c(){Dt(e.$$.fragment),n=E(),Dt(r.$$.fragment),i=E(),Dt(o.$$.fragment)},m(t,s){Et(e,t,s),N(t,n,s),Et(r,t,s),N(t,i,s),Et(o,t,s),a=!0},p(t,n){const i={};1024&n&&(i.ticks=t[10]),512&n&&(i.formatTick=t[9]),e.$set(i);const o={};2048&n&&(o.formatTick=t[11]),r.$set(o)},i(t){a||(kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(o.$$.fragment,t),a=!0)},o(t){Mt(e.$$.fragment,t),Mt(r.$$.fragment,t),Mt(o.$$.fragment,t),a=!1},d(t){Lt(e,t),t&&A(n),Lt(r,t),t&&A(i),Lt(o,t)}}}function Lu(t){let e,n,r,i=t[15]&&Eu(t);return n=new lu({props:{activeChart:"test"}}),{c(){i&&i.c(),e=E(),Dt(n.$$.fragment)},m(t,o){i&&i.m(t,o),N(t,e,o),Et(n,t,o),r=!0},p(t,n){t[15]?i?(i.p(t,n),32768&n&&kt(i,1)):(i=Eu(t),i.c(),kt(i,1),i.m(e.parentNode,e)):i&&($t(),Mt(i,1,1,(()=>{i=null})),_t())},i(t){r||(kt(i),kt(n.$$.fragment,t),r=!0)},o(t){Mt(i),Mt(n.$$.fragment,t),r=!1},d(t){i&&i.d(t),t&&A(e),Lt(n,t)}}}function Pu(t){let e,n;return e=new es({props:{$$slots:{default:[Lu]},$$scope:{ctx:t}}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};67145216&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function ju(t){let e,n;return e=new Cu({props:{caption:t[1],url:t[3],type:12===t[13]?"split-cols":"single-cols"}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),8&n&&(r.url=t[3]),8192&n&&(r.type=12===t[13]?"split-cols":"single-cols"),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Ru(t){let e,n,r,i,o,a,s,l;n=new Tu({});let c=t[2]&&t[2].length&&Du(t),u=t[12]&&ju(t);return{c(){e=T("div"),Dt(n.$$.fragment),r=E(),i=T("div"),c&&c.c(),a=E(),u&&u.c(),s=L(),O(i,"class",o="chart line-chart "+t[14]),O(e,"class","chart-container")},m(t,o){N(t,e,o),Et(n,e,null),k(e,r),k(e,i),c&&c.m(i,null),N(t,a,o),u&&u.m(t,o),N(t,s,o),l=!0},p(t,[e]){t[2]&&t[2].length?c?(c.p(t,e),4&e&&kt(c,1)):(c=Du(t),c.c(),kt(c,1),c.m(i,null)):c&&($t(),Mt(c,1,1,(()=>{c=null})),_t()),(!l||16384&e&&o!==(o="chart line-chart "+t[14]))&&O(i,"class",o),t[12]?u?(u.p(t,e),4096&e&&kt(u,1)):(u=ju(t),u.c(),kt(u,1),u.m(s.parentNode,s)):u&&($t(),Mt(u,1,1,(()=>{u=null})),_t())},i(t){l||(kt(n.$$.fragment,t),kt(c),kt(u),l=!0)},o(t){Mt(n.$$.fragment,t),Mt(c),Mt(u),l=!1},d(t){t&&A(e),Lt(n),c&&c.d(),t&&A(a),u&&u.d(t),t&&A(s)}}}const Ou=t=>t.diet_threshold;function Iu(t,e,n){let r,i,{margins:o={top:20,right:10,bottom:20,left:45}}=e,{caption:a=""}=e,{data:s}=e,{url:l=""}=e,{groupedData:c}=e,{xKey:u}=e,{yKey:f}=e,{zKey:d}=e,{yDomain:h=[0,null]}=e,{formatTickX:p}=e,{xTicks:m=6}=e,{formatTickY:g=((t,e,n)=>e===n-1?`${t.toLocaleString("en-NZ",{style:"percent"})} of population`:t.toLocaleString("en-NZ",{style:"percent"}))}=e,{includeCaption:v=!0}=e,{spanCol:y}=e,{customClass:x}=e,{includeAxis:b=!0}=e,{scaleRange:w}=e,{start:$}=e,{end:_}=e,k="popup-overlay"===x?Array.from(zu).map((t=>t[0])):ns(Array.from(zu).map((t=>t[0])).map((t=>"R"===t?[`${t}_1`,`${t}_0`]:[`${t}_0`,`${t}_1`]))),M="popup-overlay"===x?Array.from(zu).map((t=>t[1])):ns(Array.from(zu).map((t=>t[1])).map((t=>[t,In(t).brighter(3).formatHex()])));return t.$$set=t=>{"margins"in t&&n(0,o=t.margins),"caption"in t&&n(1,a=t.caption),"data"in t&&n(2,s=t.data),"url"in t&&n(3,l=t.url),"groupedData"in t&&n(4,c=t.groupedData),"xKey"in t&&n(5,u=t.xKey),"yKey"in t&&n(6,f=t.yKey),"zKey"in t&&n(7,d=t.zKey),"yDomain"in t&&n(8,h=t.yDomain),"formatTickX"in t&&n(9,p=t.formatTickX),"xTicks"in t&&n(10,m=t.xTicks),"formatTickY"in t&&n(11,g=t.formatTickY),"includeCaption"in t&&n(12,v=t.includeCaption),"spanCol"in t&&n(13,y=t.spanCol),"customClass"in t&&n(14,x=t.customClass),"includeAxis"in t&&n(15,b=t.includeAxis),"scaleRange"in t&&n(20,w=t.scaleRange),"start"in t&&n(21,$=t.start),"end"in t&&n(22,_=t.end)},t.$$.update=()=>{3145728&t.$$.dirty&&n(17,r=w($)),5242880&t.$$.dirty&&n(16,i=w(_))},[o,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,i,r,k,M,w,$,_,t=>+t.date>=r&&+t.date<=i,t=>+t.date>=r&&+t.date<=i,t=>void 0!==t.idx?`${t.political_lean}_${t.idx}`:t.political_lean]}class Fu extends Rt{constructor(t){super(),jt(this,t,Iu,Ru,s,{margins:0,caption:1,data:2,url:3,groupedData:4,xKey:5,yKey:6,zKey:7,yDomain:8,formatTickX:9,xTicks:10,formatTickY:11,includeCaption:12,spanCol:13,customClass:14,includeAxis:15,scaleRange:20,start:21,end:22})}}function qu(t,e,n){const r=t.slice();return r[2]=e[n],r[4]=n,r}function Uu(t){let e,n,r=t[2].domain+"";return{c(){e=T("div"),n=D(r),O(e,"class",m("row-value row-value-program")+" svelte-1pcea81")},m(t,r){N(t,e,r),k(e,n)},p(t,e){1&e&&r!==(r=t[2].domain+"")&&I(n,r)},d(t){t&&A(e)}}}function Hu(t){let e,n,r,i,o,a=t[2].program+"",s=t[2].network+"";return{c(){e=T("div"),n=D(a),r=E(),i=T("span"),o=D(s),O(i,"class",m("row-value row-value-network")+" svelte-1pcea81"),O(e,"class",m("row-value row-value-program")+" svelte-1pcea81")},m(t,a){N(t,e,a),k(e,n),k(e,r),k(e,i),k(i,o)},p(t,e){1&e&&a!==(a=t[2].program+"")&&I(n,a),1&e&&s!==(s=t[2].network+"")&&I(o,s)},d(t){t&&A(e)}}}function Yu(t){let e,n,r,i,o,a,s,l=t[2].value.toLocaleString()+"";function c(t,e){return"tv"===t[1]?Hu:Uu}let u=c(t),f=u(t);return{c(){e=T("div"),f.c(),n=E(),r=T("div"),i=D(l),a=E(),O(r,"class",o=m("row-value row-value-audience")+" svelte-1pcea81"),O(e,"class",s=m("row-body")+" svelte-1pcea81")},m(t,o){N(t,e,o),f.m(e,null),k(e,n),k(e,r),k(r,i),k(e,a)},p(t,r){u===(u=c(t))&&f?f.p(t,r):(f.d(1),f=u(t),f&&(f.c(),f.m(e,n))),1&r&&l!==(l=t[2].value.toLocaleString()+"")&&I(i,l)},d(t){t&&A(e),f.d()}}}function Vu(e){let n,r,i,o,a,s,l,c,u="tv"===e[1]?"Program":"Domain",f=e[0].filter(Bu),d=[];for(let t=0;t<f.length;t+=1)d[t]=Yu(qu(e,f,t));return{c(){n=T("div"),r=T("div"),i=T("div"),o=T("div"),a=D(u),s=E(),l=T("div"),l.textContent="Audience",c=E();for(let t=0;t<d.length;t+=1)d[t].c();O(o,"class",m("row-header row-header-program")+" svelte-1pcea81"),O(l,"class",m("row-header row-header-audience")+" svelte-1pcea81"),O(i,"class",m("row-head")+" svelte-1pcea81"),O(r,"class",m("table-wrapper")+" svelte-1pcea81"),O(n,"class","table-container")},m(t,e){N(t,n,e),k(n,r),k(r,i),k(i,o),k(o,a),k(i,s),k(i,l),k(r,c);for(let t=0;t<d.length;t+=1)d[t].m(r,null)},p(t,[e]){if(2&e&&u!==(u="tv"===t[1]?"Program":"Domain")&&I(a,u),3&e){let n;for(f=t[0].filter(Bu),n=0;n<f.length;n+=1){const i=qu(t,f,n);d[n]?d[n].p(i,e):(d[n]=Yu(i),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=f.length}},i:t,o:t,d(t){t&&A(n),S(d,t)}}}const Bu=t=>t.value>0;function Wu(t,e,n){let{data:r}=e,{medium:i}=e;return t.$$set=t=>{"data"in t&&n(0,r=t.data),"medium"in t&&n(1,i=t.medium)},[r,i]}class Zu extends Rt{constructor(t){super(),jt(this,t,Wu,Vu,s,{data:0,medium:1})}}const Gu=Wi("%b-%y"),Xu=Wi("%Y");jr(",.0s");const Ku=jr(",.0f"),Qu=jr("+,.2s");function Ju(t){var e=["th","st","nd","rd"],n=t%100;return t+(e[(n-20)%10]||e[n]||e[0])}function tf(t){const e=t.slice(),n=e[9].get(e[1].detail.node.abbr)[0];e[20]=n.abbr,e[21]=n.state,e[22]=n.data;const r=e[6].get(e[20]).get(e[3]).get(e[2]).map((t=>({...t,value:Math.max(t.right_pct,t.left_pct)})));e[23]=r;const i=ns(e[23].map((t=>[{...t,political_lean:"R",value:t.right_pct},{...t,political_lean:"L",value:t.left_pct}])));e[24]=i;const o=Ze(e[23],(t=>+t.date));e[25]=o[0],e[26]=o[1];const a=e[8].get(e[4]).get(e[20]).get(e[3]);return e[27]=a,e}function ef(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,S,z,L,P,j,R,F,q,U,H,Y,V,B,W,Z,G,X,K,Q,J,tt,et,nt,rt,it,ot,at,st,lt,ct,ut,ft,dt,ht,pt,mt,gt,vt,yt,xt,bt,wt,$t,_t,Ct=t[20]+"",Nt=t[21]+"",St=t[11](t[22].left_pct)+"",Tt=Ju(t[22].left_pct_rk)+"",zt=t[11](t[22].right_pct)+"",Pt=Ju(t[22].right_pct_rk)+"",jt=Ku(t[22].left_size)+"",Rt=Ju(t[22].left_size_rk)+"",Ot=Ku(t[22].right_size)+"",It=Ju(t[22].right_size_rk)+"",qt=t[5][0]+"",Ut="tv"===t[3]?"watched":"viewed",Ht=t[5][1]+"";return at=new Fu({props:{data:t[7].get(t[20]).get(t[3]).map(t[15]),groupedData:t[24],scaleRange:Hr().range([t[25],t[26]]),start:0,end:1,yKey:of,xKey:rf,zKey:af,spanCol:12,customClass:"popup-overlay",formatTickX:Gu,url:"",includeCaption:!1}}),pt=new Zu({props:{data:t[27],medium:t[3]}}),{c(){e=T("h1"),n=T("span"),r=D(Ct),i=E(),o=D(Nt),s=E(),l=T("div"),c=T("div"),u=T("h6"),u.textContent="Partisan lean population",f=E(),d=T("span"),h=T("span"),h.textContent="L",p=E(),m=T("span"),g=D(St),v=E(),y=T("span"),x=D(Tt),b=E(),w=T("span"),$=T("span"),$.textContent="R",_=E(),M=T("span"),C=D(zt),S=E(),z=T("span"),L=D(Pt),P=E(),j=T("div"),R=T("h6"),R.textContent="Echo chamber sizes",F=E(),q=T("span"),U=T("span"),U.textContent="L",H=E(),Y=T("span"),V=D(jt),B=E(),W=T("span"),Z=D(Rt),G=E(),X=T("span"),K=T("span"),K.textContent="R",Q=E(),J=T("span"),tt=D(Ot),et=E(),nt=T("span"),rt=D(It),it=E(),ot=T("div"),Dt(at.$$.fragment),st=E(),lt=T("p"),ct=T("span"),ct.textContent="TV & Web news diet polarization.",ut=E(),ft=D(qt),dt=E(),ht=T("div"),Dt(pt.$$.fragment),mt=E(),gt=T("p"),vt=T("span"),yt=D("Most "),xt=D(Ut),bt=D("."),wt=E(),$t=D(Ht),O(n,"class","svelte-1o0fkpt"),O(e,"class","title svelte-1o0fkpt"),O(u,"class","svelte-1o0fkpt"),O(h,"class","info-label svelte-1o0fkpt"),O(m,"class","info-value"),O(y,"class","info-rank svelte-1o0fkpt"),O(d,"class","info-L info-pct svelte-1o0fkpt"),O($,"class","info-label svelte-1o0fkpt"),O(M,"class","info-value"),O(z,"class","info-rank svelte-1o0fkpt"),O(w,"class","info-R info-pct svelte-1o0fkpt"),O(c,"class","info-inner"),O(R,"class","svelte-1o0fkpt"),O(U,"class","info-label svelte-1o0fkpt"),O(Y,"class","info-value"),O(W,"class","info-rank svelte-1o0fkpt"),O(q,"class","info-L info-size svelte-1o0fkpt"),O(K,"class","info-label svelte-1o0fkpt"),O(J,"class","info-value"),O(nt,"class","info-rank svelte-1o0fkpt"),O(X,"class","info-R info-size svelte-1o0fkpt"),O(j,"class","info-inner"),O(l,"class","info svelte-1o0fkpt"),O(ot,"class","overlay-col1-container svelte-1o0fkpt"),O(ct,"class","svelte-1o0fkpt"),O(lt,"class","caption overlay-col1-caption svelte-1o0fkpt"),O(ht,"class","overlay-col2-container svelte-1o0fkpt"),O(vt,"class","svelte-1o0fkpt"),O(gt,"class","caption overlay-col2-caption svelte-1o0fkpt")},m(t,a){N(t,e,a),k(e,n),k(n,r),k(e,i),k(e,o),N(t,s,a),N(t,l,a),k(l,c),k(c,u),k(c,f),k(c,d),k(d,h),k(d,p),k(d,m),k(m,g),k(d,v),k(d,y),k(y,x),k(c,b),k(c,w),k(w,$),k(w,_),k(w,M),k(M,C),k(w,S),k(w,z),k(z,L),k(l,P),k(l,j),k(j,R),k(j,F),k(j,q),k(q,U),k(q,H),k(q,Y),k(Y,V),k(q,B),k(q,W),k(W,Z),k(j,G),k(j,X),k(X,K),k(X,Q),k(X,J),k(J,tt),k(X,et),k(X,nt),k(nt,rt),N(t,it,a),N(t,ot,a),Et(at,ot,null),N(t,st,a),N(t,lt,a),k(lt,ct),k(lt,ut),k(lt,ft),N(t,dt,a),N(t,ht,a),Et(pt,ht,null),N(t,mt,a),N(t,gt,a),k(gt,vt),k(vt,yt),k(vt,xt),k(vt,bt),k(gt,wt),k(gt,$t),_t=!0},p(t,e){(!_t||514&e)&&Ct!==(Ct=t[20]+"")&&I(r,Ct),(!_t||514&e)&&Nt!==(Nt=t[21]+"")&&I(o,Nt),(!_t||514&e)&&St!==(St=t[11](t[22].left_pct)+"")&&I(g,St),(!_t||514&e)&&Tt!==(Tt=Ju(t[22].left_pct_rk)+"")&&I(x,Tt),(!_t||514&e)&&zt!==(zt=t[11](t[22].right_pct)+"")&&I(C,zt),(!_t||514&e)&&Pt!==(Pt=Ju(t[22].right_pct_rk)+"")&&I(L,Pt),(!_t||514&e)&&jt!==(jt=Ku(t[22].left_size)+"")&&I(V,jt),(!_t||514&e)&&Rt!==(Rt=Ju(t[22].left_size_rk)+"")&&I(Z,Rt),(!_t||514&e)&&Ot!==(Ot=Ku(t[22].right_size)+"")&&I(tt,Ot),(!_t||514&e)&&It!==(It=Ju(t[22].right_size_rk)+"")&&I(rt,It);const n={};650&e&&(n.data=t[7].get(t[20]).get(t[3]).map(t[15])),590&e&&(n.groupedData=t[24]),590&e&&(n.scaleRange=Hr().range([t[25],t[26]])),at.$set(n),(!_t||32&e)&&qt!==(qt=t[5][0]+"")&&I(ft,qt);const i={};794&e&&(i.data=t[27]),8&e&&(i.medium=t[3]),pt.$set(i),(!_t||8&e)&&Ut!==(Ut="tv"===t[3]?"watched":"viewed")&&I(xt,Ut),(!_t||32&e)&&Ht!==(Ht=t[5][1]+"")&&I($t,Ht)},i(t){_t||(a&&a.end(1),kt(at.$$.fragment,t),kt(pt.$$.fragment,t),_t=!0)},o(t){a=At(e,Ft,{delay:300}),Mt(at.$$.fragment,t),Mt(pt.$$.fragment,t),_t=!1},d(t){t&&A(e),t&&a&&a.end(),t&&A(s),t&&A(l),t&&A(it),t&&A(ot),Lt(at),t&&A(st),t&&A(lt),t&&A(dt),t&&A(ht),Lt(pt),t&&A(mt),t&&A(gt)}}}function nf(t){let e,n,r,i,o,a,s,l=!t[0]&&ef(tf(t));return{c(){e=T("div"),l&&l.c(),n=E(),r=T("div"),O(r,"class","close-button svelte-1o0fkpt"),O(e,"class",i="overlay "+(t[0]?"":"active")+" svelte-1o0fkpt")},m(i,c){N(i,e,c),l&&l.m(e,null),k(e,n),k(e,r),o=!0,a||(s=P(r,"click",t[16]),a=!0)},p(t,[r]){t[0]?l&&($t(),Mt(l,1,1,(()=>{l=null})),_t()):l?(l.p(tf(t),r),1&r&&kt(l,1)):(l=ef(tf(t)),l.c(),kt(l,1),l.m(e,n)),(!o||1&r&&i!==(i="overlay "+(t[0]?"":"active")+" svelte-1o0fkpt"))&&O(e,"class",i)},i(t){o||(kt(l),o=!0)},o(t){Mt(l),o=!1},d(t){t&&A(e),l&&l.d(),a=!1,s()}}}let rf="date",of="value",af=0;function sf(t,e,n){let r;const i=rt(),{data:o}=it("LayerCake");c(t,o,(t=>n(14,r=t)));const a=jr(`.${1}~%`);let s,l,u,f,d,h,{hidePopup:p}=e,{popup:m}=e,{diet_threshold:g}=e,{partisanship_scenario:v}=e,{medium:y}=e,{period:x}=e,{tooltipCaptions:b=[]}=e;function w(){i("closePopup")}nt((async()=>{const t=await qe("assets/data/EchoCh-by_state_full-timeseries.csv",je);s=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))),n(6,l=tn(s,(t=>t.state),(t=>t.medium),(t=>t.partisanship_scenario))),n(7,u=tn(s,(t=>t.state),(t=>t.medium))),f=await qe("assets/data/EchoCh-by_state_audiences.csv",je),n(8,d=tn(f,(t=>t.period),(t=>t.state),(t=>t.medium)))}));return t.$$set=t=>{"hidePopup"in t&&n(0,p=t.hidePopup),"popup"in t&&n(1,m=t.popup),"diet_threshold"in t&&n(13,g=t.diet_threshold),"partisanship_scenario"in t&&n(2,v=t.partisanship_scenario),"medium"in t&&n(3,y=t.medium),"period"in t&&n(4,x=t.period),"tooltipCaptions"in t&&n(5,b=t.tooltipCaptions)},t.$$.update=()=>{16384&t.$$.dirty&&n(9,h=tn(r,(t=>t.abbr)))},[p,m,v,y,x,b,l,u,d,h,o,a,w,g,r,t=>({...t,value:Math.max(t.right_pct,t.left_pct)}),()=>w()]}class lf extends Rt{constructor(t){super(),jt(this,t,sf,nf,s,{hidePopup:0,popup:1,diet_threshold:13,partisanship_scenario:2,medium:3,period:4,tooltipCaptions:5})}}function cf(e){let n,r,i,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,S,z=e[3][0]+"",L=e[3][1]+"";return{c(){n=T("div"),r=T("div"),i=D(e[2]),a=E(),s=T("span"),s.textContent="?",l=E(),c=T("div"),u=D(z),d=E(),h=T("label"),p=T("input"),m=E(),g=T("span"),v=E(),y=T("div"),x=D(L),w=E(),$=T("div"),_=D(e[4]),O(s,"class","info svelte-nl56aj"),O(r,"class","control-title svelte-nl56aj"),O(c,"class",f="control-label "+(e[0]?"":"active")+" svelte-nl56aj"),O(p,"type","checkbox"),O(p,"id","medium"),O(p,"name","medium"),O(p,"class","svelte-nl56aj"),O(g,"class","slider svelte-nl56aj"),F(g,"--colorFalse",e[5][1]),F(g,"--colorTrue",e[5][0]),O(h,"class","switch svelte-nl56aj"),O(y,"class",b="control-label "+(e[0]?"active":"")+" svelte-nl56aj"),O($,"class",M="info-detail "+e[7]+" svelte-nl56aj"),O(n,"id",e[1]),O(n,"class","control control-switch svelte-nl56aj")},m(t,o){N(t,n,o),k(n,r),k(r,i),k(r,a),k(r,s),k(n,l),k(n,c),k(c,u),k(n,d),k(n,h),k(h,p),p.checked=e[0],k(h,m),k(h,g),k(n,v),k(n,y),k(y,x),k(n,w),k(n,$),k($,_),C||(S=[P(s,"mouseenter",e[8]),P(s,"mouseleave",e[9]),P(p,"change",e[10])],C=!0)},p(t,[e]){4&e&&I(i,t[2]),8&e&&z!==(z=t[3][0]+"")&&I(u,z),1&e&&f!==(f="control-label "+(t[0]?"":"active")+" svelte-nl56aj")&&O(c,"class",f),1&e&&(p.checked=t[0]),32&e&&F(g,"--colorFalse",t[5][1]),32&e&&F(g,"--colorTrue",t[5][0]),8&e&&L!==(L=t[3][1]+"")&&I(x,L),1&e&&b!==(b="control-label "+(t[0]?"active":"")+" svelte-nl56aj")&&O(y,"class",b),16&e&&I(_,t[4]),128&e&&M!==(M="info-detail "+t[7]+" svelte-nl56aj")&&O($,"class",M),2&e&&O(n,"id",t[1])},i:t,o:t,d(t){t&&A(n),C=!1,o(S)}}}function uf(t,e,n){let r,i,{id:o=""}=e,{title:a="Title"}=e,{labels:s=["False","True"]}=e,{info:l=""}=e,{checked:c=!0}=e,{colors:u=["#ccc","#555"]}=e;return t.$$set=t=>{"id"in t&&n(1,o=t.id),"title"in t&&n(2,a=t.title),"labels"in t&&n(3,s=t.labels),"info"in t&&n(4,l=t.info),"checked"in t&&n(0,c=t.checked),"colors"in t&&n(5,u=t.colors)},t.$$.update=()=>{64&t.$$.dirty&&n(7,i=r?"active":"")},n(6,r=!1),[c,o,a,s,l,u,r,i,()=>{n(6,r=!0)},()=>{n(6,r=!1)},function(){c=this.checked,n(0,c)}]}class ff extends Rt{constructor(t){super(),jt(this,t,uf,cf,s,{id:1,title:2,labels:3,info:4,checked:0,colors:5})}}var df=[{state:"Maine",abbr:"ME",row:1,col:11},{state:"Wisconsin",abbr:"WI",row:2,col:6},{state:"Vermont",abbr:"VT",row:2,col:10},{state:"New Hampshire",abbr:"NH",row:2,col:11},{state:"Washington",abbr:"WA",row:3,col:1},{state:"Idaho",abbr:"ID",row:3,col:2},{state:"Montana",abbr:"MT",row:3,col:3},{state:"North Dakota",abbr:"ND",row:3,col:4},{state:"Minnesota",abbr:"MN",row:3,col:5},{state:"Illinois",abbr:"IL",row:3,col:6},{state:"Michigan",abbr:"MI",row:3,col:7},{state:"New York",abbr:"NY",row:3,col:9},{state:"Massachusetts",abbr:"MA",row:3,col:10},{state:"Oregon",abbr:"OR",row:4,col:1},{state:"Nevada",abbr:"NV",row:4,col:2},{state:"Wyoming",abbr:"WY",row:4,col:3},{state:"South Dakota",abbr:"SD",row:4,col:4},{state:"Iowa",abbr:"IA",row:4,col:5},{state:"Indiana",abbr:"IN",row:4,col:6},{state:"Ohio",abbr:"OH",row:4,col:7},{state:"Pennsylvania",abbr:"PA",row:4,col:8},{state:"New Jersey",abbr:"NJ",row:4,col:9},{state:"Connecticut",abbr:"CT",row:4,col:10},{state:"Rhode Island",abbr:"RI",row:4,col:11},{state:"California",abbr:"CA",row:5,col:1},{state:"Utah",abbr:"UT",row:5,col:2},{state:"Colorado",abbr:"CO",row:5,col:3},{state:"Nebraska",abbr:"NE",row:5,col:4},{state:"Missouri",abbr:"MO",row:5,col:5},{state:"Kentucky",abbr:"KY",row:5,col:6},{state:"West Virginia",abbr:"WV",row:5,col:7},{state:"Virginia",abbr:"VA",row:5,col:8},{state:"Maryland",abbr:"MD",row:5,col:9},{state:"Delaware",abbr:"DE",row:5,col:10},{state:"Arizona",abbr:"AZ",row:6,col:2},{state:"New Mexico",abbr:"NM",row:6,col:3},{state:"Kansas",abbr:"KS",row:6,col:4},{state:"Arkansas",abbr:"AR",row:6,col:5},{state:"Tennessee",abbr:"TN",row:6,col:6},{state:"North Carolina",abbr:"NC",row:6,col:7},{state:"South Carolina",abbr:"SC",row:6,col:8},{state:"District of Columbia",abbr:"DC",row:6,col:9},{state:"Oklahoma",abbr:"OK",row:7,col:4},{state:"Louisiana",abbr:"LA",row:7,col:5},{state:"Mississippi",abbr:"MS",row:7,col:6},{state:"Alabama",abbr:"AL",row:7,col:7},{state:"Georgia",abbr:"GA",row:7,col:8},{state:"Hawaii",abbr:"HI",row:8,col:1},{state:"Alaska",abbr:"AK",row:8,col:2},{state:"Texas",abbr:"TX",row:8,col:4},{state:"Florida",abbr:"FL",row:8,col:9}];function hf(t,e,n){const r=t.slice();r[38]=e[n],r[41]=n;const i=r[19][r[41]];return r[39]=i,r}function pf(t,e,n){const r=t.slice();return r[42]=e[n],r[41]=n,r}function mf(e){let n,r,i,o,a=e[42]+"";return{c(){n=T("option"),r=D(a),i=E(),n.__value=o=e[42],n.value=n.__value},m(t,e){N(t,n,e),k(n,r),k(n,i)},p:t,d(t){t&&A(n)}}}function gf(t){let e;return{c(){e=T("span"),e.textContent="More left",O(e,"class","legend-block-label legend-block-label-L svelte-1jlvfir")},m(t,n){N(t,e,n)},d(t){t&&A(e)}}}function vf(t){let e,n,r,i=Math.abs(t[39]).toLocaleString("en-NZ",{style:"percent",maximumFractionDigits:1,minimumFractionDigits:0})+"";return{c(){e=T("div"),n=D(i),O(e,"class",r=m("legend-anchor-label legend-anchor-label-"+(t[39]>0?"R":"L"))+" svelte-1jlvfir")},m(t,r){N(t,e,r),k(e,n)},p(t,o){524288&o[0]&&i!==(i=Math.abs(t[39]).toLocaleString("en-NZ",{style:"percent",maximumFractionDigits:1,minimumFractionDigits:0})+"")&&I(n,i),524288&o[0]&&r!==(r=m("legend-anchor-label legend-anchor-label-"+(t[39]>0?"R":"L"))+" svelte-1jlvfir")&&O(e,"class",r)},d(t){t&&A(e)}}}function yf(t){let e,n=void 0!==t[39]&&vf(t);return{c(){e=T("div"),n&&n.c(),O(e,"class","legend-block svelte-1jlvfir"),F(e,"--color",t[38])},m(t,r){N(t,e,r),n&&n.m(e,null)},p(t,r){void 0!==t[39]?n?n.p(t,r):(n=vf(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),512&r[0]&&F(e,"--color",t[38])},d(t){t&&A(e),n&&n.d()}}}function xf(t){let e,n;return e=new Sc({props:{medium:t[13],diet_threshold:t[12],partisanship_scenario:t[11],collideStrength:.1,manyBodyStrength:-.5,renderAnnotation:t[16]}}),e.$on("mouseenter",t[22]),e.$on("mouseleave",t[23]),e.$on("click",t[24]),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};8192&n[0]&&(r.medium=t[13]),4096&n[0]&&(r.diet_threshold=t[12]),2048&n[0]&&(r.partisanship_scenario=t[11]),65536&n[0]&&(r.renderAnnotation=t[16]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function bf(t){let e,n,r=t[15]&&xf(t);return{c(){r&&r.c(),e=L()},m(t,i){r&&r.m(t,i),N(t,e,i),n=!0},p(t,n){t[15]?r?(r.p(t,n),32768&n[0]&&kt(r,1)):(r=xf(t),r.c(),kt(r,1),r.m(e.parentNode,e)):r&&($t(),Mt(r,1,1,(()=>{r=null})),_t())},i(t){n||(kt(r),n=!0)},o(t){Mt(r),n=!1},d(t){r&&r.d(t),t&&A(e)}}}function wf(t){let e,n;return e=new lf({props:{hidePopup:t[14],diet_threshold:t[12],partisanship_scenario:t[11],medium:t[13],period:t[8]||Mf,popup:t[21],tooltipCaptions:t[3]}}),e.$on("closePopup",t[25]),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};16384&n[0]&&(r.hidePopup=t[14]),4096&n[0]&&(r.diet_threshold=t[12]),2048&n[0]&&(r.partisanship_scenario=t[11]),8192&n[0]&&(r.medium=t[13]),256&n[0]&&(r.period=t[8]||Mf),2097152&n[0]&&(r.popup=t[21]),8&n[0]&&(r.tooltipCaptions=t[3]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function $f(t){let e,n,r,i;return e=new es({props:{$$slots:{default:[bf]},$$scope:{ctx:t}}}),r=new Za({props:{pointerEvents:!t[14],$$slots:{default:[wf]},$$scope:{ctx:t}}}),{c(){Dt(e.$$.fragment),n=E(),Dt(r.$$.fragment)},m(t,o){Et(e,t,o),N(t,n,o),Et(r,t,o),i=!0},p(t,n){const i={};112640&n[0]|8192&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i);const o={};16384&n[0]&&(o.pointerEvents=!t[14]),2128136&n[0]|8192&n[1]&&(o.$$scope={dirty:n,ctx:t}),r.$set(o)},i(t){i||(kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!0)},o(t){Mt(e.$$.fragment,t),Mt(r.$$.fragment,t),i=!1},d(t){Lt(e,t),t&&A(n),Lt(r,t)}}}function _f(t){let e,n;return e=new Cu({props:{caption:t[2],url:t[4],type:"single-cols"}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};4&n[0]&&(r.caption=t[2]),16&n[0]&&(r.url=t[4]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function kf(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,j,R,F,U,H,Y,V,B,W,Z,G,X,K,Q,J,tt,et,nt,rt,it,ot,st,lt,ct,ut,ht,pt,mt,gt,vt,yt,xt,bt,wt,Ct,Nt,At,St,Tt,Pt="L"===t[10]?"left":"right",jt=t[1].rDomain[0].toLocaleString("en-NZ",{notation:"compact"})+"",Rt=(t[1].rDomain[1]/18).toLocaleString("en-NZ",{notation:"compact"})+"",Ot=(t[1].rDomain[1]/4.5).toLocaleString("en-NZ",{notation:"compact"})+"",It=(t[1].rDomain[1]/2).toLocaleString("en-NZ",{notation:"compact"})+"";function Ft(e){t[32](e)}let qt={id:"medium",title:Gt.controls.medium.title,labels:["TV","Web"],info:Gt.controls.medium.description};function Ut(e){t[33](e)}void 0!==t[7]&&(qt.checked=t[7]),r=new ff({props:qt}),at.push((()=>zt(r,"checked",Ft)));let Ht={id:"partisanship",title:Gt.controls.partisanship.title,labels:["Stringent","Lenient"],info:Gt.controls.partisanship.description};void 0!==t[6]&&(Ht.checked=t[6]),a=new ff({props:Ht}),at.push((()=>zt(a,"checked",Ut)));let Yt=t[26],Vt=[];for(let e=0;e<Yt.length;e+=1)Vt[e]=mf(pf(t,Yt,e));let Bt="linear"!==t[1].type&&gf(),Wt=t[9],Zt=[];for(let e=0;e<Wt.length;e+=1)Zt[e]=yf(hf(t,Wt,e));wt=new Ha({props:{flatData:t[0],data:t[17],rScale:t[20],rDomain:t[20].domain(),rRange:t[20].range(),zScale:t[18],zDomain:t[18].domain(),zRange:t[18].range(),padding:{top:0,right:0,bottom:0,left:0},$$slots:{default:[$f]},$$scope:{ctx:t}}});let Xt=t[5]&&_f(t);return{c(){e=T("div"),n=T("div"),Dt(r.$$.fragment),o=E(),Dt(a.$$.fragment),l=E(),c=T("div"),u=T("div"),u.textContent="Period",f=E(),d=T("select");for(let t=0;t<Vt.length;t+=1)Vt[t].c();h=E(),p=T("div"),m=T("div"),g=T("h5"),g.textContent="Partisan lean",v=E(),Bt&&Bt.c(),y=E();for(let t=0;t<Zt.length;t+=1)Zt[t].c();x=E(),b=T("span"),w=D("More "),$=D(Pt),_=E(),M=T("div"),C=T("h5"),C.textContent="Echo chamber size",j=E(),R=T("div"),F=z("svg"),U=z("circle"),V=z("text"),B=D(jt),G=z("circle"),Q=z("text"),J=D(Rt),nt=z("circle"),ot=z("text"),st=D(Ot),ut=z("circle"),mt=z("text"),gt=D(It),xt=E(),bt=T("div"),Dt(wt.$$.fragment),Ct=E(),Xt&&Xt.c(),Nt=L(),O(u,"class","control-title svelte-1jlvfir"),O(d,"id","period-menu"),O(d,"name","period"),O(d,"class","svelte-1jlvfir"),void 0===t[8]&&ft((()=>t[34].call(d))),O(c,"id","period"),O(c,"class","control control-menu svelte-1jlvfir"),O(n,"class","controls svelte-1jlvfir"),O(g,"class","svelte-1jlvfir"),O(b,"class","legend-block-label legend-block-label-R svelte-1jlvfir"),O(m,"class","legend-item legend-item-color svelte-1jlvfir"),O(C,"class","svelte-1jlvfir"),O(U,"cy",0),O(U,"cx",H=t[20](t[1].rDomain[1]/2)+1),O(U,"r",Y=t[20](t[1].rDomain[0])),O(U,"fill","none"),O(U,"stroke","black"),O(U,"class","legend-circle"),O(V,"y",W=t[20](t[1].rDomain[0])+2),O(V,"x",Z=t[20](t[1].rDomain[1]/2)),O(V,"class","legend-circle-label svelte-1jlvfir"),O(G,"cy",0),O(G,"cx",X=t[20](t[1].rDomain[1]/2)+1),O(G,"r",K=t[20](t[1].rDomain[1]/18)),O(G,"fill","none"),O(G,"stroke","black"),O(G,"class","legend-circle"),O(Q,"y",tt=t[20](t[1].rDomain[1]/18)+2),O(Q,"x",et=t[20](t[1].rDomain[1]/2)),O(Q,"class","legend-circle-label svelte-1jlvfir"),O(nt,"cy",0),O(nt,"cx",rt=t[20](t[1].rDomain[1]/2)),O(nt,"r",it=t[20](t[1].rDomain[1]/4.5)),O(nt,"fill","none"),O(nt,"stroke","black"),O(nt,"class","legend-circle"),O(ot,"y",lt=t[20](t[1].rDomain[1]/4.5)+2),O(ot,"x",ct=t[20](t[1].rDomain[1]/2)),O(ot,"class","legend-circle-label svelte-1jlvfir"),O(ut,"cy",0),O(ut,"cx",ht=t[20](t[1].rDomain[1]/2)),O(ut,"r",pt=t[20](t[1].rDomain[1]/2)),O(ut,"fill","none"),O(ut,"stroke","black"),O(ut,"class","legend-circle"),O(mt,"y",vt=t[20](t[1].rDomain[1]/2)+2),O(mt,"x",yt=t[20](t[1].rDomain[1]/2)),O(mt,"class","legend-circle-label svelte-1jlvfir"),O(F,"class","svelte-1jlvfir"),O(R,"class","svelte-1jlvfir"),O(M,"class","legend-item legend-item-size svelte-1jlvfir"),O(p,"class","legend svelte-1jlvfir"),O(e,"class","chart-info-wrapper main-column svelte-1jlvfir"),O(bt,"id","beeswarm"),O(bt,"class","chart beeswarm-chart svelte-1jlvfir")},m(i,s){N(i,e,s),k(e,n),Et(r,n,null),k(n,o),Et(a,n,null),k(n,l),k(n,c),k(c,u),k(c,f),k(c,d);for(let t=0;t<Vt.length;t+=1)Vt[t].m(d,null);q(d,t[8]),k(e,h),k(e,p),k(p,m),k(m,g),k(m,v),Bt&&Bt.m(m,null),k(m,y);for(let t=0;t<Zt.length;t+=1)Zt[t].m(m,null);k(m,x),k(m,b),k(b,w),k(b,$),k(p,_),k(p,M),k(M,C),k(M,j),k(M,R),k(R,F),k(F,U),k(F,V),k(V,B),k(F,G),k(F,Q),k(Q,J),k(F,nt),k(F,ot),k(ot,st),k(F,ut),k(F,mt),k(mt,gt),N(i,xt,s),N(i,bt,s),Et(wt,bt,null),N(i,Ct,s),Xt&&Xt.m(i,s),N(i,Nt,s),At=!0,St||(Tt=P(d,"change",t[34]),St=!0)},p(t,e){const n={};!i&&128&e[0]&&(i=!0,n.checked=t[7],dt((()=>i=!1))),r.$set(n);const o={};if(!s&&64&e[0]&&(s=!0,o.checked=t[6],dt((()=>s=!1))),a.$set(o),67108864&e[0]){let n;for(Yt=t[26],n=0;n<Yt.length;n+=1){const r=pf(t,Yt,n);Vt[n]?Vt[n].p(r,e):(Vt[n]=mf(r),Vt[n].c(),Vt[n].m(d,null))}for(;n<Vt.length;n+=1)Vt[n].d(1);Vt.length=Yt.length}if(67109120&e[0]&&q(d,t[8]),"linear"!==t[1].type?Bt||(Bt=gf(),Bt.c(),Bt.m(m,y)):Bt&&(Bt.d(1),Bt=null),524800&e[0]){let n;for(Wt=t[9],n=0;n<Wt.length;n+=1){const r=hf(t,Wt,n);Zt[n]?Zt[n].p(r,e):(Zt[n]=yf(r),Zt[n].c(),Zt[n].m(m,x))}for(;n<Zt.length;n+=1)Zt[n].d(1);Zt.length=Wt.length}(!At||1024&e[0])&&Pt!==(Pt="L"===t[10]?"left":"right")&&I($,Pt),(!At||1048578&e[0]&&H!==(H=t[20](t[1].rDomain[1]/2)+1))&&O(U,"cx",H),(!At||1048578&e[0]&&Y!==(Y=t[20](t[1].rDomain[0])))&&O(U,"r",Y),(!At||2&e[0])&&jt!==(jt=t[1].rDomain[0].toLocaleString("en-NZ",{notation:"compact"})+"")&&I(B,jt),(!At||1048578&e[0]&&W!==(W=t[20](t[1].rDomain[0])+2))&&O(V,"y",W),(!At||1048578&e[0]&&Z!==(Z=t[20](t[1].rDomain[1]/2)))&&O(V,"x",Z),(!At||1048578&e[0]&&X!==(X=t[20](t[1].rDomain[1]/2)+1))&&O(G,"cx",X),(!At||1048578&e[0]&&K!==(K=t[20](t[1].rDomain[1]/18)))&&O(G,"r",K),(!At||2&e[0])&&Rt!==(Rt=(t[1].rDomain[1]/18).toLocaleString("en-NZ",{notation:"compact"})+"")&&I(J,Rt),(!At||1048578&e[0]&&tt!==(tt=t[20](t[1].rDomain[1]/18)+2))&&O(Q,"y",tt),(!At||1048578&e[0]&&et!==(et=t[20](t[1].rDomain[1]/2)))&&O(Q,"x",et),(!At||1048578&e[0]&&rt!==(rt=t[20](t[1].rDomain[1]/2)))&&O(nt,"cx",rt),(!At||1048578&e[0]&&it!==(it=t[20](t[1].rDomain[1]/4.5)))&&O(nt,"r",it),(!At||2&e[0])&&Ot!==(Ot=(t[1].rDomain[1]/4.5).toLocaleString("en-NZ",{notation:"compact"})+"")&&I(st,Ot),(!At||1048578&e[0]&&lt!==(lt=t[20](t[1].rDomain[1]/4.5)+2))&&O(ot,"y",lt),(!At||1048578&e[0]&&ct!==(ct=t[20](t[1].rDomain[1]/2)))&&O(ot,"x",ct),(!At||1048578&e[0]&&ht!==(ht=t[20](t[1].rDomain[1]/2)))&&O(ut,"cx",ht),(!At||1048578&e[0]&&pt!==(pt=t[20](t[1].rDomain[1]/2)))&&O(ut,"r",pt),(!At||2&e[0])&&It!==(It=(t[1].rDomain[1]/2).toLocaleString("en-NZ",{notation:"compact"})+"")&&I(gt,It),(!At||1048578&e[0]&&vt!==(vt=t[20](t[1].rDomain[1]/2)+2))&&O(mt,"y",vt),(!At||1048578&e[0]&&yt!==(yt=t[20](t[1].rDomain[1]/2)))&&O(mt,"x",yt);const l={};1&e[0]&&(l.flatData=t[0]),131072&e[0]&&(l.data=t[17]),1048576&e[0]&&(l.rScale=t[20]),1048576&e[0]&&(l.rDomain=t[20].domain()),1048576&e[0]&&(l.rRange=t[20].range()),262144&e[0]&&(l.zScale=t[18]),262144&e[0]&&(l.zDomain=t[18].domain()),262144&e[0]&&(l.zRange=t[18].range()),2226440&e[0]|8192&e[1]&&(l.$$scope={dirty:e,ctx:t}),wt.$set(l),t[5]?Xt?(Xt.p(t,e),32&e[0]&&kt(Xt,1)):(Xt=_f(t),Xt.c(),kt(Xt,1),Xt.m(Nt.parentNode,Nt)):Xt&&($t(),Mt(Xt,1,1,(()=>{Xt=null})),_t())},i(t){At||(kt(r.$$.fragment,t),kt(a.$$.fragment,t),kt(wt.$$.fragment,t),kt(Xt),At=!0)},o(t){Mt(r.$$.fragment,t),Mt(a.$$.fragment,t),Mt(wt.$$.fragment,t),Mt(Xt),At=!1},d(t){t&&A(e),Lt(r),Lt(a),S(Vt,t),Bt&&Bt.d(),S(Zt,t),t&&A(xt),t&&A(bt),Lt(wt),t&&A(Ct),Xt&&Xt.d(t),t&&A(Nt),St=!1,Tt()}}}let Mf="Since 2016";function Cf(t,e,n){let r,i,o,a,s,l,c,u,f;const d=new Map(df.map((t=>[t.state,t])));let h,p,{data:m}=e,{states:g}=e,{dataMap:v}=e,{fullDataMap:y}=e,{activeChart:x}=e,{caption:b}=e,{tooltipCaptions:w=[]}=e,{url:$=""}=e,{includeCaption:_=!0}=e,{politicalChecked:k}=e,M=!0,C=!1,N=!0,A=!1,S=!1;nt((()=>{n(15,A=!0)}));const T=["Since 2016","Last 3 months","Last 6 months","Last 12 months"];let z=Mf;return nt((()=>{setTimeout((()=>n(16,S=!0)),2e3)})),t.$$set=t=>{"data"in t&&n(0,m=t.data),"states"in t&&n(27,g=t.states),"dataMap"in t&&n(28,v=t.dataMap),"fullDataMap"in t&&n(29,y=t.fullDataMap),"activeChart"in t&&n(1,x=t.activeChart),"caption"in t&&n(2,b=t.caption),"tooltipCaptions"in t&&n(3,w=t.tooltipCaptions),"url"in t&&n(4,$=t.url),"includeCaption"in t&&n(5,_=t.includeCaption),"politicalChecked"in t&&n(30,k=t.politicalChecked)},t.$$.update=()=>{1073741824&t.$$.dirty[0]&&n(10,r=k?"R":"L"),128&t.$$.dirty[0]&&n(13,i=C?"web":"tv"),64&t.$$.dirty[0]&&n(11,a=M?"lenient":"stringent"),402667776&t.$$.dirty[0]&&n(17,p=g.map((t=>{const{abbr:e}=d.get(t.state),n=v.get(z||Mf).get(e).get(i).get(o).get(a)[0];return Object.assign(Object.assign({},t),{abbr:e,data:n})}))),2&t.$$.dirty[0]&&n(20,l=x.rScale().domain(x.rDomain).range(x.rRange)),1026&t.$$.dirty[0]|1&t.$$.dirty[1]&&(n(31,h=x.colorInterpolator().domain(x.colorInterpolatorDomain)),"diverging"===x.type?h.interpolator(gr(or.gamma(.5),x.colorInterpolatorScheme)):"linear"===x.type&&h.range([x.colorInterpolatorScheme,"R"===r?"#990000":"#011f5b"])),2&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(9,c=x.colorPaletteAnchors.map(h)),2&t.$$.dirty[0]&&n(19,u=x.zDomain),514&t.$$.dirty[0]&&n(18,f=x.zScale().domain(x.zDomain).range(c))},n(12,o=50),n(21,s=null),[m,x,b,w,$,_,M,C,z,c,r,a,o,i,N,A,S,p,f,u,l,s,function(t){},function(){},function(t){n(14,N=!1),n(21,s=t)},function(){n(14,N=!0),n(21,s=null)},T,g,v,y,k,h,function(t){C=t,n(7,C)},function(t){M=t,n(6,M)},function(){z=U(this),n(8,z),n(26,T)}]}class Nf extends Rt{constructor(t){super(),jt(this,t,Cf,kf,s,{data:0,states:27,dataMap:28,fullDataMap:29,activeChart:1,caption:2,tooltipCaptions:3,url:4,includeCaption:5,politicalChecked:30},null,[-1,-1])}}function Af(e){let n;return{c(){n=T("div"),n.innerHTML='<div class="lds-roller svelte-1pm5pm"><div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div></div>',O(n,"class","chart-placeholder svelte-1pm5pm")},m(t,e){N(t,n,e)},p:t,i:t,o:t,d(t){t&&A(n)}}}class Sf extends Rt{constructor(t){super(),jt(this,t,null,Af,s,{})}}var Tf=[{coordinates:[-86.766233,33.001471],state:"Alabama",population:4447100},{coordinates:[-148.716968,61.288254],state:"Alaska",population:626932},{coordinates:[-111.828711,33.373506],state:"Arizona",population:5130632},{coordinates:[-92.576816,35.080251],state:"Arkansas",population:2673400},{coordinates:[-119.355165,35.458606],state:"California",population:33871648},{coordinates:[-105.203628,39.500656],state:"Colorado",population:4301261},{coordinates:[-72.874365,41.494852],state:"Connecticut",population:3405565},{coordinates:[-75.561908,39.397164],state:"Delaware",population:783600},{coordinates:[-77.014001,38.910092],state:"District of Columbia",population:572059},{coordinates:[-81.634622,27.79585],state:"Florida",population:15982378},{coordinates:[-83.868887,33.332208],state:"Georgia",population:8186453},{coordinates:[-157.524452,21.146768],state:"Hawaii",population:1211537},{coordinates:[-115.133222,44.242605],state:"Idaho",population:1293953},{coordinates:[-88.380238,41.278216],state:"Illinois",population:12419293},{coordinates:[-86.261515,40.163935],state:"Indiana",population:6080485},{coordinates:[-93.049161,41.960392],state:"Iowa",population:2926324},{coordinates:[-96.536052,38.454303],state:"Kansas",population:2688418},{coordinates:[-85.241819,37.808159],state:"Kentucky",population:4041769},{coordinates:[-91.457133,30.69927],state:"Louisiana",population:4468976},{coordinates:[-69.719931,44.313614],state:"Maine",population:1274923},{coordinates:[-76.797396,39.145653],state:"Maryland",population:5296486},{coordinates:[-71.363628,42.271831],state:"Massachusetts",population:6349097},{coordinates:[-84.170753,42.866412],state:"Michigan",population:9938444},{coordinates:[-93.583003,45.210782],state:"Minnesota",population:4919479},{coordinates:[-89.593164,32.56642],state:"Mississippi",population:2844658},{coordinates:[-92.15377,38.437715],state:"Missouri",population:5595211},{coordinates:[-111.209708,46.813302],state:"Montana",population:902195},{coordinates:[-97.403875,41.183753],state:"Nebraska",population:1711263},{coordinates:[-116.304648,37.165965],state:"Nevada",population:1998257},{coordinates:[-71.463342,43.153046],state:"New Hampshire",population:1235786},{coordinates:[-74.428055,40.438458],state:"New Jersey",population:8414350},{coordinates:[-106.342108,34.623012],state:"New Mexico",population:1819046},{coordinates:[-74.645228,41.507548],state:"New York",population:18976457},{coordinates:[-79.667654,35.553334],state:"North Carolina",population:8049313},{coordinates:[-99.334736,47.375168],state:"North Dakota",population:642200},{coordinates:[-82.749366,40.480854],state:"Ohio",population:11353140},{coordinates:[-96.834653,35.59794],state:"Oklahoma",population:3450654},{coordinates:[-122.579524,44.732273],state:"Oregon",population:3421399},{coordinates:[-77.075925,40.463528],state:"Pennsylvania",population:12281054},{coordinates:[-71.448902,41.753318],state:"Rhode Island",population:1048319},{coordinates:[-81.032387,34.034551],state:"South Carolina",population:4012012},{coordinates:[-99.043799,44.047502],state:"South Dakota",population:754844},{coordinates:[-86.397772,35.795862],state:"Tennessee",population:5689283},{coordinates:[-97.388631,30.943149],state:"Texas",population:20851820},{coordinates:[-111.90016,40.438987],state:"Utah",population:2233169},{coordinates:[-72.814309,44.081127],state:"Vermont",population:608827},{coordinates:[-77.835857,37.750345],state:"Virginia",population:7078515},{coordinates:[-121.624501,47.341728],state:"Washington",population:5894121},{coordinates:[-80.820221,38.767195],state:"West Virginia",population:1808344},{coordinates:[-89.001006,43.728544],state:"Wisconsin",population:5363675},{coordinates:[-107.008835,42.675762],state:"Wyoming",population:493782}];function zf(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function Df(t){let e,n,r,i,o,a,s,l,c=t[17].value.title+"";const u=[Pf,Lf],f=[];function d(t,e){return t[5]&&t[6]&&t[6].length?0:1}return o=d(t),a=f[o]=u[o](t),{c(){e=T("div"),n=T("h3"),r=D(c),i=E(),a.c(),s=L(),O(n,"class","chart-title"),O(e,"class","title-container svelte-sn0dz7")},m(t,a){N(t,e,a),k(e,n),k(n,r),N(t,i,a),f[o].m(t,a),N(t,s,a),l=!0},p(t,e){(!l||4&e)&&c!==(c=t[17].value.title+"")&&I(r,c);let n=o;o=d(t),o===n?f[o].p(t,e):($t(),Mt(f[n],1,1,(()=>{f[n]=null})),_t(),a=f[o],a?a.p(t,e):(a=f[o]=u[o](t),a.c()),kt(a,1),a.m(s.parentNode,s))},i(t){l||(kt(a),l=!0)},o(t){Mt(a),l=!1},d(t){t&&A(e),t&&A(i),f[o].d(t),t&&A(s)}}}function Ef(e){let n,r,i=e[17].value+"";return{c(){n=T("p"),r=D(i),O(n,"class","copy svelte-sn0dz7")},m(t,e){N(t,n,e),k(n,r)},p(t,e){4&e&&i!==(i=t[17].value+"")&&I(r,i)},i:t,o:t,d(t){t&&A(n)}}}function Lf(e){let n,r;return n=new Sf({}),{c(){Dt(n.$$.fragment)},m(t,e){Et(n,t,e),r=!0},p:t,i(t){r||(kt(n.$$.fragment,t),r=!0)},o(t){Mt(n.$$.fragment,t),r=!1},d(t){Lt(n,t)}}}function Pf(t){let e,n;return e=new Nf({props:{data:t[6],states:Tf,dataMap:t[7],fullDataMap:t[8],activeChart:t[10],politicalChecked:t[9],caption:t[3].captions,tooltipCaptions:[1,2].map(t[13]),url:Of}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};64&n&&(r.data=t[6]),128&n&&(r.dataMap=t[7]),256&n&&(r.fullDataMap=t[8]),1024&n&&(r.activeChart=t[10]),512&n&&(r.politicalChecked=t[9]),8&n&&(r.caption=t[3].captions),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function jf(t){let e,n,r,i;const o=[Ef,Df],a=[];function s(t,e){return"text"===t[17].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function Rf(t){let e,n,r,i,s,l,c,u,f,d,h=t[4].value+"",p=t[2],m=[];for(let e=0;e<p.length;e+=1)m[e]=jf(zf(t,p,e));const g=t=>Mt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=T("div"),n=T("h1"),r=D(h),i=E();for(let t=0;t<m.length;t+=1)m[t].c();s=E(),l=T("div"),l.textContent="GO BACK",O(n,"class","section-title svelte-sn0dz7"),O(l,"class","close-button bottom svelte-sn0dz7"),O(e,"class","section svelte-sn0dz7")},m(o,a){N(o,e,a),k(e,n),k(n,r),k(e,i);for(let t=0;t<m.length;t+=1)m[t].m(e,null);k(e,s),k(e,l),u=!0,f||(d=[P(l,"click",t[14]),v(c=re.call(null,e,{once:t[1]})),P(e,"enter",t[15])],f=!0)},p(t,[n]){if((!u||16&n)&&h!==(h=t[4].value+"")&&I(r,h),2028&n){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=zf(t,p,r);m[r]?(m[r].p(i,n),kt(m[r],1)):(m[r]=jf(i),m[r].c(),kt(m[r],1),m[r].m(e,s))}for($t(),r=p.length;r<m.length;r+=1)g(r);_t()}c&&a(c.update)&&2&n&&c.update.call(null,{once:t[1]})},i(t){if(!u){for(let t=0;t<p.length;t+=1)kt(m[t]);u=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)Mt(m[t]);u=!1},d(t){t&&A(e),S(m,t),f=!1,o(d)}}}const Of="assets/data/EchoCh-by_state.csv";function If(t,e,n){let r,i,o,a,s,l,c=!1,{once:u}=e,{body:f}=e,{refs:d}=e,{chart:h}=e,{title:p}=e,{modal:m}=e;nt((async()=>{const t=await qe(Of,je),e=["left_pct","right_pct","left_size","right_size"],r=nn(t,(t=>{const n={};return e.forEach((e=>{const r={},i=dn(t.map((t=>t[e])),He);t.forEach(((t,e)=>{r[t.state]=i[e]+1})),n[e]=r})),n}),(t=>t.period),(t=>t.medium),(t=>t.diet_threshold),(t=>t.partisanship_scenario));n(6,a=t.map((t=>Object.assign(Object.assign({},t),{left_pct_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).left_pct[t.state],right_pct_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).right_pct[t.state],left_size_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).left_size[t.state],right_size_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).right_size[t.state]})))),n(7,s=tn(a,(t=>t.period),(t=>t.state),(t=>t.medium),(t=>t.diet_threshold),(t=>t.partisanship_scenario))),n(8,l=tn(a,(t=>t.state),(t=>t.medium),(t=>t.partisanship_scenario)))}));const g=new Map([[0,{type:"diverging",rScale:Gr,rDomain:[1e3,3e6],rRange:[8,70],zScale:Xr,zDomain:[-.1,-.05,-.01,.01,.05,.1],colorInterpolator:ya,colorInterpolatorDomain:[-.75,0,.75],colorInterpolatorScheme:["#011f5b","gainsboro","#990000"],colorPaletteAnchors:[-.7,-.35,-.18,0,.18,.35,.85]}]]);return t.$$set=t=>{"once"in t&&n(1,u=t.once),"body"in t&&n(2,f=t.body),"refs"in t&&n(11,d=t.refs),"chart"in t&&n(3,h=t.chart),"title"in t&&n(4,p=t.title),"modal"in t&&n(0,m=t.modal)},t.$$.update=()=>{4096&t.$$.dirty&&n(10,i=g.get(+r))},n(12,r="0"),n(9,o=!0),[m,u,f,h,p,c,a,s,l,true,i,d,r,t=>Gt["echo-chambers-part1"].filter((t=>"chart"===t.type))[0].value[`caption${t}`],()=>n(0,m=!1),()=>n(5,c=!0)]}class Ff extends Rt{constructor(t){super(),jt(this,t,If,Rf,s,{once:1,body:2,refs:11,chart:3,title:4,modal:0})}}function qf(t,e,n){return t<e?e:t>n?n:t}function Uf(e){let n,r,i,a,s,l,c,u,f;return{c(){n=T("div"),r=T("div"),i=T("div"),a=E(),s=T("div"),l=E(),c=T("div"),O(i,"class","body svelte-4z6zmw"),F(i,"left",100*e[0]+"%"),F(i,"right",100*(1-e[1])+"%"),O(s,"class","handle svelte-4z6zmw"),O(s,"data-which","start"),F(s,"left",100*e[0]+"%"),O(c,"class","handle svelte-4z6zmw"),O(c,"data-which","end"),F(c,"left",100*e[1]+"%"),O(r,"class","slider svelte-4z6zmw"),O(n,"class","double-range-container svelte-4z6zmw")},m(t,o){N(t,n,o),k(n,r),k(r,i),e[7](i),k(r,a),k(r,s),e[8](s),k(r,l),k(r,c),e[9](r),u||(f=[v(Hf.call(null,i)),P(i,"dragmove",R(j(e[6]))),v(Hf.call(null,s)),P(s,"dragmove",R(j(e[5]("start")))),v(Hf.call(null,c)),P(c,"dragmove",R(j(e[5]("end"))))],u=!0)},p(t,[e]){1&e&&F(i,"left",100*t[0]+"%"),2&e&&F(i,"right",100*(1-t[1])+"%"),1&e&&F(s,"left",100*t[0]+"%"),2&e&&F(c,"left",100*t[1]+"%")},i:t,o:t,d(t){t&&A(n),e[7](null),e[8](null),e[9](null),u=!1,o(f)}}}function Hf(t){let e,n;function r(r){"touchstart"===r.type&&(r=r.touches[0]),e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragstart",{detail:{x:e,y:n}})),window.addEventListener("mousemove",i),window.addEventListener("mouseup",o),window.addEventListener("touchmove",i),window.addEventListener("touchend",o)}function i(r){"touchmove"===r.type&&(r=r.changedTouches[0]);const i=r.clientX-e,o=r.clientY-n;e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragmove",{detail:{x:e,y:n,dx:i,dy:o}}))}function o(r){e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragend",{detail:{x:e,y:n}})),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o),window.removeEventListener("touchmove",i),window.removeEventListener("touchend",o)}return t.addEventListener("mousedown",r),t.addEventListener("touchstart",r),{destroy(){t.removeEventListener("mousedown",r),t.removeEventListener("touchstart",r)}}}function Yf(t,e,n){let r,i,o,{start:a=0}=e,{end:s=1}=e;return t.$$set=t=>{"start"in t&&n(0,a=t.start),"end"in t&&n(1,s=t.end)},[a,s,r,i,o,function(t){return function(e){const{left:r,right:i}=o.getBoundingClientRect(),l=i-r,c=Math.min(Math.max((e.detail.x-r)/l,0),1);"start"===t?(n(0,a=c),n(1,s=Math.max(s,c))):(n(0,a=Math.min(c,a)),n(1,s=c))}},function(t){const{width:e}=i.getBoundingClientRect(),{left:l,right:c}=o.getBoundingClientRect(),u=c-l,f=qf(r.getBoundingClientRect().left+event.detail.dx-l,0,u-e),d=qf(f+e,e,u)/u;n(0,a=f/u),n(1,s=d)},function(t){at[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},function(t){at[t?"unshift":"push"]((()=>{r=t,n(2,r)}))},function(t){at[t?"unshift":"push"]((()=>{o=t,n(4,o)}))}]}class Vf extends Rt{constructor(t){super(),jt(this,t,Yf,Uf,s,{start:0,end:1})}}function Bf(t,e,n){const r=t.slice();return r[44]=e[n],r[46]=n,r}function Wf(t){let e,n,r,i,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,S,z,L,j,R,F,U,H,Y,V,B,W,Z,G,X,K,Q,J,tt,et,nt,rt,it,ot,st,lt,ct,ut,ht,pt,mt,gt,vt,yt,xt,bt,wt,Ct,Nt,At,St,Tt,Pt,jt,Rt,Ot,It,Ft,qt=t[44].value.title+"";function Ut(e){t[30](e)}let Ht={id:"political-lean",title:"A lean",labels:["L","R"],colors:["#011f5b","#ff0000"],info:Gt.controls.medium.description};function Yt(e){t[31](e)}void 0!==t[10]&&(Ht.checked=t[10]),c=new ff({props:Ht}),at.push((()=>zt(c,"checked",Ut)));let Vt={id:"medium",title:Gt.controls.medium.title,labels:["TV","Web"],info:Gt.controls.medium.description};function Bt(e){t[32](e)}void 0!==t[6]&&(Vt.checked=t[6]),d=new ff({props:Vt}),at.push((()=>zt(d,"checked",Yt)));let Wt={id:"partisanship",title:Gt.controls.partisanship.title,labels:["Lenient","Strict"],info:Gt.controls.partisanship.description};function Zt(e){t[35](e)}void 0!==t[8]&&(Wt.checked=t[8]),m=new ff({props:Wt}),at.push((()=>zt(m,"checked",Bt)));let Xt={id:"political-lean",title:"B lean",labels:["L","R"],colors:["#035aff","#990000"],info:Gt.controls.medium.description};function Kt(e){t[36](e)}void 0!==t[11]&&(Xt.checked=t[11]),Z=new ff({props:Xt}),at.push((()=>zt(Z,"checked",Zt)));let Qt={id:"medium",title:Gt.controls.medium.title,labels:["TV","Web"],info:Gt.controls.medium.description};function Jt(e){t[37](e)}void 0!==t[7]&&(Qt.checked=t[7]),K=new ff({props:Qt}),at.push((()=>zt(K,"checked",Kt)));let te={id:"partisanship",title:Gt.controls.partisanship.title,labels:["Lenient","Strict"],info:Gt.controls.partisanship.description};void 0!==t[9]&&(te.checked=t[9]),tt=new ff({props:te}),at.push((()=>zt(tt,"checked",Jt)));let ee=t[16]&&t[5]&&Gf(t);const ne=[Kf,Xf],re=[];function ie(t,e){return t[16]&&t[5]?0:1}return jt=ie(t),Rt=re[jt]=ne[jt](t),{c(){e=T("div"),n=T("h3"),r=D(qt),i=E(),a=T("div"),s=T("div"),l=T("div"),Dt(c.$$.fragment),f=E(),Dt(d.$$.fragment),p=E(),Dt(m.$$.fragment),v=E(),y=T("div"),x=T("div"),x.textContent="Age group",b=E(),w=T("select"),$=T("option"),$.textContent="All",_=T("option"),_.textContent="18-24",M=T("option"),M.textContent="25-34",C=T("option"),C.textContent="35-44",S=T("option"),S.textContent="45-54",z=T("option"),z.textContent="55+",L=E(),j=T("div"),R=T("div"),R.textContent="Gender",F=E(),U=T("select"),H=T("option"),H.textContent="All",Y=T("option"),Y.textContent="Male",V=T("option"),V.textContent="Female",B=E(),W=T("div"),Dt(Z.$$.fragment),X=E(),Dt(K.$$.fragment),J=E(),Dt(tt.$$.fragment),nt=E(),rt=T("div"),it=T("div"),it.textContent="Age group",ot=E(),st=T("select"),lt=T("option"),lt.textContent="All",ct=T("option"),ct.textContent="18-24",ut=T("option"),ut.textContent="25-34",ht=T("option"),ht.textContent="35-44",pt=T("option"),pt.textContent="45-54",mt=T("option"),mt.textContent="55+",gt=E(),vt=T("div"),yt=T("div"),yt.textContent="Gender",xt=E(),bt=T("select"),wt=T("option"),wt.textContent="All",Ct=T("option"),Ct.textContent="Male",Nt=T("option"),Nt.textContent="Female",At=E(),ee&&ee.c(),St=E(),Tt=T("div"),Pt=E(),Rt.c(),O(n,"class","chart-title"),O(e,"class","title-container svelte-bhazg9"),O(x,"class","control-title svelte-bhazg9"),$.__value="All",$.value=$.__value,_.__value="18-24",_.value=_.__value,M.__value="25-34",M.value=M.__value,C.__value="35-44",C.value=C.__value,S.__value="45-54",S.value=S.__value,z.__value="55+",z.value=z.__value,O(w,"id","age-group-menu"),O(w,"name","age-group"),O(w,"class","svelte-bhazg9"),void 0===t[13]&&ft((()=>t[33].call(w))),O(y,"id","age-group"),O(y,"class","control control-menu svelte-bhazg9"),O(R,"class","control-title svelte-bhazg9"),H.__value="All",H.value=H.__value,H.selected=!0,Y.__value="Male",Y.value=Y.__value,V.__value="Female",V.value=V.__value,O(U,"id","gender-menu"),O(U,"name","location"),O(U,"class","svelte-bhazg9"),void 0===t[12]&&ft((()=>t[34].call(U))),O(j,"id","gender"),O(j,"class","control control-menu svelte-bhazg9"),O(l,"class","controls svelte-bhazg9"),O(it,"class","control-title svelte-bhazg9"),lt.__value="All",lt.value=lt.__value,ct.__value="18-24",ct.value=ct.__value,ut.__value="25-34",ut.value=ut.__value,ht.__value="35-44",ht.value=ht.__value,pt.__value="45-54",pt.value=pt.__value,mt.__value="55+",mt.value=mt.__value,O(st,"id","age-group-menu"),O(st,"name","age-group"),O(st,"class","svelte-bhazg9"),void 0===t[15]&&ft((()=>t[38].call(st))),O(rt,"id","age-group"),O(rt,"class","control control-menu svelte-bhazg9"),O(yt,"class","control-title svelte-bhazg9"),wt.__value="All",wt.value=wt.__value,wt.selected=!0,Ct.__value="Male",Ct.value=Ct.__value,Nt.__value="Female",Nt.value=Nt.__value,O(bt,"id","gender-menu"),O(bt,"name","location"),O(bt,"class","svelte-bhazg9"),void 0===t[14]&&ft((()=>t[39].call(bt))),O(vt,"id","gender"),O(vt,"class","control control-menu svelte-bhazg9"),O(W,"class","controls svelte-bhazg9"),O(Tt,"class","spacer svelte-bhazg9"),O(s,"class","controls-wrapper svelte-bhazg9"),O(a,"class","chart-wrapper svelte-bhazg9")},m(o,u){N(o,e,u),k(e,n),k(n,r),N(o,i,u),N(o,a,u),k(a,s),k(s,l),Et(c,l,null),k(l,f),Et(d,l,null),k(l,p),Et(m,l,null),k(l,v),k(l,y),k(y,x),k(y,b),k(y,w),k(w,$),k(w,_),k(w,M),k(w,C),k(w,S),k(w,z),q(w,t[13]),k(l,L),k(l,j),k(j,R),k(j,F),k(j,U),k(U,H),k(U,Y),k(U,V),q(U,t[12]),k(s,B),k(s,W),Et(Z,W,null),k(W,X),Et(K,W,null),k(W,J),Et(tt,W,null),k(W,nt),k(W,rt),k(rt,it),k(rt,ot),k(rt,st),k(st,lt),k(st,ct),k(st,ut),k(st,ht),k(st,pt),k(st,mt),q(st,t[15]),k(W,gt),k(W,vt),k(vt,yt),k(vt,xt),k(vt,bt),k(bt,wt),k(bt,Ct),k(bt,Nt),q(bt,t[14]),k(s,At),ee&&ee.m(s,null),k(s,St),k(s,Tt),k(a,Pt),re[jt].m(a,null),Ot=!0,It||(Ft=[P(w,"change",t[33]),P(U,"change",t[34]),P(st,"change",t[38]),P(bt,"change",t[39])],It=!0)},p(t,e){(!Ot||4&e[0])&&qt!==(qt=t[44].value.title+"")&&I(r,qt);const n={};!u&&1024&e[0]&&(u=!0,n.checked=t[10],dt((()=>u=!1))),c.$set(n);const i={};!h&&64&e[0]&&(h=!0,i.checked=t[6],dt((()=>h=!1))),d.$set(i);const o={};!g&&256&e[0]&&(g=!0,o.checked=t[8],dt((()=>g=!1))),m.$set(o),8192&e[0]&&q(w,t[13]),4096&e[0]&&q(U,t[12]);const l={};!G&&2048&e[0]&&(G=!0,l.checked=t[11],dt((()=>G=!1))),Z.$set(l);const f={};!Q&&128&e[0]&&(Q=!0,f.checked=t[7],dt((()=>Q=!1))),K.$set(f);const p={};!et&&512&e[0]&&(et=!0,p.checked=t[9],dt((()=>et=!1))),tt.$set(p),32768&e[0]&&q(st,t[15]),16384&e[0]&&q(bt,t[14]),t[16]&&t[5]?ee?(ee.p(t,e),65568&e[0]&&kt(ee,1)):(ee=Gf(t),ee.c(),kt(ee,1),ee.m(s,St)):ee&&($t(),Mt(ee,1,1,(()=>{ee=null})),_t());let v=jt;jt=ie(t),jt===v?re[jt].p(t,e):($t(),Mt(re[v],1,1,(()=>{re[v]=null})),_t(),Rt=re[jt],Rt?Rt.p(t,e):(Rt=re[jt]=ne[jt](t),Rt.c()),kt(Rt,1),Rt.m(a,null))},i(t){Ot||(kt(c.$$.fragment,t),kt(d.$$.fragment,t),kt(m.$$.fragment,t),kt(Z.$$.fragment,t),kt(K.$$.fragment,t),kt(tt.$$.fragment,t),kt(ee),kt(Rt),Ot=!0)},o(t){Mt(c.$$.fragment,t),Mt(d.$$.fragment,t),Mt(m.$$.fragment,t),Mt(Z.$$.fragment,t),Mt(K.$$.fragment,t),Mt(tt.$$.fragment,t),Mt(ee),Mt(Rt),Ot=!1},d(t){t&&A(e),t&&A(i),t&&A(a),Lt(c),Lt(d),Lt(m),Lt(Z),Lt(K),Lt(tt),ee&&ee.d(),re[jt].d(),It=!1,o(Ft)}}}function Zf(e){let n,r,i=e[44].value+"";return{c(){n=T("p"),r=D(i),O(n,"class","copy svelte-bhazg9")},m(t,e){N(t,n,e),k(n,r)},p(t,e){4&e[0]&&i!==(i=t[44].value+"")&&I(r,i)},i:t,o:t,d(t){t&&A(n)}}}function Gf(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,m=Gu(t[20](t[18]))+"",g=Gu(t[20](t[19]))+"";function v(e){t[40](e)}function y(e){t[41](e)}let x={};return void 0!==t[18]&&(x.start=t[18]),void 0!==t[19]&&(x.end=t[19]),i=new Vf({props:x}),at.push((()=>zt(i,"start",v))),at.push((()=>zt(i,"end",y))),{c(){e=T("div"),n=T("div"),n.textContent="Period",r=E(),Dt(i.$$.fragment),s=E(),l=T("div"),c=T("div"),u=D(m),f=E(),d=T("div"),h=D(g),O(n,"class","control-title svelte-bhazg9"),O(c,"class","label svelte-bhazg9"),O(d,"class","label svelte-bhazg9"),O(l,"class","labels svelte-bhazg9"),O(e,"id","period"),O(e,"class","control control-range svelte-bhazg9")},m(t,o){N(t,e,o),k(e,n),k(e,r),Et(i,e,null),k(e,s),k(e,l),k(l,c),k(c,u),k(l,f),k(l,d),k(d,h),p=!0},p(t,e){const n={};!o&&262144&e[0]&&(o=!0,n.start=t[18],dt((()=>o=!1))),!a&&524288&e[0]&&(a=!0,n.end=t[19],dt((()=>a=!1))),i.$set(n),(!p||262144&e[0])&&m!==(m=Gu(t[20](t[18]))+"")&&I(u,m),(!p||524288&e[0])&&g!==(g=Gu(t[20](t[19]))+"")&&I(h,g)},i(t){p||(kt(i.$$.fragment,t),p=!0)},o(t){Mt(i.$$.fragment,t),p=!1},d(t){t&&A(e),Lt(i)}}}function Xf(e){let n,r;return n=new Sf({}),{c(){Dt(n.$$.fragment)},m(t,e){Et(n,t,e),r=!0},p:t,i(t){r||(kt(n.$$.fragment,t),r=!0)},o(t){Mt(n.$$.fragment,t),r=!1},d(t){Lt(n,t)}}}function Kf(t){let e,n;return e=new Fu({props:{data:t[5],groupedData:t[17],scaleRange:t[21],start:t[18],end:t[19],yKey:nd,xKey:ed,zKey:rd,spanCol:12,customClass:"chart-medium",formatTickX:Gu,url:td,caption:t[3].captions}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};32&n[0]&&(r.data=t[5]),131072&n[0]&&(r.groupedData=t[17]),262144&n[0]&&(r.start=t[18]),524288&n[0]&&(r.end=t[19]),8&n[0]&&(r.caption=t[3].captions),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Qf(t){let e,n,r,i;const o=[Zf,Wf],a=[];function s(t,e){return"text"===t[44].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function Jf(t){let e,n,r,i,s,l,c,u,f,d,h=t[4].value+"",p=t[2],m=[];for(let e=0;e<p.length;e+=1)m[e]=Qf(Bf(t,p,e));const g=t=>Mt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=T("div"),n=T("h1"),r=D(h),i=E();for(let t=0;t<m.length;t+=1)m[t].c();s=E(),l=T("div"),l.textContent="GO BACK",O(n,"class","section-title svelte-bhazg9"),O(l,"class","close-button bottom svelte-bhazg9"),O(e,"class","section svelte-bhazg9")},m(o,a){N(o,e,a),k(e,n),k(n,r),k(e,i);for(let t=0;t<m.length;t+=1)m[t].m(e,null);k(e,s),k(e,l),u=!0,f||(d=[P(l,"click",t[42]),v(c=re.call(null,e,{once:t[1]})),P(e,"enter",t[43])],f=!0)},p(t,n){if((!u||16&n[0])&&h!==(h=t[4].value+"")&&I(r,h),4194284&n[0]){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=Bf(t,p,r);m[r]?(m[r].p(i,n),kt(m[r],1)):(m[r]=Qf(i),m[r].c(),kt(m[r],1),m[r].m(e,s))}for($t(),r=p.length;r<m.length;r+=1)g(r);_t()}c&&a(c.update)&&2&n[0]&&c.update.call(null,{once:t[1]})},i(t){if(!u){for(let t=0;t<p.length;t+=1)kt(m[t]);u=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)Mt(m[t]);u=!1},d(t){t&&A(e),S(m,t),f=!1,o(d)}}}let td="assets/data/EchoCh-nationwide-by_gender-or-age_group.csv",ed="date",nd="value",rd=0;function id(t,e,n){let r,i,o,a,s,l,c,u,f,d=!1,{once:h}=e,{body:p}=e,{refs:m}=e,{chart:g}=e,{title:v}=e,{modal:y}=e,x=!1,b=!1,w=!0,$=!0,_=!1,k=!0,M=x?"web":"tv",C=w?"stringent":"lenient";const N=Hr();let A=0,S=1,T="All",z="All";nt((async()=>{const t=await qe(td,je);n(5,c=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))));const[e,r]=Ze(c,(t=>+t.date));N.range([e,r])}));return t.$$set=t=>{"once"in t&&n(1,h=t.once),"body"in t&&n(2,p=t.body),"refs"in t&&n(22,m=t.refs),"chart"in t&&n(3,g=t.chart),"title"in t&&n(4,v=t.title),"modal"in t&&n(0,y=t.modal)},t.$$.update=()=>{32&t.$$.dirty[0]&&c&&n(23,u=tn(c,(t=>t.gender),(t=>t.medium),(t=>t.partisanship_scenario),(t=>t.age_group),(t=>t.political_lean))),64&t.$$.dirty[0]&&n(24,M=x?"web":"tv"),256&t.$$.dirty[0]&&n(25,C=w?"stringent":"lenient"),1024&t.$$.dirty[0]&&n(29,r=_?"R":"L"),128&t.$$.dirty[0]&&n(28,i=b?"web":"tv"),512&t.$$.dirty[0]&&n(27,o=$?"stringent":"lenient"),2048&t.$$.dirty[0]&&n(26,l=k?"R":"L"),1065414688&t.$$.dirty[0]&&c&&u.size&&n(17,f=[...u.get(T).get(M).get(C).get(z).get(r).map((t=>Object.assign(Object.assign({},t),{idx:0}))),...u.get(s).get(i).get(o).get(a).get(l).map((t=>Object.assign(Object.assign({},t),{idx:1})))])},n(12,T="All"),n(13,z="All"),n(14,s="All"),n(15,a="All"),[y,h,p,g,v,c,x,b,w,$,_,k,T,z,s,a,d,f,A,S,N,t=>{const e=new Date(N(t));return e.setDate(1),e.setHours(0,0,0),e.setMilliseconds(0),+e},m,u,M,C,l,o,i,r,function(t){_=t,n(10,_)},function(t){x=t,n(6,x)},function(t){w=t,n(8,w)},function(){z=U(this),n(13,z)},function(){T=U(this),n(12,T)},function(t){k=t,n(11,k)},function(t){b=t,n(7,b)},function(t){$=t,n(9,$)},function(){a=U(this),n(15,a)},function(){s=U(this),n(14,s)},function(t){A=t,n(18,A)},function(t){S=t,n(19,S)},()=>n(0,y=!1),()=>n(16,d=!0)]}class od extends Rt{constructor(t){super(),jt(this,t,id,Jf,s,{once:1,body:2,refs:22,chart:3,title:4,modal:0},null,[-1,-1])}}function ad(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function sd(t){let e,n,r,i;return{c(){e=z("g"),n=z("path"),O(n,"class","path-area svelte-1xaeu6t"),O(n,"d",r=t[0](t[9])),O(n,"fill",i=t[2](t[9])),O(e,"class","area-group")},m(t,r){N(t,e,r),k(e,n)},p(t,e){3&e&&r!==(r=t[0](t[9]))&&O(n,"d",r),6&e&&i!==(i=t[2](t[9]))&&O(n,"fill",i)},d(t){t&&A(e)}}}function ld(e){let n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=sd(ad(e,r,t));return{c(){n=z("g");for(let t=0;t<i.length;t+=1)i[t].c();O(n,"class","vis")},m(t,e){N(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(7&e){let o;for(r=t[1],o=0;o<r.length;o+=1){const a=ad(t,r,o);i[o]?i[o].p(a,e):(i[o]=sd(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&A(n),S(i,t)}}}function cd(t,e,n){let r,i,o,a,s;const{data:l,xGet:u,yScale:f,zGet:d}=it("LayerCake");return c(t,l,(t=>n(1,a=t))),c(t,u,(t=>n(8,o=t))),c(t,f,(t=>n(7,i=t))),c(t,d,(t=>n(2,s=t))),t.$$.update=()=>{384&t.$$.dirty&&n(0,r=Rc().x((t=>o(t))).y0((t=>i(t[0]))).y1((t=>i(t[1]))).curve(Fc))},[r,a,s,l,u,f,d,i,o]}class ud extends Rt{constructor(t){super(),jt(this,t,cd,ld,s,{})}}function fd(t){let e,n,r,i,o,a;return e=new gu({props:{gridlines:!1,snapTicks:!1,tickMarks:!0,formatTick:t[6]}}),r=new _u({props:{formatTick:md,ticks:4}}),o=new ud({}),{c(){Dt(e.$$.fragment),n=E(),Dt(r.$$.fragment),i=E(),Dt(o.$$.fragment)},m(t,s){Et(e,t,s),N(t,n,s),Et(r,t,s),N(t,i,s),Et(o,t,s),a=!0},p(t,n){const r={};64&n&&(r.formatTick=t[6]),e.$set(r)},i(t){a||(kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(o.$$.fragment,t),a=!0)},o(t){Mt(e.$$.fragment,t),Mt(r.$$.fragment,t),Mt(o.$$.fragment,t),a=!1},d(t){Lt(e,t),t&&A(n),Lt(r,t),t&&A(i),Lt(o,t)}}}function dd(t){let e,n;return e=new es({props:{$$slots:{default:[fd]},$$scope:{ctx:t}}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};32832&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function hd(t){let e,n;return e=new Cu({props:{caption:t[1],url:t[3],type:"single-cols"}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),8&n&&(r.url=t[3]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function pd(t){let e,n,r,i,o;n=new Ha({props:{padding:t[0],flatData:ns(t[8]),data:t[8],x:gd,xScale:ma(),y:[0,1],yDomain:t[7],z:"key",zScale:bn(),zDomain:t[4],zRange:t[5],$$slots:{default:[dd]},$$scope:{ctx:t}}});let a=t[2]&&hd(t);return{c(){e=T("div"),Dt(n.$$.fragment),r=E(),a&&a.c(),i=L(),O(e,"class",m("chart stacked-area-chart")+" svelte-9qr8y9")},m(t,s){N(t,e,s),Et(n,e,null),N(t,r,s),a&&a.m(t,s),N(t,i,s),o=!0},p(t,[e]){const r={};1&e&&(r.padding=t[0]),256&e&&(r.flatData=ns(t[8])),256&e&&(r.data=t[8]),128&e&&(r.yDomain=t[7]),16&e&&(r.zDomain=t[4]),32&e&&(r.zRange=t[5]),32832&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r),t[2]?a?(a.p(t,e),4&e&&kt(a,1)):(a=hd(t),a.c(),kt(a,1),a.m(i.parentNode,i)):a&&($t(),Mt(a,1,1,(()=>{a=null})),_t())},i(t){o||(kt(n.$$.fragment,t),kt(a),o=!0)},o(t){Mt(n.$$.fragment,t),Mt(a),o=!1},d(t){t&&A(e),Lt(n),t&&A(r),a&&a.d(t),t&&A(i)}}}const md=t=>t,gd=t=>t.data.date;function vd(t,e,n){let r,i,o,a,{margins:s={top:20,right:10,bottom:20,left:45}}=e,{caption:l=""}=e,{includeCaption:c=!0}=e,{url:u=""}=e,{data:f}=e,{dataMap:d}=e,{categories:h}=e,{colors:p}=e,{rows:m}=e,{formatter:g}=e,{yDomain:v}=e;return t.$$set=t=>{"margins"in t&&n(0,s=t.margins),"caption"in t&&n(1,l=t.caption),"includeCaption"in t&&n(2,c=t.includeCaption),"url"in t&&n(3,u=t.url),"data"in t&&n(9,f=t.data),"dataMap"in t&&n(10,d=t.dataMap),"categories"in t&&n(4,h=t.categories),"colors"in t&&n(5,p=t.colors),"rows"in t&&n(11,m=t.rows),"formatter"in t&&n(6,g=t.formatter),"yDomain"in t&&n(7,v=t.yDomain)},t.$$.update=()=>{3088&t.$$.dirty&&n(12,r=m.map((t=>{const e={},n=d.get(t);if(void 0!==n)return h.forEach((t=>{n.has(t)&&(e[t]=n.get(t)[0].value)})),Object.assign({date:new Date(t)},e)})).filter((t=>void 0!==t))),4096&t.$$.dirty&&n(14,i=Object.keys(r[0]).filter((t=>"date"!==t))),16384&t.$$.dirty&&n(13,o=function(){var t=Tc([]),e=Vc,n=Yc,r=Bc;function i(i){var o,a,s=Array.from(t.apply(this,arguments),Wc),l=s.length,c=-1;for(const t of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(t,s[o].key,c,i)]).data=t;for(o=0,a=zc(e(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:Tc(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:Tc(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?Vc:"function"==typeof t?t:Tc(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?Yc:t,i):n},i}().keys(i).order(Gc)),12288&t.$$.dirty&&n(8,a=o(r))},[s,l,c,u,h,p,g,v,a,f,d,m,r,o,i]}class yd extends Rt{constructor(t){super(),jt(this,t,vd,pd,s,{margins:0,caption:1,includeCaption:2,url:3,data:9,dataMap:10,categories:4,colors:5,rows:11,formatter:6,yDomain:7})}}const xd=new Map([["non-news","Non-news"],["news","News"],["non_news","Non-news"],["facebook","Facebook"],["hard_news","Hard news"],["youtube","YouTube"],["twitter","Twitter"],["reddit","Reddit"],["fake_news","Fake News"]]);function bd(t,e,n){const r=t.slice();return r[26]=e[n],r[28]=n,r}function wd(t,e,n){const r=t.slice();return r[29]=e[n],r}function $d(t,e,n){const r=t.slice();return r[32]=e[n],r}function _d(t){let e,n,r,i,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,z,L,j,R,F,U,H,Y,V,B,W,Z,G,X,K,Q,J=t[26].value.title+"";function tt(e){t[16](e)}let et={id:"medium",title:Gt.controls.medium.title,labels:["TV","Web"],info:Gt.controls.medium.description};void 0!==t[5]&&(et.checked=t[5]),s=new ff({props:et}),at.push((()=>zt(s,"checked",tt)));let nt=df.sort(Dd),rt=[];for(let e=0;e<nt.length;e+=1)rt[e]=Md($d(t,nt,e));let it=gn(t[14].colors,t[14].order),ot=[];for(let e=0;e<it.length;e+=1)ot[e]=Cd(wd(t,it,e));const st=[Ad,Nd],lt=[];function ct(t,e){return t[11]?0:1}return Z=ct(t),G=lt[Z]=st[Z](t),{c(){e=T("div"),n=T("h3"),r=D(J),i=E(),a=T("div"),Dt(s.$$.fragment),c=E(),u=T("div"),f=T("div"),f.textContent="Location",d=E(),h=T("select"),p=T("option"),p.textContent="US";for(let t=0;t<rt.length;t+=1)rt[t].c();m=E(),g=T("div"),v=T("div"),v.textContent="Age group",y=E(),x=T("select"),b=T("option"),b.textContent="All",w=T("option"),w.textContent="18-24",$=T("option"),$.textContent="25-34",_=T("option"),_.textContent="35-44",M=T("option"),M.textContent="45-54",C=T("option"),C.textContent="55+",z=E(),L=T("div"),j=T("div"),j.textContent="Gender",R=E(),F=T("select"),U=T("option"),U.textContent="All",H=T("option"),H.textContent="Male",Y=T("option"),Y.textContent="Female",V=E(),B=T("div");for(let t=0;t<ot.length;t+=1)ot[t].c();W=E(),G.c(),O(n,"class","chart-title svelte-mfvti6"),O(f,"class","control-title svelte-mfvti6"),p.__value="US",p.value=p.__value,O(h,"id","age-group-menu"),O(h,"name","location"),O(h,"class","svelte-mfvti6"),void 0===t[8]&&ft((()=>t[17].call(h))),O(u,"id","location"),O(u,"class","control control-menu svelte-mfvti6"),O(v,"class","control-title svelte-mfvti6"),b.__value="All",b.value=b.__value,w.__value="18-24",w.value=w.__value,$.__value="25-34",$.value=$.__value,_.__value="35-44",_.value=_.__value,M.__value="45-54",M.value=M.__value,C.__value="55+",C.value=C.__value,O(x,"id","age-group-menu"),O(x,"name","age-group"),O(x,"class","svelte-mfvti6"),void 0===t[7]&&ft((()=>t[18].call(x))),O(g,"id","age-group"),O(g,"class","control control-menu svelte-mfvti6"),O(j,"class","control-title svelte-mfvti6"),U.__value="All",U.value=U.__value,U.selected=!0,H.__value="Male",H.value=H.__value,Y.__value="Female",Y.value=Y.__value,O(F,"id","gender-menu"),O(F,"name","location"),O(F,"class","svelte-mfvti6"),void 0===t[6]&&ft((()=>t[19].call(F))),O(L,"id","gender"),O(L,"class","control control-menu svelte-mfvti6"),O(a,"class","controls svelte-mfvti6"),O(B,"class","legend svelte-mfvti6"),O(e,"class","title-container svelte-mfvti6")},m(o,l){N(o,e,l),k(e,n),k(n,r),k(e,i),k(e,a),Et(s,a,null),k(a,c),k(a,u),k(u,f),k(u,d),k(u,h),k(h,p);for(let t=0;t<rt.length;t+=1)rt[t].m(h,null);q(h,t[8]),k(a,m),k(a,g),k(g,v),k(g,y),k(g,x),k(x,b),k(x,w),k(x,$),k(x,_),k(x,M),k(x,C),q(x,t[7]),k(a,z),k(a,L),k(L,j),k(L,R),k(L,F),k(F,U),k(F,H),k(F,Y),q(F,t[6]),k(e,V),k(e,B);for(let t=0;t<ot.length;t+=1)ot[t].m(B,null);k(e,W),lt[Z].m(e,null),X=!0,K||(Q=[P(h,"change",t[17]),P(x,"change",t[18]),P(F,"change",t[19])],K=!0)},p(t,n){(!X||4&n[0])&&J!==(J=t[26].value.title+"")&&I(r,J);const i={};if(!l&&32&n[0]&&(l=!0,i.checked=t[5],dt((()=>l=!1))),s.$set(i),0&n){let e;for(nt=df.sort(Dd),e=0;e<nt.length;e+=1){const r=$d(t,nt,e);rt[e]?rt[e].p(r,n):(rt[e]=Md(r),rt[e].c(),rt[e].m(h,null))}for(;e<rt.length;e+=1)rt[e].d(1);rt.length=nt.length}if(256&n[0]&&q(h,t[8]),128&n[0]&&q(x,t[7]),64&n[0]&&q(F,t[6]),16384&n[0]){let e;for(it=gn(t[14].colors,t[14].order),e=0;e<it.length;e+=1){const r=wd(t,it,e);ot[e]?ot[e].p(r,n):(ot[e]=Cd(r),ot[e].c(),ot[e].m(B,null))}for(;e<ot.length;e+=1)ot[e].d(1);ot.length=it.length}let o=Z;Z=ct(t),Z===o?lt[Z].p(t,n):($t(),Mt(lt[o],1,1,(()=>{lt[o]=null})),_t(),G=lt[Z],G?G.p(t,n):(G=lt[Z]=st[Z](t),G.c()),kt(G,1),G.m(e,null))},i(t){X||(kt(s.$$.fragment,t),kt(G),X=!0)},o(t){Mt(s.$$.fragment,t),Mt(G),X=!1},d(t){t&&A(e),Lt(s),S(rt,t),S(ot,t),lt[Z].d(),K=!1,o(Q)}}}function kd(e){let n,r,i=e[26].value+"";return{c(){n=T("p"),r=D(i),O(n,"class","copy svelte-mfvti6")},m(t,e){N(t,n,e),k(n,r)},p(t,e){4&e[0]&&i!==(i=t[26].value+"")&&I(r,i)},i:t,o:t,d(t){t&&A(n)}}}function Md(e){let n,r,i,o=e[32].state+"";return{c(){n=T("option"),r=D(o),n.__value=i=e[32].abbr,n.value=n.__value},m(t,e){N(t,n,e),k(n,r)},p:t,d(t){t&&A(n)}}}function Cd(t){let e,n,r,i,o,a,s,l=xd.get(t[29][1])+"";return{c(){e=T("div"),n=T("div"),i=E(),o=T("div"),a=D(l),s=E(),O(n,"class",r=m("legend-color")+" svelte-mfvti6"),F(n,"--color",t[29][0]),O(e,"class","legend-item svelte-mfvti6")},m(t,r){N(t,e,r),k(e,n),k(e,i),k(e,o),k(o,a),k(e,s)},p(t,e){16384&e[0]&&F(n,"--color",t[29][0]),16384&e[0]&&l!==(l=xd.get(t[29][1])+"")&&I(a,l)},d(t){t&&A(e)}}}function Nd(e){let n,r;return n=new Sf({}),{c(){Dt(n.$$.fragment)},m(t,e){Et(n,t,e),r=!0},p:t,i(t){r||(kt(n.$$.fragment,t),r=!0)},o(t){Mt(n.$$.fragment,t),r=!1},d(t){Lt(n,t)}}}function Ad(t){let e,n;return e=new yd({props:{dataMap:t[12].get(t[9]).get(t[6]).get(t[7]).get(t[8]),data:t[11],rows:t[13],categories:t[14].order,colors:t[14].colors,yDomain:t[14].yDomain,formatter:Xu,caption:t[3].captions,url:zd}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};5056&n[0]&&(r.dataMap=t[12].get(t[9]).get(t[6]).get(t[7]).get(t[8])),2048&n[0]&&(r.data=t[11]),8192&n[0]&&(r.rows=t[13]),16384&n[0]&&(r.categories=t[14].order),16384&n[0]&&(r.colors=t[14].colors),16384&n[0]&&(r.yDomain=t[14].yDomain),8&n[0]&&(r.caption=t[3].captions),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Sd(t){let e,n,r,i;const o=[kd,_d],a=[];function s(t,e){return"text"===t[26].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function Td(t){let e,n,r,i,s,l,c,u,f,d,h=t[4].value+"",p=t[2],m=[];for(let e=0;e<p.length;e+=1)m[e]=Sd(bd(t,p,e));const g=t=>Mt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=T("div"),n=T("h1"),r=D(h),i=E();for(let t=0;t<m.length;t+=1)m[t].c();s=E(),l=T("div"),l.textContent="GO BACK",O(n,"class","section-title svelte-mfvti6"),O(l,"class","close-button bottom svelte-mfvti6"),O(e,"class","section svelte-mfvti6")},m(o,a){N(o,e,a),k(e,n),k(n,r),k(e,i);for(let t=0;t<m.length;t+=1)m[t].m(e,null);k(e,s),k(e,l),u=!0,f||(d=[P(l,"click",t[20]),v(c=re.call(null,e,{once:t[1]})),P(e,"enter",t[21])],f=!0)},p(t,n){if((!u||16&n[0])&&h!==(h=t[4].value+"")&&I(r,h),31724&n[0]){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=bd(t,p,r);m[r]?(m[r].p(i,n),kt(m[r],1)):(m[r]=Sd(i),m[r].c(),kt(m[r],1),m[r].m(e,s))}for($t(),r=p.length;r<m.length;r+=1)g(r);_t()}c&&a(c.update)&&2&n[0]&&c.update.call(null,{once:t[1]})},i(t){if(!u){for(let t=0;t<p.length;t+=1)kt(m[t]);u=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)Mt(m[t]);u=!1},d(t){t&&A(e),S(m,t),f=!1,o(d)}}}const zd="assets/data/EchoCh-national_consumption_tv_and_web.csv",Dd=(t,e)=>t.state.localeCompare(e.state);function Ed(t,e,n){let r,i,o,a,s,l,c,u,f=!1,{once:d}=e,{body:h}=e,{refs:p}=e,{chart:m}=e,{title:g}=e,{modal:v}=e,y=!1;nt((async()=>{const t=await qe(zd,je);n(11,l=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))).sort(((t,e)=>+t.date-+e.date))),n(12,c=tn(l,(t=>t.medium),(t=>t.gender),(t=>t.age_group),(t=>t.state),(t=>+t.date),(t=>t.category))),n(13,u=Array.from(new Set(l.map((t=>+t.date)))))}));const x=new Map([["tv",{order:["non-news","news"],colors:["#a6cee3","#fb9a99"],yDomain:[0,350]}],["web",{order:["non_news","facebook","hard_news","youtube","twitter","reddit","fake_news"],colors:["#a6cee3","#e31a1c","#fb9a99","#cab2d6","#fdbf6f","#ff7f00","#6a3d9a"],yDomain:[0,80]}]]);return t.$$set=t=>{"once"in t&&n(1,d=t.once),"body"in t&&n(2,h=t.body),"refs"in t&&n(15,p=t.refs),"chart"in t&&n(3,m=t.chart),"title"in t&&n(4,g=t.title),"modal"in t&&n(0,v=t.modal)},t.$$.update=()=>{32&t.$$.dirty[0]&&n(9,r=y?"web":"tv"),512&t.$$.dirty[0]&&n(14,s=x.get(r)),256&t.$$.dirty[0]&&"US"!==a&&(n(6,i="All"),n(7,o="All")),192&t.$$.dirty[0]&&("All"===o&&"All"===i||n(8,a="US"))},n(6,i="All"),n(7,o="All"),n(8,a="US"),[v,d,h,m,g,y,i,o,a,r,f,l,c,u,s,p,function(t){y=t,n(5,y)},function(){a=U(this),n(8,a)},function(){o=U(this),n(7,o)},function(){i=U(this),n(6,i)},()=>n(0,v=!1),()=>n(10,f=!0)]}class Ld extends Rt{constructor(t){super(),jt(this,t,Ed,Td,s,{once:1,body:2,refs:15,chart:3,title:4,modal:0},null,[-1,-1])}}const Pd={origin:[0,0,0],round:4},jd="SVGPathCommander Error",Rd={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},Od=t=>{let e=t.pathValue[t.segmentStart],n=e.toLowerCase();const{data:r}=t;for(;r.length>=Rd[n]&&("m"===n&&r.length>2?(t.segments.push([e,...r.splice(0,2)]),n="l",e="m"===e?"l":"L"):t.segments.push([e,...r.splice(0,Rd[n])]),Rd[n]););},Id=t=>{const{index:e,pathValue:n}=t,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err=`${jd}: invalid Arc flag "${n[e]}", expecting 0 or 1 at index ${e}`)},Fd=t=>t>=48&&t<=57,qd="Invalid path value",Ud=t=>{const{max:e,pathValue:n,index:r}=t;let i,o=r,a=!1,s=!1,l=!1,c=!1;if(o>=e)t.err=`${jd}: ${qd} at index ${o}, "pathValue" is missing param`;else if(i=n.charCodeAt(o),(43===i||45===i)&&(o+=1,i=n.charCodeAt(o)),Fd(i)||46===i){if(46!==i){if(a=48===i,o+=1,i=n.charCodeAt(o),a&&o<e&&i&&Fd(i))return void(t.err=`${jd}: ${qd} at index ${r}, "${n[r]}" illegal number`);for(;o<e&&Fd(n.charCodeAt(o));)o+=1,s=!0;i=n.charCodeAt(o)}if(46===i){for(c=!0,o+=1;Fd(n.charCodeAt(o));)o+=1,l=!0;i=n.charCodeAt(o)}if(101===i||69===i){if(c&&!s&&!l)return void(t.err=`${jd}: ${qd} at index ${o}, "${n[o]}" invalid float exponent`);if(o+=1,i=n.charCodeAt(o),(43===i||45===i)&&(o+=1),!(o<e&&Fd(n.charCodeAt(o))))return void(t.err=`${jd}: ${qd} at index ${o}, "${n[o]}" invalid integer exponent`);for(;o<e&&Fd(n.charCodeAt(o));)o+=1}t.index=o,t.param=+t.pathValue.slice(r,o)}else t.err=`${jd}: ${qd} at index ${o}, "${n[o]}" is not a number`},Hd=t=>[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279,10,13,8232,8233,32,9,11,12,160].includes(t),Yd=t=>{const{pathValue:e,max:n}=t;for(;t.index<n&&Hd(e.charCodeAt(t.index));)t.index+=1},Vd=t=>Fd(t)||43===t||45===t||46===t,Bd=t=>97==(32|t),Wd=t=>{const{max:e,pathValue:n,index:r}=t,i=n.charCodeAt(r),o=Rd[n[r].toLowerCase()];if(t.segmentStart=r,(t=>{switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}})(i))if(t.index+=1,Yd(t),t.data=[],o){for(;;){for(let r=o;r>0;r-=1){if(!Bd(i)||3!==r&&4!==r?Ud(t):Id(t),t.err.length)return;t.data.push(t.param),Yd(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,Yd(t))}if(t.index>=t.max||!Vd(n.charCodeAt(t.index)))break}Od(t)}else Od(t);else t.err=`${jd}: ${qd} "${n[r]}" is not a path command`};class Zd{constructor(t){this.segments=[],this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}}const Gd=t=>Array.isArray(t)&&t.every((t=>{const e=t[0].toLowerCase();return Rd[e]===t.length-1&&"achlmqstvz".includes(e)})),Xd=t=>{if(Gd(t))return[...t];const e=new Zd(t);for(Yd(e);e.index<e.max&&!e.err.length;)Wd(e);if(e.err&&e.err.length)throw TypeError(e.err);return e.segments},Kd=t=>{const e=t.length;let n,r=-1,i=t[e-1],o=0;for(;++r<e;)n=i,i=t[r],o+=n[1]*i[0]-n[0]*i[1];return o/2},Qd=(t,e)=>Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),Jd=t=>t.reduce(((e,n,r)=>r?e+Qd(t[r-1],n):0),0);var th=Object.defineProperty,eh=(t,e,n)=>(((t,e,n)=>{e in t?th(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const nh={a:1,b:0,c:0,d:1,e:0,f:0,m11:1,m12:0,m13:0,m14:0,m21:0,m22:1,m23:0,m24:0,m31:0,m32:0,m33:1,m34:0,m41:0,m42:0,m43:0,m44:1,is2D:!0,isIdentity:!0},rh=t=>(t instanceof Float64Array||t instanceof Float32Array||Array.isArray(t)&&t.every((t=>"number"==typeof t)))&&[6,16].some((e=>t.length===e)),ih=t=>t instanceof DOMMatrix||t instanceof vh||"object"==typeof t&&Object.keys(nh).every((e=>t&&e in t)),oh=t=>{const e=new vh,n=Array.from(t);if(!rh(n))throw TypeError(`CSSMatrix: "${n.join(",")}" must be an array with 6/16 numbers.`);if(16===n.length){const[t,r,i,o,a,s,l,c,u,f,d,h,p,m,g,v]=n;e.m11=t,e.a=t,e.m21=a,e.c=a,e.m31=u,e.m41=p,e.e=p,e.m12=r,e.b=r,e.m22=s,e.d=s,e.m32=f,e.m42=m,e.f=m,e.m13=i,e.m23=l,e.m33=d,e.m43=g,e.m14=o,e.m24=c,e.m34=h,e.m44=v}else if(6===n.length){const[t,r,i,o,a,s]=n;e.m11=t,e.a=t,e.m12=r,e.b=r,e.m21=i,e.c=i,e.m22=o,e.d=o,e.m41=a,e.e=a,e.m42=s,e.f=s}return e},ah=t=>{if(ih(t))return oh([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a DOMMatrix / CSSMatrix / JSON compatible object.`)},sh=t=>{if("string"!=typeof t)throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a string.`);const e=String(t).replace(/\s/g,"");let n=new vh;const r=`CSSMatrix: invalid transform string "${t}"`;return e.split(")").filter((t=>t)).forEach((t=>{const[e,i]=t.split("(");if(!i)throw TypeError(r);const o=i.split(",").map((t=>t.includes("rad")?parseFloat(t)*(180/Math.PI):parseFloat(t))),[a,s,l,c]=o,u=[a,s,l],f=[a,s,l,c];if("perspective"===e&&a&&[s,l].every((t=>void 0===t)))n.m34=-1/a;else if(e.includes("matrix")&&[6,16].includes(o.length)&&o.every((t=>!Number.isNaN(+t)))){const t=o.map((t=>Math.abs(t)<1e-6?0:t));n=n.multiply(oh(t))}else if("translate3d"===e&&u.every((t=>!Number.isNaN(+t))))n=n.translate(a,s,l);else if("translate"===e&&a&&void 0===l)n=n.translate(a,s||0,0);else if("rotate3d"===e&&f.every((t=>!Number.isNaN(+t)))&&c)n=n.rotateAxisAngle(a,s,l,c);else if("rotate"===e&&a&&[s,l].every((t=>void 0===t)))n=n.rotate(0,0,a);else if("scale3d"===e&&u.every((t=>!Number.isNaN(+t)))&&u.some((t=>1!==t)))n=n.scale(a,s,l);else if("scale"!==e||Number.isNaN(a)||1===a||void 0!==l)if("skew"===e&&(a||!Number.isNaN(a)&&s)&&void 0===l)n=n.skew(a,s||0);else{if(!(["translate","rotate","scale","skew"].some((t=>e.includes(t)))&&/[XYZ]/.test(e)&&a&&[s,l].every((t=>void 0===t))))throw TypeError(r);if("skewX"===e||"skewY"===e)n=n[e](a);else{const t=e.replace(/[XYZ]/,""),r=e.replace(t,""),i=["X","Y","Z"].indexOf(r),o="scale"===t?1:0,s=[0===i?a:o,1===i?a:o,2===i?a:o];n=n[t](...s)}}else{const t=Number.isNaN(+s)?a:s;n=n.scale(a,t,1)}})),n},lh=(t,e)=>e?[t.a,t.b,t.c,t.d,t.e,t.f]:[t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44],ch=(t,e,n)=>{const r=new vh;return r.m41=t,r.e=t,r.m42=e,r.f=e,r.m43=n,r},uh=(t,e,n)=>{const r=new vh,i=Math.PI/180,o=t*i,a=e*i,s=n*i,l=Math.cos(o),c=-Math.sin(o),u=Math.cos(a),f=-Math.sin(a),d=Math.cos(s),h=-Math.sin(s),p=u*d,m=-u*h;r.m11=p,r.a=p,r.m12=m,r.b=m,r.m13=f;const g=c*f*d+l*h;r.m21=g,r.c=g;const v=l*d-c*f*h;return r.m22=v,r.d=v,r.m23=-c*u,r.m31=c*h-l*f*d,r.m32=c*d+l*f*h,r.m33=l*u,r},fh=(t,e,n,r)=>{const i=new vh,o=Math.sqrt(t*t+e*e+n*n);if(0===o)return i;const a=t/o,s=e/o,l=n/o,c=r*(Math.PI/360),u=Math.sin(c),f=Math.cos(c),d=u*u,h=a*a,p=s*s,m=l*l,g=1-2*(p+m)*d;i.m11=g,i.a=g;const v=2*(a*s*d+l*u*f);i.m12=v,i.b=v,i.m13=2*(a*l*d-s*u*f);const y=2*(s*a*d-l*u*f);i.m21=y,i.c=y;const x=1-2*(m+h)*d;return i.m22=x,i.d=x,i.m23=2*(s*l*d+a*u*f),i.m31=2*(l*a*d+s*u*f),i.m32=2*(l*s*d-a*u*f),i.m33=1-2*(h+p)*d,i},dh=(t,e,n)=>{const r=new vh;return r.m11=t,r.a=t,r.m22=e,r.d=e,r.m33=n,r},hh=(t,e)=>{const n=new vh;if(t){const e=t*Math.PI/180,r=Math.tan(e);n.m21=r,n.c=r}if(e){const t=e*Math.PI/180,r=Math.tan(t);n.m12=r,n.b=r}return n},ph=t=>hh(t,0),mh=t=>hh(0,t),gh=(t,e)=>{const n=e.m11*t.m11+e.m12*t.m21+e.m13*t.m31+e.m14*t.m41,r=e.m11*t.m12+e.m12*t.m22+e.m13*t.m32+e.m14*t.m42,i=e.m11*t.m13+e.m12*t.m23+e.m13*t.m33+e.m14*t.m43,o=e.m11*t.m14+e.m12*t.m24+e.m13*t.m34+e.m14*t.m44,a=e.m21*t.m11+e.m22*t.m21+e.m23*t.m31+e.m24*t.m41,s=e.m21*t.m12+e.m22*t.m22+e.m23*t.m32+e.m24*t.m42,l=e.m21*t.m13+e.m22*t.m23+e.m23*t.m33+e.m24*t.m43,c=e.m21*t.m14+e.m22*t.m24+e.m23*t.m34+e.m24*t.m44,u=e.m31*t.m11+e.m32*t.m21+e.m33*t.m31+e.m34*t.m41,f=e.m31*t.m12+e.m32*t.m22+e.m33*t.m32+e.m34*t.m42,d=e.m31*t.m13+e.m32*t.m23+e.m33*t.m33+e.m34*t.m43,h=e.m31*t.m14+e.m32*t.m24+e.m33*t.m34+e.m34*t.m44,p=e.m41*t.m11+e.m42*t.m21+e.m43*t.m31+e.m44*t.m41,m=e.m41*t.m12+e.m42*t.m22+e.m43*t.m32+e.m44*t.m42,g=e.m41*t.m13+e.m42*t.m23+e.m43*t.m33+e.m44*t.m43,v=e.m41*t.m14+e.m42*t.m24+e.m43*t.m34+e.m44*t.m44;return oh([n,r,i,o,a,s,l,c,u,f,d,h,p,m,g,v])};class vh{constructor(t){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.m11=1,this.m12=0,this.m13=0,this.m14=0,this.m21=0,this.m22=1,this.m23=0,this.m24=0,this.m31=0,this.m32=0,this.m33=1,this.m34=0,this.m41=0,this.m42=0,this.m43=0,this.m44=1,t?this.setMatrixValue(t):this}get isIdentity(){return 1===this.m11&&0===this.m12&&0===this.m13&&0===this.m14&&0===this.m21&&1===this.m22&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m41&&0===this.m42&&0===this.m43&&1===this.m44}get is2D(){return 0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m43&&1===this.m44}setMatrixValue(t){return"string"==typeof t&&t.length&&"none"!==t?sh(t):Array.isArray(t)||t instanceof Float64Array||t instanceof Float32Array?oh(t):"object"==typeof t?ah(t):this}toFloat32Array(t){return Float32Array.from(lh(this,t))}toFloat64Array(t){return Float64Array.from(lh(this,t))}toString(){const{is2D:t}=this;return`${t?"matrix":"matrix3d"}(${this.toFloat64Array(t).join(", ")})`}toJSON(){const{is2D:t,isIdentity:e}=this;return{...this,is2D:t,isIdentity:e}}multiply(t){return gh(this,t)}translate(t,e,n){let r=e,i=n;return typeof r>"u"&&(r=0),typeof i>"u"&&(i=0),gh(this,ch(t,r,i))}scale(t,e,n){let r=e,i=n;return typeof r>"u"&&(r=t),typeof i>"u"&&(i=1),gh(this,dh(t,r,i))}rotate(t,e,n){let r=t,i=e||0,o=n||0;return"number"==typeof t&&typeof e>"u"&&typeof n>"u"&&(o=r,r=0,i=0),gh(this,uh(r,i,o))}rotateAxisAngle(t,e,n,r){if([t,e,n,r].some((t=>Number.isNaN(+t))))throw new TypeError("CSSMatrix: expecting 4 values");return gh(this,fh(t,e,n,r))}skewX(t){return gh(this,ph(t))}skewY(t){return gh(this,mh(t))}skew(t,e){return gh(this,hh(t,e))}transformPoint(t){const e=this.m11*t.x+this.m21*t.y+this.m31*t.z+this.m41*t.w,n=this.m12*t.x+this.m22*t.y+this.m32*t.z+this.m42*t.w,r=this.m13*t.x+this.m23*t.y+this.m33*t.z+this.m43*t.w,i=this.m14*t.x+this.m24*t.y+this.m34*t.z+this.m44*t.w;return t instanceof DOMPoint?new DOMPoint(e,n,r,i):{x:e,y:n,z:r,w:i}}}eh(vh,"Translate",ch),eh(vh,"Rotate",uh),eh(vh,"RotateAxisAngle",fh),eh(vh,"Scale",dh),eh(vh,"SkewX",ph),eh(vh,"SkewY",mh),eh(vh,"Skew",hh),eh(vh,"Multiply",gh),eh(vh,"fromArray",oh),eh(vh,"fromMatrix",ah),eh(vh,"fromString",sh),eh(vh,"toArray",lh),eh(vh,"isCompatibleArray",rh),eh(vh,"isCompatibleObject",ih);const yh=t=>Gd(t)&&t.every((([t])=>t===t.toUpperCase())),xh=t=>{if(yh(t))return[...t];const e=Xd(t);let n=0,r=0,i=0,o=0;return e.map((t=>{const e=t.slice(1).map(Number),[a]=t,s=a.toUpperCase();if("M"===a)return[n,r]=e,i=n,o=r,["M",n,r];let l=[];if(a!==s)if("A"===s)l=[s,e[0],e[1],e[2],e[3],e[4],e[5]+n,e[6]+r];else if("V"===s)l=[s,e[0]+r];else if("H"===s)l=[s,e[0]+n];else{const t=e.map(((t,e)=>t+(e%2?r:n)));l=[s,...t]}else l=[s,...e];return"Z"===s?(n=i,r=o):"H"===s?[,n]=l:"V"===s?[,r]=l:([n,r]=l.slice(-2),"M"===s&&(i=n,o=r)),l}))},bh=(t,e)=>{const[n]=t,{x1:r,y1:i,x2:o,y2:a}=e,s=t.slice(1).map(Number);let l=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)l=["L",t[1],i];else if("V"===n)l=["L",r,t[1]];else if("S"===n){const t=2*r-o,n=2*i-a;e.x1=t,e.y1=n,l=["C",t,n,...s]}else if("T"===n){const t=2*r-(e.qx?e.qx:0),n=2*i-(e.qy?e.qy:0);e.qx=t,e.qy=n,l=["Q",t,n,...s]}else if("Q"===n){const[t,n]=s;e.qx=t,e.qy=n}return l},wh=t=>yh(t)&&t.every((([t])=>"ACLMQZ".includes(t))),$h={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},_h=t=>{if(wh(t))return[...t];const e=xh(t),n={...$h},r=e.length;for(let t=0;t<r;t+=1){e[t],e[t]=bh(e[t],n);const r=e[t],i=r.length;n.x1=+r[i-2],n.y1=+r[i-1],n.x2=+r[i-4]||n.x1,n.y2=+r[i-3]||n.y1}return e},kh=(t,e,n)=>{const[r,i]=t,[o,a]=e;return[r+(o-r)*n,i+(a-i)*n]},Mh=(t,e,n,r,i)=>{const o=Qd([t,e],[n,r]);let a={x:0,y:0};if("number"==typeof i)if(i<=0)a={x:t,y:e};else if(i>=o)a={x:n,y:r};else{const[s,l]=kh([t,e],[n,r],i/o);a={x:s,y:l}}return{length:o,point:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}},Ch=(t,e)=>{const{x:n,y:r}=t,{x:i,y:o}=e,a=n*i+r*o,s=Math.sqrt((n**2+r**2)*(i**2+o**2));return(n*o-r*i<0?-1:1)*Math.acos(a/s)},Nh=(t,e,n,r,i,o,a,s,l,c)=>{const{abs:u,sin:f,cos:d,sqrt:h,PI:p}=Math;let m=u(n),g=u(r);const v=(i%360+360)%360*(p/180);if(t===s&&e===l)return{x:t,y:e};if(0===m||0===g)return Mh(t,e,s,l,c).point;const y=(t-s)/2,x=(e-l)/2,b=d(v)*y+f(v)*x,w=-f(v)*y+d(v)*x,$=b**2/m**2+w**2/g**2;$>1&&(m*=h($),g*=h($));let _=(m**2*g**2-m**2*w**2-g**2*b**2)/(m**2*w**2+g**2*b**2);_=_<0?0:_;const k=(o!==a?1:-1)*h(_),M=k*(m*w/g),C=k*(-g*b/m),N=d(v)*M-f(v)*C+(t+s)/2,A=f(v)*M+d(v)*C+(e+l)/2,S={x:(b-M)/m,y:(w-C)/g},T=Ch({x:1,y:0},S);let z=Ch(S,{x:(-b-M)/m,y:(-w-C)/g});!a&&z>0?z-=2*p:a&&z<0&&(z+=2*p),z%=2*p;const D=T+z*c,E=m*d(D),L=g*f(D);return{x:d(v)*E-f(v)*L+N,y:f(v)*E+d(v)*L+A}},Ah=(t,e,n,r,i,o,a,s,l,c)=>{const u="number"==typeof c;let f=t,d=e,h=0,p=[f,d,h],m=[f,d],g=0,v={x:0,y:0},y=[{x:f,y:d}];u&&c<=0&&(v={x:f,y:d});for(let x=0;x<=300;x+=1){if(g=x/300,({x:f,y:d}=Nh(t,e,n,r,i,o,a,s,l,g)),y=[...y,{x:f,y:d}],h+=Qd(m,[f,d]),m=[f,d],u&&h>c&&c>p[2]){const t=(h-c)/(h-p[2]);v={x:m[0]*(1-t)+p[0]*t,y:m[1]*(1-t)+p[1]*t}}p=[f,d,h]}return u&&c>=h&&(v={x:s,y:l}),{length:h,point:v,min:{x:Math.min(...y.map((t=>t.x))),y:Math.min(...y.map((t=>t.y)))},max:{x:Math.max(...y.map((t=>t.x))),y:Math.max(...y.map((t=>t.y)))}}},Sh=(t,e,n,r,i,o,a,s,l)=>{const c=1-l;return{x:c**3*t+3*c**2*l*n+3*c*l**2*i+l**3*a,y:c**3*e+3*c**2*l*r+3*c*l**2*o+l**3*s}},Th=(t,e,n,r,i,o,a,s,l)=>{const c="number"==typeof l;let u=t,f=e,d=0,h=[u,f,d],p=[u,f],m=0,g={x:0,y:0},v=[{x:u,y:f}];c&&l<=0&&(g={x:u,y:f});for(let y=0;y<=300;y+=1){if(m=y/300,({x:u,y:f}=Sh(t,e,n,r,i,o,a,s,m)),v=[...v,{x:u,y:f}],d+=Qd(p,[u,f]),p=[u,f],c&&d>l&&l>h[2]){const t=(d-l)/(d-h[2]);g={x:p[0]*(1-t)+h[0]*t,y:p[1]*(1-t)+h[1]*t}}h=[u,f,d]}return c&&l>=d&&(g={x:a,y:s}),{length:d,point:g,min:{x:Math.min(...v.map((t=>t.x))),y:Math.min(...v.map((t=>t.y)))},max:{x:Math.max(...v.map((t=>t.x))),y:Math.max(...v.map((t=>t.y)))}}},zh=(t,e,n,r,i,o,a)=>{const s=1-a;return{x:s**2*t+2*s*a*n+a**2*i,y:s**2*e+2*s*a*r+a**2*o}},Dh=(t,e,n,r,i,o,a)=>{const s="number"==typeof a;let l=t,c=e,u=0,f=[l,c,u],d=[l,c],h=0,p={x:0,y:0},m=[{x:l,y:c}];s&&a<=0&&(p={x:l,y:c});for(let g=0;g<=300;g+=1){if(h=g/300,({x:l,y:c}=zh(t,e,n,r,i,o,h)),m=[...m,{x:l,y:c}],u+=Qd(d,[l,c]),d=[l,c],s&&u>a&&a>f[2]){const t=(u-a)/(u-f[2]);p={x:d[0]*(1-t)+f[0]*t,y:d[1]*(1-t)+f[1]*t}}f=[l,c,u]}return s&&a>=u&&(p={x:i,y:o}),{length:u,point:p,min:{x:Math.min(...m.map((t=>t.x))),y:Math.min(...m.map((t=>t.y)))},max:{x:Math.max(...m.map((t=>t.x))),y:Math.max(...m.map((t=>t.y)))}}},Eh=(t,e)=>{const n=_h(t),r="number"==typeof e;let i,o,a,s=[],l=0,c=0,u=0,f=0,d=[],h=[],p=0,m={x:0,y:0},g=m,v=m,y=m,x=0;for(let t=0,b=n.length;t<b;t+=1)a=n[t],[o]=a,i="M"===o,s=i?s:[l,c,...a.slice(1)],i?([,u,f]=a,m={x:u,y:f},g=m,p=0,r&&e<.001&&(y=m)):"L"===o?({length:p,min:m,max:g,point:v}=Mh(...s,(e||0)-x)):"A"===o?({length:p,min:m,max:g,point:v}=Ah(...s,(e||0)-x)):"C"===o?({length:p,min:m,max:g,point:v}=Th(...s,(e||0)-x)):"Q"===o?({length:p,min:m,max:g,point:v}=Dh(...s,(e||0)-x)):"Z"===o&&(s=[l,c,u,f],({length:p,min:m,max:g,point:v}=Mh(...s,(e||0)-x))),r&&x<e&&x+p>=e&&(y=v),h=[...h,g],d=[...d,m],x+=p,[l,c]="Z"!==o?a.slice(-2):[u,f];return r&&e>=x&&(y={x:l,y:c}),{length:x,point:y,min:{x:Math.min(...d.map((t=>t.x))),y:Math.min(...d.map((t=>t.y)))},max:{x:Math.max(...h.map((t=>t.x))),y:Math.max(...h.map((t=>t.y)))}}},Lh=t=>{if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};const{min:{x:e,y:n},max:{x:r,y:i}}=Eh(t),o=r-e,a=i-n;return{width:o,height:a,x:e,y:n,x2:r,y2:i,cx:e+o/2,cy:n+a/2,cz:Math.max(o,a)+Math.min(o,a)/2}},Ph=(t,e,n)=>{if(t[n].length>7){t[n].shift();const r=t[n];let i=n;for(;r.length;)e[n]="A",t.splice(i+=1,0,["C",...r.splice(0,6)]);t.splice(n,1)}},jh=t=>wh(t)&&t.every((([t])=>"MC".includes(t))),Rh=(t,e,n)=>({x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}),Oh=(t,e,n,r,i,o,a,s,l,c)=>{let u=t,f=e,d=n,h=r,p=s,m=l;const g=120*Math.PI/180,v=Math.PI/180*(+i||0);let y,x,b,w,$,_=[];if(c)[x,b,w,$]=c;else{y=Rh(u,f,-v),u=y.x,f=y.y,y=Rh(p,m,-v),p=y.x,m=y.y;const t=(u-p)/2,e=(f-m)/2;let n=t*t/(d*d)+e*e/(h*h);n>1&&(n=Math.sqrt(n),d*=n,h*=n);const r=d*d,i=h*h,s=(o===a?-1:1)*Math.sqrt(Math.abs((r*i-r*e*e-i*t*t)/(r*e*e+i*t*t)));w=s*d*e/h+(u+p)/2,$=s*-h*t/d+(f+m)/2,x=Math.asin(((f-$)/h*10**9>>0)/10**9),b=Math.asin(((m-$)/h*10**9>>0)/10**9),x=u<w?Math.PI-x:x,b=p<w?Math.PI-b:b,x<0&&(x=2*Math.PI+x),b<0&&(b=2*Math.PI+b),a&&x>b&&(x-=2*Math.PI),!a&&b>x&&(b-=2*Math.PI)}let k=b-x;if(Math.abs(k)>g){const t=b,e=p,n=m;b=x+g*(a&&b>x?1:-1),p=w+d*Math.cos(b),m=$+h*Math.sin(b),_=Oh(p,m,d,h,i,0,a,e,n,[b,t,w,$])}k=b-x;const M=Math.cos(x),C=Math.sin(x),N=Math.cos(b),A=Math.sin(b),S=Math.tan(k/4),T=4/3*d*S,z=4/3*h*S,D=[u,f],E=[u+T*C,f-z*M],L=[p+T*A,m-z*N],P=[p,m];if(E[0]=2*D[0]-E[0],E[1]=2*D[1]-E[1],c)return[...E,...L,...P,..._];_=[...E,...L,...P,..._];const j=[];for(let t=0,e=_.length;t<e;t+=1)j[t]=t%2?Rh(_[t-1],_[t],v).y:Rh(_[t],_[t+1],v).x;return j},Ih=(t,e,n,r,i,o)=>{const a=.3333333333333333,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},Fh=(t,e,n,r)=>[...kh([t,e],[n,r],.5),n,r,n,r],qh=(t,e)=>{const[n]=t,r=t.slice(1).map(Number),[i,o]=r;let a;const{x1:s,y1:l,x:c,y:u}=e;return"TQ".includes(n)||(e.qx=null,e.qy=null),"M"===n?(e.x=i,e.y=o,t):"A"===n?(a=[s,l,...r],["C",...Oh(...a)]):"Q"===n?(e.qx=i,e.qy=o,a=[s,l,...r],["C",...Ih(...a)]):"L"===n?["C",...Fh(s,l,i,o)]:"Z"===n?["C",...Fh(s,l,c,u)]:t},Uh=t=>{if(jh(t))return[...t];const e=_h(t),n={...$h},r=[];let i="",o=e.length;for(let t=0;t<o;t+=1){[i]=e[t],r[t]=i,e[t]=qh(e[t],n),Ph(e,r,t),o=e.length;const a=e[t],s=a.length;n.x1=+a[s-2],n.y1=+a[s-1],n.x2=+a[s-4]||n.x1,n.y2=+a[s-3]||n.y1}return e},Hh=t=>{let e=0,n=0,r=0;return Uh(t).map((t=>"M"===t[0]?([,e,n]=t,0):(r=((t,e,n,r,i,o,a,s)=>3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20)(e,n,...t.slice(1)),[e,n]=t.slice(-2),r))).reduce(((t,e)=>t+e),0)},Yh=t=>Eh(t).length,Vh=t=>Hh(Uh(t))>=0,Bh=(t,e)=>Eh(t,e).point,Wh=(t,e)=>{const n=Xd(t);let r=[...n],i=Yh(r),o=r.length-1,a=0,s=0,l=n[0];const[c,u]=l.slice(-2),f={x:c,y:u};if(o<=0||!e||!Number.isFinite(e))return{segment:l,index:0,length:s,point:f,lengthAtSegment:a};if(e>=i)return r=n.slice(0,-1),a=Yh(r),s=i-a,{segment:n[o],index:o,length:s,lengthAtSegment:a};const d=[];for(;o>0;)l=r[o],r=r.slice(0,-1),a=Yh(r),s=i-a,i=a,d.push({segment:l,index:o,length:s,lengthAtSegment:a}),o-=1;return d.find((({lengthAtSegment:t})=>t<=e))},Zh=(t,e)=>{const n=Xd(t),r=_h(n),i=Yh(n),o=t=>{const n=t.x-e.x,r=t.y-e.y;return n*n+r*r};let a,s=8,l={x:0,y:0},c=0,u=0,f=1/0;for(let t=0;t<=i;t+=s)a=Bh(r,t),c=o(a),c<f&&(l=a,u=t,f=c);s/=2;let d,h,p=0,m=0,g=0,v=0;for(;s>.5;)p=u-s,d=Bh(r,p),g=o(d),m=u+s,h=Bh(r,m),v=o(h),p>=0&&g<f?(l=d,u=p,f=g):m<=i&&v<f?(l=h,u=m,f=v):s/=2;const y=Wh(n,u);return{closest:l,distance:Math.sqrt(f),segment:y}},Gh=(t,e)=>Zh(t,e).closest,Xh=(t,e)=>Zh(t,e).segment,Kh=(t,e)=>Wh(t,e).segment,Qh=(t,e)=>{const{distance:n}=Zh(t,e);return Math.abs(n)<.001},Jh=t=>{if("string"!=typeof t)return!1;const e=new Zd(t);for(Yd(e);e.index<e.max&&!e.err.length;)Wd(e);return!e.err.length&&"mM".includes(e.segments[0][0])},tp=t=>Gd(t)&&t.slice(1).every((([t])=>t===t.toLowerCase())),ep=(t,e)=>{let{round:n}=Pd;if("off"===e||"off"===n)return[...t];n="number"==typeof e&&e>=0?e:n;const r="number"==typeof n&&n>=1?10**n:1;return t.map((t=>{const e=t.slice(1).map(Number).map((t=>n?Math.round(t*r)/r:Math.round(t)));return[t[0],...e]}))},np=(t,e)=>ep(t,e).map((t=>t[0]+t.slice(1).join(" "))).join(""),rp={line:["x1","y1","x2","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],rect:["width","height","x","y","rx","ry"],polygon:["points"],polyline:["points"],glyph:["d"]},ip=(t,e,n)=>{const r=n||document,i=r.defaultView||window,o=Object.keys(rp),a=t instanceof i.SVGElement,s=a?t.tagName:null;if(s&&o.every((t=>s!==t)))throw TypeError(`${jd}: "${s}" is not SVGElement`);const l=r.createElementNS("http://www.w3.org/2000/svg","path"),c=a?s:t.type,u=rp[c],f={type:c};a?(u.forEach((e=>{u.includes(e)&&(f[e]=t.getAttribute(e))})),Object.values(t.attributes).forEach((({name:t,value:e})=>{u.includes(t)||l.setAttribute(t,e)}))):(Object.assign(f,t),Object.keys(f).forEach((t=>{!u.includes(t)&&"type"!==t&&l.setAttribute(t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`)),f[t])})));let d="";const h=Pd.round;return"circle"===c?d=np((t=>{const{cx:e,cy:n,r:r}=t;return[["M",e-r,n],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,-2*r,0]]})(f),h):"ellipse"===c?d=np((t=>{const{cx:e,cy:n,rx:r,ry:i}=t;return[["M",e-r,n],["a",r,i,0,1,0,2*r,0],["a",r,i,0,1,0,-2*r,0]]})(f),h):["polyline","polygon"].includes(c)?d=np((t=>{const e=[],n=(t.points||"").trim().split(/[\s|,]/).map(Number);let r=0;for(;r<n.length;)e.push([r?"L":"M",n[r],n[r+1]]),r+=2;return"polygon"===t.type?[...e,["z"]]:e})(f),h):"rect"===c?d=np((t=>{const e=+t.x||0,n=+t.y||0,r=+t.width,i=+t.height;let o=+t.rx,a=+t.ry;return o||a?(o=o||a,a=a||o,2*o>r&&(o-=(2*o-r)/2),2*a>i&&(a-=(2*a-i)/2),[["M",e+o,n],["h",r-2*o],["s",o,0,o,a],["v",i-2*a],["s",0,a,-o,a],["h",2*o-r],["s",-o,0,-o,-a],["v",2*a-i],["s",0,-a,o,-a]]):[["M",e,n],["h",r],["v",i],["H",e],["Z"]]})(f),h):"line"===c?d=np((t=>{const{x1:e,y1:n,x2:r,y2:i}=t;return[["M",e,n],["L",r,i]]})(f),h):"glyph"===c&&(d=a?t.getAttribute("d"):t.d),!!Jh(d)&&(l.setAttribute("d",d),e&&a&&(t.before(l,t),t.remove()),l)},op=t=>{const e=[];let n,r=-1;return t.forEach((t=>{"M"===t[0]?(n=[t],r+=1):n=[...n,t],e[r]=n})),e},ap=t=>{if(tp(t))return[...t];const e=Xd(t);let n=0,r=0,i=0,o=0;return e.map((t=>{const e=t.slice(1).map(Number),[a]=t,s=a.toLowerCase();if("M"===a)return[n,r]=e,i=n,o=r,["M",n,r];let l=[];if(a!==s)if("a"===s)l=[s,e[0],e[1],e[2],e[3],e[4],e[5]-n,e[6]-r];else if("v"===s)l=[s,e[0]-r];else if("h"===s)l=[s,e[0]-n];else{l=[s,...e.map(((t,e)=>t-(e%2?r:n)))]}else"m"===a&&(i=e[0]+n,o=e[1]+r),l=[s,...e];const c=l.length;return"z"===s?(n=i,r=o):"h"===s?n+=l[1]:"v"===s?r+=l[1]:(n+=l[c-2],r+=l[c-1]),l}))},sp=(t,e,n,r)=>{const[i]=t,o=t=>Math.round(1e4*t)/1e4,a=t.slice(1).map((t=>+t)),s=e.slice(1).map((t=>+t)),{x1:l,y1:c,x2:u,y2:f,x:d,y:h}=n;let p=t;const[m,g]=s.slice(-2);if("TQ".includes(i)||(n.qx=null,n.qy=null),["V","H","S","T","Z"].includes(i))p=[i,...a];else if("L"===i)o(d)===o(m)?p=["V",g]:o(h)===o(g)&&(p=["H",m]);else if("C"===i){const[t,e]=s;"CS".includes(r)&&(o(t)===o(2*l-u)&&o(e)===o(2*c-f)||o(l)===o(2*u-d)&&o(c)===o(2*f-h))&&(p=["S",...s.slice(-4)]),n.x1=t,n.y1=e}else if("Q"===i){const[t,e]=s;n.qx=t,n.qy=e,"QT".includes(r)&&(o(t)===o(2*l-u)&&o(e)===o(2*c-f)||o(l)===o(2*u-d)&&o(c)===o(2*f-h))&&(p=["T",...s.slice(-2)])}return p},lp=(t,e)=>{const n=xh(t),r=_h(n),i={...$h},o=[],a=n.length;let s="",l="",c=0,u=0,f=0,d=0;for(let t=0;t<a;t+=1){[s]=n[t],o[t]=s,t&&(l=o[t-1]),n[t]=sp(n[t],r[t],i,l);const e=n[t],a=e.length;switch(i.x1=+e[a-2],i.y1=+e[a-1],i.x2=+e[a-4]||i.x1,i.y2=+e[a-3]||i.y1,s){case"Z":c=f,u=d;break;case"H":[,c]=e;break;case"V":[,u]=e;break;default:[c,u]=e.slice(-2).map(Number),"M"===s&&(f=c,d=u)}i.x=c,i.y=u}const h=ep(n,e),p=ep(ap(n),e);return h.map(((t,e)=>e?t.join("").length<p[e].join("").length?t:p[e]:t))},cp=t=>{const e=t.slice(1).map(((e,n,r)=>n?[...r[n-1].slice(-2),...e.slice(1)]:[...t[0].slice(1),...e.slice(1)])).map((t=>t.map(((e,n)=>t[t.length-n-2*(1-n%2)])))).reverse();return[["M",...e[0].slice(0,2)],...e.map((t=>["C",...t.slice(2)]))]},up=t=>{const e=xh(t),n="Z"===e.slice(-1)[0][0],r=_h(e).map(((t,n)=>{const[r,i]=t.slice(-2).map(Number);return{seg:e[n],n:t,c:e[n][0],x:r,y:i}})).map(((t,e,r)=>{const i=t.seg,o=t.n,a=e&&r[e-1],s=r[e+1],l=t.c,c=r.length,u=e?r[e-1].x:r[c-1].x,f=e?r[e-1].y:r[c-1].y;let d=[];switch(l){case"M":d=n?["Z"]:[l,u,f];break;case"A":d=[l,...i.slice(1,-3),1===i[5]?0:1,u,f];break;case"C":d=s&&"S"===s.c?["S",i[1],i[2],u,f]:[l,i[3],i[4],i[1],i[2],u,f];break;case"S":d=!a||!"CS".includes(a.c)||s&&"S"===s.c?[l,o[1],o[2],u,f]:["C",o[3],o[4],o[1],o[2],u,f];break;case"Q":d=s&&"T"===s.c?["T",u,f]:[l,...i.slice(1,-2),u,f];break;case"T":d=!a||!"QT".includes(a.c)||s&&"T"===s.c?[l,u,f]:["Q",o[1],o[2],u,f];break;case"Z":d=["M",u,f];break;case"H":d=[l,u];break;case"V":d=[l,f];break;default:d=[l,...i.slice(1,-2),u,f]}return d}));return n?r.reverse():[r[0],...r.slice(1).reverse()]},fp=(t,e,n)=>{const[r,i,o]=n,[a,s,l]=((t,e)=>{let n=vh.Translate(...e.slice(0,-1));return[,,,n.m44]=e,n=t.multiply(n),[n.m41,n.m42,n.m43,n.m44]})(t,[...e,0,1]),c=s-i,u=l-o;return[(a-r)*(Math.abs(o)/Math.abs(u)||1)+r,c*(Math.abs(o)/Math.abs(u)||1)+i]},dp=(t,e)=>{let n,r,i,o,a,s,l=0,c=0;const u=xh(t),f=e&&Object.keys(e);if(!e||f&&!f.length)return[...u];const d=_h(u);if(!e.origin){const{origin:t}=Pd;Object.assign(e,{origin:t})}const h=(t=>{let e=new vh;const{origin:n}=t,[r,i]=n,{translate:o}=t,{rotate:a}=t,{skew:s}=t,{scale:l}=t;return Array.isArray(o)&&o.length>=2&&o.every((t=>!Number.isNaN(+t)))&&o.some((t=>0!==t))?e=e.translate(...o):"number"==typeof o&&!Number.isNaN(o)&&(e=e.translate(o)),(a||s||l)&&(e=e.translate(r,i),Array.isArray(a)&&a.length>=2&&a.every((t=>!Number.isNaN(+t)))&&a.some((t=>0!==t))?e=e.rotate(...a):"number"==typeof a&&!Number.isNaN(a)&&(e=e.rotate(a)),Array.isArray(s)&&2===s.length&&s.every((t=>!Number.isNaN(+t)))&&s.some((t=>0!==t))?(e=s[0]?e.skewX(s[0]):e,e=s[1]?e.skewY(s[1]):e):"number"==typeof s&&!Number.isNaN(s)&&(e=e.skewX(s)),Array.isArray(l)&&l.length>=2&&l.every((t=>!Number.isNaN(+t)))&&l.some((t=>1!==t))?e=e.scale(...l):"number"==typeof l&&!Number.isNaN(l)&&(e=e.scale(l)),e=e.translate(-r,-i)),e})(e),{origin:p}=e,m={...$h};let g=[],v=0,y="",x=[];const b=[];if(!h.isIdentity){for(n=0,i=u.length;n<i;n+=1){g=u[n],u[n]&&([y]=g),b[n]=y,"A"===y&&(g=qh(d[n],m),u[n]=qh(d[n],m),Ph(u,b,n),d[n]=qh(d[n],m),Ph(d,b,n),i=Math.max(u.length,d.length)),g=d[n],v=g.length,m.x1=+g[v-2],m.y1=+g[v-1],m.x2=+g[v-4]||m.x1,m.y2=+g[v-3]||m.y1;const t={s:u[n],c:u[n][0],x:m.x1,y:m.y1};x=[...x,t]}return x.map((t=>{if(y=t.c,g=t.s,"L"===y||"H"===y||"V"===y)return[a,s]=fp(h,[t.x,t.y],p),l!==a&&c!==s?g=["L",a,s]:c===s?g=["H",a]:l===a&&(g=["V",s]),l=a,c=s,g;for(r=1,o=g.length;r<o;r+=2)[l,c]=fp(h,[+g[r],+g[r+1]],p),g[r]=l,g[r+1]=c;return g}))}return[...u]},hp=t=>{const e=t.slice(0,2),n=t.slice(2,4),r=t.slice(4,6),i=t.slice(6,8),o=kh(e,n,.5),a=kh(n,r,.5),s=kh(r,i,.5),l=kh(o,a,.5),c=kh(a,s,.5),u=kh(l,c,.5);return[["C",...o,...l,...u],["C",...c,...s,...i]]};class pp{static CSSMatrix=vh;static getPathBBox=Lh;static getPathArea=Hh;static getTotalLength=Yh;static getDrawDirection=Vh;static getPointAtLength=Bh;static pathLengthFactory=Eh;static getPropertiesAtLength=Wh;static getPropertiesAtPoint=Zh;static polygonLength=Jd;static polygonArea=Kd;static getClosestPoint=Gh;static getSegmentOfPoint=Xh;static getSegmentAtLength=Kh;static isPointInStroke=Qh;static isValidPath=Jh;static isPathArray=Gd;static isAbsoluteArray=yh;static isRelativeArray=tp;static isCurveArray=jh;static isNormalizedArray=wh;static shapeToPath=ip;static parsePathString=Xd;static roundPath=ep;static splitPath=op;static splitCubic=hp;static optimizePath=lp;static reverseCurve=cp;static reversePath=up;static normalizePath=_h;static transformPath=dp;static pathToAbsolute=xh;static pathToRelative=ap;static pathToCurve=Uh;static pathToString=np;constructor(t,e){const n=e||{},r=typeof t>"u";if(r||!t.length)throw TypeError(`${jd}: "pathValue" is ${r?"undefined":"empty"}`);const i=Xd(t);this.segments=i;const{width:o,height:a,cx:s,cy:l,cz:c}=this.getBBox(),{round:u,origin:f}=n;let d,h;if("auto"===u){const t=`${Math.floor(Math.max(o,a))}`.length;d=t>=4?0:4-t}else d=Number.isInteger(u)||"off"===u?u:Pd.round;if(Array.isArray(f)&&f.length>=2){const[t,e,n]=f.map(Number);h=[Number.isNaN(t)?s:t,Number.isNaN(e)?l:e,Number.isNaN(n)?c:n]}else h=[s,l,c];return this.round=d,this.origin=h,this}getBBox(){return Lh(this.segments)}getTotalLength(){return Yh(this.segments)}getPointAtLength(t){return Bh(this.segments,t)}toAbsolute(){const{segments:t}=this;return this.segments=xh(t),this}toRelative(){const{segments:t}=this;return this.segments=ap(t),this}toCurve(){const{segments:t}=this;return this.segments=Uh(t),this}reverse(t){this.toAbsolute();const{segments:e}=this,n=op(e),r=n.length>1&&n,i=r?[...r].map(((e,n)=>t?n?up(e):[...e]:up(e))):[...e];let o=[];return o=r?i.flat(1):t?e:up(e),this.segments=[...o],this}normalize(){const{segments:t}=this;return this.segments=_h(t),this}optimize(){const{segments:t}=this;return this.segments=lp(t,this.round),this}transform(t){if(!t||"object"!=typeof t||"object"==typeof t&&!["translate","rotate","skew","scale"].some((e=>e in t)))return this;const{segments:e,origin:[n,r,i]}=this,o={};for(const[e,n]of Object.entries(t))"skew"===e&&Array.isArray(n)||("rotate"===e||"translate"===e||"origin"===e||"scale"===e)&&Array.isArray(n)?o[e]=n.map(Number):"origin"!==e&&"number"==typeof Number(n)&&(o[e]=Number(n));const{origin:a}=o;if(Array.isArray(a)&&a.length>=2){const[t,e,s]=a.map(Number);o.origin=[Number.isNaN(t)?n:t,Number.isNaN(e)?r:e,s||i]}else o.origin=[n,r,i];return this.segments=dp(e,o),this}flipX(){return this.transform({rotate:[0,180,0]}),this}flipY(){return this.transform({rotate:[180,0,0]}),this}toString(){return np(this.segments,this.round)}}const mp=new Map([["MSNBC",0],["CNN",1],["Other Cable",2],["Hard Broadcast News",3],["Soft Broadcast News",4],["Spanish News",5],["FOX",6],["Newsmax",7]]),gp="àáäâèéëêìíïîòóöôùúüûñç·/_,:;";function vp(t){let e=t.replace(/^\s+|\s+$/g,"");e=e.toLowerCase();for(let t=0,n=gp.length;t<n;t++)e=e.replace(new RegExp(gp.charAt(t),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(t));return String(e).replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function yp(t,e,n){const r=t.slice();return r[30]=e[n],r[32]=n,r}function xp(t,e,n){const r=t.slice();return r[30]=e[n],r[32]=n,r}function bp(t,e,n){const r=t.slice();return r[34]=e[n],r[32]=n,r}function wp(e){let n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=$p(bp(e,r,t));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=L()},m(t,e){for(let n=0;n<i.length;n+=1)i[n].m(t,e);N(t,n,e)},p(t,e){if(522&e[0]){let o;for(r=t[1],o=0;o<r.length;o+=1){const a=bp(t,r,o);i[o]?(i[o].p(a,e),kt(i[o],1)):(i[o]=$p(a),i[o].c(),kt(i[o],1),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i(t){for(let t=0;t<r.length;t+=1)kt(i[t])},o:t,d(t){S(i,t),t&&A(n)}}}function $p(e){let n,r,i,o,a,s,l,c,u,f;return{c(){n=z("path"),s=z("path"),O(n,"class",r="link linkTo-"+vp(e[34].to.node)+" linkFrom-"+vp(e[34].from.node)+" svelte-1p1qjvz"),O(n,"stroke-width",i=e[34].w),O(n,"d",o=e[34].pathString),O(s,"class",l="arrow arrowTo-"+vp(e[34].to.node)+" arrowFrom-"+vp(e[34].from.node)+" svelte-1p1qjvz"),O(s,"d",c=e[9]([e[34].start,e[34].midpoint,e[34].end])),O(s,"marker-end","url(#triangle)")},m(t,r){N(t,n,r),N(t,s,r),u||(f=P(n,"introend",e[18]),u=!0)},p(t,e){2&e[0]&&r!==(r="link linkTo-"+vp(t[34].to.node)+" linkFrom-"+vp(t[34].from.node)+" svelte-1p1qjvz")&&O(n,"class",r),2&e[0]&&i!==(i=t[34].w)&&O(n,"stroke-width",i),2&e[0]&&o!==(o=t[34].pathString)&&O(n,"d",o),2&e[0]&&l!==(l="arrow arrowTo-"+vp(t[34].to.node)+" arrowFrom-"+vp(t[34].from.node)+" svelte-1p1qjvz")&&O(s,"class",l),2&e[0]&&c!==(c=t[9]([t[34].start,t[34].midpoint,t[34].end]))&&O(s,"d",c)},i(t){a||ft((()=>{a=Nt(n,Ht,{duration:1e3,delay:210}),a.start()}))},o:t,d(t){t&&A(n),t&&A(s),u=!1,f()}}}function _p(e){let n,r,i=e[2].filter(Sp),o=[];for(let t=0;t<i.length;t+=1)o[t]=Mp(xp(e,i,t));let a=e[2].filter(Tp),s=[];for(let t=0;t<a.length;t+=1)s[t]=Np(yp(e,a,t));return{c(){n=z("g");for(let t=0;t<o.length;t+=1)o[t].c();r=L();for(let t=0;t<s.length;t+=1)s[t].c();O(n,"class","node-group")},m(t,e){N(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);k(n,r);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,e){if(3125&e[0]){let a;for(i=t[2].filter(Sp),a=0;a<i.length;a+=1){const s=xp(t,i,a);o[a]?(o[a].p(s,e),kt(o[a],1)):(o[a]=Mp(s),o[a].c(),kt(o[a],1),o[a].m(n,r))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}if(3125&e[0]){let r;for(a=t[2].filter(Tp),r=0;r<a.length;r+=1){const i=yp(t,a,r);s[r]?(s[r].p(i,e),kt(s[r],1)):(s[r]=Np(i),s[r].c(),kt(s[r],1),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},i(t){for(let t=0;t<i.length;t+=1)kt(o[t]);for(let t=0;t<a.length;t+=1)kt(s[t])},o:t,d(t){t&&A(n),S(o,t),S(s,t)}}}function kp(t){let e,n,r,i,o,a=Qu(t[0].get(t[30].archetype))+"";return{c(){e=z("text"),n=D(a),O(e,"class",r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-1p1qjvz"),O(e,"dx",i=t[30].r+3),O(e,"dy",o=5)},m(t,r){N(t,e,r),k(e,n)},p(t,o){5&o[0]&&a!==(a=Qu(t[0].get(t[30].archetype))+"")&&I(n,a),37&o[0]&&r!==(r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-1p1qjvz")&&O(e,"class",r),4&o[0]&&i!==(i=t[30].r+3)&&O(e,"dx",i)},d(t){t&&A(e)}}}function Mp(e){let n,r,i,a,s,l,c,u,f,d,h,p=e[30].archetype+"";function m(...t){return e[19](e[30],...t)}function g(...t){return e[20](e[30],...t)}let v=e[5]&&kp(e);return{c(){n=z("g"),r=z("circle"),l=z("text"),c=D(p),v&&v.c(),O(r,"class",i="node "+(e[4]?"active":"")+" svelte-1p1qjvz"),O(r,"r",a=e[30].r),O(l,"class","node-label svelte-1p1qjvz"),O(l,"dy",u=-(e[30].r+3)),O(n,"transform",f="translate("+e[30].x+", "+e[30].y+")")},m(t,e){N(t,n,e),k(n,r),k(n,l),k(l,c),v&&v.m(n,null),d||(h=[P(r,"mouseenter",m),P(r,"mouseleave",g)],d=!0)},p(t,o){e=t,16&o[0]&&i!==(i="node "+(e[4]?"active":"")+" svelte-1p1qjvz")&&O(r,"class",i),4&o[0]&&a!==(a=e[30].r)&&O(r,"r",a),4&o[0]&&p!==(p=e[30].archetype+"")&&I(c,p),4&o[0]&&u!==(u=-(e[30].r+3))&&O(l,"dy",u),e[5]?v?v.p(e,o):(v=kp(e),v.c(),v.m(n,null)):v&&(v.d(1),v=null),4&o[0]&&f!==(f="translate("+e[30].x+", "+e[30].y+")")&&O(n,"transform",f)},i(t){s||ft((()=>{s=Nt(r,Ut,{duration:1e3}),s.start()}))},o:t,d(t){t&&A(n),v&&v.d(),d=!1,o(h)}}}function Cp(t){let e,n,r,i,o=Qu(t[0].get(t[30].archetype))+"";return{c(){e=z("text"),n=D(o),O(e,"class",r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-1p1qjvz"),O(e,"dx",i=t[30].r+3)},m(t,r){N(t,e,r),k(e,n)},p(t,a){5&a[0]&&o!==(o=Qu(t[0].get(t[30].archetype))+"")&&I(n,o),37&a[0]&&r!==(r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-1p1qjvz")&&O(e,"class",r),4&a[0]&&i!==(i=t[30].r+3)&&O(e,"dx",i)},d(t){t&&A(e)}}}function Np(e){let n,r,i,a,s,l,c,u,f,d,h,p=e[30].archetype+"";function m(...t){return e[21](e[30],...t)}function g(...t){return e[22](e[30],...t)}let v=e[5]&&Cp(e);return{c(){n=z("g"),r=z("circle"),l=z("text"),c=D(p),v&&v.c(),O(r,"class",i="node "+(e[4]?"active":"")+" svelte-1p1qjvz"),O(r,"r",a=e[30].r),O(l,"class","node-label svelte-1p1qjvz"),O(l,"dy",u=e[30].r+18),O(n,"transform",f="translate("+e[30].x+", "+e[30].y+")")},m(t,e){N(t,n,e),k(n,r),k(n,l),k(l,c),v&&v.m(n,null),d||(h=[P(r,"mouseenter",m),P(r,"mouseleave",g)],d=!0)},p(t,o){e=t,16&o[0]&&i!==(i="node "+(e[4]?"active":"")+" svelte-1p1qjvz")&&O(r,"class",i),4&o[0]&&a!==(a=e[30].r)&&O(r,"r",a),4&o[0]&&p!==(p=e[30].archetype+"")&&I(c,p),4&o[0]&&u!==(u=e[30].r+18)&&O(l,"dy",u),e[5]?v?v.p(e,o):(v=Cp(e),v.c(),v.m(n,null)):v&&(v.d(1),v=null),4&o[0]&&f!==(f="translate("+e[30].x+", "+e[30].y+")")&&O(n,"transform",f)},i(t){s||ft((()=>{s=Nt(r,Ut,{duration:1e3}),s.start()}))},o:t,d(t){t&&A(n),v&&v.d(),d=!1,o(h)}}}function Ap(e){let n,r,i,o=e[6]&&wp(e),a=e[6]&&_p(e);return{c(){n=z("g"),o&&o.c(),r=E(),a&&a.c(),i=L(),O(n,"class","link-group"),O(n,"id","link-group")},m(t,e){N(t,n,e),o&&o.m(n,null),N(t,r,e),a&&a.m(t,e),N(t,i,e)},p(t,e){t[6]?o?(o.p(t,e),64&e[0]&&kt(o,1)):(o=wp(t),o.c(),kt(o,1),o.m(n,null)):o&&(o.d(1),o=null),t[6]?a?(a.p(t,e),64&e[0]&&kt(a,1)):(a=_p(t),a.c(),kt(a,1),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(t){kt(o),kt(a)},o:t,d(t){t&&A(n),o&&o.d(),t&&A(r),a&&a.d(t),t&&A(i)}}}const Sp=t=>"No or Minimal News"!==t.node,Tp=t=>"No or Minimal News"===t.node;function zp(t,e,n){let r,i,o,a,s,l;const{width:u,height:f}=it("LayerCake");c(t,u,(t=>n(17,l=t))),c(t,f,(t=>n(16,s=t)));let{nodes:d}=e,{links:h}=e,{flatLinks:p}=e,{netFlowMap:m}=e;const g=Hr().range([1,25]),v=Gr().range([5,25]);let y=[];const x=l/1.75,b=Math.acos((2*Math.pow(x,2)-Math.pow(l,2))/(2*Math.pow(x,2))),w=b/(d.length-1),$=b/2-w/2;let _,k;function M(t,e){if(t.moveTo(e.from.x,e.from.y),"No or Minimal News"===e.link.to){const n=e.from.x>l/2?l:0;t.quadraticCurveTo(n,s/1.5,e.to.x,e.to.y)}else 1===Math.abs(+e.link.to-+e.link.from)?t.lineTo(e.to.x,e.to.y):t.quadraticCurveTo(l/2,.01+Math.random()*s,e.to.x,e.to.y);return t}const C=jc().x((t=>t.x)).y((t=>t.y)).curve(Hc);function N(t,e){const r=vp(e.node),i=document.getElementById("link-group"),o=document.getElementsByClassName(`linkFrom-${r}`),s=document.getElementsByClassName(`arrowFrom-${r}`),l=document.getElementsByClassName(`linkTo-${r}`),c=document.getElementsByClassName(`arrowTo-${r}`),u=[];for(const t of o)t.classList.toggle("linkFrom"),u.push({selection:t});for(const t of l)t.classList.toggle("linkTo"),u.push({selection:t});for(const t of s)t.classList.toggle("arrowVisible"),u.push({selection:t});for(const t of c)t.classList.toggle("arrowVisible"),u.push({selection:t});for(const t of u)i.appendChild(t.selection);n(5,a=e.node)}function A(t,e){const r=vp(e.node),i=document.getElementsByClassName(`linkFrom-${r}`),o=document.getElementsByClassName(`arrowFrom-${r}`),s=document.getElementsByClassName(`linkTo-${r}`),l=document.getElementsByClassName(`arrowTo-${r}`);for(const t of i)t.classList.toggle("linkFrom");for(const t of s)t.classList.toggle("linkTo");for(const t of o)t.classList.toggle("arrowVisible");for(const t of l)t.classList.toggle("arrowVisible");n(5,a=!1)}nt((()=>{v.domain(Ze(d,(t=>t.value))),g.domain(Ze(h,(t=>t.value))),n(2,_=d.map((t=>{const e=mp.get(t.node);let n,r;const i=v(t.value);return"No or Minimal News"!==t.node?(n=l/2+x*Math.cos(w*e-Math.PI/2-$),r=(1+Math.sin(w*e-Math.PI/2-$))*x):(n=l/2,r=s-i),Object.assign(Object.assign({},t),{x:n,y:r,r:i})}))),n(15,k=new Map(_.map((t=>[t.node,t])))),n(1,y=h.map(((t,e)=>{const n=k.get(t.from),r=k.get(t.to),i=M(uc(),{from:n,to:r,link:t}).toString(),o=new pp(i),a=+o.getTotalLength().toPrecision(2),s=o.getPointAtLength(.48*a),l=o.getPointAtLength(.5*a),c=o.getPointAtLength(.52*a);return Object.assign(Object.assign({},t),{to:r,from:n,pathString:i,pathInstance:o,totalLength:a,start:s,midpoint:l,end:c,w:g(t.value)})}))),n(6,r=!0)}));return t.$$set=t=>{"nodes"in t&&n(12,d=t.nodes),"links"in t&&n(13,h=t.links),"flatLinks"in t&&n(14,p=t.flatLinks),"netFlowMap"in t&&n(0,m=t.netFlowMap)},t.$$.update=()=>{241668&t.$$.dirty[0]&&(v.domain(Ze(d,(t=>t.value))),g.domain(Ze(h,(t=>t.value))),n(2,_=d.map((t=>{const e=mp.get(t.node);let n,r;const i=v(t.value);return"No or Minimal News"!==t.node?(n=l/2+x*Math.cos(w*e-Math.PI/2-$),r=(1+Math.sin(w*e-Math.PI/2-$))*x):(n=l/2,r=s-i),Object.assign(Object.assign({},t),{x:n,y:r,r:i})}))),n(15,k=new Map(_.map((t=>[t.node,t])))),n(1,y=h.map(((t,e)=>{const n=k.get(t.from),r=k.get(t.to),i=M(uc(),{from:n,to:r,link:t}).toString(),o=new pp(i),a=+o.getTotalLength().toPrecision(2),s=o.getPointAtLength(.48*a),l=o.getPointAtLength(.5*a),c=o.getPointAtLength(.52*a);return Object.assign(Object.assign({},t),{to:r,from:n,pathString:i,pathInstance:o,totalLength:a,start:s,midpoint:l,end:c,w:g(t.value)})})))),10&t.$$.dirty[0]&&y.length>0&&y.length===i&&n(4,o=!0)},n(6,r=!1),n(3,i=0),n(4,o=!1),n(5,a=!1),[m,y,_,i,o,a,r,u,f,C,N,A,d,h,p,k,s,l,()=>n(3,i+=1),(t,e)=>N(0,t),(t,e)=>A(0,t),(t,e)=>N(0,t),(t,e)=>A(0,t)]}class Dp extends Rt{constructor(t){super(),jt(this,t,zp,Ap,s,{nodes:12,links:13,flatLinks:14,netFlowMap:0},null,[-1,-1])}}function Ep(t){let e,n;return e=new Dp({props:{nodes:t[2],links:t[3],flatLinks:t[4],netFlowMap:t[9]}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.nodes=t[2]),8&n&&(r.links=t[3]),16&n&&(r.flatLinks=t[4]),512&n&&(r.netFlowMap=t[9]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Lp(t){let e,n,r,i,o,a,s=t[10]&&Ep(t);return{c(){e=z("defs"),n=z("marker"),r=z("path"),i=E(),s&&s.c(),o=L(),O(r,"d","M 0 0 L 10 5 L 0 10 z"),O(r,"fill","black"),O(n,"id","triangle"),O(n,"viewBox","0 0 10 10"),O(n,"refX","1"),O(n,"refY","5"),O(n,"markerUnits","userSpaceOnUse"),O(n,"markerWidth","6"),O(n,"markerHeight","6"),O(n,"orient","auto")},m(t,l){N(t,e,l),k(e,n),k(n,r),N(t,i,l),s&&s.m(t,l),N(t,o,l),a=!0},p(t,e){t[10]?s?(s.p(t,e),1024&e&&kt(s,1)):(s=Ep(t),s.c(),kt(s,1),s.m(o.parentNode,o)):s&&($t(),Mt(s,1,1,(()=>{s=null})),_t())},i(t){a||(kt(s),a=!0)},o(t){Mt(s),a=!1},d(t){t&&A(e),t&&A(i),s&&s.d(t),t&&A(o)}}}function Pp(t){let e,n;return e=new es({props:{$$slots:{default:[Lp]},$$scope:{ctx:t}}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};5660&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function jp(t){let e,n;return e=new Cu({props:{caption:t[1],url:t[5],type:12===t[7]?"split-cols":"single-cols"}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),32&n&&(r.url=t[5]),128&n&&(r.type=12===t[7]?"split-cols":"single-cols"),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Rp(t){let e,n,r,i,o,a;n=new Ha({props:{padding:t[10]?t[0]:{},$$slots:{default:[Pp]},$$scope:{ctx:t}}});let s=t[6]&&jp(t);return{c(){e=T("div"),Dt(n.$$.fragment),i=E(),s&&s.c(),o=L(),O(e,"class",r="chart flow-chart "+t[8])},m(t,r){N(t,e,r),Et(n,e,null),N(t,i,r),s&&s.m(t,r),N(t,o,r),a=!0},p(t,[i]){const l={};1025&i&&(l.padding=t[10]?t[0]:{}),5660&i&&(l.$$scope={dirty:i,ctx:t}),n.$set(l),(!a||256&i&&r!==(r="chart flow-chart "+t[8]))&&O(e,"class",r),t[6]?s?(s.p(t,i),64&i&&kt(s,1)):(s=jp(t),s.c(),kt(s,1),s.m(o.parentNode,o)):s&&($t(),Mt(s,1,1,(()=>{s=null})),_t())},i(t){a||(kt(n.$$.fragment,t),kt(s),a=!0)},o(t){Mt(n.$$.fragment,t),Mt(s),a=!1},d(t){t&&A(e),Lt(n),t&&A(i),s&&s.d(t),t&&A(o)}}}function Op(t,e,n){let r,i,{margins:o={top:50,right:0,bottom:50,left:0}}=e,{caption:a=""}=e,{nodes:s}=e,{links:l}=e,{flatLinks:c}=e,{url:u=""}=e,{includeCaption:f=!0}=e,{spanCol:d}=e,{customClass:h=""}=e;return nt((()=>{n(10,r=!0)})),t.$$set=t=>{"margins"in t&&n(0,o=t.margins),"caption"in t&&n(1,a=t.caption),"nodes"in t&&n(2,s=t.nodes),"links"in t&&n(3,l=t.links),"flatLinks"in t&&n(4,c=t.flatLinks),"url"in t&&n(5,u=t.url),"includeCaption"in t&&n(6,f=t.includeCaption),"spanCol"in t&&n(7,d=t.spanCol),"customClass"in t&&n(8,h=t.customClass)},t.$$.update=()=>{if(t.$$.dirty,12&t.$$.dirty){const t=nn(l,(t=>hn(t,(t=>t.value))),(t=>t.to)),e=nn(l,(t=>hn(t,(t=>t.value))),(t=>t.from));n(9,i=new Map(s.map((n=>[n.archetype,(t.has(n.archetype)?t.get(n.archetype):0)-(e.has(n.archetype)?e.get(n.archetype):0)]))))}},n(10,r=!1),[o,a,s,l,c,u,f,d,h,i,r]}class Ip extends Rt{constructor(t){super(),jt(this,t,Op,Rp,s,{margins:0,caption:1,nodes:2,links:3,flatLinks:4,url:5,includeCaption:6,spanCol:7,customClass:8})}}function Fp(t,e,n){const r=t.slice();return r[27]=e[n],r[29]=n,r}function qp(t){let e,n,r,i,o,a,s,l,c,u,f,d,h=t[27].value.title+"";function p(e){t[20](e)}let m={id:"audience",title:Gt.controls["node-size"].title,labels:["Audience","Consumption"],info:Gt.controls["node-size"].description};void 0!==t[8]&&(m.checked=t[8]),a=new ff({props:m}),at.push((()=>zt(a,"checked",p)));let g=t[9]&&t[5]&&Hp(t);const v=[Vp,Yp],y=[];function x(t,e){return t[9]&&t[5]?0:1}return u=x(t),f=y[u]=v[u](t),{c(){e=T("div"),n=T("h3"),r=D(h),i=E(),o=T("div"),Dt(a.$$.fragment),l=E(),g&&g.c(),c=E(),f.c(),O(n,"class","chart-title svelte-1f4zapx"),O(o,"class","controls svelte-1f4zapx"),O(e,"class","title-container svelte-1f4zapx")},m(t,s){N(t,e,s),k(e,n),k(n,r),k(e,i),k(e,o),Et(a,o,null),k(o,l),g&&g.m(o,null),k(e,c),y[u].m(e,null),d=!0},p(t,n){(!d||4&n)&&h!==(h=t[27].value.title+"")&&I(r,h);const i={};!s&&256&n&&(s=!0,i.checked=t[8],dt((()=>s=!1))),a.$set(i),t[9]&&t[5]?g?(g.p(t,n),544&n&&kt(g,1)):(g=Hp(t),g.c(),kt(g,1),g.m(o,null)):g&&($t(),Mt(g,1,1,(()=>{g=null})),_t());let l=u;u=x(t),u===l?y[u].p(t,n):($t(),Mt(y[l],1,1,(()=>{y[l]=null})),_t(),f=y[u],f?f.p(t,n):(f=y[u]=v[u](t),f.c()),kt(f,1),f.m(e,null))},i(t){d||(kt(a.$$.fragment,t),kt(g),kt(f),d=!0)},o(t){Mt(a.$$.fragment,t),Mt(g),Mt(f),d=!1},d(t){t&&A(e),Lt(a),g&&g.d(),y[u].d()}}}function Up(e){let n,r,i=e[27].value+"";return{c(){n=T("p"),r=D(i),O(n,"class","copy svelte-1f4zapx")},m(t,e){N(t,n,e),k(n,r)},p(t,e){4&e&&i!==(i=t[27].value+"")&&I(r,i)},i:t,o:t,d(t){t&&A(n)}}}function Hp(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,m=Gu(t[13](t[7]))+"",g=Gu(t[13](t[6]))+"";function v(e){t[21](e)}function y(e){t[22](e)}let x={};return void 0!==t[7]&&(x.start=t[7]),void 0!==t[6]&&(x.end=t[6]),i=new Vf({props:x}),at.push((()=>zt(i,"start",v))),at.push((()=>zt(i,"end",y))),{c(){e=T("div"),n=T("div"),n.textContent="Period",r=E(),Dt(i.$$.fragment),s=E(),l=T("div"),c=T("div"),u=D(m),f=E(),d=T("div"),h=D(g),O(n,"class","control-title svelte-1f4zapx"),O(c,"class","label svelte-1f4zapx"),O(d,"class","label svelte-1f4zapx"),O(l,"class","labels svelte-1f4zapx"),O(e,"id","period"),O(e,"class","control control-range svelte-1f4zapx")},m(t,o){N(t,e,o),k(e,n),k(e,r),Et(i,e,null),k(e,s),k(e,l),k(l,c),k(c,u),k(l,f),k(l,d),k(d,h),p=!0},p(t,e){const n={};!o&&128&e&&(o=!0,n.start=t[7],dt((()=>o=!1))),!a&&64&e&&(a=!0,n.end=t[6],dt((()=>a=!1))),i.$set(n),(!p||128&e)&&m!==(m=Gu(t[13](t[7]))+"")&&I(u,m),(!p||64&e)&&g!==(g=Gu(t[13](t[6]))+"")&&I(h,g)},i(t){p||(kt(i.$$.fragment,t),p=!0)},o(t){Mt(i.$$.fragment,t),p=!1},d(t){t&&A(e),Lt(i)}}}function Yp(e){let n,r;return n=new Sf({}),{c(){Dt(n.$$.fragment)},m(t,e){Et(n,t,e),r=!0},p:t,i(t){r||(kt(n.$$.fragment,t),r=!0)},o(t){Mt(n.$$.fragment,t),r=!1},d(t){Lt(n,t)}}}function Vp(t){let e,n;return e=new Ip({props:{nodes:t[10],links:t[12],flatLinks:t[11],spanCol:12,url:Zp,caption:t[3].captions,customClass:"chart-large"}}),{c(){Dt(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};1024&n&&(r.nodes=t[10]),4096&n&&(r.links=t[12]),2048&n&&(r.flatLinks=t[11]),8&n&&(r.caption=t[3].captions),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Bp(t){let e,n,r,i;const o=[Up,qp],a=[];function s(t,e){return"text"===t[27].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function Wp(t){let e,n,r,i,s,l,c,u,f,d,h=t[4].value+"",p=t[2],m=[];for(let e=0;e<p.length;e+=1)m[e]=Bp(Fp(t,p,e));const g=t=>Mt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=T("div"),n=T("h1"),r=D(h),i=E();for(let t=0;t<m.length;t+=1)m[t].c();s=E(),l=T("div"),l.textContent="GO BACK",O(n,"class","section-title svelte-1f4zapx"),O(l,"class","close-button bottom svelte-1f4zapx"),O(e,"class","section svelte-1f4zapx")},m(o,a){N(o,e,a),k(e,n),k(n,r),k(e,i);for(let t=0;t<m.length;t+=1)m[t].m(e,null);k(e,s),k(e,l),u=!0,f||(d=[P(l,"click",t[23]),v(c=re.call(null,e,{once:t[1]})),P(e,"enter",t[24])],f=!0)},p(t,[n]){if((!u||16&n)&&h!==(h=t[4].value+"")&&I(r,h),16364&n){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=Fp(t,p,r);m[r]?(m[r].p(i,n),kt(m[r],1)):(m[r]=Bp(i),m[r].c(),kt(m[r],1),m[r].m(e,s))}for($t(),r=p.length;r<m.length;r+=1)g(r);_t()}c&&a(c.update)&&2&n&&c.update.call(null,{once:t[1]})},i(t){if(!u){for(let t=0;t<p.length;t+=1)kt(m[t]);u=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)Mt(m[t]);u=!1},d(t){t&&A(e),S(m,t),f=!1,o(d)}}}let Zp="assets/data/EchoCh-nodes.csv";function Gp(t,e,n){let r,i,o,a,s,l,c,u,f,d,h,p,m,g=!1,{once:v}=e,{body:y}=e,{refs:x}=e,{chart:b}=e,{title:w}=e,{modal:$}=e;const _=Hr(),k=t=>{const e=new Date(_(t));return e.setDate(1),e.setHours(0,0,0),e.setMilliseconds(0),+e};nt((async()=>{const t=await qe(Zp,je);u=t.map((t=>Object.assign(Object.assign({},t),{node:t.archetype,date:new Date(t.year,t.month,1)}))),n(15,f=tn(u,(t=>+t.date),(t=>t.variable)));const[e,i]=Ze(Array.from(f).map((t=>t[0])));_.range([e,i]);const o=await qe("assets/data/EchoCh-links.csv",je);n(11,h=o.map((t=>Object.assign(Object.assign({},t),{start_date:new Date(t["start year"],t["start month"],1),end_date:new Date(t["end year"],t["end month"],1)}))).reduce(((t,e)=>{const n=Object.entries(e),r=n.filter((t=>!["start year","end year","start month","end month","from","start_date","end_date"].includes(t[0])&&null!==t[1])),i=n.filter((t=>"from"===t[0]))[0][1];return r.forEach((n=>{t.push({from:i,to:n[0],value:n[1],start_date:e.start_date,end_date:e.end_date})})),t}),[])),n(16,p=tn(h,(t=>+t.start_date),(t=>+t.end_date))),n(5,r=!0),n(18,l=k(0)),n(17,c=k(1))}));return t.$$set=t=>{"once"in t&&n(1,v=t.once),"body"in t&&n(2,y=t.body),"refs"in t&&n(14,x=t.refs),"chart"in t&&n(3,b=t.chart),"title"in t&&n(4,w=t.title),"modal"in t&&n(0,$=t.modal)},t.$$.update=()=>{256&t.$$.dirty&&n(19,o=i?"sizes":"mins_p_person"),128&t.$$.dirty&&n(18,l=k(a)),64&t.$$.dirty&&n(17,c=k(s)),1015840&t.$$.dirty&&r&&(n(10,d=f.get(c).get(o)),n(12,m=p.get(l).get(c)))},n(5,r=!1),n(8,i=!0),n(7,a=0),n(6,s=1),[$,v,y,b,w,r,s,a,i,g,d,h,m,_,x,f,p,c,l,o,function(t){i=t,n(8,i)},function(t){a=t,n(7,a)},function(t){s=t,n(6,s)},()=>n(0,$=!1),()=>n(9,g=!0)]}class Xp extends Rt{constructor(t){super(),jt(this,t,Gp,Wp,s,{once:1,body:2,refs:14,chart:3,title:4,modal:0})}}function Kp(e){let n,r,i,o,a,s,l,c,u=e[2].title+"";return{c(){n=T("div"),r=T("div"),i=E(),o=T("h4"),a=D(u),O(r,"class","option-img svelte-1tipbh4"),F(r,"background-image",'url("'+e[2].image+'")'),O(n,"class",s="option section-"+(e[1]+1)+" svelte-1tipbh4")},m(t,s){N(t,n,s),k(n,r),k(n,i),k(n,o),k(o,a),l||(c=P(n,"click",e[3]),l=!0)},p(t,[e]){4&e&&F(r,"background-image",'url("'+t[2].image+'")'),4&e&&u!==(u=t[2].title+"")&&I(a,u),2&e&&s!==(s="option section-"+(t[1]+1)+" svelte-1tipbh4")&&O(n,"class",s)},i:t,o:t,d(t){t&&A(n),l=!1,c()}}}function Qp(t,e,n){let{index:r}=e,{comp:i}=e,{modal:o}=e;return t.$$set=t=>{"index"in t&&n(1,r=t.index),"comp"in t&&n(2,i=t.comp),"modal"in t&&n(0,o=t.modal)},[o,r,i,()=>n(0,o=i)]}class Jp extends Rt{constructor(t){super(),jt(this,t,Qp,Kp,s,{index:1,comp:2,modal:0})}}function tm(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function em(t){let e,n,r;function i(e){t[4](e)}let o={comp:t[7],index:t[9]};return void 0!==t[0]&&(o.modal=t[0]),e=new Jp({props:o}),at.push((()=>zt(e,"modal",i))),{c(){Dt(e.$$.fragment)},m(t,n){Et(e,t,n),r=!0},p(t,r){const i={};!n&&1&r&&(n=!0,i.modal=t[0],dt((()=>n=!1))),e.$set(i)},i(t){r||(kt(e.$$.fragment,t),r=!0)},o(t){Mt(e.$$.fragment,t),r=!1},d(t){Lt(e,t)}}}function nm(t){let e,n,r,i,o,a,s=t[2],l=[];for(let e=0;e<s.length;e+=1)l[e]=em(tm(t,s,e));const c=t=>Mt(l[t],1,1,(()=>{l[t]=null}));return{c(){e=T("div");for(let t=0;t<l.length;t+=1)l[t].c();n=E(),r=T("div"),r.textContent="Read the methodology",O(r,"class","methodology svelte-1wuvzx2"),O(e,"class","menu-wrapper svelte-1wuvzx2")},m(s,c){N(s,e,c);for(let t=0;t<l.length;t+=1)l[t].m(e,null);k(e,n),k(e,r),i=!0,o||(a=P(r,"click",t[5]),o=!0)},p(t,[r]){if(5&r){let i;for(s=t[2],i=0;i<s.length;i+=1){const o=tm(t,s,i);l[i]?(l[i].p(o,r),kt(l[i],1)):(l[i]=em(o),l[i].c(),kt(l[i],1),l[i].m(e,n))}for($t(),i=s.length;i<l.length;i+=1)c(i);_t()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)kt(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)Mt(l[t]);i=!1},d(t){t&&A(e),S(l,t),o=!1,a()}}}function rm(t,e,n){const r=new Map([["overall-news-consumption",{renderer:Ld}],["echo-chambers-part1",{renderer:Ff}],["echo-chambers-part2",{renderer:od}],["changing-tv-audiences",{renderer:Xp}]]),i={tag:"methodology",renderer:ce};let{tiles:o}=e;const a=o[0].value.map((t=>({title:t.title,image:"https://dummyimage.com/300/000000/fec679",tag:t.tag,renderer:r.get(t.tag).renderer})));let{modal:s}=e;return t.$$set=t=>{"tiles"in t&&n(3,o=t.tiles),"modal"in t&&n(0,s=t.modal)},[s,i,a,o,function(t){s=t,n(0,s)},()=>n(0,s=i)]}class im extends Rt{constructor(t){super(),jt(this,t,rm,nm,s,{tiles:3,modal:0})}}function om(t){let e,n,r,i,o,a,s,l,c,u,f,d;function h(e){t[1](e)}r=new Jt({props:{title:Gt.title}});let p={content:Gt.intro.filter(am)};function m(e){t[2](e)}void 0!==t[0]&&(p.modal=t[0]),o=new ye({props:p}),at.push((()=>zt(o,"modal",h))),l=new Ne({props:{authors:Xt}});let g={tiles:Gt.intro.filter(sm)};return void 0!==t[0]&&(g.modal=t[0]),u=new im({props:g}),at.push((()=>zt(u,"modal",m))),{c(){e=T("section"),n=T("div"),Dt(r.$$.fragment),i=E(),Dt(o.$$.fragment),s=E(),Dt(l.$$.fragment),c=E(),Dt(u.$$.fragment),O(n,"class","header-wrapper main-column svelte-a1x4q6"),O(e,"class","svelte-a1x4q6")},m(t,a){N(t,e,a),k(e,n),Et(r,n,null),k(n,i),Et(o,n,null),k(n,s),Et(l,n,null),k(e,c),Et(u,e,null),d=!0},p(t,[e]){const n={};!a&&1&e&&(a=!0,n.modal=t[0],dt((()=>a=!1))),o.$set(n);const r={};!f&&1&e&&(f=!0,r.modal=t[0],dt((()=>f=!1))),u.$set(r)},i(t){d||(kt(r.$$.fragment,t),kt(o.$$.fragment,t),kt(l.$$.fragment,t),kt(u.$$.fragment,t),d=!0)},o(t){Mt(r.$$.fragment,t),Mt(o.$$.fragment,t),Mt(l.$$.fragment,t),Mt(u.$$.fragment,t),d=!1},d(t){t&&A(e),Lt(r),Lt(o),Lt(l),Lt(u)}}}const am=t=>"tiles"!==t.type,sm=t=>"tiles"===t.type;function lm(t,e,n){let{modal:r}=e;return t.$$set=t=>{"modal"in t&&n(0,r=t.modal)},[r,function(t){r=t,n(0,r)},function(t){r=t,n(0,r)}]}class cm extends Rt{constructor(t){super(),jt(this,t,lm,om,s,{modal:0})}}function um(t){let e,n,r,i,o,a,s,l,c,u,f;function d(e){t[8](e)}let h={once:!0,title:t[3],body:t[2],refs:[],chart:t[1]};return void 0!==t[0]&&(h.modal=t[0]),r=new t[6]({props:h}),at.push((()=>zt(r,"modal",d))),{c(){e=T("div"),n=T("div"),Dt(r.$$.fragment),o=E(),a=T("div"),a.textContent="GO BACK",O(a,"class","close-button svelte-18zilnr"),O(n,"class","modal svelte-18zilnr"),O(e,"class","modal-wrapper svelte-18zilnr"),F(e,"--top",t[5]+fm+"px"),F(e,"--height",t[4]+"px"),F(e,"--offset",fm/2+"px")},m(i,s){N(i,e,s),k(e,n),Et(r,n,null),k(n,o),k(n,a),c=!0,u||(f=P(a,"click",t[9]),u=!0)},p(t,[n]){const o={};8&n&&(o.title=t[3]),4&n&&(o.body=t[2]),2&n&&(o.chart=t[1]),!i&&1&n&&(i=!0,o.modal=t[0],dt((()=>i=!1))),r.$set(o),(!c||32&n)&&F(e,"--top",t[5]+fm+"px"),(!c||16&n)&&F(e,"--height",t[4]+"px")},i(t){c||(kt(r.$$.fragment,t),ft((()=>{l&&l.end(1),s=Nt(e,qt,{y:200,duration:1e3}),s.start()})),c=!0)},o(t){Mt(r.$$.fragment,t),s&&s.invalidate(),l=At(e,Ft,{}),c=!1},d(t){t&&A(e),Lt(r),t&&l&&l.end(),u=!1,f()}}}const fm=84;function dm(t,e,n){let r,i,o,a,{comp:s}=e,{modal:l}=e,c=!1;const{renderer:u,tag:f}=s;t.$$set=t=>{"comp"in t&&n(7,s=t.comp),"modal"in t&&n(0,l=t.modal)},n(5,r=window.scrollY),n(4,i=window.innerHeight),n(3,o=Gt[f].filter((t=>"title"===t.type))[0]),n(2,a=Gt[f].filter((t=>"title"!==t.type)));{const t=Gt[f].filter((t=>"chart"===t.type));t&&t.length&&n(1,c=t[0].value)}return[l,c,a,o,i,r,u,s,function(t){l=t,n(0,l)},()=>n(0,l=!1)]}class hm extends Rt{constructor(t){super(),jt(this,t,dm,um,s,{comp:7,modal:0})}}function pm(t){let e,n,r,i,o,a,s,l,c;function u(e){t[3](e)}let f={comp:t[0]};return void 0!==t[0]&&(f.modal=t[0]),e=new hm({props:f}),at.push((()=>zt(e,"modal",u))),{c(){Dt(e.$$.fragment),r=E(),i=T("div"),O(i,"class","modal-background")},m(n,o){Et(e,n,o),N(n,r,o),N(n,i,o),s=!0,l||(c=P(i,"click",t[4]),l=!0)},p(t,r){const i={};1&r&&(i.comp=t[0]),!n&&1&r&&(n=!0,i.modal=t[0],dt((()=>n=!1))),e.$set(i)},i(t){s||(kt(e.$$.fragment,t),ft((()=>{a&&a.end(1),o=Nt(i,Ft,{}),o.start()})),s=!0)},o(t){Mt(e.$$.fragment,t),o&&o.invalidate(),a=At(i,Ft,{}),s=!1},d(t){Lt(e,t),t&&A(r),t&&A(i),t&&a&&a.end(),l=!1,c()}}}function mm(t){let e,n,r,i,o,a,s,l,c,u;function f(e){t[2](e)}n=new Bt({});let d={};void 0!==t[0]&&(d.modal=t[0]),o=new cm({props:d}),at.push((()=>zt(o,"modal",f)));let h=t[1]&&pm(t);return c=new Zt({}),{c(){e=T("div"),Dt(n.$$.fragment),r=E(),i=T("main"),Dt(o.$$.fragment),s=E(),h&&h.c(),l=E(),Dt(c.$$.fragment),O(e,"class","body"),V(e,"modalType",t[1]),V(e,"landingType",!t[1])},m(t,a){N(t,e,a),Et(n,e,null),k(e,r),k(e,i),Et(o,i,null),k(e,s),h&&h.m(e,null),k(e,l),Et(c,e,null),u=!0},p(t,[n]){const r={};!a&&1&n&&(a=!0,r.modal=t[0],dt((()=>a=!1))),o.$set(r),t[1]?h?(h.p(t,n),2&n&&kt(h,1)):(h=pm(t),h.c(),kt(h,1),h.m(e,l)):h&&($t(),Mt(h,1,1,(()=>{h=null})),_t()),2&n&&V(e,"modalType",t[1]),2&n&&V(e,"landingType",!t[1])},i(t){u||(kt(n.$$.fragment,t),kt(o.$$.fragment,t),kt(h),kt(c.$$.fragment,t),u=!0)},o(t){Mt(n.$$.fragment,t),Mt(o.$$.fragment,t),Mt(h),Mt(c.$$.fragment,t),u=!1},d(t){t&&A(e),Lt(n),Lt(o),h&&h.d(),Lt(c)}}}function gm(t,e,n){let r,{modal:i}=e;return t.$$set=t=>{"modal"in t&&n(0,i=t.modal)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=i&&Object.hasOwn(i,"renderer")),2&t.$$.dirty&&document.body.classList[r?"add":"remove"]("noscroll")},n(0,i=!1),[i,r,function(t){i=t,n(0,i)},function(t){i=t,n(0,i)},()=>{i&&n(0,i=!1)}]}return new class extends Rt{constructor(t){super(),jt(this,t,gm,mm,s,{modal:0})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
