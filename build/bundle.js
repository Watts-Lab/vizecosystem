var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function a(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t,e,n){t.$$.on_destroy.push(l(e,n))}function u(t,e,n,r){if(t){const i=f(t,e,n,r);return t[0](i)}}function f(t,e,r,i){return t[1]&&i?n(r.ctx.slice(),t[1](i(e))):r.ctx}function d(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function h(t,e,n,r,i,o){if(i){const a=f(e,n,r,o);t.p(a,i)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function m(t){return null==t?"":t}function g(t,e,n){return t.set(n),e}function v(e){return e&&a(e.destroy)?e.destroy:t}const y="undefined"!=typeof window;let x=y?()=>window.performance.now():()=>Date.now(),b=y?t=>requestAnimationFrame(t):t;const w=new Set;function $(t){w.forEach((e=>{e.c(t)||(w.delete(e),e.f())})),0!==w.size&&b($)}function _(t){let e;return 0===w.size&&b($),{promise:new Promise((n=>{w.add(e={c:t,f:n})})),abort(){w.delete(e)}}}function k(t,e){t.appendChild(e)}function M(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function C(t){const e=T("style");return function(t,e){k(t.head||t,e)}(M(t),e),e.sheet}function N(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode.removeChild(t)}function S(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function D(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function E(t){return document.createTextNode(t)}function z(){return E(" ")}function L(){return E("")}function j(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function P(t){return function(e){return e.preventDefault(),t.call(this,e)}}function R(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function O(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function F(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function q(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function U(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let H;function Y(){if(void 0===H){H=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){H=!0}}return H}function V(t,e,n){t.classList[n?"add":"remove"](e)}function B(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}const W=new Map;let Z,G=0;function X(t,e,n,r,i,o,a,s=0){const l=16.666/r;let c="{\n";for(let t=0;t<=1;t+=l){const r=e+(n-e)*o(t);c+=100*t+`%{${a(r,1-r)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,d=M(t),{stylesheet:h,rules:p}=W.get(d)||function(t,e){const n={stylesheet:C(e),rules:{}};return W.set(t,n),n}(d,t);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${u}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${i}ms 1 both`,G+=1,f}function K(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),G-=i,G||b((()=>{G||(W.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),W.clear())})))}function Q(n,r,i,o){if(!r)return t;const a=n.getBoundingClientRect();if(r.left===a.left&&r.right===a.right&&r.top===a.top&&r.bottom===a.bottom)return t;const{delay:s=0,duration:l=300,easing:c=e,start:u=x()+s,end:f=u+l,tick:d=t,css:h}=i(n,{from:r,to:a},o);let p,m=!0,g=!1;function v(){h&&K(n,p),m=!1}return _((t=>{if(!g&&t>=u&&(g=!0),g&&t>=f&&(d(1,0),v()),!m)return!1;if(g){const e=0+1*c((t-u)/l);d(e,1-e)}return!0})),h&&(p=X(n,0,1,l,s,c,h)),s||(g=!0),d(0,1),v}function J(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),i="none"===r.transform?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,i)}}function tt(t){Z=t}function et(){if(!Z)throw new Error("Function called outside component initialization");return Z}function nt(t){et().$$.on_mount.push(t)}function rt(){const t=et();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=B(e,n,{cancelable:r});return i.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function it(t){return et().$$.context.get(t)}const ot=[],at=[],st=[],lt=[],ct=Promise.resolve();let ut=!1;function ft(t){st.push(t)}function dt(t){lt.push(t)}const ht=new Set;let pt,mt=0;function gt(){const t=Z;do{for(;mt<ot.length;){const t=ot[mt];mt++,tt(t),vt(t.$$)}for(tt(null),ot.length=0,mt=0;at.length;)at.pop()();for(let t=0;t<st.length;t+=1){const e=st[t];ht.has(e)||(ht.add(e),e())}st.length=0}while(ot.length);for(;lt.length;)lt.pop()();ut=!1,ht.clear(),tt(t)}function vt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ft)}}function yt(){return pt||(pt=Promise.resolve(),pt.then((()=>{pt=null}))),pt}function xt(t,e,n){t.dispatchEvent(B(`${e?"intro":"outro"}${n}`))}const bt=new Set;let wt;function $t(){wt={r:0,c:[],p:wt}}function _t(){wt.r||o(wt.c),wt=wt.p}function kt(t,e){t&&t.i&&(bt.delete(t),t.i(e))}function Mt(t,e,n,r){if(t&&t.o){if(bt.has(t))return;bt.add(t),wt.c.push((()=>{bt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const Ct={duration:0};function Nt(n,r,i){let o,s,l=r(n,i),c=!1,u=0;function f(){o&&K(n,o)}function d(){const{delay:r=0,duration:i=300,easing:a=e,tick:d=t,css:h}=l||Ct;h&&(o=X(n,0,1,i,r,a,h,u++)),d(0,1);const p=x()+r,m=p+i;s&&s.abort(),c=!0,ft((()=>xt(n,!0,"start"))),s=_((t=>{if(c){if(t>=m)return d(1,0),xt(n,!0,"end"),f(),c=!1;if(t>=p){const e=a((t-p)/i);d(e,1-e)}}return c}))}let h=!1;return{start(){h||(h=!0,K(n),a(l)?(l=l(),yt().then(d)):d())},invalidate(){h=!1},end(){c&&(f(),c=!1)}}}function At(n,r,i){let s,l=r(n,i),c=!0;const u=wt;function f(){const{delay:r=0,duration:i=300,easing:a=e,tick:f=t,css:d}=l||Ct;d&&(s=X(n,1,0,i,r,a,d));const h=x()+r,p=h+i;ft((()=>xt(n,!1,"start"))),_((t=>{if(c){if(t>=p)return f(0,1),xt(n,!1,"end"),--u.r||o(u.c),!1;if(t>=h){const e=a((t-h)/i);f(1-e,e)}}return c}))}return u.r+=1,a(l)?yt().then((()=>{l=l(),f()})):f(),{end(t){t&&l.tick&&l.tick(1,0),c&&(s&&K(n,s),c=!1)}}}function St(t,e){t.f(),function(t,e){t.d(1),e.delete(t.key)}(t,e)}function Tt(t,e,n,r,i,o,a,s,l,c,u,f){let d=t.length,h=o.length,p=d;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,y=new Map;for(p=h;p--;){const t=f(i,o,p),s=n(t);let l=a.get(s);l?r&&l.p(t,e):(l=c(s,t),l.c()),v.set(s,g[p]=l),s in m&&y.set(s,Math.abs(p-m[s]))}const x=new Set,b=new Set;function w(t){kt(t,1),t.m(s,u),a.set(t.key,t),u=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],r=e.key,i=n.key;e===n?(u=e.first,d--,h--):v.has(i)?!a.has(r)||x.has(r)?w(e):b.has(i)?d--:y.get(r)>y.get(i)?(b.add(r),w(e)):(x.add(i),d--):(l(n,a),d--)}for(;d--;){const e=t[d];v.has(e.key)||l(e,a)}for(;h;)w(g[h-1]);return g}function Dt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Et(t){t&&t.c()}function zt(t,e,n,i){const{fragment:s,on_mount:l,on_destroy:c,after_update:u}=t.$$;s&&s.m(e,n),i||ft((()=>{const e=l.map(r).filter(a);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(ft)}function Lt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function jt(t,e){-1===t.$$.dirty[0]&&(ot.push(t),ut||(ut=!0,ct.then(gt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pt(e,n,r,a,s,l,c,u=[-1]){const f=Z;tt(e);const d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};c&&c(d.root);let h=!1;if(d.ctx=r?r(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),h&&jt(e,t)),n})):[],d.update(),h=!0,o(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(A)}else d.fragment&&d.fragment.c();n.intro&&kt(e.$$.fragment),zt(e,n.target,n.anchor,n.customElement),gt()}tt(f)}class Rt{$destroy(){Lt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ot(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function It(t){const e=t-1;return e*e*e+1}function Ft(t,{delay:n=0,duration:r=400,easing:i=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>"opacity: "+t*o}}function qt(t,{delay:e=0,duration:n=400,easing:r=It,x:i=0,y:o=0,opacity:a=0}={}){const s=getComputedStyle(t),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-a);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${l-u*e}`}}function Ut(t,{delay:e=0,duration:n=400,easing:r=It,start:i=0,opacity:o=0}={}){const a=getComputedStyle(t),s=+a.opacity,l="none"===a.transform?"":a.transform,c=1-i,u=s*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${l} scale(${1-c*e});\n\t\t\topacity: ${s-u*e}\n\t\t`}}function Ht(t,{delay:e=0,speed:n,duration:r,easing:i=Ot}={}){let o=t.getTotalLength();const a=getComputedStyle(t);return"butt"!==a.strokeLinecap&&(o+=parseInt(a.strokeWidth)),void 0===r?r=void 0===n?800:o/n:"function"==typeof r&&(r=r(o)),{delay:e,duration:r,easing:i,css:(t,e)=>`stroke-dasharray: ${t*o} ${e*o}`}}function Yt(e){let n,r,i,o,a,s,l,c,u,f,d,h,p;return{c(){n=T("header"),r=T("div"),i=T("div"),i.innerHTML='<a class="logo_anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/"><img class="logo_img svelte-xuc4ey" src="https://css.seas.upenn.edu/wp-content/uploads/2021/09/WEBSITE-LOGO.png" alt="Computational Social Science Lab" id="logo"/></a>',o=z(),a=T("div"),a.innerHTML='<nav id="top-menu-nav" class="svelte-xuc4ey"><ul id="top-menu" class="nav svelte-xuc4ey"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-2731 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/about/">About</a> \n                        <ul class="sub-menu svelte-xuc4ey"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1554 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/about/lab/">The Lab</a></li> \n                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2232 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/about/community/">CSS Community</a></li></ul></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1747 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/people/">People</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-37 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/research/">Research</a> \n                        <ul class="sub-menu svelte-xuc4ey"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-735 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/project/penn-map/">PennMAP</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-292 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/project/virtual-lab/">Group Dynamics</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-291 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/project/covid-philadelphia/">COVID-Philadelphia</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-377 svelte-xuc4ey"><a class="sub-menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/project/common-sense/">Common Sense</a></li></ul></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-344 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/partnerships/">Partners</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-58 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/publications/">Publications</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-105 svelte-xuc4ey"><a class="menu-item-anchor svelte-xuc4ey" href="https://css.seas.upenn.edu/blog-news-events/">News</a></li></ul></nav>',s=z(),l=T("div"),c=T("nav"),u=T("div"),u.innerHTML='<div class="line svelte-xuc4ey"></div> \n                    <div class="line svelte-xuc4ey"></div> \n                    <div class="line svelte-xuc4ey"></div>',f=z(),d=T("ul"),d.innerHTML='<li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/about/">About</a> \n                        <ul class="sub-menu-mobile"><li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/about/lab/">The Lab</a></li> \n                            <li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/about/community/">CSS Community</a></li></ul></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/people/">People</a></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/research/">Research</a> \n                        <ul class="sub-menu-mobile"><li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/project/penn-map/">PennMAP</a></li> \n                            <li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/project/virtual-lab/">Group Dynamics</a></li> \n                            <li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/project/covid-philadelphia/">COVID-Philadelphia</a></li> \n                            <li class="sub-menu-list-mobile svelte-xuc4ey"><a class="sub-item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/project/common-sense/">Common Sense</a></li></ul></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/partnerships/">Partners</a></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/publications/">Publications</a></li> \n                    <li class="svelte-xuc4ey"><a class="item-mobile svelte-xuc4ey" href="https://css.seas.upenn.edu/blog-news-events/">News</a></li>',O(i,"class","logo_container svelte-xuc4ey"),O(a,"id","et-top-navigation"),O(a,"class","svelte-xuc4ey"),O(u,"class","icon svelte-xuc4ey"),O(d,"id","nav-mobile"),O(d,"class","nav-mobile nav-mobile-hidden svelte-xuc4ey"),O(c,"id","top-menu-nav-mobile"),O(c,"class","svelte-xuc4ey"),O(l,"id","et-top-navigation-mobile"),O(l,"class","svelte-xuc4ey"),O(r,"class","container clearfix et_menu_container svelte-xuc4ey"),O(n,"id","main-header"),O(n,"data-height-onload","84"),O(n,"data-height-loaded","true"),O(n,"data-fixed-height-onload","84"),F(n,"top","0px"),O(n,"class","svelte-xuc4ey")},m(t,m){N(t,n,m),k(n,r),k(r,i),k(r,o),k(r,a),k(r,s),k(r,l),k(l,c),k(c,u),k(c,f),k(c,d),h||(p=j(u,"click",e[0]),h=!0)},p:t,i:t,o:t,d(t){t&&A(n),h=!1,p()}}}function Vt(t){let e=null;return nt((()=>{e=document.getElementById("nav-mobile")})),[function(t){const{classList:n}=e;n.contains("nav-mobile-active")?(n.remove("nav-mobile-active"),n.add("nav-mobile-hidden")):(n.add("nav-mobile-active"),n.remove("nav-mobile-hidden"))}]}class Bt extends Rt{constructor(t){super(),Pt(this,t,Vt,Yt,s,{})}}function Wt(e){let n;return{c(){n=T("footer"),n.innerHTML='<div class="et_builder_inner_content et_pb_gutters3"><div class="et_pb_section et_pb_section_0_tb_footer et_pb_with_background et_section_regular et_pb_section--with-menu svelte-1fl836e"><div class="et_pb_row et_pb_row_0_tb_footer et_pb_row--with-menu et_pb_row_4col svelte-1fl836e" style="z-index: 3;"><div class="et_pb_column et_pb_column_1_4 et_pb_column_0_tb_footer global-footer-column-1 et_pb_css_mix_blend_mode_passthrough svelte-1fl836e"><div class="et_pb_module et_pb_image et_pb_image_0_tb_footer et_pb_image_sticky svelte-1fl836e"><a href="https://www.seas.upenn.edu/" target="_blank" class="svelte-1fl836e"><span class="et_pb_image_wrap  svelte-1fl836e"><img loading="lazy" width="480" height="123" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas-300x77.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3438 svelte-1fl836e"/></span></a></div> \n                    <div class="et_pb_module et_pb_image et_pb_image_1_tb_footer et_pb_image_sticky svelte-1fl836e"><a href="https://www.asc.upenn.edu/" target="_blank" class="svelte-1fl836e"><span class="et_pb_image_wrap  svelte-1fl836e"><img loading="lazy" width="480" height="123" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc-300x77.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3440 svelte-1fl836e"/></span></a></div> \n                    <div class="et_pb_module et_pb_image et_pb_image_2_tb_footer et_pb_image_sticky svelte-1fl836e"><a href="https://www.wharton.upenn.edu/" target="_blank" class="svelte-1fl836e"><span class="et_pb_image_wrap  svelte-1fl836e"><img loading="lazy" width="480" height="111" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton-300x69.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3439 svelte-1fl836e"/></span></a></div></div> \n\n            <div class="et_pb_column et_pb_column_1_4 et_pb_column_1_tb_footer global-footer-column-2 et_pb_css_mix_blend_mode_passthrough et_pb_column--with-menu svelte-1fl836e"><div class="et_pb_module et_pb_text et_pb_text_0_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><h2 class="svelte-1fl836e">Navigate</h2></div></div> \n                <div class="et_pb_module et_pb_divider et_pb_divider_0_tb_footer et_pb_divider_position_ et_pb_space svelte-1fl836e"><div class="et_pb_divider_internal svelte-1fl836e"></div></div> \n                <div class="et_pb_module et_pb_menu et_pb_menu_0_tb_footer footer-vertical-menu et_pb_bg_layout_light et_pb_text_align_left et_dropdown_animation_fade et_pb_menu--without-logo et_pb_menu--style-left_aligned svelte-1fl836e"><div class="et_pb_menu_inner_container clearfix"><div class="et_pb_menu__wrap"><div class="et_pb_menu__menu svelte-1fl836e"><nav class="et-menu-nav svelte-1fl836e"><ul id="menu-footer-menu-new" class="et-menu nav svelte-1fl836e"><li id="menu-item-3425" class="et_pb_menu_page_id-2233 menu-item menu-item-type-post_type menu-item-object-page menu-item-3425 svelte-1fl836e"><a href="https://css.seas.upenn.edu/about/" class="svelte-1fl836e">About</a></li> \n                                        <li id="menu-item-3426" class="et_pb_menu_page_id-1732 menu-item menu-item-type-post_type menu-item-object-page menu-item-3426 svelte-1fl836e"><a href="https://css.seas.upenn.edu/people/" class="svelte-1fl836e">People</a></li> \n                                        <li id="menu-item-3430" class="et_pb_menu_page_id-22 menu-item menu-item-type-post_type menu-item-object-page menu-item-3430 svelte-1fl836e"><a href="https://css.seas.upenn.edu/research/" class="svelte-1fl836e">Research</a></li> \n                                        <li id="menu-item-3428" class="et_pb_menu_page_id-65 menu-item menu-item-type-post_type menu-item-object-page menu-item-3428 svelte-1fl836e"><a href="https://css.seas.upenn.edu/partnerships/" class="svelte-1fl836e">Partners</a></li> \n                                        <li id="menu-item-3429" class="et_pb_menu_page_id-52 menu-item menu-item-type-post_type menu-item-object-page menu-item-3429 svelte-1fl836e"><a href="https://css.seas.upenn.edu/publications/" class="svelte-1fl836e">Publications</a></li> \n                                        <li id="menu-item-3427" class="et_pb_menu_page_id-92 menu-item menu-item-type-post_type menu-item-object-page menu-item-3427 svelte-1fl836e"><a href="https://css.seas.upenn.edu/blog-news-events/" class="svelte-1fl836e">News</a></li></ul></nav></div></div></div></div></div> \n    \n    <div class="et_pb_column et_pb_column_1_4 et_pb_column_2_tb_footer global-footer-column-3 et_pb_css_mix_blend_mode_passthrough svelte-1fl836e"><div class="et_pb_module et_pb_text et_pb_text_1_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><h2 class="svelte-1fl836e">Contact</h2></div></div> \n        <div class="et_pb_module et_pb_divider et_pb_divider_1_tb_footer et_pb_divider_position_ et_pb_space svelte-1fl836e"><div class="et_pb_divider_internal svelte-1fl836e"></div></div> \n        <div class="et_pb_module et_pb_text et_pb_text_2_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><p class="svelte-1fl836e">3401 Walnut Street<br/>Suite 417B<br/>Philadelphia PA, 19104</p> \n                <p class="svelte-1fl836e">CSSLab@seas.upenn.edu</p> \n                <p class="svelte-1fl836e">(215) 573-7098</p></div></div></div></div> \n    <div class="et_pb_row et_pb_row_1_tb_footer et_pb_equal_columns svelte-1fl836e"><div class="et_pb_column et_pb_column_4_4 et_pb_column_4_tb_footer et_pb_css_mix_blend_mode_passthrough et-last-child"><div class="et_pb_module et_pb_text et_pb_text_4_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><p style="text-align: center;" class="svelte-1fl836e"><a href="https://www.upenn.edu/" class="svelte-1fl836e">Penn Homepage</a> \n                        <a href="https://www.upenn.edu/about/disclaimer" class="svelte-1fl836e">Disclaimer</a> \n                        <a href="https://www.publicsafety.upenn.edu/contact/" class="svelte-1fl836e">Emergency Services</a> \n                        <a href="https://www.upenn.edu/about/privacy-policy" class="svelte-1fl836e">Privacy Policy</a> \n                        <a href="https://accessibility.web-resources.upenn.edu/get-help" class="svelte-1fl836e">Report Accessibility Issues and Get Help</a> \n                        <a href="https://www.upenn.edu/about/report-copyright-infringement" class="svelte-1fl836e">Report Copyright Infringement</a></p></div></div> \n            <div class="et_pb_module et_pb_text et_pb_text_5_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-1fl836e"><div class="et_pb_text_inner svelte-1fl836e"><p style="text-align: center;" class="svelte-1fl836e"><em><strong></strong></em></p> \n                    <p style="text-align: center;" class="svelte-1fl836e"><em><a href="https://css.seas.upenn.edu/research-assistant-positions/" class="svelte-1fl836e"><strong>Interested in working at the CSSLab?</strong> Click here to view opportunities for Penn students</a></em></p></div></div></div></div></div></div>',O(n,"class","et-l et-l--footer svelte-1fl836e")},m(t,e){N(t,n,e)},p:t,i:t,o:t,d(t){t&&A(n)}}}class Zt extends Rt{constructor(t){super(),Pt(this,t,null,Wt,s,{})}}var Gt={title:"Mapping the (Political) Information Ecosystem",controls:{medium:{title:"Medium",description:"Internet or TV"},partisanship:{title:"Partisanship",description:"On the web, we use a popular, Twitter-based method to give each news domain a partisanship score. Lenient means that websites more to the left of TheGuardian.com, and to the right of FoxNews.com are counted as highly partisan. Stringent means that Slate.com and Breitbart.com—more less centrist news sources—define “highly partisan”."},"node-size":{title:"Node size",description:"Audience size or average consumption"}},intro:[{type:"text",value:"Where do Americans get their news? Who is the typical consumer of news? And how many people are really in partisan “echo chambers”? We had these questions in mind when putting together the four interactive charts on this page."},{type:"buttons",value:[{title:"The fake news problem",url:"https://www.science.org/doi/10.1126/sciadv.aay3539"},{title:"Partisan news diets",url:"https://www.science.org/doi/10.1126/sciadv.abn0083"}]},{type:"tiles",value:[{title:"Overall News Consumption",tag:"overall-news-consumption"},{title:"Partisan Echo Chambers",tag:"echo-chambers-part1"},{title:"Echo Chambers Map",tag:"echo-chambers-part2"},{title:"Changing TV Audiences",tag:"changing-tv-audiences"}]}],"overall-news-consumption":[{type:"title",value:"Overall News Consumption"},{type:"text",value:"In the first figure, we tally the average time spent watching news and non-news on TV. Online (desktop only) content is analyzed in terms of a larger set of categories: news websites, “fake news” websites, all of Facebook, Reddit, and Twitter/X, and the rest of non-news web browsing."},{type:"text",value:"When we talk about traditional news audiences in the US, we are primarily referring to people who get their news through TV."},{type:"chart",value:{type:"line-area",title:"Overall news consumption",captions:"Minutes per person per day spent with news and other categories of content on TV and desktop browsing. *Local TV News is not included."}},{type:"text",value:"The clearest pattern is that older Americans spend significantly more time on news than younger Americans. Moreover, across all age groups, and especially for older Americans, TV news dominates online news articles in terms of total time spent."}],"echo-chambers-part1":[{type:"title",value:'On partisan "Echo Chambers"'},{type:"text",value:"The 2022 article was inspired by ongoing discussions on “echo chambers,” the idea that social media exposes people to overwhelmingly partisan and like-minded news content. To gauge the scale of the echo chamber problem, we asked: how many people have a news diet that is made of majority highly partisan sources? The figure below is somewhat unique because we present results corresponding to multiple definitions of “majority”--50% and 75% of an individual’s total news consumption. You can also adjust the “strictness” of the highly partisan content definition with the lenient/stringent button."},{type:"chart",value:{type:"map",title:"Echo chambers part 1",captions:"The monthly percent of Americans experiencing partisan segregation via TV or Web news. Bounds represent a range of percentages—from 50 to 75—of individual-level news diets that must be partisan for partisan segregation.",caption1:"State-level timeline of echo chamber size as % of total population with TV/desktop computers.",caption2:"We define audience size as the number of people who spend at least 30 minutes/1 minute with a given tv program/web domain."}},{type:"text",value:"While most people think of echo chambers in terms of social media and the internet, we find that cable TV, especially Fox News, is more responsible for the partisan segregation in news audiences than any combination of far-right or far-left sites circulating the internet. For example, between 10%-15% of Americans aged 55 and older get the majority of their news from Fox News while the desktop web echo chambers are only able to influence about 5% of US internet users of the same age group."},{type:"text",value:"It is important to note that we only capture internet browsing on desktop computers—not mobile devices, so it is conceivable that people see even less or much more partisan content on their mobile devices."}],"echo-chambers-part2":[{type:"title",value:'"Echo Chambers" by state'},{type:"text",value:'In this map, the size of each semi-circle corresponds to the extent of partisan news segregation, or the size of echo chambers, in each state. You can click on a state for additional details, including the most-watched news programs and domains. The blue and red shading of each circle indicates the degree of partisan segregation, independent of a state\'s population. Surprisingly, when we break down TV audience segregation by political leanings, there is minimal geographic variation. Even in a "lenient" view where CNN is considered left-wing partisan, Fox News tends to dominate partisan viewership in almost every state, with New York and California being notable exceptions. When considering MSNBC as the left-wing partisan source, Fox News dominates in every state (though not Washington DC).'},{type:"chart",value:{type:"line-area",title:"Echo chambers part 2",captions:"Each state is represented in terms of the total number of residents whose news diets are dominated by right-wing and left-wing partisan sources. The shades of red and blue indicate the percentage of residents. Click on a state for more info."}},{type:"text",value:'Surprisingly, when we break down TV audience segregation by political leanings, there is minimal geographic variation. Even in a "lenient" view where CNN is considered left-wing partisan, Fox News tends to dominate partisan viewership in almost every state, with New York and California being notable exceptions. When considering MSNBC as the left-wing partisan source, Fox News dominates in every state (though not Washington DC).'}],"changing-tv-audiences":[{type:"title",value:"Changing TV news audiences"},{type:"text",value:"In this final figure we introduce a key concept: the news consumption archetype. We surface eight archetypes of news consumption by clustering panelists with similarly distributed news diets, including those who watch 30 minutes or less of news in a given month. Each archetype is dominated by a single news category; we tracked changes as individuals migrated between these archetypes (arrows between nodes represent “net flow” between archetypes)."},{type:"text",value:"Two major trends caught our attention. Notably, tens of millions of Americans are discontinuing TV news consumption, a mass exodus that is surely due in part to cord-cutting and the rise of streaming services. Second, those who continue to watch news on TV are increasingly engaging with partisan cable news channels including MSNBC and Fox News. In summary, the TV news audience is shrinking and becoming more polarized."},{type:"chart",value:{type:"flow-chart",title:"Changing audiences",captions:"Television news consumption archetypes are each labeled according to the category of news most prominently consumed within the archetype, along with a large ninth group of people who are exposed to less than 30 min of news in a month, calculated independently in each month over the 4 years of analysis. The figure represents the direction and magnitude of turnover between each pair of archetypes. For example, if—over a given period of time—1M individuals moved from archetype A to archetype B, and over the same period of time 4M individuals did the reverse and moved from archetype B to A, then the net flow over that time period would be 3M from B to A."}},{type:"text",value:"Two major trends caught our attention. Notably, tens of millions of Americans are discontinuing TV news consumption, a mass exodus that is surely due in part to cord-cutting and the rise of streaming services. Second, those who continue to watch news on TV are increasingly engaging with partisan cable news channels including MSNBC and Fox News. In summary, the TV news audience is shrinking and becoming more polarized."}],methodology:[{type:"title",value:"Methodology"},{type:"text",value:"The analyses here are mostly reproductions of figures from two articles published in 2020 and 2022. The underlying datasets are derived from large panels (50-100k) of individuals who agreed to having their desktop internet browsing and TV viewing behavior passively tracked. The data spanned over a period of seven years from February 2016 to January 2023."}]},Xt=[{name:"Jenny Allen",detail:["MIT Sloan School of Management, 100 Main St., Cambridge, MA 02142"]},{name:"Homa Hosseinmardi",detail:["Department of Computer and Information Science, University of Pennsylvania, Philadelphia, PA 19104","homahm@seas.upenn.edu"]},{name:"Baird Howland",detail:["The Annenberg School for Communication, University of Pennsylvania, Philadelphia, PA 19104"]},{name:"Markus Mobius",detail:["Microsoft Research New England, Cambridge, MA 02142"]},{name:"Dan Muise",detail:["Department of Communication, Stanford University, Stanford, CA 94305","muise.dan@gmail.comm"]},{name:"David M. Rothschild",detail:["Microsoft Research New York, New York, NY 10012"]},{name:"Duncan J. Watts",detail:["Department of Computer and Information Science, University of Pennsylvania, Philadelphia, PA 19104","The Annenberg School of Communication, University of Pennsylvania, Philadelphia, PA 19104","Operations, Information, and Decisions Department, University of Pennsylvania, Philadelphia, PA 19104","djwatts@seas.upenn.edu"]}];function Kt(e){let n,r;return{c(){n=T("h1"),r=E(e[0]),O(n,"class","svelte-rw16qr")},m(t,e){N(t,n,e),k(n,r)},p(t,[e]){1&e&&I(r,t[0])},i:t,o:t,d(t){t&&A(n)}}}function Qt(t,e,n){let{title:r}=e;return t.$$set=t=>{"title"in t&&n(0,r=t.title)},[r]}class Jt extends Rt{constructor(t){super(),Pt(this,t,Qt,Kt,s,{title:0})}}function te(e){let n,r,i,o,a,s,l,c;return{c(){n=T("div"),r=T("a"),i=E(e[0]),o=z(),a=D("svg"),s=D("path"),l=D("polyline"),c=D("line"),O(s,"d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"),O(l,"points","15 3 21 3 21 9"),O(c,"x1","10"),O(c,"y1","14"),O(c,"x2","21"),O(c,"y2","3"),O(a,"xmlns","http://www.w3.org/2000/svg"),O(a,"viewBox","0 0 24 24"),O(a,"fill","none"),O(a,"stroke","currentColor"),O(a,"stroke-width","2"),O(a,"stroke-linecap","round"),O(a,"stroke-linejoin","round"),O(a,"class","feather feather-external-link svelte-2zzv87"),O(r,"class","btn svelte-2zzv87"),O(r,"href",e[1]),O(r,"target","_top"),O(n,"class","btn-container svelte-2zzv87")},m(t,e){N(t,n,e),k(n,r),k(r,i),k(r,o),k(r,a),k(a,s),k(a,l),k(a,c)},p(t,[e]){1&e&&I(i,t[0]),2&e&&O(r,"href",t[1])},i:t,o:t,d(t){t&&A(n)}}}function ee(t,e,n){let{title:r}=e,{url:i}=e;return t.$$set=t=>{"title"in t&&n(0,r=t.title),"url"in t&&n(1,i=t.url)},[r,i]}class ne extends Rt{constructor(t){super(),Pt(this,t,ee,te,s,{title:0,url:1})}}function re(t,e={}){let n;const r=r=>{const i=r[0].isIntersecting?"enter":"exit";"enter"===i&&t.dispatchEvent(new CustomEvent(i)),"enter"===i&&e.once&&n.disconnect()},i=({root:e,top:i,bottom:o})=>{const a={root:e,rootMargin:`${i?-1*i:0}px 0px ${o?-1*o:0}px 0px`};n&&n.disconnect(),n=new IntersectionObserver(r,a),n.observe(t)};return i(e),{update(t){i(t)},destroy(){n&&n.disconnect()}}}function ie(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function oe(t){let e,n,r=t[9].value+"";return{c(){e=T("p"),n=E(r),O(e,"class","copy svelte-psose0")},m(t,r){N(t,e,r),k(e,n)},p(t,e){4&e&&r!==(r=t[9].value+"")&&I(n,r)},d(t){t&&A(e)}}}function ae(t){let e,n="text"===t[9].type&&oe(t);return{c(){n&&n.c(),e=L()},m(t,r){n&&n.m(t,r),N(t,e,r)},p(t,r){"text"===t[9].type?n?n.p(t,r):(n=oe(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&A(e)}}}function se(e){let n,r,i,s,l,c,u,f,d,h=e[3].value+"",p=e[2],m=[];for(let t=0;t<p.length;t+=1)m[t]=ae(ie(e,p,t));return{c(){n=T("div"),r=T("h1"),i=E(h),s=z();for(let t=0;t<m.length;t+=1)m[t].c();l=z(),c=T("div"),c.textContent="GO BACK",O(r,"class","section-title svelte-psose0"),O(c,"class","close-button bottom svelte-psose0"),O(n,"class","section svelte-psose0")},m(t,o){N(t,n,o),k(n,r),k(r,i),k(n,s);for(let t=0;t<m.length;t+=1)m[t].m(n,null);k(n,l),k(n,c),f||(d=[j(c,"click",e[7]),v(u=re.call(null,n,{once:e[1]})),j(n,"enter",e[8])],f=!0)},p(t,[e]){if(8&e&&h!==(h=t[3].value+"")&&I(i,h),4&e){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=ie(t,p,r);m[r]?m[r].p(i,e):(m[r]=ae(i),m[r].c(),m[r].m(n,l))}for(;r<m.length;r+=1)m[r].d(1);m.length=p.length}u&&a(u.update)&&2&e&&u.update.call(null,{once:t[1]})},i:t,o:t,d(t){t&&A(n),S(m,t),f=!1,o(d)}}}function le(t,e,n){let r=!1,{once:i}=e,{body:o}=e,{title:a}=e,{refs:s}=e,{modal:l}=e,{chart:c}=e;return t.$$set=t=>{"once"in t&&n(1,i=t.once),"body"in t&&n(2,o=t.body),"title"in t&&n(3,a=t.title),"refs"in t&&n(5,s=t.refs),"modal"in t&&n(0,l=t.modal),"chart"in t&&n(6,c=t.chart)},[l,i,o,a,r,s,c,()=>n(0,l=!1),()=>n(4,r=!0)]}class ce extends Rt{constructor(t){super(),Pt(this,t,le,se,s,{once:1,body:2,title:3,refs:5,modal:0,chart:6})}}function ue(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function fe(t,e,n){const r=t.slice();return r[7]=e[n],r}function de(e){let n,r,i,o,a=e[4].value+"",s=0===e[6]&&function(e){let n,r,i;return{c(){n=T("span"),n.textContent="Read more about the data",O(n,"class","methodology svelte-ljk8nf")},m(t,o){N(t,n,o),r||(i=j(n,"click",e[3]),r=!0)},p:t,d(t){t&&A(n),r=!1,i()}}}(e);return{c(){n=T("p"),r=E(a),i=z(),s&&s.c(),o=z(),O(n,"class","svelte-ljk8nf")},m(t,e){N(t,n,e),k(n,r),k(n,i),s&&s.m(n,null),k(n,o)},p(t,e){2&e&&a!==(a=t[4].value+"")&&I(r,a),0===t[6]&&s.p(t,e)},i:t,o:t,d(t){t&&A(n),s&&s.d()}}}function he(t){let e,n,r,i,o=t[4].value,a=[];for(let e=0;e<o.length;e+=1)a[e]=pe(fe(t,o,e));const s=t=>Mt(a[t],1,1,(()=>{a[t]=null}));return{c(){e=T("div"),n=E("Read the original research:\n\n\t\t\t\t");for(let t=0;t<a.length;t+=1)a[t].c();r=z(),O(e,"class","svelte-ljk8nf")},m(t,o){N(t,e,o),k(e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null);k(e,r),i=!0},p(t,n){if(2&n){let i;for(o=t[4].value,i=0;i<o.length;i+=1){const s=fe(t,o,i);a[i]?(a[i].p(s,n),kt(a[i],1)):(a[i]=pe(s),a[i].c(),kt(a[i],1),a[i].m(e,r))}for($t(),i=o.length;i<a.length;i+=1)s(i);_t()}},i(t){if(!i){for(let t=0;t<o.length;t+=1)kt(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)Mt(a[t]);i=!1},d(t){t&&A(e),S(a,t)}}}function pe(t){let e,r;const i=[t[7]];let o={};for(let t=0;t<i.length;t+=1)o=n(o,i[t]);return e=new ne({props:o}),{c(){Et(e.$$.fragment)},m(t,n){zt(e,t,n),r=!0},p(t,n){const r=2&n?function(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)i[t]||(n[t]=s[t],i[t]=1);t[o]=s}else for(const t in a)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(i,[(o=t[7],"object"==typeof o&&null!==o?o:{})]):{};var o;e.$set(r)},i(t){r||(kt(e.$$.fragment,t),r=!0)},o(t){Mt(e.$$.fragment,t),r=!1},d(t){Lt(e,t)}}}function me(t){let e,n,r,i;const o=[he,de],a=[];function s(t,e){return"buttons"===t[4].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function ge(t){let e,n,r=t[1],i=[];for(let e=0;e<r.length;e+=1)i[e]=me(ue(t,r,e));const o=t=>Mt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=T("div");for(let t=0;t<i.length;t+=1)i[t].c();O(e,"class","intro-wrapper svelte-ljk8nf")},m(t,r){N(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,[n]){if(7&n){let a;for(r=t[1],a=0;a<r.length;a+=1){const o=ue(t,r,a);i[a]?(i[a].p(o,n),kt(i[a],1)):(i[a]=me(o),i[a].c(),kt(i[a],1),i[a].m(e,null))}for($t(),a=r.length;a<i.length;a+=1)o(a);_t()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)kt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Mt(i[t]);n=!1},d(t){t&&A(e),S(i,t)}}}function ve(t,e,n){let{content:r}=e,{modal:i}=e;const o={tag:"methodology",renderer:ce};return t.$$set=t=>{"content"in t&&n(1,r=t.content),"modal"in t&&n(0,i=t.modal)},[i,r,o,()=>n(0,i=o)]}class ye extends Rt{constructor(t){super(),Pt(this,t,ve,ge,s,{content:1,modal:0})}}function xe(t,e,n){const r=t.slice();return r[1]=e[n],r[3]=n,r}function be(t,e,n){const r=t.slice();return r[4]=e[n],r}function we(t){let e,n,r=t[4]+"";return{c(){e=T("p"),n=E(r),O(e,"class","detail-list-value svelte-111p3o6")},m(t,r){N(t,e,r),k(e,n)},p(t,e){1&e&&r!==(r=t[4]+"")&&I(n,r)},d(t){t&&A(e)}}}function $e(t){let e,n,r,i,a,s,l,c,u,f=t[1].name+"",d=t[1].detail,h=[];for(let e=0;e<d.length;e+=1)h[e]=we(be(t,d,e));return{c(){e=T("div"),n=T("p"),r=E(f),i=z(),a=T("div"),s=T("div");for(let t=0;t<h.length;t+=1)h[t].c();l=z(),O(n,"class","author-name svelte-111p3o6"),O(s,"class","detail-list svelte-111p3o6"),O(a,"class","detail svelte-111p3o6"),O(e,"class","author-container svelte-111p3o6")},m(t,o){N(t,e,o),k(e,n),k(n,r),k(e,i),k(e,a),k(a,s);for(let t=0;t<h.length;t+=1)h[t].m(s,null);k(e,l),c||(u=[j(e,"mouseover",ke),j(e,"focus",ke),j(e,"mouseout",Me),j(e,"blur",Me)],c=!0)},p(t,e){if(1&e&&f!==(f=t[1].name+"")&&I(r,f),1&e){let n;for(d=t[1].detail,n=0;n<d.length;n+=1){const r=be(t,d,n);h[n]?h[n].p(r,e):(h[n]=we(r),h[n].c(),h[n].m(s,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}},d(t){t&&A(e),S(h,t),c=!1,o(u)}}}function _e(e){let n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=$e(xe(e,r,t));return{c(){n=T("div");for(let t=0;t<i.length;t+=1)i[t].c();O(n,"class","authors svelte-111p3o6")},m(t,e){N(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(1&e){let o;for(r=t[0],o=0;o<r.length;o+=1){const a=xe(t,r,o);i[o]?i[o].p(a,e):(i[o]=$e(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&A(n),S(i,t)}}}function ke(t){t.target.classList.add("active")}function Me(t){t.target.classList.remove("active")}function Ce(t,e,n){let{authors:r}=e;return t.$$set=t=>{"authors"in t&&n(0,r=t.authors)},[r]}class Ne extends Rt{constructor(t){super(),Pt(this,t,Ce,_e,s,{authors:0})}}var Ae={},Se={};function Te(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function De(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Ee(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ze(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+Ee(-t,6):t>9999?"+"+Ee(t,6):Ee(t,4)}(t.getUTCFullYear())+"-"+Ee(t.getUTCMonth()+1,2)+"-"+Ee(t.getUTCDate(),2)+(i?"T"+Ee(e,2)+":"+Ee(n,2)+":"+Ee(r,2)+"."+Ee(i,3)+"Z":r?"T"+Ee(e,2)+":"+Ee(n,2)+":"+Ee(r,2)+"Z":n||e?"T"+Ee(e,2)+":"+Ee(n,2)+"Z":"")}var Le=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return Se;if(c)return c=!1,Ae;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?l=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=u())!==Se;){for(var f=[];r!==Ae&&r!==Se;)f.push(r),r=u();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?ze(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Te(t);return function(r,i){return e(n(r),i,t)}}(t,e):Te(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=De(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=De(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}(","),je=Le.parse;function Pe(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Re&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const Re=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Oe(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ie(t,e){return fetch(t,e).then(Oe)}var Fe,qe=(Fe=je,function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),Ie(t,e).then((function(t){return Fe(t,n)}))});function Ue(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function He(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ye(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=Ue,n=(e,n)=>Ue(t(e),n),r=(e,n)=>t(e)-n):(e=t===Ue||t===He?t:Ve,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function Ve(){return 0}const Be=Ye(Ue).right;Ye((function(t){return null===t?NaN:+t})).center;var We=Be;function Ze(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class Ge{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}class Xe extends Map{constructor(t,e=Qe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Ke(this,t))}has(t){return super.has(Ke(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);t.has(r)&&(n=t.get(r),t.delete(r));return n}(this,t))}}function Ke({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Qe(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Je(t){return t}function tn(t,...e){return rn(t,Je,Je,e)}function en(t,...e){return rn(t,Array.from,Je,e)}function nn(t,e,...n){return rn(t,Je,e,n)}function rn(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new Xe,s=r[o++];let l=-1;for(const t of i){const e=s(t,++l,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function on(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var an=Math.sqrt(50),sn=Math.sqrt(10),ln=Math.sqrt(2);function cn(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=an?10:o>=sn?5:o>=ln?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=an?10:o>=sn?5:o>=ln?2:1)}function un(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=an?i*=10:o>=sn?i*=5:o>=ln&&(i*=2),e<t?-i:i}function fn(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function dn(t,e=Ue){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=Ue);const i=(t,r)=>e(n[t],n[r]);let o,a;return Uint32Array.from(n,((t,e)=>e)).sort(e===Ue?(t,e)=>on(n[t],n[e]):function(t=Ue){if(t===Ue)return on;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}(i)).forEach(((t,e)=>{const n=i(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,a=e),r[t]=a):r[t]=NaN})),r}function hn(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function pn(t){if(!(i=t.length))return[];for(var e=-1,n=function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}(t,mn),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function mn(t){return t.length}function gn(){return pn(arguments)}function vn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function yn(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const xn=Symbol("implicit");function bn(){var t=new Xe,e=[],n=[],r=xn;function i(i){let o=t.get(i);if(void 0===o){if(r!==xn)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Xe;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return bn(e,n).unknown(r)},vn.apply(i,arguments),i}function wn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $n(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _n(){}var kn=.7,Mn=1/kn,Cn="\\s*([+-]?\\d+)\\s*",Nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sn=/^#([0-9a-f]{3,8})$/,Tn=new RegExp(`^rgb\\(${Cn},${Cn},${Cn}\\)$`),Dn=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),En=new RegExp(`^rgba\\(${Cn},${Cn},${Cn},${Nn}\\)$`),zn=new RegExp(`^rgba\\(${An},${An},${An},${Nn}\\)$`),Ln=new RegExp(`^hsl\\(${Nn},${An},${An}\\)$`),jn=new RegExp(`^hsla\\(${Nn},${An},${An},${Nn}\\)$`),Pn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Rn(){return this.rgb().formatHex()}function On(){return this.rgb().formatRgb()}function In(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Sn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Fn(e):3===n?new Yn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?qn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?qn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Tn.exec(t))?new Yn(e[1],e[2],e[3],1):(e=Dn.exec(t))?new Yn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=En.exec(t))?qn(e[1],e[2],e[3],e[4]):(e=zn.exec(t))?qn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ln.exec(t))?Xn(e[1],e[2]/100,e[3]/100,1):(e=jn.exec(t))?Xn(e[1],e[2]/100,e[3]/100,e[4]):Pn.hasOwnProperty(t)?Fn(Pn[t]):"transparent"===t?new Yn(NaN,NaN,NaN,0):null}function Fn(t){return new Yn(t>>16&255,t>>8&255,255&t,1)}function qn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Yn(t,e,n,r)}function Un(t){return t instanceof _n||(t=In(t)),t?new Yn((t=t.rgb()).r,t.g,t.b,t.opacity):new Yn}function Hn(t,e,n,r){return 1===arguments.length?Un(t):new Yn(t,e,n,null==r?1:r)}function Yn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Vn(){return`#${Gn(this.r)}${Gn(this.g)}${Gn(this.b)}`}function Bn(){const t=Wn(this.opacity);return`${1===t?"rgb(":"rgba("}${Zn(this.r)}, ${Zn(this.g)}, ${Zn(this.b)}${1===t?")":`, ${t})`}`}function Wn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gn(t){return((t=Zn(t))<16?"0":"")+t.toString(16)}function Xn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qn(t,e,n,r)}function Kn(t){if(t instanceof Qn)return new Qn(t.h,t.s,t.l,t.opacity);if(t instanceof _n||(t=In(t)),!t)return new Qn;if(t instanceof Qn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Qn(a,s,l,t.opacity)}function Qn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Jn(t){return(t=(t||0)%360)<0?t+360:t}function tr(t){return Math.max(0,Math.min(1,t||0))}function er(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}wn(_n,In,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Rn,formatHex:Rn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Kn(this).formatHsl()},formatRgb:On,toString:On}),wn(Yn,Hn,$n(_n,{brighter(t){return t=null==t?Mn:Math.pow(Mn,t),new Yn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?kn:Math.pow(kn,t),new Yn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Yn(Zn(this.r),Zn(this.g),Zn(this.b),Wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vn,formatHex:Vn,formatHex8:function(){return`#${Gn(this.r)}${Gn(this.g)}${Gn(this.b)}${Gn(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Bn,toString:Bn})),wn(Qn,(function(t,e,n,r){return 1===arguments.length?Kn(t):new Qn(t,e,n,null==r?1:r)}),$n(_n,{brighter(t){return t=null==t?Mn:Math.pow(Mn,t),new Qn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?kn:Math.pow(kn,t),new Qn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Yn(er(t>=240?t-240:t+120,i,r),er(t,i,r),er(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Qn(Jn(this.h),tr(this.s),tr(this.l),Wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wn(this.opacity);return`${1===t?"hsl(":"hsla("}${Jn(this.h)}, ${100*tr(this.s)}%, ${100*tr(this.l)}%${1===t?")":`, ${t})`}`}}));var nr=t=>()=>t;function rr(t){return 1==(t=+t)?ir:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):nr(isNaN(e)?n:e)}}function ir(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):nr(isNaN(t)?e:t)}var or=function t(e){var n=rr(e);function r(t,e){var r=n((t=Hn(t)).r,(e=Hn(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=ir(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function ar(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function sr(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=pr(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function lr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function cr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ur(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=pr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var fr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dr=new RegExp(fr.source,"g");function hr(t,e){var n,r,i,o=fr.lastIndex=dr.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=fr.exec(t))&&(r=dr.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:cr(n,r)})),o=dr.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function pr(t,e){var n,r=typeof e;return null==e||"boolean"===r?nr(e):("number"===r?cr:"string"===r?(n=In(e))?(e=n,or):hr:e instanceof In?or:e instanceof Date?lr:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?ar:Array.isArray(e)?sr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?ur:cr)(t,e)}function mr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function gr(t,e){void 0===e&&(e=t,t=pr);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function vr(t){return+t}var yr=[0,1];function xr(t){return t}function br(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function wr(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=br(i,r),o=n(a,o)):(r=br(r,i),o=n(o,a)),function(t){return o(r(t))}}function $r(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=br(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=We(t,e,1,r)-1;return o[n](i[n](e))}}function _r(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kr(){var t,e,n,r,i,o,a=yr,s=yr,l=pr,c=xr;function u(){var t=Math.min(a.length,s.length);return c!==xr&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?$r:wr,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,l)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),cr)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,vr),u()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),l=mr,u()},f.clamp=function(t){return arguments.length?(c=!!t||xr,u()):c!==xr},f.interpolate=function(t){return arguments.length?(l=t,u()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,u()}}function Mr(){return kr()(xr,xr)}function Cr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Nr(t){return(t=Cr(Math.abs(t)))?t[1]:NaN}var Ar,Sr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tr(t){if(!(e=Sr.exec(t)))throw new Error("invalid format: "+t);var e;return new Dr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Dr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Er(t,e){var n=Cr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Tr.prototype=Dr.prototype,Dr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var zr={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Er(100*t,e),r:Er,s:function(t,e){var n=Cr(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ar=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Cr(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Lr(t){return t}var jr,Pr,Rr,Or=Array.prototype.map,Ir=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fr(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Lr:(e=Or.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Lr:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Or.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Tr(t)).fill,n=t.align,f=t.sign,d=t.symbol,h=t.zero,p=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):zr[y]||(void 0===g&&(g=12),v=!0,y="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var x="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===d?o:/[%p]/.test(y)?l:"",w=zr[y],$=/[defgprs%]/.test(y);function _(t){var i,o,l,d=x,_=b;if("c"===y)_=w(t)+_,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),g),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==f&&(k=!1),d=(k?"("===f?f:c:"-"===f||"("===f?"":f)+d,_=("s"===y?Ir[8+Ar/3]:"")+_+(k&&"("===f?")":""),$)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){_=(46===l?a+t.slice(i+1):t.slice(i))+_,t=t.slice(0,i);break}}m&&!h&&(t=r(t,1/0));var M=d.length+t.length+_.length,C=M<p?new Array(p-M+1).join(e):"";switch(m&&h&&(t=r(C+t,C.length?p-_.length:1/0),C=""),n){case"<":t=d+t+_+C;break;case"=":t=d+C+t+_;break;case"^":t=C.slice(0,M=C.length>>1)+d+t+_+C.slice(M);break;default:t=C+d+t+_}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return t+""},_}return{format:f,formatPrefix:function(t,e){var n=f(((t=Tr(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Nr(e)/3))),i=Math.pow(10,-r),o=Ir[8+r/3];return function(t){return n(i*t)+o}}}}function qr(t,e,n,r){var i,o=un(t,e,n);switch((r=Tr(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Nr(e)/3)))-Nr(Math.abs(t)))}(o,a))||(r.precision=i),Rr(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nr(e)-Nr(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Nr(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Pr(r)}function Ur(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=cn(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),r=Math.round(e/a);for(n*a<t&&++n,r*a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),r=Math.round(e*a);for(n/a<t&&++n,r/a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return qr(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=cn(l,c,n))===r)return o[a]=l,o[s]=c,e(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Hr(){var t=Mr();return t.copy=function(){return _r(t,Hr())},vn.apply(t,arguments),Ur(t)}function Yr(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Vr(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Br(t){return t<0?-t*t:t*t}function Wr(t){var e=t(xr,xr),n=1;function r(){return 1===n?t(xr,xr):.5===n?t(Vr,Br):t(Yr(n),Yr(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Ur(e)}function Zr(){var t=Wr(kr());return t.copy=function(){return _r(t,Zr()).exponent(t.exponent())},vn.apply(t,arguments),t}function Gr(){return Zr.apply(null,arguments).exponent(.5)}function Xr(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[We(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return Xr().domain(e).range(n).unknown(t)},vn.apply(i,arguments)}jr=Fr({thousands:",",grouping:[3],currency:["$",""]}),Pr=jr.format,Rr=jr.formatPrefix;var Kr=new Date,Qr=new Date;function Jr(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return Jr((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Kr.setTime(+e),Qr.setTime(+r),t(Kr),t(Qr),Math.floor(n(Kr,Qr))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ti=Jr((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));ti.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Jr((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):ti:null};var ei=ti;ti.range;const ni=1e3,ri=6e4,ii=36e5,oi=864e5,ai=6048e5,si=2592e6,li=31536e6;var ci=Jr((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*ni)}),(function(t,e){return(e-t)/ni}),(function(t){return t.getUTCSeconds()})),ui=ci;ci.range;var fi=Jr((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ni)}),(function(t,e){t.setTime(+t+e*ri)}),(function(t,e){return(e-t)/ri}),(function(t){return t.getMinutes()})),di=fi;fi.range;var hi=Jr((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ni-t.getMinutes()*ri)}),(function(t,e){t.setTime(+t+e*ii)}),(function(t,e){return(e-t)/ii}),(function(t){return t.getHours()})),pi=hi;hi.range;var mi=Jr((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ri)/oi),(t=>t.getDate()-1)),gi=mi;function vi(t){return Jr((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ri)/ai}))}mi.range;var yi=vi(0),xi=vi(1),bi=vi(2),wi=vi(3),$i=vi(4),_i=vi(5),ki=vi(6);yi.range,xi.range,bi.range,wi.range,$i.range,_i.range,ki.range;var Mi=Jr((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),Ci=Mi;Mi.range;var Ni=Jr((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Ni.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Jr((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Ai=Ni;Ni.range;var Si=Jr((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/oi}),(function(t){return t.getUTCDate()-1})),Ti=Si;function Di(t){return Jr((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/ai}))}Si.range;var Ei=Di(0),zi=Di(1),Li=Di(2),ji=Di(3),Pi=Di(4),Ri=Di(5),Oi=Di(6);Ei.range,zi.range,Li.range,ji.range,Pi.range,Ri.range,Oi.range;var Ii=Jr((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Ii.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Jr((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Fi=Ii;Ii.range;const[qi,Ui]=function(t,e,n,r,i,o){const a=[[ui,1,ni],[ui,5,5e3],[ui,15,15e3],[ui,30,3e4],[o,1,ri],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,ii],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,oi],[r,2,1728e5],[n,1,ai],[e,1,si],[e,3,7776e6],[t,1,li]];function s(e,n,r){const i=Math.abs(n-e)/r,o=Ye((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(un(e/li,n/li,r));if(0===o)return ei.every(Math.max(un(e,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}(Ai,Ci,yi,gi,pi,di);function Hi(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Yi(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vi(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Bi,Wi,Zi={"-":"",_:" ",0:"0"},Gi=/^\s*\d+/,Xi=/^%/,Ki=/[\\^$*+?|[\]().{}]/g;function Qi(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Ji(t){return t.replace(Ki,"\\$&")}function to(t){return new RegExp("^(?:"+t.map(Ji).join("|")+")","i")}function eo(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function no(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ro(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function io(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function oo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ao(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function so(t,e,n){var r=Gi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function lo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function co(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function uo(t,e,n){var r=Gi.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function fo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ho(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function po(t,e,n){var r=Gi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function mo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function go(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function vo(t,e,n){var r=Gi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function yo(t,e,n){var r=Gi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function xo(t,e,n){var r=Gi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function bo(t,e,n){var r=Xi.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function wo(t,e,n){var r=Gi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function $o(t,e,n){var r=Gi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _o(t,e){return Qi(t.getDate(),e,2)}function ko(t,e){return Qi(t.getHours(),e,2)}function Mo(t,e){return Qi(t.getHours()%12||12,e,2)}function Co(t,e){return Qi(1+gi.count(Ai(t),t),e,3)}function No(t,e){return Qi(t.getMilliseconds(),e,3)}function Ao(t,e){return No(t,e)+"000"}function So(t,e){return Qi(t.getMonth()+1,e,2)}function To(t,e){return Qi(t.getMinutes(),e,2)}function Do(t,e){return Qi(t.getSeconds(),e,2)}function Eo(t){var e=t.getDay();return 0===e?7:e}function zo(t,e){return Qi(yi.count(Ai(t)-1,t),e,2)}function Lo(t){var e=t.getDay();return e>=4||0===e?$i(t):$i.ceil(t)}function jo(t,e){return t=Lo(t),Qi($i.count(Ai(t),t)+(4===Ai(t).getDay()),e,2)}function Po(t){return t.getDay()}function Ro(t,e){return Qi(xi.count(Ai(t)-1,t),e,2)}function Oo(t,e){return Qi(t.getFullYear()%100,e,2)}function Io(t,e){return Qi((t=Lo(t)).getFullYear()%100,e,2)}function Fo(t,e){return Qi(t.getFullYear()%1e4,e,4)}function qo(t,e){var n=t.getDay();return Qi((t=n>=4||0===n?$i(t):$i.ceil(t)).getFullYear()%1e4,e,4)}function Uo(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qi(e/60|0,"0",2)+Qi(e%60,"0",2)}function Ho(t,e){return Qi(t.getUTCDate(),e,2)}function Yo(t,e){return Qi(t.getUTCHours(),e,2)}function Vo(t,e){return Qi(t.getUTCHours()%12||12,e,2)}function Bo(t,e){return Qi(1+Ti.count(Fi(t),t),e,3)}function Wo(t,e){return Qi(t.getUTCMilliseconds(),e,3)}function Zo(t,e){return Wo(t,e)+"000"}function Go(t,e){return Qi(t.getUTCMonth()+1,e,2)}function Xo(t,e){return Qi(t.getUTCMinutes(),e,2)}function Ko(t,e){return Qi(t.getUTCSeconds(),e,2)}function Qo(t){var e=t.getUTCDay();return 0===e?7:e}function Jo(t,e){return Qi(Ei.count(Fi(t)-1,t),e,2)}function ta(t){var e=t.getUTCDay();return e>=4||0===e?Pi(t):Pi.ceil(t)}function ea(t,e){return t=ta(t),Qi(Pi.count(Fi(t),t)+(4===Fi(t).getUTCDay()),e,2)}function na(t){return t.getUTCDay()}function ra(t,e){return Qi(zi.count(Fi(t)-1,t),e,2)}function ia(t,e){return Qi(t.getUTCFullYear()%100,e,2)}function oa(t,e){return Qi((t=ta(t)).getUTCFullYear()%100,e,2)}function aa(t,e){return Qi(t.getUTCFullYear()%1e4,e,4)}function sa(t,e){var n=t.getUTCDay();return Qi((t=n>=4||0===n?Pi(t):Pi.ceil(t)).getUTCFullYear()%1e4,e,4)}function la(){return"+0000"}function ca(){return"%"}function ua(t){return+t}function fa(t){return Math.floor(+t/1e3)}function da(t){return new Date(t)}function ha(t){return t instanceof Date?+t:+new Date(+t)}function pa(t,e,n,r,i,o,a,s,l,c){var u=Mr(),f=u.invert,d=u.domain,h=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),x=c("%B"),b=c("%Y");function w(t){return(l(t)<t?h:s(t)<t?p:a(t)<t?m:o(t)<t?g:r(t)<t?i(t)<t?v:y:n(t)<t?x:b)(t)}return u.invert=function(t){return new Date(f(t))},u.domain=function(t){return arguments.length?d(Array.from(t,ha)):d().map(da)},u.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?w:c(e)},u.nice=function(t){var n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}(n,t)):u},u.copy=function(){return _r(u,pa(t,e,n,r,i,o,a,s,l,c))},u}function ma(){return vn.apply(pa(qi,Ui,Ai,Ci,yi,gi,pi,di,ui,Wi).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ga(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function va(){var t,e,n,r,i,o,a,s=0,l=.5,c=1,u=1,f=xr,d=!1;function h(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(u*t<u*e?r:i),f(d?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=gr(t,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(a){return arguments.length?([s,l,c]=a,t=o(s=+s),e=o(l=+l),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,h):[s,l,c]},h.clamp=function(t){return arguments.length?(d=!!t,h):d},h.interpolator=function(t){return arguments.length?(f=t,h):f},h.range=p(pr),h.rangeRound=p(mr),h.unknown=function(t){return arguments.length?(a=t,h):a},function(a){return o=a,t=a(s),e=a(l),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,h}}function ya(){var t=Ur(va()(xr));return t.copy=function(){return ga(t,ya())},yn.apply(t,arguments)}!function(t){Bi=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=to(i),u=eo(i),f=to(o),d=eo(o),h=to(a),p=eo(a),m=to(s),g=eo(s),v=to(l),y=eo(l),x={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:_o,e:_o,f:Ao,g:Io,G:qo,H:ko,I:Mo,j:Co,L:No,m:So,M:To,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ua,s:fa,S:Do,u:Eo,U:zo,V:jo,w:Po,W:Ro,x:null,X:null,y:Oo,Y:Fo,Z:Uo,"%":ca},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ho,e:Ho,f:Zo,g:oa,G:sa,H:Yo,I:Vo,j:Bo,L:Wo,m:Go,M:Xo,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ua,s:fa,S:Ko,u:Qo,U:Jo,V:ea,w:na,W:ra,x:null,X:null,y:ia,Y:aa,Z:la,"%":ca},w={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return k(t,e,n,r)},d:ho,e:ho,f:xo,g:lo,G:so,H:mo,I:mo,j:po,L:yo,m:fo,M:go,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:uo,Q:wo,s:$o,S:vo,u:ro,U:io,V:oo,w:no,W:ao,x:function(t,e,r){return k(t,n,e,r)},X:function(t,e,n){return k(t,r,e,n)},y:lo,Y:so,Z:co,"%":bo};function $(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=Zi[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function _(t,e){return function(n){var r,i,o=Vi(1900,void 0,1);if(k(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Yi(Vi(o.y,0,1))).getUTCDay(),r=i>4||0===i?zi.ceil(r):zi(r),r=Ti.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Hi(Vi(o.y,0,1))).getDay(),r=i>4||0===i?xi.ceil(r):xi(r),r=gi.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Yi(Vi(o.y,0,1)).getUTCDay():Hi(Vi(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Yi(o)):Hi(o)}}function k(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in Zi?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=$(n,x),x.X=$(r,x),x.c=$(e,x),b.x=$(n,b),b.X=$(r,b),b.c=$(e,b),{format:function(t){var e=$(t+="",x);return e.toString=function(){return t},e},parse:function(t){var e=_(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=$(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=_(t+="",!0);return e.toString=function(){return t},e}}}(t),Wi=Bi.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const xa=[];function ba(e,n=t){let r;const i=new Set;function o(t){if(s(e,t)&&(e=t,r)){const t=!xa.length;for(const t of i)t[1](),xa.push(t,e);if(t){for(let t=0;t<xa.length;t+=2)xa[t][0](xa[t+1]);xa.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const l=[a,s];return i.add(l),1===i.size&&(r=n(o)||t),a(e),()=>{i.delete(l),0===i.size&&(r(),r=null)}}}}function wa(e,n,r){const i=!Array.isArray(e),s=i?[e]:e,c=n.length<2;return u=e=>{let r=!1;const u=[];let f=0,d=t;const h=()=>{if(f)return;d();const r=n(i?u[0]:u,e);c?e(r):d=a(r)?r:t},p=s.map(((t,e)=>l(t,(t=>{u[e]=t,f&=~(1<<e),r&&h()}),(()=>{f|=1<<e}))));return r=!0,h(),function(){o(p),d()}},{subscribe:ba(r,u).subscribe};var u}function $a(t){return 0===(e=t)||e?Array.isArray(t)?e=>t.map((t=>"function"!=typeof t?e[t]:t(e))):"function"!=typeof t?e=>e[t]:t:null;var e}function _a(t,e={}){return function(t){const e={};for(const n of t){if(Object(n)!==n)throw new TypeError("iterable for fromEntries should yield objects");const{0:t,1:r}=n;Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r})}return e}(Object.entries(t).filter((([t,n])=>void 0!==n&&void 0===e[t])))}function ka(t,e){if(!Array.isArray(t))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const n={},r=Object.keys(e),i=r.length;let o,a,s,l,c,u,f,d;const h=t.length;for(o=0;o<i;o+=1){for(l=r[o],f=e[l],c=null,u=null,a=0;a<h;a+=1)if(d=f(t[a]),Array.isArray(d)){const t=d.length;for(s=0;s<t;s+=1)!1!==d[s]&&void 0!==d[s]&&null!==d[s]&&!1===Number.isNaN(d[s])&&((null===c||d[s]<c)&&(c=d[s]),(null===u||d[s]>u)&&(u=d[s]))}else!1!==d&&null!=d&&!1===Number.isNaN(d)&&((null===c||d<c)&&(c=d),(null===u||d>u)&&(u=d));n[l]=[c,u]}return n}function Ma(t,e,n){const r=Object.keys(n).reduce(((t,r)=>{const i=function(t){return"function"==typeof t.bandwidth?"ordinal":(e=Object.keys(t),n=["domain","range","unknown","copy"],e.length===n.length&&e.every((t=>n.includes(t)))?"ordinal":"other");var e,n}(n[r]);return t[i]||(t[i]={}),t[i][r]=e[r],t}),{ordinal:!1,other:!1});let i={};return r.ordinal&&(i=function(t,e,{sort:n=!1}={}){if(!Array.isArray(t))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const r={},i=Object.keys(e),o=i.length;let a,s,l,c,u,f,d;const h=t.length;for(a=0;a<o;a+=1){for(d=new Set,c=i[a],u=e[c],s=0;s<h;s+=1)if(f=u(t[s]),Array.isArray(f)){const t=f.length;for(l=0;l<t;l+=1)d.add(f[l])}else d.add(f);const o=Array.from(d);r[c]=!0===n?o.sort():o}return r}(t,r.ordinal)),r.other&&(i={...i,...ka(t,r.other)}),i}function Ca(t){return function([e,n]){return"function"==typeof n&&(n=n(e[t])),e?function(t=[],e){return!0===Array.isArray(e)?e.map(((e,n)=>null===e?t[n]:e)):t}(e[t],n):n}}var Na={x:Hr,y:Hr,z:Hr,r:Gr};function Aa(t){return t}function Sa(t){return e=>Math.log(t*e)}function Ta(t){return e=>t*Math.exp(e)}function Da(t){return e=>Math.sign(e)*Math.log1p(Math.abs(e/t))}function Ea(t){return e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}function za(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function La(t,e){if("function"!=typeof t.range)throw new Error("Scale method `range` must be a function");if("function"!=typeof t.domain)throw new Error("Scale method `domain` must be a function");if(!Array.isArray(e))return t.domain();2!==t.domain().length&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",t.domain()),2!==t.range().length&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",t.range());const{lift:n,ground:r}=function(t){const e=function(t){return t.constant?"symlog":t.base?"log":t.exponent?.5===t.exponent()?"sqrt":"pow":"other"}(t);if("log"===e){const n=Math.sign(t.domain()[0]);return{lift:Sa(n),ground:Ta(n),scaleType:e}}if("pow"===e){const t=1;return{lift:za(t),ground:za(1/t),scaleType:e}}if("sqrt"===e){const t=.5;return{lift:za(t),ground:za(1/t),scaleType:e}}if("symlog"===e){const t=1;return{lift:Da(t),ground:Ea(t),scaleType:e}}return{lift:Aa,ground:Aa,scaleType:e}}(t),i=t.domain()[0],o="[object Date]"===Object.prototype.toString.call(i),[a,s]=t.domain().map((t=>n(o?t.getTime():t))),[l,c]=t.range(),u=e[0]||0,f=e[1]||0,d=(s-a)/(Math.abs(c-l)-u-f);return[a-u*d,f*d+s].map((t=>r(o?new Date(t):t)))}function ja(t){return function([e,n,r,i,o,a,s,l,c,u]){if(null===n)return null;const f=function(t,e,n,r,i,o){return i?"function"==typeof i?i({width:e,height:n}):i:function(t,e,n,r,i){let o,a;return!0===i?(o=0,a=100):(o="r"===t?1:0,a="y"===t?n:"r"===t?25:e),!0===r?[a,o]:[o,a]}(t,e,n,r,o)}(t,s,l,a,c,u),d=e===Na[t]?e():e.copy();return d.domain(r),(!d.interpolator||"function"==typeof d.interpolator&&d.interpolator().name.startsWith("identity"))&&d.range(f),i&&d.domain(La(d,i)),!0!==o&&"number"!=typeof o||("function"==typeof d.nice?d.nice("number"==typeof o?o:void 0):console.error(`[Layer Cake] You set \`${t}Nice: true\` but the ${t}Scale does not have a \`.nice\` method. Ignoring...`)),d}}function Pa([t,e]){return n=>{const r=t(n);return Array.isArray(r)?r.map((t=>e(t))):e(r)}}function Ra([t]){if("function"==typeof t){if("function"==typeof t.range)return t.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const Oa=t=>({element:4&t[0],width:256&t[0],height:512&t[0],aspectRatio:1024&t[0],containerWidth:128&t[0],containerHeight:64&t[0]}),Ia=t=>({element:t[2],width:t[8],height:t[9],aspectRatio:t[10],containerWidth:t[7],containerHeight:t[6]});function Fa(t){let e,n,r;const i=t[90].default,o=u(i,t,t[89],Ia);return{c(){e=T("div"),o&&o.c(),O(e,"class","layercake-container svelte-1ll0j6t"),ft((()=>t[92].call(e))),F(e,"position",t[5],!1),F(e,"top","absolute"===t[5]?"0":null,!1),F(e,"right","absolute"===t[5]?"0":null,!1),F(e,"bottom","absolute"===t[5]?"0":null,!1),F(e,"left","absolute"===t[5]?"0":null,!1),F(e,"pointer-events",!1===t[4]?"none":null,!1)},m(i,a){N(i,e,a),o&&o.m(e,null),t[91](e),n=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=T("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=Y();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=j(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=j(n.contentWindow,"resize",e)}),k(t,n),()=>{(r||i&&n.contentWindow)&&i(),A(n)}}(e,t[92].bind(e)),r=!0},p(t,n){o&&o.p&&(!r||1988&n[0]|134217728&n[2])&&h(o,i,t,t[89],r?d(i,t[89],n,Oa):p(t[89]),Ia),32&n[0]&&F(e,"position",t[5],!1),32&n[0]&&F(e,"top","absolute"===t[5]?"0":null,!1),32&n[0]&&F(e,"right","absolute"===t[5]?"0":null,!1),32&n[0]&&F(e,"bottom","absolute"===t[5]?"0":null,!1),32&n[0]&&F(e,"left","absolute"===t[5]?"0":null,!1),16&n[0]&&F(e,"pointer-events",!1===t[4]?"none":null,!1)},i(t){r||(kt(o,t),r=!0)},o(t){Mt(o,t),r=!1},d(r){r&&A(e),o&&o.d(r),t[91](null),n()}}}function qa(t){let e,n,r=(!0===t[3]||"undefined"!=typeof window)&&Fa(t);return{c(){r&&r.c(),e=L()},m(t,i){r&&r.m(t,i),N(t,e,i),n=!0},p(t,n){!0===t[3]||"undefined"!=typeof window?r?(r.p(t,n),8&n[0]&&kt(r,1)):(r=Fa(t),r.c(),kt(r,1),r.m(e.parentNode,e)):r&&($t(),Mt(r,1,1,(()=>{r=null})),_t())},i(t){n||(kt(r),n=!0)},o(t){Mt(r),n=!1},d(t){r&&r.d(t),t&&A(e)}}}function Ua(t,e,n){let r,i,o,a,s,l,u,f,d,h,p,m,v,y,x,b,w,$,_,k,M,C,N,A,S,T,D,E,z,L,j,P,R,O,I,F,q,U,H,Y,V,{$$slots:B={},$$scope:W}=e,{ssr:Z=!1}=e,{pointerEvents:G=!0}=e,{position:X="relative"}=e,{percentRange:K=!1}=e,{width:Q}=e,{height:J}=e,{containerWidth:tt=Q||100}=e,{containerHeight:rt=J||100}=e,{element:it}=e,{x:ot}=e,{y:st}=e,{z:lt}=e,{r:ct}=e,{data:ut=[]}=e,{xDomain:ft}=e,{yDomain:dt}=e,{zDomain:ht}=e,{rDomain:pt}=e,{xNice:mt=!1}=e,{yNice:gt=!1}=e,{zNice:vt=!1}=e,{rNice:yt=!1}=e,{xPadding:xt}=e,{yPadding:bt}=e,{zPadding:wt}=e,{rPadding:$t}=e,{xScale:_t=Na.x}=e,{yScale:kt=Na.y}=e,{zScale:Mt=Na.z}=e,{rScale:Ct=Na.r}=e,{xRange:Nt}=e,{yRange:At}=e,{zRange:St}=e,{rRange:Tt}=e,{xReverse:Dt=!1}=e,{yReverse:Et="function"!=typeof kt.bandwidth}=e,{zReverse:zt=!1}=e,{rReverse:Lt=!1}=e,{padding:jt={}}=e,{extents:Pt={}}=e,{flatData:Rt}=e,{custom:Ot={}}=e,It=!1;nt((()=>{It=!0}));const Ft={},qt=ba(K);c(t,qt,(t=>n(128,U=t)));const Ut=ba(tt);c(t,Ut,(t=>n(7,q=t)));const Ht=ba(rt);c(t,Ht,(t=>n(6,F=t)));const Yt=ba(_a(Pt));c(t,Yt,(t=>n(127,I=t)));const Vt=ba(ut);c(t,Vt,(t=>n(126,O=t)));const Bt=ba(Rt||ut);c(t,Bt,(t=>n(125,R=t)));const Wt=ba(jt);c(t,Wt,(t=>n(124,P=t)));const Zt=ba($a(ot));c(t,Zt,(t=>n(123,j=t)));const Gt=ba($a(st));c(t,Gt,(t=>n(122,L=t)));const Xt=ba($a(lt));c(t,Xt,(t=>n(121,z=t)));const Kt=ba($a(ct));c(t,Kt,(t=>n(120,E=t)));const Qt=ba(ft);c(t,Qt,(t=>n(119,D=t)));const Jt=ba(dt);c(t,Jt,(t=>n(118,T=t)));const te=ba(ht);c(t,te,(t=>n(117,S=t)));const ee=ba(pt);c(t,ee,(t=>n(116,A=t)));const ne=ba(mt);c(t,ne,(t=>n(115,N=t)));const re=ba(gt);c(t,re,(t=>n(114,C=t)));const ie=ba(vt);c(t,ie,(t=>n(113,M=t)));const oe=ba(yt);c(t,oe,(t=>n(112,k=t)));const ae=ba(Dt);c(t,ae,(t=>n(111,_=t)));const se=ba(Et);c(t,se,(t=>n(110,$=t)));const le=ba(zt);c(t,le,(t=>n(109,w=t)));const ce=ba(Lt);c(t,ce,(t=>n(108,b=t)));const ue=ba(xt);c(t,ue,(t=>n(107,x=t)));const fe=ba(bt);c(t,fe,(t=>n(106,y=t)));const de=ba(wt);c(t,de,(t=>n(105,v=t)));const he=ba($t);c(t,he,(t=>n(104,m=t)));const pe=ba(Nt);c(t,pe,(t=>n(103,p=t)));const me=ba(At);c(t,me,(t=>n(102,h=t)));const ge=ba(St);c(t,ge,(t=>n(101,d=t)));const ve=ba(Tt);c(t,ve,(t=>n(100,f=t)));const ye=ba(_t);c(t,ye,(t=>n(99,u=t)));const xe=ba(kt);c(t,xe,(t=>n(98,l=t)));const be=ba(Mt);c(t,be,(t=>n(97,s=t)));const we=ba(Ct);c(t,we,(t=>n(96,a=t)));const $e=ba(Ft);c(t,$e,(t=>n(94,i=t)));const _e=ba(Ot);c(t,_e,(t=>n(95,o=t)));const ke=wa([Zt,Gt,Xt,Kt],(([t,e,n,r])=>{const i={};return t&&(i.x=t),e&&(i.y=e),n&&(i.z=n),r&&(i.r=r),i})),Me=wa([Wt,Ut,Ht],(([t])=>Object.assign({top:0,right:0,bottom:0,left:0},t))),Ce=wa([Ut,Ht,Me],(([t,e,n])=>{const r={};return r.top=n.top,r.right=t-n.right,r.bottom=e-n.bottom,r.left=n.left,r.width=r.right-r.left,r.height=r.bottom-r.top,r.width<=0&&!0===It&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),r.height<=0&&!0===It&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),r})),Ne=wa([Ce],(([t])=>t.width));c(t,Ne,(t=>n(8,H=t)));const Ae=wa([Ce],(([t])=>t.height));c(t,Ae,(t=>n(9,Y=t)));const Se=wa([Bt,ke,Yt,ye,xe,we,be],(([t,e,n,r,i,o,a])=>{const s={x:r,y:i,r:o,z:a},l=_a(e,n),c=Object.fromEntries(Object.keys(l).map((t=>[t,s[t]])));if(Object.keys(l).length>0){return{...Ma(t,l,c),...n}}return{}})),Te=wa([Se,Qt],Ca("x")),De=wa([Se,Jt],Ca("y")),Ee=wa([Se,te],Ca("z")),ze=wa([Se,ee],Ca("r")),Le=wa([ye,Se,Te,ue,ne,ae,Ne,Ae,pe,qt],ja("x")),je=wa([Zt,Le],Pa),Pe=wa([xe,Se,De,fe,re,se,Ne,Ae,me,qt],ja("y")),Re=wa([Gt,Pe],Pa),Oe=wa([be,Se,Ee,de,ie,le,Ne,Ae,ge,qt],ja("z")),Ie=wa([Xt,Oe],Pa),Fe=wa([we,Se,ze,he,oe,ce,Ne,Ae,ve,qt],ja("r")),qe=wa([Kt,Fe],Pa),Ue=wa([Le],Ra),He=wa([Pe],Ra),Ye=wa([Oe],Ra),Ve=wa([Fe],Ra),Be=wa([Ne,Ae],(([t,e])=>t/e));return c(t,Be,(t=>n(10,V=t))),t.$$set=t=>{"ssr"in t&&n(3,Z=t.ssr),"pointerEvents"in t&&n(4,G=t.pointerEvents),"position"in t&&n(5,X=t.position),"percentRange"in t&&n(51,K=t.percentRange),"width"in t&&n(52,Q=t.width),"height"in t&&n(53,J=t.height),"containerWidth"in t&&n(0,tt=t.containerWidth),"containerHeight"in t&&n(1,rt=t.containerHeight),"element"in t&&n(2,it=t.element),"x"in t&&n(54,ot=t.x),"y"in t&&n(55,st=t.y),"z"in t&&n(56,lt=t.z),"r"in t&&n(57,ct=t.r),"data"in t&&n(58,ut=t.data),"xDomain"in t&&n(59,ft=t.xDomain),"yDomain"in t&&n(60,dt=t.yDomain),"zDomain"in t&&n(61,ht=t.zDomain),"rDomain"in t&&n(62,pt=t.rDomain),"xNice"in t&&n(63,mt=t.xNice),"yNice"in t&&n(64,gt=t.yNice),"zNice"in t&&n(65,vt=t.zNice),"rNice"in t&&n(66,yt=t.rNice),"xPadding"in t&&n(67,xt=t.xPadding),"yPadding"in t&&n(68,bt=t.yPadding),"zPadding"in t&&n(69,wt=t.zPadding),"rPadding"in t&&n(70,$t=t.rPadding),"xScale"in t&&n(71,_t=t.xScale),"yScale"in t&&n(72,kt=t.yScale),"zScale"in t&&n(73,Mt=t.zScale),"rScale"in t&&n(74,Ct=t.rScale),"xRange"in t&&n(75,Nt=t.xRange),"yRange"in t&&n(76,At=t.yRange),"zRange"in t&&n(77,St=t.zRange),"rRange"in t&&n(78,Tt=t.rRange),"xReverse"in t&&n(79,Dt=t.xReverse),"yReverse"in t&&n(80,Et=t.yReverse),"zReverse"in t&&n(81,zt=t.zReverse),"rReverse"in t&&n(82,Lt=t.rReverse),"padding"in t&&n(83,jt=t.padding),"extents"in t&&n(84,Pt=t.extents),"flatData"in t&&n(85,Rt=t.flatData),"custom"in t&&n(86,Ot=t.custom),"$$scope"in t&&n(89,W=t.$$scope)},t.$$.update=()=>{8388608&t.$$.dirty[1]&&ot&&n(87,Ft.x=ot,Ft),16777216&t.$$.dirty[1]&&st&&n(87,Ft.y=st,Ft),33554432&t.$$.dirty[1]&&lt&&n(87,Ft.z=lt,Ft),67108864&t.$$.dirty[1]&&ct&&n(87,Ft.r=ct,Ft),268435456&t.$$.dirty[1]&&ft&&n(87,Ft.xDomain=ft,Ft),536870912&t.$$.dirty[1]&&dt&&n(87,Ft.yDomain=dt,Ft),1073741824&t.$$.dirty[1]&&ht&&n(87,Ft.zDomain=ht,Ft),1&t.$$.dirty[2]&&pt&&n(87,Ft.rDomain=pt,Ft),8192&t.$$.dirty[2]&&Nt&&n(87,Ft.xRange=Nt,Ft),16384&t.$$.dirty[2]&&At&&n(87,Ft.yRange=At,Ft),32768&t.$$.dirty[2]&&St&&n(87,Ft.zRange=St,Ft),65536&t.$$.dirty[2]&&Tt&&n(87,Ft.rRange=Tt,Ft),1048576&t.$$.dirty[1]&&g(qt,U=K,U),1&t.$$.dirty[0]&&g(Ut,q=tt,q),2&t.$$.dirty[0]&&g(Ht,F=rt,F),4194304&t.$$.dirty[2]&&g(Yt,I=_a(Pt),I),134217728&t.$$.dirty[1]&&g(Vt,O=ut,O),134217728&t.$$.dirty[1]|8388608&t.$$.dirty[2]&&g(Bt,R=Rt||ut,R),2097152&t.$$.dirty[2]&&g(Wt,P=jt,P),8388608&t.$$.dirty[1]&&g(Zt,j=$a(ot),j),16777216&t.$$.dirty[1]&&g(Gt,L=$a(st),L),33554432&t.$$.dirty[1]&&g(Xt,z=$a(lt),z),67108864&t.$$.dirty[1]&&g(Kt,E=$a(ct),E),268435456&t.$$.dirty[1]&&g(Qt,D=ft,D),536870912&t.$$.dirty[1]&&g(Jt,T=dt,T),1073741824&t.$$.dirty[1]&&g(te,S=ht,S),1&t.$$.dirty[2]&&g(ee,A=pt,A),2&t.$$.dirty[2]&&g(ne,N=mt,N),4&t.$$.dirty[2]&&g(re,C=gt,C),8&t.$$.dirty[2]&&g(ie,M=vt,M),16&t.$$.dirty[2]&&g(oe,k=yt,k),131072&t.$$.dirty[2]&&g(ae,_=Dt,_),262144&t.$$.dirty[2]&&g(se,$=Et,$),524288&t.$$.dirty[2]&&g(le,w=zt,w),1048576&t.$$.dirty[2]&&g(ce,b=Lt,b),32&t.$$.dirty[2]&&g(ue,x=xt,x),64&t.$$.dirty[2]&&g(fe,y=bt,y),128&t.$$.dirty[2]&&g(de,v=wt,v),256&t.$$.dirty[2]&&g(he,m=$t,m),8192&t.$$.dirty[2]&&g(pe,p=Nt,p),16384&t.$$.dirty[2]&&g(me,h=At,h),32768&t.$$.dirty[2]&&g(ge,d=St,d),65536&t.$$.dirty[2]&&g(ve,f=Tt,f),512&t.$$.dirty[2]&&g(ye,u=_t,u),1024&t.$$.dirty[2]&&g(xe,l=kt,l),2048&t.$$.dirty[2]&&g(be,s=Mt,s),4096&t.$$.dirty[2]&&g(we,a=Ct,a),16777216&t.$$.dirty[2]&&g(_e,o=Ot,o),33554432&t.$$.dirty[2]&&g($e,i=Ft,i),67108864&t.$$.dirty[2]&&function(t,e){et().$$.context.set(t,e)}("LayerCake",r)},n(88,r={activeGetters:ke,width:Ne,height:Ae,percentRange:qt,aspectRatio:Be,containerWidth:Ut,containerHeight:Ht,x:Zt,y:Gt,z:Xt,r:Kt,custom:_e,data:Vt,xNice:ne,yNice:re,zNice:ie,rNice:oe,xReverse:ae,yReverse:se,zReverse:le,rReverse:ce,xPadding:ue,yPadding:fe,zPadding:de,rPadding:he,padding:Me,flatData:Bt,extents:Se,xDomain:Te,yDomain:De,zDomain:Ee,rDomain:ze,xRange:Ue,yRange:He,zRange:Ye,rRange:Ve,config:$e,xScale:Le,xGet:je,yScale:Pe,yGet:Re,zScale:Oe,zGet:Ie,rScale:Fe,rGet:qe}),[tt,rt,it,Z,G,X,F,q,H,Y,V,qt,Ut,Ht,Yt,Vt,Bt,Wt,Zt,Gt,Xt,Kt,Qt,Jt,te,ee,ne,re,ie,oe,ae,se,le,ce,ue,fe,de,he,pe,me,ge,ve,ye,xe,be,we,$e,_e,Ne,Ae,Be,K,Q,J,ot,st,lt,ct,ut,ft,dt,ht,pt,mt,gt,vt,yt,xt,bt,wt,$t,_t,kt,Mt,Ct,Nt,At,St,Tt,Dt,Et,zt,Lt,jt,Pt,Rt,Ot,Ft,r,W,B,function(t){at[t?"unshift":"push"]((()=>{it=t,n(2,it)}))},function(){tt=this.clientWidth,rt=this.clientHeight,n(0,tt),n(1,rt)}]}class Ha extends Rt{constructor(t){super(),Pt(this,t,Ua,qa,s,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const Ya=t=>({element:1&t}),Va=t=>({element:t[0]});function Ba(t){let e,n;const r=t[6].default,i=u(r,t,t[5],Va);return{c(){e=T("div"),i&&i.c(),O(e,"class","layercake-layout-html svelte-1u9nfei"),F(e,"z-index",t[1],!1),F(e,"pointer-events",!1===t[2]?"none":null,!1),F(e,"top",t[3].top+"px",!1),F(e,"right",t[3].right+"px",!1),F(e,"bottom",t[3].bottom+"px",!1),F(e,"left",t[3].left+"px",!1)},m(r,o){N(r,e,o),i&&i.m(e,null),t[7](e),n=!0},p(t,[o]){i&&i.p&&(!n||33&o)&&h(i,r,t,t[5],n?d(r,t[5],o,Ya):p(t[5]),Va),2&o&&F(e,"z-index",t[1],!1),4&o&&F(e,"pointer-events",!1===t[2]?"none":null,!1),8&o&&F(e,"top",t[3].top+"px",!1),8&o&&F(e,"right",t[3].right+"px",!1),8&o&&F(e,"bottom",t[3].bottom+"px",!1),8&o&&F(e,"left",t[3].left+"px",!1)},i(t){n||(kt(i,t),n=!0)},o(t){Mt(i,t),n=!1},d(n){n&&A(e),i&&i.d(n),t[7](null)}}}function Wa(t,e,n){let r,{$$slots:i={},$$scope:o}=e,{element:a}=e,{zIndex:s}=e,{pointerEvents:l}=e;const{padding:u}=it("LayerCake");return c(t,u,(t=>n(3,r=t))),t.$$set=t=>{"element"in t&&n(0,a=t.element),"zIndex"in t&&n(1,s=t.zIndex),"pointerEvents"in t&&n(2,l=t.pointerEvents),"$$scope"in t&&n(5,o=t.$$scope)},[a,s,l,r,u,o,i,function(t){at[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}class Za extends Rt{constructor(t){super(),Pt(this,t,Wa,Ba,s,{element:0,zIndex:1,pointerEvents:2})}}const Ga=t=>({element:1&t}),Xa=t=>({element:t[0]}),Ka=t=>({element:1&t}),Qa=t=>({element:t[0]});function Ja(t){let e,n,r,i,o;const a=t[12].defs,s=u(a,t,t[11],Qa),l=t[12].default,c=u(l,t,t[11],Xa);return{c(){e=D("svg"),n=D("defs"),s&&s.c(),r=D("g"),c&&c.c(),O(r,"class","layercake-layout-svg_g"),O(r,"transform",i="translate("+t[7].left+", "+t[7].top+")"),O(e,"class","layercake-layout-svg svelte-17l4rdd"),O(e,"viewBox",t[4]),O(e,"width",t[5]),O(e,"height",t[6]),F(e,"z-index",t[2],!1),F(e,"pointer-events",!1===t[3]?"none":null,!1)},m(i,a){N(i,e,a),k(e,n),s&&s.m(n,null),k(e,r),c&&c.m(r,null),t[13](r),t[14](e),o=!0},p(t,[n]){s&&s.p&&(!o||2049&n)&&h(s,a,t,t[11],o?d(a,t[11],n,Ka):p(t[11]),Qa),c&&c.p&&(!o||2049&n)&&h(c,l,t,t[11],o?d(l,t[11],n,Ga):p(t[11]),Xa),(!o||128&n&&i!==(i="translate("+t[7].left+", "+t[7].top+")"))&&O(r,"transform",i),(!o||16&n)&&O(e,"viewBox",t[4]),(!o||32&n)&&O(e,"width",t[5]),(!o||64&n)&&O(e,"height",t[6]),4&n&&F(e,"z-index",t[2],!1),8&n&&F(e,"pointer-events",!1===t[3]?"none":null,!1)},i(t){o||(kt(s,t),kt(c,t),o=!0)},o(t){Mt(s,t),Mt(c,t),o=!1},d(n){n&&A(e),s&&s.d(n),c&&c.d(n),t[13](null),t[14](null)}}}function ts(t,e,n){let r,i,o,{$$slots:a={},$$scope:s}=e,{element:l}=e,{innerElement:u}=e,{zIndex:f}=e,{pointerEvents:d}=e,{viewBox:h}=e;const{containerWidth:p,containerHeight:m,padding:g}=it("LayerCake");return c(t,p,(t=>n(5,r=t))),c(t,m,(t=>n(6,i=t))),c(t,g,(t=>n(7,o=t))),t.$$set=t=>{"element"in t&&n(0,l=t.element),"innerElement"in t&&n(1,u=t.innerElement),"zIndex"in t&&n(2,f=t.zIndex),"pointerEvents"in t&&n(3,d=t.pointerEvents),"viewBox"in t&&n(4,h=t.viewBox),"$$scope"in t&&n(11,s=t.$$scope)},[l,u,f,d,h,r,i,o,p,m,g,s,a,function(t){at[t?"unshift":"push"]((()=>{u=t,n(1,u)}))},function(t){at[t?"unshift":"push"]((()=>{l=t,n(0,l)}))}]}class es extends Rt{constructor(t){super(),Pt(this,t,ts,Ja,s,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function ns(t){if(Array.isArray(t)&&Array.isArray(t[0])){let e=[];const n=t.length;for(let r=0;r<n;r+=1)e=e.concat(t[r]);return e}return t}const rs=Math.PI,is=2*rs,os=1e-6,as=is-os;function ss(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ls(){return new ss}function cs(t){return function(){return t}}function us(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function fs(t){this._context=t}function ds(t){return new fs(t)}function hs(t){return t[0]}function ps(t){return t[1]}function ms(t,e){var n=cs(!0),r=null,i=ds,o=null;function a(a){var s,l,c,u=(a=us(a)).length,f=!1;for(null==r&&(o=i(c=ls())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(l,s,a),+e(l,s,a));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?hs:cs(t),e="function"==typeof e?e:void 0===e?ps:cs(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:cs(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:cs(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:cs(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function gs(t,e,n){var r=null,i=cs(!0),o=null,a=ds,s=null;function l(l){var c,u,f,d,h,p=(l=us(l)).length,m=!1,g=new Array(p),v=new Array(p);for(null==o&&(s=a(h=ls())),c=0;c<=p;++c){if(!(c<p&&i(d=l[c],c,l))===m)if(m=!m)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=u;--f)s.point(g[f],v[f]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+t(d,c,l),v[c]=+e(d,c,l),s.point(r?+r(d,c,l):g[c],n?+n(d,c,l):v[c]))}if(h)return s=null,h+""||null}function c(){return ms().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?hs:cs(+t),e="function"==typeof e?e:cs(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?ps:cs(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:cs(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:cs(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:cs(+t),l):r},l.y=function(t){return arguments.length?(e="function"==typeof t?t:cs(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:cs(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:cs(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:cs(!!t),l):i},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l}function vs(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ys(t){this._context=t}function xs(t){return new ys(t)}function bs(t){this._context=t}function ws(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function $s(t){return new bs(t)}function _s(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function ks(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ms(t,e){return t[e]}function Cs(t){const e=[];return e.key=t,e}function Ns(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function As(t){return function(t){var e=t.map(Ns);return ks(t).sort((function(t,n){return e[t]-e[n]}))}(t).reverse()}function Ss(t,e,n){const r=t.slice();r[13]=e[n],r[17]=n;const i=r[13][1][0][1].map(((t,e)=>({...t,value_2:r[13][1][1][1][e].value})));r[14]=i;const o=r[4](r[13][0]);return r[15]=o,r}function Ts(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function Ds(t,e,n){const r=t.slice();return r[18]=e[n],r[20]=n,r}function Es(e,n){let r,i,o,a,s,l=t;return{key:e,first:null,c(){r=D("path"),O(r,"class",i=m(`path-line path-line-${n[18][0]}`)+" svelte-15ylodm"),O(r,"d",o=n[2](n[18][1])),O(r,"stroke",a=n[15]),this.first=r},m(t,e){N(t,r,e)},p(t,e){n=t,8&e&&i!==(i=m(`path-line path-line-${n[18][0]}`)+" svelte-15ylodm")&&O(r,"class",i),12&e&&o!==(o=n[2](n[18][1]))&&O(r,"d",o),24&e&&a!==(a=n[15])&&O(r,"stroke",a)},r(){s=r.getBoundingClientRect()},f(){J(r),l()},a(){l(),l=Q(r,s,Ps,{delay:0,duration:500})},d(t){t&&A(r)}}}function zs(e,n){let r,i,o,a,s,l=t;return{key:e,first:null,c(){r=D("path"),O(r,"class",i=m(`path-polygon path-polygon-${n[18][0]}`)+" svelte-15ylodm"),O(r,"d",o=n[1](n[14])),O(r,"fill",a=n[15]),this.first=r},m(t,e){N(t,r,e)},p(t,e){n=t,8&e&&i!==(i=m(`path-polygon path-polygon-${n[18][0]}`)+" svelte-15ylodm")&&O(r,"class",i),10&e&&o!==(o=n[1](n[14]))&&O(r,"d",o),24&e&&a!==(a=n[15])&&O(r,"fill",a)},r(){s=r.getBoundingClientRect()},f(){J(r),l()},a(){l(),l=Q(r,s,Rs,{delay:500,duration:500})},d(t){t&&A(r)}}}function Ls(t){let e,n,r,i=[],o=new Map,a=[],s=new Map,l=t[13][1].filter(Os);const c=t=>t[18];for(let e=0;e<l.length;e+=1){let n=Ds(t,l,e),r=c(n);o.set(r,i[e]=Es(r,n))}let u=t[13][1].filter(Is);const f=t=>t[18];for(let e=0;e<u.length;e+=1){let n=Ts(t,u,e),r=f(n);s.set(r,a[e]=zs(r,n))}return{c(){e=D("g");for(let t=0;t<i.length;t+=1)i[t].c();n=L();for(let t=0;t<a.length;t+=1)a[t].c();O(e,"class",r="threshold-group threshold-group-"+t[13][0]+" svelte-15ylodm")},m(t,r){N(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);k(e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null)},p(t,d){if(28&d){l=t[13][1].filter(Os);for(let t=0;t<i.length;t+=1)i[t].r();i=Tt(i,d,c,1,t,l,o,e,St,Es,n,Ds);for(let t=0;t<i.length;t+=1)i[t].a()}if(26&d){u=t[13][1].filter(Is);for(let t=0;t<a.length;t+=1)a[t].r();a=Tt(a,d,f,1,t,u,s,e,St,zs,null,Ts);for(let t=0;t<a.length;t+=1)a[t].a()}8&d&&r!==(r="threshold-group threshold-group-"+t[13][0]+" svelte-15ylodm")&&O(e,"class",r)},d(t){t&&A(e);for(let t=0;t<i.length;t+=1)i[t].d();for(let t=0;t<a.length;t+=1)a[t].d()}}}function js(e){let n,r,i=e[3],o=[];for(let t=0;t<i.length;t+=1)o[t]=Ls(Ss(e,i,t));return{c(){n=D("g");for(let t=0;t<o.length;t+=1)o[t].c();O(n,"class",r=m(`line-group line-group-${e[0]}`)+" svelte-15ylodm")},m(t,e){N(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(30&e){let r;for(i=t[3],r=0;r<i.length;r+=1){const a=Ss(t,i,r);o[r]?o[r].p(a,e):(o[r]=Ls(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}1&e&&r!==(r=m(`line-group line-group-${t[0]}`)+" svelte-15ylodm")&&O(n,"class",r)},i:t,o:t,d(t){t&&A(n),S(o,t)}}}function Ps(t,{from:e,to:n},{delay:r,duration:i}){const o=t.getTotalLength();return{delay:r,duration:i,css:(t,e)=>`stroke-dasharray: ${t*o} ${e*o}`}}function Rs(t,{from:e,to:n},{delay:r,duration:i}){return{delay:r,duration:i,css:(t,e)=>"opacity: "+1*t}}ss.prototype=ls.prototype={constructor:ss,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,l=r-e,c=o-t,u=a-e,f=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>os)if(Math.abs(u*s-l*c)>os&&i){var d=n-o,h=r-a,p=s*s+l*l,m=d*d+h*h,g=Math.sqrt(p),v=Math.sqrt(f),y=i*Math.tan((rs-Math.acos((p+f-m)/(2*g*v)))/2),x=y/v,b=y/g;Math.abs(x-1)>os&&(this._+="L"+(t+x*c)+","+(e+x*u)),this._+="A"+i+","+i+",0,0,"+ +(u*d>c*h)+","+(this._x1=t+b*s)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,u=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>os||Math.abs(this._y1-c)>os)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%is+is),f>as?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):f>os&&(this._+="A"+n+","+n+",0,"+ +(f>=rs)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},fs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},ys.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vs(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=ws(t),i=ws(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Os=t=>50===t[0],Is=t=>50===t[0];function Fs(t,e,n){let r,i,o,a,s,l,u;const{data:f,xGet:d,yGet:h,yScale:p,zScale:m}=it("LayerCake");c(t,f,(t=>n(3,l=t))),c(t,d,(t=>n(12,s=t))),c(t,h,(t=>n(11,a=t))),c(t,p,(t=>n(10,o=t))),c(t,m,(t=>n(4,u=t)));let{activeChart:g}=e;return t.$$set=t=>{"activeChart"in t&&n(0,g=t.activeChart)},t.$$.update=()=>{6144&t.$$.dirty&&n(2,r=ms().x((t=>s(t))).y((t=>a(t))).curve(xs)),7168&t.$$.dirty&&n(1,i=gs().x((t=>s(t))).y0((t=>a(t))).y1((t=>o(t.value_2))).curve(xs))},[g,i,r,l,u,f,d,h,p,m,o,a,s]}class qs extends Rt{constructor(t){super(),Pt(this,t,Fs,js,s,{activeChart:0})}}function Us(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function Hs(t){let e,n;return{c(){e=D("line"),O(e,"class","gridline svelte-yu0ewn"),O(e,"y1",n=-1*t[11]),O(e,"y2","0"),O(e,"x1","0"),O(e,"x2","0")},m(t,n){N(t,e,n)},p(t,r){2048&r&&n!==(n=-1*t[11])&&O(e,"y1",n)},d(t){t&&A(e)}}}function Ys(t){let e,n,r;return{c(){e=D("line"),O(e,"class","tick-mark svelte-yu0ewn"),O(e,"y1",0),O(e,"y2",6),O(e,"x1",n=t[5]||t[7]?t[8].bandwidth()/2:0),O(e,"x2",r=t[5]||t[7]?t[8].bandwidth()/2:0)},m(t,n){N(t,e,n)},p(t,i){416&i&&n!==(n=t[5]||t[7]?t[8].bandwidth()/2:0)&&O(e,"x1",n),416&i&&r!==(r=t[5]||t[7]?t[8].bandwidth()/2:0)&&O(e,"x2",r)},d(t){t&&A(e)}}}function Vs(t){let e,n,r,i,o,a,s,l,c=t[4](t[19])+"",u=!1!==t[0]&&Hs(t),f=!0===t[1]&&Ys(t);return{c(){e=D("g"),u&&u.c(),n=L(),f&&f.c(),r=D("text"),i=E(c),O(r,"x",o=t[5]||t[7]?t[8].bandwidth()/2:0),O(r,"y",t[6]),O(r,"dx",""),O(r,"dy",""),O(r,"text-anchor",a=t[17](t[21])),O(r,"class","svelte-yu0ewn"),O(e,"class",s="tick tick-"+t[21]+" svelte-yu0ewn"),O(e,"transform",l="translate("+t[8](t[19])+","+t[10][0]+")")},m(t,o){N(t,e,o),u&&u.m(e,null),k(e,n),f&&f.m(e,null),k(e,r),k(r,i)},p(t,a){!1!==t[0]?u?u.p(t,a):(u=Hs(t),u.c(),u.m(e,n)):u&&(u.d(1),u=null),!0===t[1]?f?f.p(t,a):(f=Ys(t),f.c(),f.m(e,r)):f&&(f.d(1),f=null),528&a&&c!==(c=t[4](t[19])+"")&&I(i,c),416&a&&o!==(o=t[5]||t[7]?t[8].bandwidth()/2:0)&&O(r,"x",o),64&a&&O(r,"y",t[6]),1792&a&&l!==(l="translate("+t[8](t[19])+","+t[10][0]+")")&&O(e,"transform",l)},d(t){t&&A(e),u&&u.d(),f&&f.d()}}}function Bs(t){let e,n,r;return{c(){e=D("line"),O(e,"class","baseline svelte-yu0ewn"),O(e,"y1",n=t[11]+.5),O(e,"y2",r=t[11]+.5),O(e,"x1","0"),O(e,"x2",t[12])},m(t,n){N(t,e,n)},p(t,i){2048&i&&n!==(n=t[11]+.5)&&O(e,"y1",n),2048&i&&r!==(r=t[11]+.5)&&O(e,"y2",r),4096&i&&O(e,"x2",t[12])},d(t){t&&A(e)}}}function Ws(e){let n,r,i=e[9],o=[];for(let t=0;t<i.length;t+=1)o[t]=Vs(Us(e,i,t));let a=!0===e[2]&&Bs(e);return{c(){n=D("g");for(let t=0;t<o.length;t+=1)o[t].c();r=L(),a&&a.c(),O(n,"class","axis x-axis svelte-yu0ewn"),V(n,"snapTicks",e[3])},m(t,e){N(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);k(n,r),a&&a.m(n,null)},p(t,[e]){if(135155&e){let a;for(i=t[9],a=0;a<i.length;a+=1){const s=Us(t,i,a);o[a]?o[a].p(s,e):(o[a]=Vs(s),o[a].c(),o[a].m(n,r))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}!0===t[2]?a?a.p(t,e):(a=Bs(t),a.c(),a.m(n,null)):a&&(a.d(1),a=null),8&e&&V(n,"snapTicks",t[3])},i:t,o:t,d(t){t&&A(n),S(o,t),a&&a.d()}}}function Zs(t,e,n){let r,i,o,a,s,l;const{width:u,height:f,xScale:d,yRange:h}=it("LayerCake");c(t,u,(t=>n(12,l=t))),c(t,f,(t=>n(11,s=t))),c(t,d,(t=>n(8,o=t))),c(t,h,(t=>n(10,a=t)));let{gridlines:p=!0}=e,{tickMarks:m=!1}=e,{baseline:g=!1}=e,{snapTicks:v=!1}=e,{formatTick:y=(t=>t)}=e,{ticks:x}=e,{xTick:b=0}=e,{yTick:w=16}=e;return t.$$set=t=>{"gridlines"in t&&n(0,p=t.gridlines),"tickMarks"in t&&n(1,m=t.tickMarks),"baseline"in t&&n(2,g=t.baseline),"snapTicks"in t&&n(3,v=t.snapTicks),"formatTick"in t&&n(4,y=t.formatTick),"ticks"in t&&n(18,x=t.ticks),"xTick"in t&&n(5,b=t.xTick),"yTick"in t&&n(6,w=t.yTick)},t.$$.update=()=>{256&t.$$.dirty&&n(7,r="function"==typeof o.bandwidth),262528&t.$$.dirty&&n(9,i=Array.isArray(x)?x:r?o.domain():"function"==typeof x?x(o.ticks()):o.ticks(x))},[p,m,g,v,y,b,w,r,o,i,a,s,l,u,f,d,h,function(t){if(!0===v){if(0===t)return"start";if(t===i.length-1)return"end"}return"middle"},x]}class Gs extends Rt{constructor(t){super(),Pt(this,t,Zs,Ws,s,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:18,xTick:5,yTick:6})}}function Xs(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function Ks(t){let e,n,r;return{c(){e=D("line"),O(e,"class","gridline svelte-6edweo"),O(e,"x2","100%"),O(e,"y1",n=t[4]+(t[8]?t[9].bandwidth()/2:0)),O(e,"y2",r=t[4]+(t[8]?t[9].bandwidth()/2:0))},m(t,n){N(t,e,n)},p(t,i){784&i&&n!==(n=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(e,"y1",n),784&i&&r!==(r=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(e,"y2",r)},d(t){t&&A(e)}}}function Qs(t){let e,n,r,i;return{c(){e=D("line"),O(e,"class","tick-mark svelte-6edweo"),O(e,"x1","0"),O(e,"x2",n=t[8]?-6:6),O(e,"y1",r=t[4]+(t[8]?t[9].bandwidth()/2:0)),O(e,"y2",i=t[4]+(t[8]?t[9].bandwidth()/2:0))},m(t,n){N(t,e,n)},p(t,o){256&o&&n!==(n=t[8]?-6:6)&&O(e,"x2",n),784&o&&r!==(r=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(e,"y1",r),784&o&&i!==(i=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(e,"y2",i)},d(t){t&&A(e)}}}function Js(t){let e,n,r,i,o,a,s,l,c,u=t[2](t[17],t[19],t[10].length)+"",f=!1!==t[0]&&Ks(t),d=!0===t[1]&&Qs(t);return{c(){e=D("g"),f&&f.c(),n=L(),d&&d.c(),r=D("text"),i=E(u),O(r,"x",t[3]),O(r,"y",o=t[4]+(t[8]?t[9].bandwidth()/2:0)),O(r,"dx",a=t[8]?-9:t[5]),O(r,"dy",s=t[8]?4:t[6]),F(r,"text-anchor",t[8]?"end":t[7]),O(r,"class","svelte-6edweo"),O(e,"class",l="tick tick-"+t[17]+" svelte-6edweo"),O(e,"transform",c="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")},m(t,o){N(t,e,o),f&&f.m(e,null),k(e,n),d&&d.m(e,null),k(e,r),k(r,i)},p(t,h){!1!==t[0]?f?f.p(t,h):(f=Ks(t),f.c(),f.m(e,n)):f&&(f.d(1),f=null),!0===t[1]?d?d.p(t,h):(d=Qs(t),d.c(),d.m(e,r)):d&&(d.d(1),d=null),1028&h&&u!==(u=t[2](t[17],t[19],t[10].length)+"")&&I(i,u),8&h&&O(r,"x",t[3]),784&h&&o!==(o=t[4]+(t[8]?t[9].bandwidth()/2:0))&&O(r,"y",o),288&h&&a!==(a=t[8]?-9:t[5])&&O(r,"dx",a),320&h&&s!==(s=t[8]?4:t[6])&&O(r,"dy",s),384&h&&F(r,"text-anchor",t[8]?"end":t[7]),1024&h&&l!==(l="tick tick-"+t[17]+" svelte-6edweo")&&O(e,"class",l),7936&h&&c!==(c="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")&&O(e,"transform",c)},d(t){t&&A(e),f&&f.d(),d&&d.d()}}}function tl(e){let n,r,i=e[10],o=[];for(let t=0;t<i.length;t+=1)o[t]=Js(Xs(e,i,t));return{c(){n=D("g");for(let t=0;t<o.length;t+=1)o[t].c();O(n,"class","axis y-axis"),O(n,"transform",r="translate("+-e[11].left+", 0)")},m(t,e){N(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(8191&e){let r;for(i=t[10],r=0;r<i.length;r+=1){const a=Xs(t,i,r);o[r]?o[r].p(a,e):(o[r]=Js(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}2048&e&&r!==(r="translate("+-t[11].left+", 0)")&&O(n,"transform",r)},i:t,o:t,d(t){t&&A(n),S(o,t)}}}function el(t,e,n){let r,i,o,a,s;const{padding:l,xRange:u,yScale:f}=it("LayerCake");c(t,l,(t=>n(11,a=t))),c(t,u,(t=>n(12,s=t))),c(t,f,(t=>n(9,o=t)));let{gridlines:d=!0}=e,{tickMarks:h=!1}=e,{formatTick:p=(t=>t)}=e,{ticks:m=4}=e,{xTick:g=0}=e,{yTick:v=0}=e,{dxTick:y=0}=e,{dyTick:x=-4}=e,{textAnchor:b="start"}=e;return t.$$set=t=>{"gridlines"in t&&n(0,d=t.gridlines),"tickMarks"in t&&n(1,h=t.tickMarks),"formatTick"in t&&n(2,p=t.formatTick),"ticks"in t&&n(16,m=t.ticks),"xTick"in t&&n(3,g=t.xTick),"yTick"in t&&n(4,v=t.yTick),"dxTick"in t&&n(5,y=t.dxTick),"dyTick"in t&&n(6,x=t.dyTick),"textAnchor"in t&&n(7,b=t.textAnchor)},t.$$.update=()=>{512&t.$$.dirty&&n(8,r="function"==typeof o.bandwidth),66304&t.$$.dirty&&n(10,i=Array.isArray(m)?m:r?o.domain():"function"==typeof m?m(o.ticks()):o.ticks(m))},[d,h,p,g,v,y,x,b,r,o,i,a,s,l,u,f,m]}class nl extends Rt{constructor(t){super(),Pt(this,t,el,tl,s,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}function rl(e){let n,r,i,o,a,s,l,c,u,f,d;return{c(){n=T("div"),r=T("span"),i=E(e[0]),o=z(),a=T("a"),s=E("Download data "),l=D("svg"),c=D("path"),u=D("polyline"),f=D("line"),O(r,"class","caption-text svelte-1v7brqt"),O(c,"d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"),O(u,"points","7 10 12 15 17 10"),O(f,"x1","12"),O(f,"y1","15"),O(f,"x2","12"),O(f,"y2","3"),O(l,"xmlns","http://www.w3.org/2000/svg"),O(l,"width","24"),O(l,"height","24"),O(l,"viewBox","0 0 24 24"),O(l,"fill","none"),O(l,"stroke","currentColor"),O(l,"stroke-width","2"),O(l,"stroke-linecap","round"),O(l,"stroke-linejoin","round"),O(l,"class","feather feather-download svelte-1v7brqt"),O(a,"class","download-button svelte-1v7brqt"),O(a,"href",e[1]),O(a,"download",""),O(n,"class",d="caption caption-"+e[2]+" svelte-1v7brqt")},m(t,e){N(t,n,e),k(n,r),k(r,i),k(n,o),k(n,a),k(a,s),k(a,l),k(l,c),k(l,u),k(l,f)},p(t,[e]){1&e&&I(i,t[0]),2&e&&O(a,"href",t[1]),4&e&&d!==(d="caption caption-"+t[2]+" svelte-1v7brqt")&&O(n,"class",d)},i:t,o:t,d(t){t&&A(n)}}}function il(t,e,n){let{caption:r}=e,{url:i}=e,{type:o}=e;return t.$$set=t=>{"caption"in t&&n(0,r=t.caption),"url"in t&&n(1,i=t.url),"type"in t&&n(2,o=t.type)},[r,i,o]}class ol extends Rt{constructor(t){super(),Pt(this,t,il,rl,s,{caption:0,url:1,type:2})}}function al(t,e,n){const r=t.slice();return r[0]=e[n],r}function sl(e){let n,r,i,o,a,s,l,c;return{c(){n=T("div"),r=T("div"),o=z(),a=T("div"),s=E(e[0]),l=E("% of diet"),c=z(),O(r,"class",i="legend-icon legend-icon-"+e[0]+" svelte-i72d3i"),O(n,"class","legend-item svelte-i72d3i")},m(t,e){N(t,n,e),k(n,r),k(n,o),k(n,a),k(a,s),k(a,l),k(n,c)},p:t,d(t){t&&A(n)}}}function ll(e){let n,r=[50,75],i=[];for(let t=0;t<2;t+=1)i[t]=sl(al(e,r,t));return{c(){n=T("div");for(let t=0;t<2;t+=1)i[t].c();O(n,"class","legend svelte-i72d3i")},m(t,e){N(t,n,e);for(let t=0;t<2;t+=1)i[t].m(n,null)},p:t,i:t,o:t,d(t){t&&A(n),S(i,t)}}}class cl extends Rt{constructor(t){super(),Pt(this,t,null,ll,s,{})}}const ul=new Map([["L","#011f5b"],["R","#990000"]]);function fl(t){let e,n;return e=new Ha({props:{padding:t[0],flatData:t[2].filter(t[23]),data:en(t[4].filter(t[24]),t[25],vl),x:t[5],xScale:"date"===t[5]?ma():Hr(),y:t[6],yDomain:t[8],yNice:!0,z:t[7],zScale:bn(),zDomain:t[18],zRange:t[19],$$slots:{default:[pl]},$$scope:{ctx:t}}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.padding=t[0]),196612&n&&(r.flatData=t[2].filter(t[23])),196624&n&&(r.data=en(t[4].filter(t[24]),t[25],vl)),32&n&&(r.x=t[5]),32&n&&(r.xScale="date"===t[5]?ma():Hr()),64&n&&(r.y=t[6]),256&n&&(r.yDomain=t[8]),128&n&&(r.z=t[7]),67145216&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function dl(t){let e,n,r,i,o,a;return e=new Gs({props:{gridlines:!1,ticks:t[10],formatTick:t[9],snapTicks:!1,tickMarks:!0}}),r=new nl({props:{ticks:4,formatTick:t[11]}}),o=new cl({}),{c(){Et(e.$$.fragment),n=z(),Et(r.$$.fragment),i=z(),Et(o.$$.fragment)},m(t,s){zt(e,t,s),N(t,n,s),zt(r,t,s),N(t,i,s),zt(o,t,s),a=!0},p(t,n){const i={};1024&n&&(i.ticks=t[10]),512&n&&(i.formatTick=t[9]),e.$set(i);const o={};2048&n&&(o.formatTick=t[11]),r.$set(o)},i(t){a||(kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(o.$$.fragment,t),a=!0)},o(t){Mt(e.$$.fragment,t),Mt(r.$$.fragment,t),Mt(o.$$.fragment,t),a=!1},d(t){Lt(e,t),t&&A(n),Lt(r,t),t&&A(i),Lt(o,t)}}}function hl(t){let e,n,r,i=t[15]&&dl(t);return n=new qs({props:{activeChart:"test"}}),{c(){i&&i.c(),e=z(),Et(n.$$.fragment)},m(t,o){i&&i.m(t,o),N(t,e,o),zt(n,t,o),r=!0},p(t,n){t[15]?i?(i.p(t,n),32768&n&&kt(i,1)):(i=dl(t),i.c(),kt(i,1),i.m(e.parentNode,e)):i&&($t(),Mt(i,1,1,(()=>{i=null})),_t())},i(t){r||(kt(i),kt(n.$$.fragment,t),r=!0)},o(t){Mt(i),Mt(n.$$.fragment,t),r=!1},d(t){i&&i.d(t),t&&A(e),Lt(n,t)}}}function pl(t){let e,n;return e=new es({props:{$$slots:{default:[hl]},$$scope:{ctx:t}}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};67145216&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function ml(t){let e,n;return e=new ol({props:{caption:t[1],url:t[3],type:12===t[13]?"split-cols":"single-cols"}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),8&n&&(r.url=t[3]),8192&n&&(r.type=12===t[13]?"split-cols":"single-cols"),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function gl(t){let e,n,r,i,o,a,s,l;n=new cl({});let c=t[2]&&t[2].length&&fl(t),u=t[12]&&ml(t);return{c(){e=T("div"),Et(n.$$.fragment),r=z(),i=T("div"),c&&c.c(),a=z(),u&&u.c(),s=L(),O(i,"class",o="chart line-chart "+t[14]),O(e,"class","chart-container")},m(t,o){N(t,e,o),zt(n,e,null),k(e,r),k(e,i),c&&c.m(i,null),N(t,a,o),u&&u.m(t,o),N(t,s,o),l=!0},p(t,[e]){t[2]&&t[2].length?c?(c.p(t,e),4&e&&kt(c,1)):(c=fl(t),c.c(),kt(c,1),c.m(i,null)):c&&($t(),Mt(c,1,1,(()=>{c=null})),_t()),(!l||16384&e&&o!==(o="chart line-chart "+t[14]))&&O(i,"class",o),t[12]?u?(u.p(t,e),4096&e&&kt(u,1)):(u=ml(t),u.c(),kt(u,1),u.m(s.parentNode,s)):u&&($t(),Mt(u,1,1,(()=>{u=null})),_t())},i(t){l||(kt(n.$$.fragment,t),kt(c),kt(u),l=!0)},o(t){Mt(n.$$.fragment,t),Mt(c),Mt(u),l=!1},d(t){t&&A(e),Lt(n),c&&c.d(),t&&A(a),u&&u.d(t),t&&A(s)}}}const vl=t=>t.diet_threshold;function yl(t,e,n){let r,i,{margins:o={top:20,right:10,bottom:20,left:45}}=e,{caption:a=""}=e,{data:s}=e,{url:l=""}=e,{groupedData:c}=e,{xKey:u}=e,{yKey:f}=e,{zKey:d}=e,{yDomain:h=[0,null]}=e,{formatTickX:p}=e,{xTicks:m=6}=e,{formatTickY:g=((t,e,n)=>e===n-1?`${t.toLocaleString("en-NZ",{style:"percent"})} of population`:t.toLocaleString("en-NZ",{style:"percent"}))}=e,{includeCaption:v=!0}=e,{spanCol:y}=e,{customClass:x}=e,{includeAxis:b=!0}=e,{scaleRange:w}=e,{start:$}=e,{end:_}=e,k="popup-overlay"===x?Array.from(ul).map((t=>t[0])):ns(Array.from(ul).map((t=>t[0])).map((t=>"R"===t?[`${t}_1`,`${t}_0`]:[`${t}_0`,`${t}_1`]))),M="popup-overlay"===x?Array.from(ul).map((t=>t[1])):ns(Array.from(ul).map((t=>t[1])).map((t=>[t,In(t).brighter(3).formatHex()])));return t.$$set=t=>{"margins"in t&&n(0,o=t.margins),"caption"in t&&n(1,a=t.caption),"data"in t&&n(2,s=t.data),"url"in t&&n(3,l=t.url),"groupedData"in t&&n(4,c=t.groupedData),"xKey"in t&&n(5,u=t.xKey),"yKey"in t&&n(6,f=t.yKey),"zKey"in t&&n(7,d=t.zKey),"yDomain"in t&&n(8,h=t.yDomain),"formatTickX"in t&&n(9,p=t.formatTickX),"xTicks"in t&&n(10,m=t.xTicks),"formatTickY"in t&&n(11,g=t.formatTickY),"includeCaption"in t&&n(12,v=t.includeCaption),"spanCol"in t&&n(13,y=t.spanCol),"customClass"in t&&n(14,x=t.customClass),"includeAxis"in t&&n(15,b=t.includeAxis),"scaleRange"in t&&n(20,w=t.scaleRange),"start"in t&&n(21,$=t.start),"end"in t&&n(22,_=t.end)},t.$$.update=()=>{3145728&t.$$.dirty&&n(17,r=w($)),5242880&t.$$.dirty&&n(16,i=w(_))},[o,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,i,r,k,M,w,$,_,t=>+t.date>=r&&+t.date<=i,t=>+t.date>=r&&+t.date<=i,t=>void 0!==t.idx?`${t.political_lean}_${t.idx}`:t.political_lean]}class xl extends Rt{constructor(t){super(),Pt(this,t,yl,gl,s,{margins:0,caption:1,data:2,url:3,groupedData:4,xKey:5,yKey:6,zKey:7,yDomain:8,formatTickX:9,xTicks:10,formatTickY:11,includeCaption:12,spanCol:13,customClass:14,includeAxis:15,scaleRange:20,start:21,end:22})}}function bl(t,e,n){return t<e?e:t>n?n:t}function wl(e){let n,r,i,a,s,l,c,u,f;return{c(){n=T("div"),r=T("div"),i=T("div"),a=z(),s=T("div"),l=z(),c=T("div"),O(i,"class","body svelte-4z6zmw"),F(i,"left",100*e[0]+"%"),F(i,"right",100*(1-e[1])+"%"),O(s,"class","handle svelte-4z6zmw"),O(s,"data-which","start"),F(s,"left",100*e[0]+"%"),O(c,"class","handle svelte-4z6zmw"),O(c,"data-which","end"),F(c,"left",100*e[1]+"%"),O(r,"class","slider svelte-4z6zmw"),O(n,"class","double-range-container svelte-4z6zmw")},m(t,o){N(t,n,o),k(n,r),k(r,i),e[7](i),k(r,a),k(r,s),e[8](s),k(r,l),k(r,c),e[9](r),u||(f=[v($l.call(null,i)),j(i,"dragmove",R(P(e[6]))),v($l.call(null,s)),j(s,"dragmove",R(P(e[5]("start")))),v($l.call(null,c)),j(c,"dragmove",R(P(e[5]("end"))))],u=!0)},p(t,[e]){1&e&&F(i,"left",100*t[0]+"%"),2&e&&F(i,"right",100*(1-t[1])+"%"),1&e&&F(s,"left",100*t[0]+"%"),2&e&&F(c,"left",100*t[1]+"%")},i:t,o:t,d(t){t&&A(n),e[7](null),e[8](null),e[9](null),u=!1,o(f)}}}function $l(t){let e,n;function r(r){"touchstart"===r.type&&(r=r.touches[0]),e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragstart",{detail:{x:e,y:n}})),window.addEventListener("mousemove",i),window.addEventListener("mouseup",o),window.addEventListener("touchmove",i),window.addEventListener("touchend",o)}function i(r){"touchmove"===r.type&&(r=r.changedTouches[0]);const i=r.clientX-e,o=r.clientY-n;e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragmove",{detail:{x:e,y:n,dx:i,dy:o}}))}function o(r){e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragend",{detail:{x:e,y:n}})),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o),window.removeEventListener("touchmove",i),window.removeEventListener("touchend",o)}return t.addEventListener("mousedown",r),t.addEventListener("touchstart",r),{destroy(){t.removeEventListener("mousedown",r),t.removeEventListener("touchstart",r)}}}function _l(t,e,n){let r,i,o,{start:a=0}=e,{end:s=1}=e;return t.$$set=t=>{"start"in t&&n(0,a=t.start),"end"in t&&n(1,s=t.end)},[a,s,r,i,o,function(t){return function(e){const{left:r,right:i}=o.getBoundingClientRect(),l=i-r,c=Math.min(Math.max((e.detail.x-r)/l,0),1);"start"===t?(n(0,a=c),n(1,s=Math.max(s,c))):(n(0,a=Math.min(c,a)),n(1,s=c))}},function(t){const{width:e}=i.getBoundingClientRect(),{left:l,right:c}=o.getBoundingClientRect(),u=c-l,f=bl(r.getBoundingClientRect().left+event.detail.dx-l,0,u-e),d=bl(f+e,e,u)/u;n(0,a=f/u),n(1,s=d)},function(t){at[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},function(t){at[t?"unshift":"push"]((()=>{r=t,n(2,r)}))},function(t){at[t?"unshift":"push"]((()=>{o=t,n(4,o)}))}]}class kl extends Rt{constructor(t){super(),Pt(this,t,_l,wl,s,{start:0,end:1})}}function Ml(e){let n,r,i,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,S,D=e[3][0]+"",L=e[3][1]+"";return{c(){n=T("div"),r=T("div"),i=E(e[2]),a=z(),s=T("span"),s.textContent="?",l=z(),c=T("div"),u=E(D),d=z(),h=T("label"),p=T("input"),m=z(),g=T("span"),v=z(),y=T("div"),x=E(L),w=z(),$=T("div"),_=E(e[4]),O(s,"class","info svelte-nl56aj"),O(r,"class","control-title svelte-nl56aj"),O(c,"class",f="control-label "+(e[0]?"":"active")+" svelte-nl56aj"),O(p,"type","checkbox"),O(p,"id","medium"),O(p,"name","medium"),O(p,"class","svelte-nl56aj"),O(g,"class","slider svelte-nl56aj"),F(g,"--colorFalse",e[5][1]),F(g,"--colorTrue",e[5][0]),O(h,"class","switch svelte-nl56aj"),O(y,"class",b="control-label "+(e[0]?"active":"")+" svelte-nl56aj"),O($,"class",M="info-detail "+e[7]+" svelte-nl56aj"),O(n,"id",e[1]),O(n,"class","control control-switch svelte-nl56aj")},m(t,o){N(t,n,o),k(n,r),k(r,i),k(r,a),k(r,s),k(n,l),k(n,c),k(c,u),k(n,d),k(n,h),k(h,p),p.checked=e[0],k(h,m),k(h,g),k(n,v),k(n,y),k(y,x),k(n,w),k(n,$),k($,_),C||(S=[j(s,"mouseenter",e[8]),j(s,"mouseleave",e[9]),j(p,"change",e[10])],C=!0)},p(t,[e]){4&e&&I(i,t[2]),8&e&&D!==(D=t[3][0]+"")&&I(u,D),1&e&&f!==(f="control-label "+(t[0]?"":"active")+" svelte-nl56aj")&&O(c,"class",f),1&e&&(p.checked=t[0]),32&e&&F(g,"--colorFalse",t[5][1]),32&e&&F(g,"--colorTrue",t[5][0]),8&e&&L!==(L=t[3][1]+"")&&I(x,L),1&e&&b!==(b="control-label "+(t[0]?"active":"")+" svelte-nl56aj")&&O(y,"class",b),16&e&&I(_,t[4]),128&e&&M!==(M="info-detail "+t[7]+" svelte-nl56aj")&&O($,"class",M),2&e&&O(n,"id",t[1])},i:t,o:t,d(t){t&&A(n),C=!1,o(S)}}}function Cl(t,e,n){let r,i,{id:o=""}=e,{title:a="Title"}=e,{labels:s=["False","True"]}=e,{info:l=""}=e,{checked:c=!0}=e,{colors:u=["#ccc","#555"]}=e;return t.$$set=t=>{"id"in t&&n(1,o=t.id),"title"in t&&n(2,a=t.title),"labels"in t&&n(3,s=t.labels),"info"in t&&n(4,l=t.info),"checked"in t&&n(0,c=t.checked),"colors"in t&&n(5,u=t.colors)},t.$$.update=()=>{64&t.$$.dirty&&n(7,i=r?"active":"")},n(6,r=!1),[c,o,a,s,l,u,r,i,()=>{n(6,r=!0)},()=>{n(6,r=!1)},function(){c=this.checked,n(0,c)}]}class Nl extends Rt{constructor(t){super(),Pt(this,t,Cl,Ml,s,{id:1,title:2,labels:3,info:4,checked:0,colors:5})}}function Al(e){let n;return{c(){n=T("div"),n.innerHTML='<div class="lds-roller svelte-1pm5pm"><div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div> \n    <div class="svelte-1pm5pm"></div></div>',O(n,"class","chart-placeholder svelte-1pm5pm")},m(t,e){N(t,n,e)},p:t,i:t,o:t,d(t){t&&A(n)}}}class Sl extends Rt{constructor(t){super(),Pt(this,t,null,Al,s,{})}}const Tl=Wi("%b-%y"),Dl=Wi("%Y");function El(t,e,n){const r=t.slice();return r[44]=e[n],r[46]=n,r}function zl(t){let e,n,r,i,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,S,D,L,P,R,F,U,H,Y,V,B,W,Z,G,X,K,Q,J,tt,et,nt,rt,it,ot,st,lt,ct,ut,ht,pt,mt,gt,vt,yt,xt,bt,wt,Ct,Nt,At,St,Tt,jt,Pt,Rt,Ot,It,Ft,qt=t[44].value.title+"";function Ut(e){t[30](e)}let Ht={id:"political-lean",title:"A lean",labels:["L","R"],colors:["#011f5b","#ff0000"],info:Gt.controls.medium.description};function Yt(e){t[31](e)}void 0!==t[10]&&(Ht.checked=t[10]),l=new Nl({props:Ht}),at.push((()=>Dt(l,"checked",Ut)));let Vt={id:"medium",title:Gt.controls.medium.title,labels:["TV","Web"],info:Gt.controls.medium.description};function Bt(e){t[32](e)}void 0!==t[6]&&(Vt.checked=t[6]),f=new Nl({props:Vt}),at.push((()=>Dt(f,"checked",Yt)));let Wt={id:"partisanship",title:Gt.controls.partisanship.title,labels:["Lenient","Strict"],info:Gt.controls.partisanship.description};function Zt(e){t[35](e)}void 0!==t[8]&&(Wt.checked=t[8]),p=new Nl({props:Wt}),at.push((()=>Dt(p,"checked",Bt)));let Xt={id:"political-lean",title:"B lean",labels:["L","R"],colors:["#035aff","#990000"],info:Gt.controls.medium.description};function Kt(e){t[36](e)}void 0!==t[11]&&(Xt.checked=t[11]),W=new Nl({props:Xt}),at.push((()=>Dt(W,"checked",Zt)));let Qt={id:"medium",title:Gt.controls.medium.title,labels:["TV","Web"],info:Gt.controls.medium.description};function Jt(e){t[37](e)}void 0!==t[7]&&(Qt.checked=t[7]),X=new Nl({props:Qt}),at.push((()=>Dt(X,"checked",Kt)));let te={id:"partisanship",title:Gt.controls.partisanship.title,labels:["Lenient","Strict"],info:Gt.controls.partisanship.description};void 0!==t[9]&&(te.checked=t[9]),J=new Nl({props:te}),at.push((()=>Dt(J,"checked",Jt)));let ee=t[16]&&t[5]&&jl(t);const ne=[Rl,Pl],re=[];function ie(t,e){return t[16]&&t[5]?0:1}return Pt=ie(t),Rt=re[Pt]=ne[Pt](t),{c(){e=T("div"),n=T("h3"),r=E(qt),i=z(),a=T("div"),s=T("div"),Et(l.$$.fragment),u=z(),Et(f.$$.fragment),h=z(),Et(p.$$.fragment),g=z(),v=T("div"),y=T("div"),y.textContent="Age group",x=z(),b=T("select"),w=T("option"),w.textContent="All",$=T("option"),$.textContent="18-24",_=T("option"),_.textContent="25-34",M=T("option"),M.textContent="35-44",C=T("option"),C.textContent="45-54",S=T("option"),S.textContent="55+",D=z(),L=T("div"),P=T("div"),P.textContent="Gender",R=z(),F=T("select"),U=T("option"),U.textContent="All",H=T("option"),H.textContent="Male",Y=T("option"),Y.textContent="Female",V=z(),B=T("div"),Et(W.$$.fragment),G=z(),Et(X.$$.fragment),Q=z(),Et(J.$$.fragment),et=z(),nt=T("div"),rt=T("div"),rt.textContent="Age group",it=z(),ot=T("select"),st=T("option"),st.textContent="All",lt=T("option"),lt.textContent="18-24",ct=T("option"),ct.textContent="25-34",ut=T("option"),ut.textContent="35-44",ht=T("option"),ht.textContent="45-54",pt=T("option"),pt.textContent="55+",mt=z(),gt=T("div"),vt=T("div"),vt.textContent="Gender",yt=z(),xt=T("select"),bt=T("option"),bt.textContent="All",wt=T("option"),wt.textContent="Male",Ct=T("option"),Ct.textContent="Female",Nt=z(),ee&&ee.c(),At=z(),St=T("div"),Tt=z(),jt=T("div"),Rt.c(),O(n,"class","chart-title"),O(e,"class","title-container svelte-3ve6ra"),O(y,"class","control-title svelte-3ve6ra"),w.__value="All",w.value=w.__value,$.__value="18-24",$.value=$.__value,_.__value="25-34",_.value=_.__value,M.__value="35-44",M.value=M.__value,C.__value="45-54",C.value=C.__value,S.__value="55+",S.value=S.__value,O(b,"id","age-group-menu"),O(b,"name","age-group"),O(b,"class","svelte-3ve6ra"),void 0===t[13]&&ft((()=>t[33].call(b))),O(v,"id","age-group"),O(v,"class","control control-menu svelte-3ve6ra"),O(P,"class","control-title svelte-3ve6ra"),U.__value="All",U.value=U.__value,U.selected=!0,H.__value="Male",H.value=H.__value,Y.__value="Female",Y.value=Y.__value,O(F,"id","gender-menu"),O(F,"name","location"),O(F,"class","svelte-3ve6ra"),void 0===t[12]&&ft((()=>t[34].call(F))),O(L,"id","gender"),O(L,"class","control control-menu svelte-3ve6ra"),O(s,"class","controls svelte-3ve6ra"),O(rt,"class","control-title svelte-3ve6ra"),st.__value="All",st.value=st.__value,lt.__value="18-24",lt.value=lt.__value,ct.__value="25-34",ct.value=ct.__value,ut.__value="35-44",ut.value=ut.__value,ht.__value="45-54",ht.value=ht.__value,pt.__value="55+",pt.value=pt.__value,O(ot,"id","age-group-menu"),O(ot,"name","age-group"),O(ot,"class","svelte-3ve6ra"),void 0===t[15]&&ft((()=>t[38].call(ot))),O(nt,"id","age-group"),O(nt,"class","control control-menu svelte-3ve6ra"),O(vt,"class","control-title svelte-3ve6ra"),bt.__value="All",bt.value=bt.__value,bt.selected=!0,wt.__value="Male",wt.value=wt.__value,Ct.__value="Female",Ct.value=Ct.__value,O(xt,"id","gender-menu"),O(xt,"name","location"),O(xt,"class","svelte-3ve6ra"),void 0===t[14]&&ft((()=>t[39].call(xt))),O(gt,"id","gender"),O(gt,"class","control control-menu svelte-3ve6ra"),O(B,"class","controls svelte-3ve6ra"),O(St,"class","spacer svelte-3ve6ra"),O(a,"class","controls-wrapper svelte-3ve6ra"),O(jt,"class","chart-wrapper svelte-3ve6ra")},m(o,c){N(o,e,c),k(e,n),k(n,r),N(o,i,c),N(o,a,c),k(a,s),zt(l,s,null),k(s,u),zt(f,s,null),k(s,h),zt(p,s,null),k(s,g),k(s,v),k(v,y),k(v,x),k(v,b),k(b,w),k(b,$),k(b,_),k(b,M),k(b,C),k(b,S),q(b,t[13]),k(s,D),k(s,L),k(L,P),k(L,R),k(L,F),k(F,U),k(F,H),k(F,Y),q(F,t[12]),k(a,V),k(a,B),zt(W,B,null),k(B,G),zt(X,B,null),k(B,Q),zt(J,B,null),k(B,et),k(B,nt),k(nt,rt),k(nt,it),k(nt,ot),k(ot,st),k(ot,lt),k(ot,ct),k(ot,ut),k(ot,ht),k(ot,pt),q(ot,t[15]),k(B,mt),k(B,gt),k(gt,vt),k(gt,yt),k(gt,xt),k(xt,bt),k(xt,wt),k(xt,Ct),q(xt,t[14]),k(a,Nt),ee&&ee.m(a,null),k(a,At),k(a,St),N(o,Tt,c),N(o,jt,c),re[Pt].m(jt,null),Ot=!0,It||(Ft=[j(b,"change",t[33]),j(F,"change",t[34]),j(ot,"change",t[38]),j(xt,"change",t[39])],It=!0)},p(t,e){(!Ot||4&e[0])&&qt!==(qt=t[44].value.title+"")&&I(r,qt);const n={};!c&&1024&e[0]&&(c=!0,n.checked=t[10],dt((()=>c=!1))),l.$set(n);const i={};!d&&64&e[0]&&(d=!0,i.checked=t[6],dt((()=>d=!1))),f.$set(i);const o={};!m&&256&e[0]&&(m=!0,o.checked=t[8],dt((()=>m=!1))),p.$set(o),8192&e[0]&&q(b,t[13]),4096&e[0]&&q(F,t[12]);const s={};!Z&&2048&e[0]&&(Z=!0,s.checked=t[11],dt((()=>Z=!1))),W.$set(s);const u={};!K&&128&e[0]&&(K=!0,u.checked=t[7],dt((()=>K=!1))),X.$set(u);const h={};!tt&&512&e[0]&&(tt=!0,h.checked=t[9],dt((()=>tt=!1))),J.$set(h),32768&e[0]&&q(ot,t[15]),16384&e[0]&&q(xt,t[14]),t[16]&&t[5]?ee?(ee.p(t,e),65568&e[0]&&kt(ee,1)):(ee=jl(t),ee.c(),kt(ee,1),ee.m(a,At)):ee&&($t(),Mt(ee,1,1,(()=>{ee=null})),_t());let g=Pt;Pt=ie(t),Pt===g?re[Pt].p(t,e):($t(),Mt(re[g],1,1,(()=>{re[g]=null})),_t(),Rt=re[Pt],Rt?Rt.p(t,e):(Rt=re[Pt]=ne[Pt](t),Rt.c()),kt(Rt,1),Rt.m(jt,null))},i(t){Ot||(kt(l.$$.fragment,t),kt(f.$$.fragment,t),kt(p.$$.fragment,t),kt(W.$$.fragment,t),kt(X.$$.fragment,t),kt(J.$$.fragment,t),kt(ee),kt(Rt),Ot=!0)},o(t){Mt(l.$$.fragment,t),Mt(f.$$.fragment,t),Mt(p.$$.fragment,t),Mt(W.$$.fragment,t),Mt(X.$$.fragment,t),Mt(J.$$.fragment,t),Mt(ee),Mt(Rt),Ot=!1},d(t){t&&A(e),t&&A(i),t&&A(a),Lt(l),Lt(f),Lt(p),Lt(W),Lt(X),Lt(J),ee&&ee.d(),t&&A(Tt),t&&A(jt),re[Pt].d(),It=!1,o(Ft)}}}function Ll(e){let n,r,i=e[44].value+"";return{c(){n=T("p"),r=E(i),O(n,"class","copy svelte-3ve6ra")},m(t,e){N(t,n,e),k(n,r)},p(t,e){4&e[0]&&i!==(i=t[44].value+"")&&I(r,i)},i:t,o:t,d(t){t&&A(n)}}}function jl(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,m=Tl(t[20](t[18]))+"",g=Tl(t[20](t[19]))+"";function v(e){t[40](e)}function y(e){t[41](e)}let x={};return void 0!==t[18]&&(x.start=t[18]),void 0!==t[19]&&(x.end=t[19]),i=new kl({props:x}),at.push((()=>Dt(i,"start",v))),at.push((()=>Dt(i,"end",y))),{c(){e=T("div"),n=T("div"),n.textContent="Period",r=z(),Et(i.$$.fragment),s=z(),l=T("div"),c=T("div"),u=E(m),f=z(),d=T("div"),h=E(g),O(n,"class","control-title svelte-3ve6ra"),O(c,"class","label svelte-3ve6ra"),O(d,"class","label svelte-3ve6ra"),O(l,"class","labels svelte-3ve6ra"),O(e,"id","period"),O(e,"class","control control-range svelte-3ve6ra")},m(t,o){N(t,e,o),k(e,n),k(e,r),zt(i,e,null),k(e,s),k(e,l),k(l,c),k(c,u),k(l,f),k(l,d),k(d,h),p=!0},p(t,e){const n={};!o&&262144&e[0]&&(o=!0,n.start=t[18],dt((()=>o=!1))),!a&&524288&e[0]&&(a=!0,n.end=t[19],dt((()=>a=!1))),i.$set(n),(!p||262144&e[0])&&m!==(m=Tl(t[20](t[18]))+"")&&I(u,m),(!p||524288&e[0])&&g!==(g=Tl(t[20](t[19]))+"")&&I(h,g)},i(t){p||(kt(i.$$.fragment,t),p=!0)},o(t){Mt(i.$$.fragment,t),p=!1},d(t){t&&A(e),Lt(i)}}}function Pl(e){let n,r;return n=new Sl({}),{c(){Et(n.$$.fragment)},m(t,e){zt(n,t,e),r=!0},p:t,i(t){r||(kt(n.$$.fragment,t),r=!0)},o(t){Mt(n.$$.fragment,t),r=!1},d(t){Lt(n,t)}}}function Rl(t){let e,n;return e=new xl({props:{data:t[5],groupedData:t[17],scaleRange:t[21],start:t[18],end:t[19],yKey:Ul,xKey:ql,zKey:Hl,spanCol:12,customClass:"chart-medium",formatTickX:Tl,url:Fl,caption:t[3].captions}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};32&n[0]&&(r.data=t[5]),131072&n[0]&&(r.groupedData=t[17]),262144&n[0]&&(r.start=t[18]),524288&n[0]&&(r.end=t[19]),8&n[0]&&(r.caption=t[3].captions),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Ol(t){let e,n,r,i;const o=[Ll,zl],a=[];function s(t,e){return"text"===t[44].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function Il(t){let e,n,r,i,s,l,c,u,f,d,h=t[4].value+"",p=t[2],m=[];for(let e=0;e<p.length;e+=1)m[e]=Ol(El(t,p,e));const g=t=>Mt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=T("div"),n=T("h1"),r=E(h),i=z();for(let t=0;t<m.length;t+=1)m[t].c();s=z(),l=T("div"),l.textContent="GO BACK",O(n,"class","section-title svelte-3ve6ra"),O(l,"class","close-button bottom svelte-3ve6ra"),O(e,"class","section svelte-3ve6ra")},m(o,a){N(o,e,a),k(e,n),k(n,r),k(e,i);for(let t=0;t<m.length;t+=1)m[t].m(e,null);k(e,s),k(e,l),u=!0,f||(d=[j(l,"click",t[42]),v(c=re.call(null,e,{once:t[1]})),j(e,"enter",t[43])],f=!0)},p(t,n){if((!u||16&n[0])&&h!==(h=t[4].value+"")&&I(r,h),4194284&n[0]){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=El(t,p,r);m[r]?(m[r].p(i,n),kt(m[r],1)):(m[r]=Ol(i),m[r].c(),kt(m[r],1),m[r].m(e,s))}for($t(),r=p.length;r<m.length;r+=1)g(r);_t()}c&&a(c.update)&&2&n[0]&&c.update.call(null,{once:t[1]})},i(t){if(!u){for(let t=0;t<p.length;t+=1)kt(m[t]);u=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)Mt(m[t]);u=!1},d(t){t&&A(e),S(m,t),f=!1,o(d)}}}let Fl="assets/data/EchoCh-nationwide-by_gender-or-age_group.csv",ql="date",Ul="value",Hl=0;function Yl(t,e,n){let r,i,o,a,s,l,c,u,f,d=!1,{once:h}=e,{body:p}=e,{refs:m}=e,{chart:g}=e,{title:v}=e,{modal:y}=e,x=!1,b=!1,w=!0,$=!0,_=!1,k=!0,M=x?"web":"tv",C=w?"stringent":"lenient";const N=Hr();let A=0,S=1,T="All",D="All";nt((async()=>{const t=await qe(Fl,Pe);n(5,c=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))));const[e,r]=Ze(c,(t=>+t.date));N.range([e,r])}));return t.$$set=t=>{"once"in t&&n(1,h=t.once),"body"in t&&n(2,p=t.body),"refs"in t&&n(22,m=t.refs),"chart"in t&&n(3,g=t.chart),"title"in t&&n(4,v=t.title),"modal"in t&&n(0,y=t.modal)},t.$$.update=()=>{32&t.$$.dirty[0]&&c&&n(23,u=tn(c,(t=>t.gender),(t=>t.medium),(t=>t.partisanship_scenario),(t=>t.age_group),(t=>t.political_lean))),64&t.$$.dirty[0]&&n(24,M=x?"web":"tv"),256&t.$$.dirty[0]&&n(25,C=w?"stringent":"lenient"),1024&t.$$.dirty[0]&&n(29,r=_?"R":"L"),128&t.$$.dirty[0]&&n(28,i=b?"web":"tv"),512&t.$$.dirty[0]&&n(27,o=$?"stringent":"lenient"),2048&t.$$.dirty[0]&&n(26,l=k?"R":"L"),1065414688&t.$$.dirty[0]&&c&&u.size&&n(17,f=[...u.get(T).get(M).get(C).get(D).get(r).map((t=>Object.assign(Object.assign({},t),{idx:0}))),...u.get(s).get(i).get(o).get(a).get(l).map((t=>Object.assign(Object.assign({},t),{idx:1})))])},n(12,T="All"),n(13,D="All"),n(14,s="All"),n(15,a="All"),[y,h,p,g,v,c,x,b,w,$,_,k,T,D,s,a,d,f,A,S,N,t=>{const e=new Date(N(t));return e.setDate(1),e.setHours(0,0,0),e.setMilliseconds(0),+e},m,u,M,C,l,o,i,r,function(t){_=t,n(10,_)},function(t){x=t,n(6,x)},function(t){w=t,n(8,w)},function(){D=U(this),n(13,D)},function(){T=U(this),n(12,T)},function(t){k=t,n(11,k)},function(t){b=t,n(7,b)},function(t){$=t,n(9,$)},function(){a=U(this),n(15,a)},function(){s=U(this),n(14,s)},function(t){A=t,n(18,A)},function(t){S=t,n(19,S)},()=>n(0,y=!1),()=>n(16,d=!0)]}class Vl extends Rt{constructor(t){super(),Pt(this,t,Yl,Il,s,{once:1,body:2,refs:22,chart:3,title:4,modal:0},null,[-1,-1])}}var Bl=1e-6,Wl=Math.PI,Zl=Wl/2,Gl=Wl/4,Xl=2*Wl,Kl=180/Wl,Ql=Wl/180,Jl=Math.abs,tc=Math.atan,ec=Math.atan2,nc=Math.cos,rc=Math.sin,ic=Math.sign||function(t){return t>0?1:t<0?-1:0},oc=Math.sqrt;function ac(t){return t>1?Zl:t<-1?-Zl:Math.asin(t)}function sc(){}function lc(t,e){t&&uc.hasOwnProperty(t.type)&&uc[t.type](t,e)}var cc={Feature:function(t,e){lc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)lc(n[r].geometry,e)}},uc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){fc(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)fc(n[r],e,0)},Polygon:function(t,e){dc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)dc(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)lc(n[r],e)}};function fc(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function dc(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)fc(t[n],e,1);e.polygonEnd()}function hc(t){return[ec(t[1],t[0]),ac(t[2])]}function pc(t){var e=t[0],n=t[1],r=nc(n);return[r*nc(e),r*rc(e),rc(n)]}function mc(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function vc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function yc(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xc(t){var e=oc(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function bc(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function wc(t,e){return[Jl(t)>Wl?t+Math.round(-t/Xl)*Xl:t,e]}function $c(t){return function(e,n){return[(e+=t)>Wl?e-Xl:e<-Wl?e+Xl:e,n]}}function _c(t){var e=$c(t);return e.invert=$c(-t),e}function kc(t,e){var n=nc(t),r=rc(t),i=nc(e),o=rc(e);function a(t,e){var a=nc(e),s=nc(t)*a,l=rc(t)*a,c=rc(e),u=c*n+s*r;return[ec(l*i-u*o,s*n-c*r),ac(u*i+l*o)]}return a.invert=function(t,e){var a=nc(e),s=nc(t)*a,l=rc(t)*a,c=rc(e),u=c*i-l*o;return[ec(l*i+c*o,s*n+u*r),ac(u*n-s*r)]},a}function Mc(t,e){(e=pc(e))[0]-=t,xc(e);var n=function(t){return t>1?0:t<-1?Wl:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+Xl-Bl)%Xl}function Cc(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:sc,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Nc(t,e){return Jl(t[0]-e[0])<Bl&&Jl(t[1]-e[1])<Bl}function Ac(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Sc(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Nc(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new Ac(r,t,null,!0)),l.push(n.o=new Ac(r,null,n,!1)),s.push(n=new Ac(a,t,null,!1)),l.push(n.o=new Ac(a,null,n,!0))}})),s.length){for(l.sort(e),Tc(s),Tc(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var c,u,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,a=c.length;o<a;++o)i.point((u=c[o])[0],u[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,o=c.length-1;o>=0;--o)i.point((u=c[o])[0],u[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function Tc(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Dc(t){return Jl(t[0])<=Wl?t[0]:ic(t[0])*((Jl(t[0])+Wl)%Xl-Wl)}function Ec(t,e,n,r){return function(i){var o,a,s,l=e(i),c=Cc(),u=e(c),f=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=y,d.lineEnd=x,a=[],o=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,a=fn(a);var t=function(t,e){var n=Dc(e),r=e[1],i=rc(r),o=[rc(n),-nc(n),0],a=0,s=0,l=new Ge;1===i?r=Zl+Bl:-1===i&&(r=-Zl-Bl);for(var c=0,u=t.length;c<u;++c)if(d=(f=t[c]).length)for(var f,d,h=f[d-1],p=Dc(h),m=h[1]/2+Gl,g=rc(m),v=nc(m),y=0;y<d;++y,p=b,g=$,v=_,h=x){var x=f[y],b=Dc(x),w=x[1]/2+Gl,$=rc(w),_=nc(w),k=b-p,M=k>=0?1:-1,C=M*k,N=C>Wl,A=g*$;if(l.add(ec(A*M*rc(C),v*_+A*nc(C))),a+=N?k+M*Xl:k,N^p>=n^b>=n){var S=gc(pc(h),pc(x));xc(S);var T=gc(o,S);xc(T);var D=(N^k>=0?-1:1)*ac(T[2]);(r>D||r===D&&(S[0]||S[1]))&&(s+=N^k>=0?1:-1)}}return(a<-Bl||a<Bl&&l<-1e-12)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),Sc(a,Lc,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function p(t,e){l.point(t,e)}function m(){d.point=p,l.lineStart()}function g(){d.point=h,l.lineEnd()}function v(t,e){s.push([t,e]),u.point(t,e)}function y(){u.lineStart(),s=[]}function x(){v(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),d=c.result(),h=d.length;if(s.pop(),o.push(s),s=null,h)if(1&l){if((e=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&l&&d.push(d.pop().concat(d.shift())),a.push(d.filter(zc))}return d}}function zc(t){return t.length>1}function Lc(t,e){return((t=t.x)[0]<0?t[1]-Zl-Bl:Zl-t[1])-((e=e.x)[0]<0?e[1]-Zl-Bl:Zl-e[1])}wc.invert=wc;var jc=Ec((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Wl:-Wl,l=Jl(o-n);Jl(l-Wl)<Bl?(t.point(n,r=(r+a)/2>0?Zl:-Zl),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=Wl&&(Jl(n-i)<Bl&&(n-=i*Bl),Jl(o-s)<Bl&&(o-=s*Bl),r=function(t,e,n,r){var i,o,a=rc(t-n);return Jl(a)>Bl?tc((rc(e)*(o=nc(r))*rc(n)-rc(r)*(i=nc(e))*rc(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Zl,r.point(-Wl,i),r.point(0,i),r.point(Wl,i),r.point(Wl,0),r.point(Wl,-i),r.point(0,-i),r.point(-Wl,-i),r.point(-Wl,0),r.point(-Wl,i);else if(Jl(t[0]-e[0])>Bl){var o=t[0]<e[0]?Wl:-Wl;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Wl,-Zl]);function Pc(t){var e=nc(t),n=6*Ql,r=e>0,i=Jl(e)>Bl;function o(t,n){return nc(t)*nc(n)>e}function a(t,n,r){var i=[1,0,0],o=gc(pc(t),pc(n)),a=mc(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var c=e*a/l,u=-e*s/l,f=gc(i,o),d=yc(i,c);vc(d,yc(o,u));var h=f,p=mc(d,h),m=mc(h,h),g=p*p-m*(mc(d,d)-1);if(!(g<0)){var v=oc(g),y=yc(h,(-p-v)/m);if(vc(y,d),y=hc(y),!r)return y;var x,b=t[0],w=n[0],$=t[1],_=n[1];w<b&&(x=b,b=w,w=x);var k=w-b,M=Jl(k-Wl)<Bl;if(!M&&_<$&&(x=$,$=_,_=x),M||k<Bl?M?$+_>0^y[1]<(Jl(y[0]-b)<Bl?$:_):$<=y[1]&&y[1]<=_:k>Wl^(b<=y[0]&&y[0]<=w)){var C=yc(h,(-p+v)/m);return vc(C,d),[y,hc(C)]}}}function s(e,n){var i=r?t:Wl-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Ec(o,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(f,d){var h,p=[f,d],m=o(f,d),g=r?m?0:s(f,d):m?s(f+(f<0?Wl:-Wl),d):0;if(!e&&(c=l=m)&&t.lineStart(),m!==l&&(!(h=a(e,p))||Nc(e,h)||Nc(p,h))&&(p[2]=1),m!==l)u=0,m?(t.lineStart(),h=a(p,e),t.point(h[0],h[1])):(h=a(e,p),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(i&&e&&r^m){var v;g&n||!(v=a(p,e,!0))||(u=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!m||e&&Nc(e,p)||t.point(p[0],p[1]),e=p,l=m,n=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var a=nc(e),s=rc(e),l=r*n;null==i?(i=e+r*Xl,o=e-l/2):(i=Mc(a,i),o=Mc(a,o),(r>0?i<o:i>o)&&(i+=r*Xl));for(var c,u=i;r>0?u>o:u<o;u-=l)c=hc([a,-s*nc(u),-s*rc(u)]),t.point(c[0],c[1])}}(o,t,n,i,e,r)}),r?[0,-t]:[-Wl,t-Wl])}var Rc=1e9,Oc=-Rc;function Ic(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var u=0,f=0;if(null==i||(u=a(i,s))!==(f=a(o,s))||l(i,o)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return Jl(r[0]-t)<Bl?i>0?0:3:Jl(r[0]-n)<Bl?i>0?2:1:Jl(r[1]-e)<Bl?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,c,u,f,d,h,p,m,g,v,y,x=a,b=Cc(),w={point:$,lineStart:function(){w.point=_,c&&c.push(u=[]);v=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(_(f,d),h&&g&&b.rejoin(),l.push(b.result()));w.point=$,g&&x.lineEnd()},polygonStart:function(){x=b,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],l=1,u=s.length,f=s[0],d=f[0],h=f[1];l<u;++l)o=d,a=h,d=(f=s[l])[0],h=f[1],a<=r?h>r&&(d-o)*(r-a)>(h-a)*(t-o)&&++e:h<=r&&(d-o)*(r-a)<(h-a)*(t-o)&&--e;return e}(),n=y&&e,i=(l=fn(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Sc(l,s,e,o,a),a.polygonEnd());x=a,l=c=u=null}};function $(t,e){i(t,e)&&x.point(t,e)}function _(o,a){var s=i(o,a);if(c&&u.push([o,a]),v)f=o,d=a,h=s,v=!1,s&&(x.lineStart(),x.point(o,a));else if(s&&g)x.point(o,a);else{var l=[p=Math.max(Oc,Math.min(Rc,p)),m=Math.max(Oc,Math.min(Rc,m))],b=[o=Math.max(Oc,Math.min(Rc,o)),a=Math.max(Oc,Math.min(Rc,a))];!function(t,e,n,r,i,o){var a,s=t[0],l=t[1],c=0,u=1,f=e[0]-s,d=e[1]-l;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<u&&(u=a)}else if(f>0){if(a>u)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>u)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<u&&(u=a)}if(a=r-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<u&&(u=a)}else if(d>0){if(a>u)return;a>c&&(c=a)}if(a=o-l,d||!(a<0)){if(a/=d,d<0){if(a>u)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<u&&(u=a)}return c>0&&(t[0]=s+c*f,t[1]=l+c*d),u<1&&(e[0]=s+u*f,e[1]=l+u*d),!0}}}}}(l,b,t,e,n,r)?s&&(x.lineStart(),x.point(o,a),y=!1):(g||(x.lineStart(),x.point(l[0],l[1])),x.point(b[0],b[1]),s||x.lineEnd(),y=!1)}p=o,m=a,g=s}return w}}var Fc=t=>t,qc=1/0,Uc=qc,Hc=-qc,Yc=Hc,Vc={point:function(t,e){t<qc&&(qc=t);t>Hc&&(Hc=t);e<Uc&&(Uc=e);e>Yc&&(Yc=e)},lineStart:sc,lineEnd:sc,polygonStart:sc,polygonEnd:sc,result:function(){var t=[[qc,Uc],[Hc,Yc]];return Hc=Yc=-(Uc=qc=1/0),t}};var Bc=Vc;function Wc(t){return function(e){var n=new Zc;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Zc(){}function Gc(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),function(t,e){t&&cc.hasOwnProperty(t.type)?cc[t.type](t,e):lc(t,e)}(n,t.stream(Bc)),e(Bc.result()),null!=r&&t.clipExtent(r),t}function Xc(t,e,n){return Gc(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function Kc(t,e,n){return Xc(t,[[0,0],e],n)}function Qc(t,e,n){return Gc(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function Jc(t,e,n){return Gc(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}Zc.prototype={constructor:Zc,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var tu=nc(30*Ql);function eu(t,e){return+e?function(t,e){function n(r,i,o,a,s,l,c,u,f,d,h,p,m,g){var v=c-r,y=u-i,x=v*v+y*y;if(x>4*e&&m--){var b=a+d,w=s+h,$=l+p,_=oc(b*b+w*w+$*$),k=ac($/=_),M=Jl(Jl($)-1)<Bl||Jl(o-f)<Bl?(o+f)/2:ec(w,b),C=t(M,k),N=C[0],A=C[1],S=N-r,T=A-i,D=y*S-v*T;(D*D/x>e||Jl((v*S+y*T)/x-.5)>.3||a*d+s*h+l*p<tu)&&(n(r,i,o,a,s,l,N,A,M,b/=_,w/=_,$,m,g),g.point(N,A),n(N,A,M,b,w,$,c,u,f,d,h,p,m,g))}}return function(e){var r,i,o,a,s,l,c,u,f,d,h,p,m={point:g,lineStart:v,lineEnd:x,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){u=NaN,m.point=y,e.lineStart()}function y(r,i){var o=pc([r,i]),a=t(r,i);n(u,f,c,d,h,p,u=a[0],f=a[1],c=r,d=o[0],h=o[1],p=o[2],16,e),e.point(u,f)}function x(){m.point=g,e.lineEnd()}function b(){v(),m.point=w,m.lineEnd=$}function w(t,e){y(r=t,e),i=u,o=f,a=d,s=h,l=p,m.point=y}function $(){n(u,f,c,d,h,p,i,o,r,a,s,l,16,e),m.lineEnd=x,x()}return m}}(t,e):function(t){return Wc({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var nu=Wc({point:function(t,e){this.stream.point(t*Ql,e*Ql)}});function ru(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=nc(o),s=rc(o),l=a*t,c=s*t,u=a/t,f=s/t,d=(s*n-a*e)/t,h=(s*e+a*n)/t;function p(t,o){return[l*(t*=r)-c*(o*=i)+e,n-c*t-l*o]}return p.invert=function(t,e){return[r*(u*t-f*e+d),i*(h-f*t-u*e)]},p}function iu(t){var e,n,r,i,o,a,s,l,c,u,f=150,d=480,h=250,p=0,m=0,g=0,v=0,y=0,x=0,b=1,w=1,$=null,_=jc,k=null,M=Fc,C=.5;function N(t){return l(t[0]*Ql,t[1]*Ql)}function A(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Kl,t[1]*Kl]}function S(){var t=ru(f,0,0,b,w,x).apply(null,e(p,m)),r=ru(f,d-t[0],h-t[1],b,w,x);return n=function(t,e,n){return(t%=Xl)?e||n?bc(_c(t),kc(e,n)):_c(t):e||n?kc(e,n):wc}(g,v,y),s=bc(e,r),l=bc(n,s),a=eu(s,C),T()}function T(){return c=u=null,N}return N.stream=function(t){return c&&u===t?c:c=nu(function(t){return Wc({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(_(a(M(u=t)))))},N.preclip=function(t){return arguments.length?(_=t,$=void 0,T()):_},N.postclip=function(t){return arguments.length?(M=t,k=r=i=o=null,T()):M},N.clipAngle=function(t){return arguments.length?(_=+t?Pc($=t*Ql):($=null,jc),T()):$*Kl},N.clipExtent=function(t){return arguments.length?(M=null==t?(k=r=i=o=null,Fc):Ic(k=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),T()):null==k?null:[[k,r],[i,o]]},N.scale=function(t){return arguments.length?(f=+t,S()):f},N.translate=function(t){return arguments.length?(d=+t[0],h=+t[1],S()):[d,h]},N.center=function(t){return arguments.length?(p=t[0]%360*Ql,m=t[1]%360*Ql,S()):[p*Kl,m*Kl]},N.rotate=function(t){return arguments.length?(g=t[0]%360*Ql,v=t[1]%360*Ql,y=t.length>2?t[2]%360*Ql:0,S()):[g*Kl,v*Kl,y*Kl]},N.angle=function(t){return arguments.length?(x=t%360*Ql,S()):x*Kl},N.reflectX=function(t){return arguments.length?(b=t?-1:1,S()):b<0},N.reflectY=function(t){return arguments.length?(w=t?-1:1,S()):w<0},N.precision=function(t){return arguments.length?(a=eu(s,C=t*t),T()):oc(C)},N.fitExtent=function(t,e){return Xc(N,t,e)},N.fitSize=function(t,e){return Kc(N,t,e)},N.fitWidth=function(t,e){return Qc(N,t,e)},N.fitHeight=function(t,e){return Jc(N,t,e)},function(){return e=t.apply(this,arguments),N.invert=e.invert&&A,S()}}function ou(t,e){var n=rc(t),r=(n+rc(e))/2;if(Jl(r)<Bl)return function(t){var e=nc(t);function n(t,n){return[t*e,rc(n)/e]}return n.invert=function(t,n){return[t/e,ac(n*e)]},n}(t);var i=1+n*(2*r-n),o=oc(i)/r;function a(t,e){var n=oc(i-2*r*rc(e))/r;return[n*rc(t*=r),o-n*nc(t)]}return a.invert=function(t,e){var n=o-e,a=ec(t,Jl(n))*ic(n);return n*r<0&&(a-=Wl*ic(t)*ic(n)),[a/r,ac((i-(t*t+n*n)*r*r)/(2*r))]},a}function au(){return function(t){var e=0,n=Wl/3,r=iu(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ql,n=t[1]*Ql):[e*Kl,n*Kl]},i}(ou).scale(155.424).center([0,33.6442])}function su(){var t,e,n,r,i,o,a=au().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),s=au().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=au().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function u(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(t)},u.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),l.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},u.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),f()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],u=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,u-.238*e],[o+.455*e,u+.238*e]]).stream(c),r=s.translate([o-.307*e,u+.201*e]).clipExtent([[o-.425*e+Bl,u+.12*e+Bl],[o-.214*e-Bl,u+.234*e-Bl]]).stream(c),i=l.translate([o-.205*e,u+.212*e]).clipExtent([[o-.214*e+Bl,u+.166*e+Bl],[o-.115*e-Bl,u+.234*e-Bl]]).stream(c),f()},u.fitExtent=function(t,e){return Xc(u,t,e)},u.fitSize=function(t,e){return Kc(u,t,e)},u.fitWidth=function(t,e){return Qc(u,t,e)},u.fitHeight=function(t,e){return Jc(u,t,e)},u.scale(1070)}function lu(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,l,c,u,f,d,h=t._root,p={data:r},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!h)return t._root=p,t;for(;h.length;)if((c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+y)/2))?g=a:y=a,i=h,!(h=h[f=u<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,h.data),l=+t._y.call(null,h.data),e===s&&n===l)return p.next=h,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+y)/2))?g=a:y=a}while((f=u<<1|c)==(d=(l>=a)<<1|s>=o));return i[d]=h,i[f]=p,t}function cu(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function uu(t){return t[0]}function fu(t){return t[1]}function du(t,e,n){var r=new hu(null==e?uu:e,null==n?fu:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function hu(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function pu(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var mu=du.prototype=hu.prototype;function gu(t){return function(){return t}}function vu(t){return 1e-6*(t()-.5)}function yu(t){return t.x+t.vx}function xu(t){return t.y+t.vy}mu.copy=function(){var t,e,n=new hu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=pu(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=pu(e));return n},mu.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return lu(this.cover(e,n),e,n,t)},mu.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>f&&(f=i));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<o;++n)lu(this,a[n],s[n],t[n]);return this},mu.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,l=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},mu.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},mu.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},mu.find=function(t,e,n){var r,i,o,a,s,l,c,u=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],m=this._root;for(m&&p.push(new cu(m,u,f,d,h)),null==n?n=1/0:(u=t-n,f=e-n,d=t+n,h=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(i=l.x0)>d||(o=l.y0)>h||(a=l.x1)<u||(s=l.y1)<f))if(m.length){var g=(i+a)/2,v=(o+s)/2;p.push(new cu(m[3],g,v,a,s),new cu(m[2],i,v,g,s),new cu(m[1],g,o,a,v),new cu(m[0],i,o,g,v)),(c=(e>=v)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var y=t-+this._x.call(null,m.data),x=e-+this._y.call(null,m.data),b=y*y+x*x;if(b<n){var w=Math.sqrt(n=b);u=t-w,f=e-w,d=t+w,h=e+w,r=m.data}}return r},mu.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,l,c,u,f,d,h=this._root,p=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((c=o>=(s=(p+g)/2))?p=s:g=s,(u=a>=(l=(m+v)/2))?m=l:v=l,e=h,!(h=h[f=u<<1|c]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,d=f)}for(;h.data!==t;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},mu.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},mu.root=function(){return this._root},mu.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},mu.visit=function(t){var e,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new cu(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&l.length){var c=(r+o)/2,u=(i+a)/2;(n=l[3])&&s.push(new cu(n,c,u,o,a)),(n=l[2])&&s.push(new cu(n,r,u,c,a)),(n=l[1])&&s.push(new cu(n,c,i,o,u)),(n=l[0])&&s.push(new cu(n,r,i,c,u))}return this},mu.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new cu(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(a+l)/2,f=(s+c)/2;(o=i[0])&&n.push(new cu(o,a,s,u,f)),(o=i[1])&&n.push(new cu(o,u,s,l,f)),(o=i[2])&&n.push(new cu(o,a,f,u,c)),(o=i[3])&&n.push(new cu(o,u,f,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},mu.x=function(t){return arguments.length?(this._x=t,this):this._x},mu.y=function(t){return arguments.length?(this._y=t,this):this._y};var bu={value:()=>{}};function wu(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new $u(r)}function $u(t){this._=t}function _u(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ku(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Mu(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=bu,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}$u.prototype=wu.prototype={constructor:$u,on:function(t,e){var n,r=this._,i=_u(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=Mu(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Mu(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=ku(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new $u(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Cu,Nu,Au=0,Su=0,Tu=0,Du=0,Eu=0,zu=0,Lu="object"==typeof performance&&performance.now?performance:Date,ju="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Pu(){return Eu||(ju(Ru),Eu=Lu.now()+zu)}function Ru(){Eu=0}function Ou(){this._call=this._time=this._next=null}function Iu(t,e,n){var r=new Ou;return r.restart(t,e,n),r}function Fu(){Eu=(Du=Lu.now())+zu,Au=Su=0;try{!function(){Pu(),++Au;for(var t,e=Cu;e;)(t=Eu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Au}()}finally{Au=0,function(){var t,e,n=Cu,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Cu=e);Nu=t,Uu(r)}(),Eu=0}}function qu(){var t=Lu.now(),e=t-Du;e>1e3&&(zu-=e,Du=t)}function Uu(t){Au||(Su&&(Su=clearTimeout(Su)),t-Eu>24?(t<1/0&&(Su=setTimeout(Fu,t-Lu.now()-zu)),Tu&&(Tu=clearInterval(Tu))):(Tu||(Du=Lu.now(),Tu=setInterval(qu,1e3)),Au=1,ju(Fu)))}Ou.prototype=Iu.prototype={constructor:Ou,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Pu():+n)+(null==e?0:+e),this._next||Nu===this||(Nu?Nu._next=this:Cu=this,Nu=this),this._call=t,this._time=n,Uu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uu())}};const Hu=4294967296;function Yu(t){return t.x}function Vu(t){return t.y}var Bu=Math.PI*(3-Math.sqrt(5));function Wu(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=Iu(f),c=wu("tick","end"),u=function(){let t=1;return()=>(t=(1664525*t+1013904223)%Hu)/Hu}();function f(){d(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function d(r){var l,c,u=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),l=0;l<u;++l)null==(c=t[l]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function h(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*Bu;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),h(),e={tick:d,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,h(),s.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(u=t,s.forEach(p),e):u},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,l,c=0,u=t.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(l=s,r=a);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function Zu(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function Gu(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function Xu(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function Ku(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function Qu(t){let e,n,r,i,o,a,s,l=t[6],c=[];for(let e=0;e<l.length;e+=1)c[e]=Ju(Ku(t,l,e));let u=t[7],f=[];for(let e=0;e<u.length;e+=1)f[e]=tf(Xu(t,u,e));let d=t[6],h=[];for(let e=0;e<d.length;e+=1)h[e]=ef(Gu(t,d,e));let p=t[7],m=[];for(let e=0;e<p.length;e+=1)m[e]=nf(Zu(t,p,e));return{c(){e=D("g"),n=D("foreignObject"),r=T("div");for(let t=0;t<c.length;t+=1)c[t].c();i=z();for(let t=0;t<f.length;t+=1)f[t].c();o=z();for(let t=0;t<h.length;t+=1)h[t].c();a=L();for(let t=0;t<m.length;t+=1)m[t].c();O(r,"class","annotation-wrapper svelte-1opdl67"),O(n,"width",t[1]),O(n,"height",t[2]),O(e,"class","intro-annotation"),O(e,"transform",s="translate(-35, 0)")},m(t,s){N(t,e,s),k(e,n),k(n,r);for(let t=0;t<c.length;t+=1)c[t].m(r,null);k(r,i);for(let t=0;t<f.length;t+=1)f[t].m(r,null);k(r,o);for(let t=0;t<h.length;t+=1)h[t].m(e,null);k(e,a);for(let t=0;t<m.length;t+=1)m[t].m(e,null)},p(t,s){if(64&s){let e;for(l=t[6],e=0;e<l.length;e+=1){const n=Ku(t,l,e);c[e]?c[e].p(n,s):(c[e]=Ju(n),c[e].c(),c[e].m(r,i))}for(;e<c.length;e+=1)c[e].d(1);c.length=l.length}if(160&s){let e;for(u=t[7],e=0;e<u.length;e+=1){const n=Xu(t,u,e);f[e]?f[e].p(n,s):(f[e]=tf(n),f[e].c(),f[e].m(r,o))}for(;e<f.length;e+=1)f[e].d(1);f.length=u.length}if(2&s&&O(n,"width",t[1]),4&s&&O(n,"height",t[2]),64&s){let n;for(d=t[6],n=0;n<d.length;n+=1){const r=Gu(t,d,n);h[n]?h[n].p(r,s):(h[n]=ef(r),h[n].c(),h[n].m(e,a))}for(;n<h.length;n+=1)h[n].d(1);h.length=d.length}if(128&s){let n;for(p=t[7],n=0;n<p.length;n+=1){const r=Zu(t,p,n);m[n]?m[n].p(r,s):(m[n]=nf(r),m[n].c(),m[n].m(e,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=p.length}},d(t){t&&A(e),S(c,t),S(f,t),S(h,t),S(m,t)}}}function Ju(e){let n,r,i,o;return{c(){n=T("div"),r=E("In "),i=T("b"),i.textContent="NY",o=E(", 5 to 10% of the population\n            experience partisanship in their news\n            diets."),O(n,"class","annotation svelte-1opdl67"),F(n,"top",e[9].y-(e[9].r_L+80)+"px"),F(n,"left",e[9].x-(e[9].r_L+80)+"px")},m(t,e){N(t,n,e),k(n,r),k(n,i),k(n,o)},p:t,d(t){t&&A(n)}}}function tf(e){let n,r,i,o,a,s;return{c(){n=T("div"),r=T("b"),r.textContent="ND",i=E("'s right-leaning echo chamber is\n            much more sizeable and intense: over \n            10% of the population.\n            "),o=T("div"),O(o,"class","close-button svelte-1opdl67"),O(n,"class","annotation svelte-1opdl67"),F(n,"top",e[9].y-(e[9].r_L+140)+"px"),F(n,"left",e[9].x+(e[9].r_R+20)+"px")},m(t,l){N(t,n,l),k(n,r),k(n,i),k(n,o),a||(s=j(o,"click",e[5]),a=!0)},p:t,d(t){t&&A(n),a=!1,s()}}}function ef(e){let n;return{c(){n=D("line"),O(n,"class","annotation-line svelte-1opdl67"),O(n,"x1",e[9].x-(e[9].r_L+5)),O(n,"x2",e[9].x-(e[9].r_L-10)),O(n,"y1",e[9].y-(e[9].r_L+16)),O(n,"y2",e[9].y-(e[9].r_L-16))},m(t,e){N(t,n,e)},p:t,d(t){t&&A(n)}}}function nf(e){let n;return{c(){n=D("line"),O(n,"class","annotation-line svelte-1opdl67"),O(n,"x1",e[9].x+(e[9].r_R+45)),O(n,"x2",e[9].x-(e[9].r_L-35)),O(n,"y1",e[9].y-(e[9].r_L+45)),O(n,"y2",e[9].y-e[9].r_L)},m(t,e){N(t,n,e)},p:t,d(t){t&&A(n)}}}function rf(e){let n,r=e[0]&&Qu(e);return{c(){r&&r.c(),n=L()},m(t,e){r&&r.m(t,e),N(t,n,e)},p(t,[e]){t[0]?r?r.p(t,e):(r=Qu(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&A(n)}}}function of(t,e,n){let r,i,o;const{width:a,height:s}=it("LayerCake");c(t,a,(t=>n(1,i=t))),c(t,s,(t=>n(2,o=t)));let{data:l}=e;const u=l.filter((t=>"NY"===t.abbr)),f=l.filter((t=>"ND"===t.abbr));return t.$$set=t=>{"data"in t&&n(8,l=t.data)},n(0,r=!0),[r,i,o,a,s,function(){n(0,r=!1)},u,f,l]}class af extends Rt{constructor(t){super(),Pt(this,t,of,rf,s,{data:8})}}function sf(t,e,n){const r=t.slice();return r[26]=e[n],r}function lf(t){let e,n;return e=new af({props:{data:t[1]}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.data=t[1]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function cf(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,g,v,y,x,b,w,$=t[26].abbr+"";function _(...e){return t[18](t[26],...e)}return{c(){e=D("g"),n=D("path"),o=D("path"),l=D("path"),d=D("text"),h=E($),O(n,"class","node svelte-1xz61ek"),O(n,"fill",r=t[26].fillR),O(n,"d",i=t[26].rightPathString),O(o,"class","node svelte-1xz61ek"),O(o,"fill",a=t[26].fillL),O(o,"d",s=t[26].leftPathString),O(l,"class","node node-stroke svelte-1xz61ek"),O(l,"fill",c="none"),O(l,"stroke",u="black"),O(l,"d",f=t[26].fullPath),O(d,"class",p=m("state-label "+(t[2]?"active":""))+" svelte-1xz61ek"),O(d,"fill","black"),O(d,"dx",g=(t[26].r_L+3)*Math.cos(3*Math.PI/4)),O(d,"dy",v=-(t[26].r_L+3)*Math.cos(3*Math.PI/4)),O(e,"class",y=m(`node-group node-group-${t[26].abbr}`)+" svelte-1xz61ek"),O(e,"transform",x=`translate(${t[26].x}, ${t[26].y})`)},m(t,r){N(t,e,r),k(e,n),k(e,o),k(e,l),k(e,d),k(d,h),b||(w=j(e,"click",_),b=!0)},p(c,u){t=c,2&u&&r!==(r=t[26].fillR)&&O(n,"fill",r),2&u&&i!==(i=t[26].rightPathString)&&O(n,"d",i),2&u&&a!==(a=t[26].fillL)&&O(o,"fill",a),2&u&&s!==(s=t[26].leftPathString)&&O(o,"d",s),2&u&&f!==(f=t[26].fullPath)&&O(l,"d",f),2&u&&$!==($=t[26].abbr+"")&&I(h,$),4&u&&p!==(p=m("state-label "+(t[2]?"active":""))+" svelte-1xz61ek")&&O(d,"class",p),2&u&&g!==(g=(t[26].r_L+3)*Math.cos(3*Math.PI/4))&&O(d,"dx",g),2&u&&v!==(v=-(t[26].r_L+3)*Math.cos(3*Math.PI/4))&&O(d,"dy",v),2&u&&y!==(y=m(`node-group node-group-${t[26].abbr}`)+" svelte-1xz61ek")&&O(e,"class",y),2&u&&x!==(x=`translate(${t[26].x}, ${t[26].y})`)&&O(e,"transform",x)},d(t){t&&A(e),b=!1,w()}}}function uf(t){let e,n,r,i=t[0]&&lf(t),o=t[1],a=[];for(let e=0;e<o.length;e+=1)a[e]=cf(sf(t,o,e));return{c(){i&&i.c(),e=z(),n=D("g");for(let t=0;t<a.length;t+=1)a[t].c();O(n,"class","bee-group"),O(n,"transform","translate(-35, 0)")},m(t,o){i&&i.m(t,o),N(t,e,o),N(t,n,o);for(let t=0;t<a.length;t+=1)a[t].m(n,null);r=!0},p(t,[r]){if(t[0]?i?(i.p(t,r),1&r&&kt(i,1)):(i=lf(t),i.c(),kt(i,1),i.m(e.parentNode,e)):i&&($t(),Mt(i,1,1,(()=>{i=null})),_t()),262&r){let e;for(o=t[1],e=0;e<o.length;e+=1){const i=sf(t,o,e);a[e]?a[e].p(i,r):(a[e]=cf(i),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=o.length}},i(t){r||(kt(i),r=!0)},o(t){Mt(i),r=!1},d(t){i&&i.d(t),t&&A(e),t&&A(n),S(a,t)}}}function ff(t,e){return t.arc(0,0,e.r,e.start,e.end),t.closePath(),t}function df(t,e,n){let r,i,o,a,s,l;const{height:u,width:f,rScale:d,zScale:h,data:p}=it("LayerCake");c(t,u,(t=>n(16,o=t))),c(t,f,(t=>n(17,a=t))),c(t,d,(t=>n(21,l=t))),c(t,h,(t=>n(20,s=t))),c(t,p,(t=>n(15,i=t)));let{collideStrength:m=1}=e,{manyBodyStrength:g=1}=e,{medium:v}=e,{diet_threshold:y}=e,{partisanship_scenario:x}=e,{renderAnnotation:b}=e;const w=rt(),$=su();function _(){M.alpha(1).restart()}$.translate([a/2,o/2]);let k=[],M=Wu().alpha(0).alphaMin(.4).force("collide",function(t){var e,n,r,i=1,o=1;function a(){for(var t,a,l,c,u,f,d,h=e.length,p=0;p<o;++p)for(a=du(e,yu,xu).visitAfter(s),t=0;t<h;++t)l=e[t],f=n[l.index],d=f*f,c=l.x+l.vx,u=l.y+l.vy,a.visit(m);function m(t,e,n,o,a){var s=t.data,h=t.r,p=f+h;if(!s)return e>c+p||o<c-p||n>u+p||a<u-p;if(s.index>l.index){var m=c-s.x-s.vx,g=u-s.y-s.vy,v=m*m+g*g;v<p*p&&(0===m&&(v+=(m=vu(r))*m),0===g&&(v+=(g=vu(r))*g),v=(p-(v=Math.sqrt(v)))/v*i,l.vx+=(m*=v)*(p=(h*=h)/(d+h)),l.vy+=(g*=v)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=gu(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,l()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:gu(+e),l(),a):t},a}((t=>t.r+9.5)).strength(m).iterations(5)).force("charge",function(){var t,e,n,r,i,o=gu(-30),a=1,s=1/0,l=.81;function c(n){var i,o=t.length,a=du(t,Yu,Vu).visitAfter(f);for(r=n,i=0;i<o;++i)e=t[i],a.visit(d)}function u(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function f(t){var e,n,r,o,a,s=0,l=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,o+=n*e.y);t.x=r/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function d(t,o,c,u){if(!t.value)return!0;var f=t.x-e.x,d=t.y-e.y,h=u-o,p=f*f+d*d;if(h*h/l<p)return p<s&&(0===f&&(p+=(f=vu(n))*f),0===d&&(p+=(d=vu(n))*d),p<a&&(p=Math.sqrt(a*p)),e.vx+=f*t.value*r/p,e.vy+=d*t.value*r/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===f&&(p+=(f=vu(n))*f),0===d&&(p+=(d=vu(n))*d),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(h=i[t.data.index]*r/p,e.vx+=f*h,e.vy+=d*h)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,u()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:gu(+t),u(),c):o},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(l=t*t,c):Math.sqrt(l)},c}().strength(g));function C(t){return t.map(((t,e)=>{const[n,r]=$(t.coordinates),i=l(Math.abs(t.data.left_size)),o=l(Math.abs(t.data.right_size)),a=ff(ls(),{r:o,start:-Math.PI/2,end:Math.PI/2}),c=s(1*t.data.right_pct),u=ff(ls(),{r:i,start:Math.PI/2,end:-Math.PI/2}),f=s(-1*t.data.left_pct),d=(h=ls(),p={r:o},m={r:i},h.arc(0,0,p.r,-Math.PI/2,Math.PI/2),h.arc(0,0,m.r,Math.PI/2,-Math.PI/2),h.closePath(),h);var h,p,m;return{...t,x:n,y:r,r:Math.max(i,o),r_L:i,r_R:o,rightPathString:a,fillR:c,leftPathString:u,fillL:f,fullPath:d}}))}function N(t,e){w("click",{target:t.target,node:e})}return t.$$set=t=>{"collideStrength"in t&&n(9,m=t.collideStrength),"manyBodyStrength"in t&&n(10,g=t.manyBodyStrength),"medium"in t&&n(11,v=t.medium),"diet_threshold"in t&&n(12,y=t.diet_threshold),"partisanship_scenario"in t&&n(13,x=t.partisanship_scenario),"renderAnnotation"in t&&n(0,b=t.renderAnnotation)},t.$$.update=()=>{32768&t.$$.dirty&&n(1,k=C(i)),16386&t.$$.dirty&&n(14,M=M.nodes(k).on("tick",(()=>{n(1,k=M.nodes())})).on("end",(()=>{n(2,r=!0)}))),14336&t.$$.dirty&&_(),229376&t.$$.dirty&&($.translate([a/2,o/2]),n(1,k=n(1,k=C(i))),_())},n(2,r=!1),[b,k,r,u,f,d,h,p,N,m,g,v,y,x,M,i,o,a,(t,e)=>N(e,t)]}class hf extends Rt{constructor(t){super(),Pt(this,t,df,uf,s,{collideStrength:9,manyBodyStrength:10,medium:11,diet_threshold:12,partisanship_scenario:13,renderAnnotation:0})}}function pf(t,e,n){const r=t.slice();return r[2]=e[n],r[4]=n,r}function mf(t){let e,n,r=t[2].domain+"";return{c(){e=T("div"),n=E(r),O(e,"class",m("row-value row-value-program")+" svelte-1pcea81")},m(t,r){N(t,e,r),k(e,n)},p(t,e){1&e&&r!==(r=t[2].domain+"")&&I(n,r)},d(t){t&&A(e)}}}function gf(t){let e,n,r,i,o,a=t[2].program+"",s=t[2].network+"";return{c(){e=T("div"),n=E(a),r=z(),i=T("span"),o=E(s),O(i,"class",m("row-value row-value-network")+" svelte-1pcea81"),O(e,"class",m("row-value row-value-program")+" svelte-1pcea81")},m(t,a){N(t,e,a),k(e,n),k(e,r),k(e,i),k(i,o)},p(t,e){1&e&&a!==(a=t[2].program+"")&&I(n,a),1&e&&s!==(s=t[2].network+"")&&I(o,s)},d(t){t&&A(e)}}}function vf(t){let e,n,r,i,o,a,s,l=t[2].value.toLocaleString()+"";function c(t,e){return"tv"===t[1]?gf:mf}let u=c(t),f=u(t);return{c(){e=T("div"),f.c(),n=z(),r=T("div"),i=E(l),a=z(),O(r,"class",o=m("row-value row-value-audience")+" svelte-1pcea81"),O(e,"class",s=m("row-body")+" svelte-1pcea81")},m(t,o){N(t,e,o),f.m(e,null),k(e,n),k(e,r),k(r,i),k(e,a)},p(t,r){u===(u=c(t))&&f?f.p(t,r):(f.d(1),f=u(t),f&&(f.c(),f.m(e,n))),1&r&&l!==(l=t[2].value.toLocaleString()+"")&&I(i,l)},d(t){t&&A(e),f.d()}}}function yf(e){let n,r,i,o,a,s,l,c,u="tv"===e[1]?"Program":"Domain",f=e[0].filter(xf),d=[];for(let t=0;t<f.length;t+=1)d[t]=vf(pf(e,f,t));return{c(){n=T("div"),r=T("div"),i=T("div"),o=T("div"),a=E(u),s=z(),l=T("div"),l.textContent="Audience",c=z();for(let t=0;t<d.length;t+=1)d[t].c();O(o,"class",m("row-header row-header-program")+" svelte-1pcea81"),O(l,"class",m("row-header row-header-audience")+" svelte-1pcea81"),O(i,"class",m("row-head")+" svelte-1pcea81"),O(r,"class",m("table-wrapper")+" svelte-1pcea81"),O(n,"class","table-container")},m(t,e){N(t,n,e),k(n,r),k(r,i),k(i,o),k(o,a),k(i,s),k(i,l),k(r,c);for(let t=0;t<d.length;t+=1)d[t].m(r,null)},p(t,[e]){if(2&e&&u!==(u="tv"===t[1]?"Program":"Domain")&&I(a,u),3&e){let n;for(f=t[0].filter(xf),n=0;n<f.length;n+=1){const i=pf(t,f,n);d[n]?d[n].p(i,e):(d[n]=vf(i),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=f.length}},i:t,o:t,d(t){t&&A(n),S(d,t)}}}const xf=t=>t.value>0;function bf(t,e,n){let{data:r}=e,{medium:i}=e;return t.$$set=t=>{"data"in t&&n(0,r=t.data),"medium"in t&&n(1,i=t.medium)},[r,i]}class wf extends Rt{constructor(t){super(),Pt(this,t,bf,yf,s,{data:0,medium:1})}}Pr(",.0s");const $f=Pr(",.0f"),_f=Pr("+,.2s");function kf(t){var e=["th","st","nd","rd"],n=t%100;return t+(e[(n-20)%10]||e[n]||e[0])}function Mf(t){const e=t.slice(),n=e[9].get(e[1].detail.node.abbr)[0];e[20]=n.abbr,e[21]=n.state,e[22]=n.data;const r=e[6].get(e[20]).get(e[3]).get(e[2]).map((t=>({...t,value:Math.max(t.right_pct,t.left_pct)})));e[23]=r;const i=ns(e[23].map((t=>[{...t,political_lean:"R",value:t.right_pct},{...t,political_lean:"L",value:t.left_pct}])));e[24]=i;const o=Ze(e[23],(t=>+t.date));e[25]=o[0],e[26]=o[1];const a=e[8].get(e[4]).get(e[20]).get(e[3]);return e[27]=a,e}function Cf(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,S,D,L,j,P,R,F,q,U,H,Y,V,B,W,Z,G,X,K,Q,J,tt,et,nt,rt,it,ot,at,st,lt,ct,ut,ft,dt,ht,pt,mt,gt,vt,yt,xt,bt,wt,$t,_t,Ct=t[20]+"",Nt=t[21]+"",St=t[11](t[22].left_pct)+"",Tt=kf(t[22].left_pct_rk)+"",Dt=t[11](t[22].right_pct)+"",jt=kf(t[22].right_pct_rk)+"",Pt=$f(t[22].left_size)+"",Rt=kf(t[22].left_size_rk)+"",Ot=$f(t[22].right_size)+"",It=kf(t[22].right_size_rk)+"",qt=t[5][0]+"",Ut="tv"===t[3]?"watched":"viewed",Ht=t[5][1]+"";return at=new xl({props:{data:t[7].get(t[20]).get(t[3]).map(t[15]),groupedData:t[24],scaleRange:Hr().range([t[25],t[26]]),start:0,end:1,yKey:Sf,xKey:Af,zKey:Tf,spanCol:12,customClass:"popup-overlay",formatTickX:Tl,url:"",includeCaption:!1}}),pt=new wf({props:{data:t[27],medium:t[3]}}),{c(){e=T("h1"),n=T("span"),r=E(Ct),i=z(),o=E(Nt),s=z(),l=T("div"),c=T("div"),u=T("h6"),u.textContent="Partisan lean population",f=z(),d=T("span"),h=T("span"),h.textContent="L",p=z(),m=T("span"),g=E(St),v=z(),y=T("span"),x=E(Tt),b=z(),w=T("span"),$=T("span"),$.textContent="R",_=z(),M=T("span"),C=E(Dt),S=z(),D=T("span"),L=E(jt),j=z(),P=T("div"),R=T("h6"),R.textContent="Echo chamber sizes",F=z(),q=T("span"),U=T("span"),U.textContent="L",H=z(),Y=T("span"),V=E(Pt),B=z(),W=T("span"),Z=E(Rt),G=z(),X=T("span"),K=T("span"),K.textContent="R",Q=z(),J=T("span"),tt=E(Ot),et=z(),nt=T("span"),rt=E(It),it=z(),ot=T("div"),Et(at.$$.fragment),st=z(),lt=T("p"),ct=T("span"),ct.textContent="TV & Web news diet polarization.",ut=z(),ft=E(qt),dt=z(),ht=T("div"),Et(pt.$$.fragment),mt=z(),gt=T("p"),vt=T("span"),yt=E("Most "),xt=E(Ut),bt=E("."),wt=z(),$t=E(Ht),O(n,"class","svelte-1o0fkpt"),O(e,"class","title svelte-1o0fkpt"),O(u,"class","svelte-1o0fkpt"),O(h,"class","info-label svelte-1o0fkpt"),O(m,"class","info-value"),O(y,"class","info-rank svelte-1o0fkpt"),O(d,"class","info-L info-pct svelte-1o0fkpt"),O($,"class","info-label svelte-1o0fkpt"),O(M,"class","info-value"),O(D,"class","info-rank svelte-1o0fkpt"),O(w,"class","info-R info-pct svelte-1o0fkpt"),O(c,"class","info-inner"),O(R,"class","svelte-1o0fkpt"),O(U,"class","info-label svelte-1o0fkpt"),O(Y,"class","info-value"),O(W,"class","info-rank svelte-1o0fkpt"),O(q,"class","info-L info-size svelte-1o0fkpt"),O(K,"class","info-label svelte-1o0fkpt"),O(J,"class","info-value"),O(nt,"class","info-rank svelte-1o0fkpt"),O(X,"class","info-R info-size svelte-1o0fkpt"),O(P,"class","info-inner"),O(l,"class","info svelte-1o0fkpt"),O(ot,"class","overlay-col1-container svelte-1o0fkpt"),O(ct,"class","svelte-1o0fkpt"),O(lt,"class","caption overlay-col1-caption svelte-1o0fkpt"),O(ht,"class","overlay-col2-container svelte-1o0fkpt"),O(vt,"class","svelte-1o0fkpt"),O(gt,"class","caption overlay-col2-caption svelte-1o0fkpt")},m(t,a){N(t,e,a),k(e,n),k(n,r),k(e,i),k(e,o),N(t,s,a),N(t,l,a),k(l,c),k(c,u),k(c,f),k(c,d),k(d,h),k(d,p),k(d,m),k(m,g),k(d,v),k(d,y),k(y,x),k(c,b),k(c,w),k(w,$),k(w,_),k(w,M),k(M,C),k(w,S),k(w,D),k(D,L),k(l,j),k(l,P),k(P,R),k(P,F),k(P,q),k(q,U),k(q,H),k(q,Y),k(Y,V),k(q,B),k(q,W),k(W,Z),k(P,G),k(P,X),k(X,K),k(X,Q),k(X,J),k(J,tt),k(X,et),k(X,nt),k(nt,rt),N(t,it,a),N(t,ot,a),zt(at,ot,null),N(t,st,a),N(t,lt,a),k(lt,ct),k(lt,ut),k(lt,ft),N(t,dt,a),N(t,ht,a),zt(pt,ht,null),N(t,mt,a),N(t,gt,a),k(gt,vt),k(vt,yt),k(vt,xt),k(vt,bt),k(gt,wt),k(gt,$t),_t=!0},p(t,e){(!_t||514&e)&&Ct!==(Ct=t[20]+"")&&I(r,Ct),(!_t||514&e)&&Nt!==(Nt=t[21]+"")&&I(o,Nt),(!_t||514&e)&&St!==(St=t[11](t[22].left_pct)+"")&&I(g,St),(!_t||514&e)&&Tt!==(Tt=kf(t[22].left_pct_rk)+"")&&I(x,Tt),(!_t||514&e)&&Dt!==(Dt=t[11](t[22].right_pct)+"")&&I(C,Dt),(!_t||514&e)&&jt!==(jt=kf(t[22].right_pct_rk)+"")&&I(L,jt),(!_t||514&e)&&Pt!==(Pt=$f(t[22].left_size)+"")&&I(V,Pt),(!_t||514&e)&&Rt!==(Rt=kf(t[22].left_size_rk)+"")&&I(Z,Rt),(!_t||514&e)&&Ot!==(Ot=$f(t[22].right_size)+"")&&I(tt,Ot),(!_t||514&e)&&It!==(It=kf(t[22].right_size_rk)+"")&&I(rt,It);const n={};650&e&&(n.data=t[7].get(t[20]).get(t[3]).map(t[15])),590&e&&(n.groupedData=t[24]),590&e&&(n.scaleRange=Hr().range([t[25],t[26]])),at.$set(n),(!_t||32&e)&&qt!==(qt=t[5][0]+"")&&I(ft,qt);const i={};794&e&&(i.data=t[27]),8&e&&(i.medium=t[3]),pt.$set(i),(!_t||8&e)&&Ut!==(Ut="tv"===t[3]?"watched":"viewed")&&I(xt,Ut),(!_t||32&e)&&Ht!==(Ht=t[5][1]+"")&&I($t,Ht)},i(t){_t||(a&&a.end(1),kt(at.$$.fragment,t),kt(pt.$$.fragment,t),_t=!0)},o(t){a=At(e,Ft,{delay:300}),Mt(at.$$.fragment,t),Mt(pt.$$.fragment,t),_t=!1},d(t){t&&A(e),t&&a&&a.end(),t&&A(s),t&&A(l),t&&A(it),t&&A(ot),Lt(at),t&&A(st),t&&A(lt),t&&A(dt),t&&A(ht),Lt(pt),t&&A(mt),t&&A(gt)}}}function Nf(t){let e,n,r,i,o,a,s,l=!t[0]&&Cf(Mf(t));return{c(){e=T("div"),l&&l.c(),n=z(),r=T("div"),O(r,"class","close-button svelte-1o0fkpt"),O(e,"class",i="overlay "+(t[0]?"":"active")+" svelte-1o0fkpt")},m(i,c){N(i,e,c),l&&l.m(e,null),k(e,n),k(e,r),o=!0,a||(s=j(r,"click",t[16]),a=!0)},p(t,[r]){t[0]?l&&($t(),Mt(l,1,1,(()=>{l=null})),_t()):l?(l.p(Mf(t),r),1&r&&kt(l,1)):(l=Cf(Mf(t)),l.c(),kt(l,1),l.m(e,n)),(!o||1&r&&i!==(i="overlay "+(t[0]?"":"active")+" svelte-1o0fkpt"))&&O(e,"class",i)},i(t){o||(kt(l),o=!0)},o(t){Mt(l),o=!1},d(t){t&&A(e),l&&l.d(),a=!1,s()}}}let Af="date",Sf="value",Tf=0;function Df(t,e,n){let r;const i=rt(),{data:o}=it("LayerCake");c(t,o,(t=>n(14,r=t)));const a=Pr(`.${1}~%`);let s,l,u,f,d,h,{hidePopup:p}=e,{popup:m}=e,{diet_threshold:g}=e,{partisanship_scenario:v}=e,{medium:y}=e,{period:x}=e,{tooltipCaptions:b=[]}=e;function w(){i("closePopup")}nt((async()=>{const t=await qe("assets/data/EchoCh-by_state_full-timeseries.csv",Pe);s=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))),n(6,l=tn(s,(t=>t.state),(t=>t.medium),(t=>t.partisanship_scenario))),n(7,u=tn(s,(t=>t.state),(t=>t.medium))),f=await qe("assets/data/EchoCh-by_state_audiences.csv",Pe),n(8,d=tn(f,(t=>t.period),(t=>t.state),(t=>t.medium)))}));return t.$$set=t=>{"hidePopup"in t&&n(0,p=t.hidePopup),"popup"in t&&n(1,m=t.popup),"diet_threshold"in t&&n(13,g=t.diet_threshold),"partisanship_scenario"in t&&n(2,v=t.partisanship_scenario),"medium"in t&&n(3,y=t.medium),"period"in t&&n(4,x=t.period),"tooltipCaptions"in t&&n(5,b=t.tooltipCaptions)},t.$$.update=()=>{16384&t.$$.dirty&&n(9,h=tn(r,(t=>t.abbr)))},[p,m,v,y,x,b,l,u,d,h,o,a,w,g,r,t=>({...t,value:Math.max(t.right_pct,t.left_pct)}),()=>w()]}class Ef extends Rt{constructor(t){super(),Pt(this,t,Df,Nf,s,{hidePopup:0,popup:1,diet_threshold:13,partisanship_scenario:2,medium:3,period:4,tooltipCaptions:5})}}var zf=[{state:"Maine",abbr:"ME",row:1,col:11},{state:"Wisconsin",abbr:"WI",row:2,col:6},{state:"Vermont",abbr:"VT",row:2,col:10},{state:"New Hampshire",abbr:"NH",row:2,col:11},{state:"Washington",abbr:"WA",row:3,col:1},{state:"Idaho",abbr:"ID",row:3,col:2},{state:"Montana",abbr:"MT",row:3,col:3},{state:"North Dakota",abbr:"ND",row:3,col:4},{state:"Minnesota",abbr:"MN",row:3,col:5},{state:"Illinois",abbr:"IL",row:3,col:6},{state:"Michigan",abbr:"MI",row:3,col:7},{state:"New York",abbr:"NY",row:3,col:9},{state:"Massachusetts",abbr:"MA",row:3,col:10},{state:"Oregon",abbr:"OR",row:4,col:1},{state:"Nevada",abbr:"NV",row:4,col:2},{state:"Wyoming",abbr:"WY",row:4,col:3},{state:"South Dakota",abbr:"SD",row:4,col:4},{state:"Iowa",abbr:"IA",row:4,col:5},{state:"Indiana",abbr:"IN",row:4,col:6},{state:"Ohio",abbr:"OH",row:4,col:7},{state:"Pennsylvania",abbr:"PA",row:4,col:8},{state:"New Jersey",abbr:"NJ",row:4,col:9},{state:"Connecticut",abbr:"CT",row:4,col:10},{state:"Rhode Island",abbr:"RI",row:4,col:11},{state:"California",abbr:"CA",row:5,col:1},{state:"Utah",abbr:"UT",row:5,col:2},{state:"Colorado",abbr:"CO",row:5,col:3},{state:"Nebraska",abbr:"NE",row:5,col:4},{state:"Missouri",abbr:"MO",row:5,col:5},{state:"Kentucky",abbr:"KY",row:5,col:6},{state:"West Virginia",abbr:"WV",row:5,col:7},{state:"Virginia",abbr:"VA",row:5,col:8},{state:"Maryland",abbr:"MD",row:5,col:9},{state:"Delaware",abbr:"DE",row:5,col:10},{state:"Arizona",abbr:"AZ",row:6,col:2},{state:"New Mexico",abbr:"NM",row:6,col:3},{state:"Kansas",abbr:"KS",row:6,col:4},{state:"Arkansas",abbr:"AR",row:6,col:5},{state:"Tennessee",abbr:"TN",row:6,col:6},{state:"North Carolina",abbr:"NC",row:6,col:7},{state:"South Carolina",abbr:"SC",row:6,col:8},{state:"District of Columbia",abbr:"DC",row:6,col:9},{state:"Oklahoma",abbr:"OK",row:7,col:4},{state:"Louisiana",abbr:"LA",row:7,col:5},{state:"Mississippi",abbr:"MS",row:7,col:6},{state:"Alabama",abbr:"AL",row:7,col:7},{state:"Georgia",abbr:"GA",row:7,col:8},{state:"Hawaii",abbr:"HI",row:8,col:1},{state:"Alaska",abbr:"AK",row:8,col:2},{state:"Texas",abbr:"TX",row:8,col:4},{state:"Florida",abbr:"FL",row:8,col:9}];function Lf(t,e,n){const r=t.slice();r[38]=e[n],r[41]=n;const i=r[19][r[41]];return r[39]=i,r}function jf(t,e,n){const r=t.slice();return r[42]=e[n],r[41]=n,r}function Pf(e){let n,r,i,o,a=e[42]+"";return{c(){n=T("option"),r=E(a),i=z(),n.__value=o=e[42],n.value=n.__value},m(t,e){N(t,n,e),k(n,r),k(n,i)},p:t,d(t){t&&A(n)}}}function Rf(t){let e;return{c(){e=T("span"),e.textContent="More left",O(e,"class","legend-block-label legend-block-label-L svelte-1jlvfir")},m(t,n){N(t,e,n)},d(t){t&&A(e)}}}function Of(t){let e,n,r,i=Math.abs(t[39]).toLocaleString("en-NZ",{style:"percent",maximumFractionDigits:1,minimumFractionDigits:0})+"";return{c(){e=T("div"),n=E(i),O(e,"class",r=m("legend-anchor-label legend-anchor-label-"+(t[39]>0?"R":"L"))+" svelte-1jlvfir")},m(t,r){N(t,e,r),k(e,n)},p(t,o){524288&o[0]&&i!==(i=Math.abs(t[39]).toLocaleString("en-NZ",{style:"percent",maximumFractionDigits:1,minimumFractionDigits:0})+"")&&I(n,i),524288&o[0]&&r!==(r=m("legend-anchor-label legend-anchor-label-"+(t[39]>0?"R":"L"))+" svelte-1jlvfir")&&O(e,"class",r)},d(t){t&&A(e)}}}function If(t){let e,n=void 0!==t[39]&&Of(t);return{c(){e=T("div"),n&&n.c(),O(e,"class","legend-block svelte-1jlvfir"),F(e,"--color",t[38])},m(t,r){N(t,e,r),n&&n.m(e,null)},p(t,r){void 0!==t[39]?n?n.p(t,r):(n=Of(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),512&r[0]&&F(e,"--color",t[38])},d(t){t&&A(e),n&&n.d()}}}function Ff(t){let e,n;return e=new hf({props:{medium:t[13],diet_threshold:t[12],partisanship_scenario:t[11],collideStrength:.1,manyBodyStrength:-.5,renderAnnotation:t[16]}}),e.$on("mouseenter",t[22]),e.$on("mouseleave",t[23]),e.$on("click",t[24]),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};8192&n[0]&&(r.medium=t[13]),4096&n[0]&&(r.diet_threshold=t[12]),2048&n[0]&&(r.partisanship_scenario=t[11]),65536&n[0]&&(r.renderAnnotation=t[16]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function qf(t){let e,n,r=t[15]&&Ff(t);return{c(){r&&r.c(),e=L()},m(t,i){r&&r.m(t,i),N(t,e,i),n=!0},p(t,n){t[15]?r?(r.p(t,n),32768&n[0]&&kt(r,1)):(r=Ff(t),r.c(),kt(r,1),r.m(e.parentNode,e)):r&&($t(),Mt(r,1,1,(()=>{r=null})),_t())},i(t){n||(kt(r),n=!0)},o(t){Mt(r),n=!1},d(t){r&&r.d(t),t&&A(e)}}}function Uf(t){let e,n;return e=new Ef({props:{hidePopup:t[14],diet_threshold:t[12],partisanship_scenario:t[11],medium:t[13],period:t[8]||Bf,popup:t[21],tooltipCaptions:t[3]}}),e.$on("closePopup",t[25]),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};16384&n[0]&&(r.hidePopup=t[14]),4096&n[0]&&(r.diet_threshold=t[12]),2048&n[0]&&(r.partisanship_scenario=t[11]),8192&n[0]&&(r.medium=t[13]),256&n[0]&&(r.period=t[8]||Bf),2097152&n[0]&&(r.popup=t[21]),8&n[0]&&(r.tooltipCaptions=t[3]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Hf(t){let e,n,r,i;return e=new es({props:{$$slots:{default:[qf]},$$scope:{ctx:t}}}),r=new Za({props:{pointerEvents:!t[14],$$slots:{default:[Uf]},$$scope:{ctx:t}}}),{c(){Et(e.$$.fragment),n=z(),Et(r.$$.fragment)},m(t,o){zt(e,t,o),N(t,n,o),zt(r,t,o),i=!0},p(t,n){const i={};112640&n[0]|8192&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i);const o={};16384&n[0]&&(o.pointerEvents=!t[14]),2128136&n[0]|8192&n[1]&&(o.$$scope={dirty:n,ctx:t}),r.$set(o)},i(t){i||(kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!0)},o(t){Mt(e.$$.fragment,t),Mt(r.$$.fragment,t),i=!1},d(t){Lt(e,t),t&&A(n),Lt(r,t)}}}function Yf(t){let e,n;return e=new ol({props:{caption:t[2],url:t[4],type:"single-cols"}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};4&n[0]&&(r.caption=t[2]),16&n[0]&&(r.url=t[4]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Vf(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,P,R,F,U,H,Y,V,B,W,Z,G,X,K,Q,J,tt,et,nt,rt,it,ot,st,lt,ct,ut,ht,pt,mt,gt,vt,yt,xt,bt,wt,Ct,Nt,At,St,Tt,jt="L"===t[10]?"left":"right",Pt=t[1].rDomain[0].toLocaleString("en-NZ",{notation:"compact"})+"",Rt=(t[1].rDomain[1]/18).toLocaleString("en-NZ",{notation:"compact"})+"",Ot=(t[1].rDomain[1]/4.5).toLocaleString("en-NZ",{notation:"compact"})+"",It=(t[1].rDomain[1]/2).toLocaleString("en-NZ",{notation:"compact"})+"";function Ft(e){t[32](e)}let qt={id:"medium",title:Gt.controls.medium.title,labels:["TV","Web"],info:Gt.controls.medium.description};function Ut(e){t[33](e)}void 0!==t[7]&&(qt.checked=t[7]),r=new Nl({props:qt}),at.push((()=>Dt(r,"checked",Ft)));let Ht={id:"partisanship",title:Gt.controls.partisanship.title,labels:["Stringent","Lenient"],info:Gt.controls.partisanship.description};void 0!==t[6]&&(Ht.checked=t[6]),a=new Nl({props:Ht}),at.push((()=>Dt(a,"checked",Ut)));let Yt=t[26],Vt=[];for(let e=0;e<Yt.length;e+=1)Vt[e]=Pf(jf(t,Yt,e));let Bt="linear"!==t[1].type&&Rf(),Wt=t[9],Zt=[];for(let e=0;e<Wt.length;e+=1)Zt[e]=If(Lf(t,Wt,e));wt=new Ha({props:{flatData:t[0],data:t[17],rScale:t[20],rDomain:t[20].domain(),rRange:t[20].range(),zScale:t[18],zDomain:t[18].domain(),zRange:t[18].range(),padding:{top:0,right:0,bottom:0,left:0},$$slots:{default:[Hf]},$$scope:{ctx:t}}});let Xt=t[5]&&Yf(t);return{c(){e=T("div"),n=T("div"),Et(r.$$.fragment),o=z(),Et(a.$$.fragment),l=z(),c=T("div"),u=T("div"),u.textContent="Period",f=z(),d=T("select");for(let t=0;t<Vt.length;t+=1)Vt[t].c();h=z(),p=T("div"),m=T("div"),g=T("h5"),g.textContent="Partisan lean",v=z(),Bt&&Bt.c(),y=z();for(let t=0;t<Zt.length;t+=1)Zt[t].c();x=z(),b=T("span"),w=E("More "),$=E(jt),_=z(),M=T("div"),C=T("h5"),C.textContent="Echo chamber size",P=z(),R=T("div"),F=D("svg"),U=D("circle"),V=D("text"),B=E(Pt),G=D("circle"),Q=D("text"),J=E(Rt),nt=D("circle"),ot=D("text"),st=E(Ot),ut=D("circle"),mt=D("text"),gt=E(It),xt=z(),bt=T("div"),Et(wt.$$.fragment),Ct=z(),Xt&&Xt.c(),Nt=L(),O(u,"class","control-title svelte-1jlvfir"),O(d,"id","period-menu"),O(d,"name","period"),O(d,"class","svelte-1jlvfir"),void 0===t[8]&&ft((()=>t[34].call(d))),O(c,"id","period"),O(c,"class","control control-menu svelte-1jlvfir"),O(n,"class","controls svelte-1jlvfir"),O(g,"class","svelte-1jlvfir"),O(b,"class","legend-block-label legend-block-label-R svelte-1jlvfir"),O(m,"class","legend-item legend-item-color svelte-1jlvfir"),O(C,"class","svelte-1jlvfir"),O(U,"cy",0),O(U,"cx",H=t[20](t[1].rDomain[1]/2)+1),O(U,"r",Y=t[20](t[1].rDomain[0])),O(U,"fill","none"),O(U,"stroke","black"),O(U,"class","legend-circle"),O(V,"y",W=t[20](t[1].rDomain[0])+2),O(V,"x",Z=t[20](t[1].rDomain[1]/2)),O(V,"class","legend-circle-label svelte-1jlvfir"),O(G,"cy",0),O(G,"cx",X=t[20](t[1].rDomain[1]/2)+1),O(G,"r",K=t[20](t[1].rDomain[1]/18)),O(G,"fill","none"),O(G,"stroke","black"),O(G,"class","legend-circle"),O(Q,"y",tt=t[20](t[1].rDomain[1]/18)+2),O(Q,"x",et=t[20](t[1].rDomain[1]/2)),O(Q,"class","legend-circle-label svelte-1jlvfir"),O(nt,"cy",0),O(nt,"cx",rt=t[20](t[1].rDomain[1]/2)),O(nt,"r",it=t[20](t[1].rDomain[1]/4.5)),O(nt,"fill","none"),O(nt,"stroke","black"),O(nt,"class","legend-circle"),O(ot,"y",lt=t[20](t[1].rDomain[1]/4.5)+2),O(ot,"x",ct=t[20](t[1].rDomain[1]/2)),O(ot,"class","legend-circle-label svelte-1jlvfir"),O(ut,"cy",0),O(ut,"cx",ht=t[20](t[1].rDomain[1]/2)),O(ut,"r",pt=t[20](t[1].rDomain[1]/2)),O(ut,"fill","none"),O(ut,"stroke","black"),O(ut,"class","legend-circle"),O(mt,"y",vt=t[20](t[1].rDomain[1]/2)+2),O(mt,"x",yt=t[20](t[1].rDomain[1]/2)),O(mt,"class","legend-circle-label svelte-1jlvfir"),O(F,"class","svelte-1jlvfir"),O(R,"class","svelte-1jlvfir"),O(M,"class","legend-item legend-item-size svelte-1jlvfir"),O(p,"class","legend svelte-1jlvfir"),O(e,"class","chart-info-wrapper main-column svelte-1jlvfir"),O(bt,"id","beeswarm"),O(bt,"class","chart beeswarm-chart svelte-1jlvfir")},m(i,s){N(i,e,s),k(e,n),zt(r,n,null),k(n,o),zt(a,n,null),k(n,l),k(n,c),k(c,u),k(c,f),k(c,d);for(let t=0;t<Vt.length;t+=1)Vt[t].m(d,null);q(d,t[8]),k(e,h),k(e,p),k(p,m),k(m,g),k(m,v),Bt&&Bt.m(m,null),k(m,y);for(let t=0;t<Zt.length;t+=1)Zt[t].m(m,null);k(m,x),k(m,b),k(b,w),k(b,$),k(p,_),k(p,M),k(M,C),k(M,P),k(M,R),k(R,F),k(F,U),k(F,V),k(V,B),k(F,G),k(F,Q),k(Q,J),k(F,nt),k(F,ot),k(ot,st),k(F,ut),k(F,mt),k(mt,gt),N(i,xt,s),N(i,bt,s),zt(wt,bt,null),N(i,Ct,s),Xt&&Xt.m(i,s),N(i,Nt,s),At=!0,St||(Tt=j(d,"change",t[34]),St=!0)},p(t,e){const n={};!i&&128&e[0]&&(i=!0,n.checked=t[7],dt((()=>i=!1))),r.$set(n);const o={};if(!s&&64&e[0]&&(s=!0,o.checked=t[6],dt((()=>s=!1))),a.$set(o),67108864&e[0]){let n;for(Yt=t[26],n=0;n<Yt.length;n+=1){const r=jf(t,Yt,n);Vt[n]?Vt[n].p(r,e):(Vt[n]=Pf(r),Vt[n].c(),Vt[n].m(d,null))}for(;n<Vt.length;n+=1)Vt[n].d(1);Vt.length=Yt.length}if(67109120&e[0]&&q(d,t[8]),"linear"!==t[1].type?Bt||(Bt=Rf(),Bt.c(),Bt.m(m,y)):Bt&&(Bt.d(1),Bt=null),524800&e[0]){let n;for(Wt=t[9],n=0;n<Wt.length;n+=1){const r=Lf(t,Wt,n);Zt[n]?Zt[n].p(r,e):(Zt[n]=If(r),Zt[n].c(),Zt[n].m(m,x))}for(;n<Zt.length;n+=1)Zt[n].d(1);Zt.length=Wt.length}(!At||1024&e[0])&&jt!==(jt="L"===t[10]?"left":"right")&&I($,jt),(!At||1048578&e[0]&&H!==(H=t[20](t[1].rDomain[1]/2)+1))&&O(U,"cx",H),(!At||1048578&e[0]&&Y!==(Y=t[20](t[1].rDomain[0])))&&O(U,"r",Y),(!At||2&e[0])&&Pt!==(Pt=t[1].rDomain[0].toLocaleString("en-NZ",{notation:"compact"})+"")&&I(B,Pt),(!At||1048578&e[0]&&W!==(W=t[20](t[1].rDomain[0])+2))&&O(V,"y",W),(!At||1048578&e[0]&&Z!==(Z=t[20](t[1].rDomain[1]/2)))&&O(V,"x",Z),(!At||1048578&e[0]&&X!==(X=t[20](t[1].rDomain[1]/2)+1))&&O(G,"cx",X),(!At||1048578&e[0]&&K!==(K=t[20](t[1].rDomain[1]/18)))&&O(G,"r",K),(!At||2&e[0])&&Rt!==(Rt=(t[1].rDomain[1]/18).toLocaleString("en-NZ",{notation:"compact"})+"")&&I(J,Rt),(!At||1048578&e[0]&&tt!==(tt=t[20](t[1].rDomain[1]/18)+2))&&O(Q,"y",tt),(!At||1048578&e[0]&&et!==(et=t[20](t[1].rDomain[1]/2)))&&O(Q,"x",et),(!At||1048578&e[0]&&rt!==(rt=t[20](t[1].rDomain[1]/2)))&&O(nt,"cx",rt),(!At||1048578&e[0]&&it!==(it=t[20](t[1].rDomain[1]/4.5)))&&O(nt,"r",it),(!At||2&e[0])&&Ot!==(Ot=(t[1].rDomain[1]/4.5).toLocaleString("en-NZ",{notation:"compact"})+"")&&I(st,Ot),(!At||1048578&e[0]&&lt!==(lt=t[20](t[1].rDomain[1]/4.5)+2))&&O(ot,"y",lt),(!At||1048578&e[0]&&ct!==(ct=t[20](t[1].rDomain[1]/2)))&&O(ot,"x",ct),(!At||1048578&e[0]&&ht!==(ht=t[20](t[1].rDomain[1]/2)))&&O(ut,"cx",ht),(!At||1048578&e[0]&&pt!==(pt=t[20](t[1].rDomain[1]/2)))&&O(ut,"r",pt),(!At||2&e[0])&&It!==(It=(t[1].rDomain[1]/2).toLocaleString("en-NZ",{notation:"compact"})+"")&&I(gt,It),(!At||1048578&e[0]&&vt!==(vt=t[20](t[1].rDomain[1]/2)+2))&&O(mt,"y",vt),(!At||1048578&e[0]&&yt!==(yt=t[20](t[1].rDomain[1]/2)))&&O(mt,"x",yt);const l={};1&e[0]&&(l.flatData=t[0]),131072&e[0]&&(l.data=t[17]),1048576&e[0]&&(l.rScale=t[20]),1048576&e[0]&&(l.rDomain=t[20].domain()),1048576&e[0]&&(l.rRange=t[20].range()),262144&e[0]&&(l.zScale=t[18]),262144&e[0]&&(l.zDomain=t[18].domain()),262144&e[0]&&(l.zRange=t[18].range()),2226440&e[0]|8192&e[1]&&(l.$$scope={dirty:e,ctx:t}),wt.$set(l),t[5]?Xt?(Xt.p(t,e),32&e[0]&&kt(Xt,1)):(Xt=Yf(t),Xt.c(),kt(Xt,1),Xt.m(Nt.parentNode,Nt)):Xt&&($t(),Mt(Xt,1,1,(()=>{Xt=null})),_t())},i(t){At||(kt(r.$$.fragment,t),kt(a.$$.fragment,t),kt(wt.$$.fragment,t),kt(Xt),At=!0)},o(t){Mt(r.$$.fragment,t),Mt(a.$$.fragment,t),Mt(wt.$$.fragment,t),Mt(Xt),At=!1},d(t){t&&A(e),Lt(r),Lt(a),S(Vt,t),Bt&&Bt.d(),S(Zt,t),t&&A(xt),t&&A(bt),Lt(wt),t&&A(Ct),Xt&&Xt.d(t),t&&A(Nt),St=!1,Tt()}}}let Bf="Since 2016";function Wf(t,e,n){let r,i,o,a,s,l,c,u,f;const d=new Map(zf.map((t=>[t.state,t])));let h,p,{data:m}=e,{states:g}=e,{dataMap:v}=e,{fullDataMap:y}=e,{activeChart:x}=e,{caption:b}=e,{tooltipCaptions:w=[]}=e,{url:$=""}=e,{includeCaption:_=!0}=e,{politicalChecked:k}=e,M=!0,C=!1,N=!0,A=!1,S=!1;nt((()=>{n(15,A=!0)}));const T=["Since 2016","Last 3 months","Last 6 months","Last 12 months"];let D=Bf;return nt((()=>{setTimeout((()=>n(16,S=!0)),2e3)})),t.$$set=t=>{"data"in t&&n(0,m=t.data),"states"in t&&n(27,g=t.states),"dataMap"in t&&n(28,v=t.dataMap),"fullDataMap"in t&&n(29,y=t.fullDataMap),"activeChart"in t&&n(1,x=t.activeChart),"caption"in t&&n(2,b=t.caption),"tooltipCaptions"in t&&n(3,w=t.tooltipCaptions),"url"in t&&n(4,$=t.url),"includeCaption"in t&&n(5,_=t.includeCaption),"politicalChecked"in t&&n(30,k=t.politicalChecked)},t.$$.update=()=>{1073741824&t.$$.dirty[0]&&n(10,r=k?"R":"L"),128&t.$$.dirty[0]&&n(13,i=C?"web":"tv"),64&t.$$.dirty[0]&&n(11,a=M?"lenient":"stringent"),402667776&t.$$.dirty[0]&&n(17,p=g.map((t=>{const{abbr:e}=d.get(t.state),n=v.get(D||Bf).get(e).get(i).get(o).get(a)[0];return Object.assign(Object.assign({},t),{abbr:e,data:n})}))),2&t.$$.dirty[0]&&n(20,l=x.rScale().domain(x.rDomain).range(x.rRange)),1026&t.$$.dirty[0]|1&t.$$.dirty[1]&&(n(31,h=x.colorInterpolator().domain(x.colorInterpolatorDomain)),"diverging"===x.type?h.interpolator(gr(or.gamma(.5),x.colorInterpolatorScheme)):"linear"===x.type&&h.range([x.colorInterpolatorScheme,"R"===r?"#990000":"#011f5b"])),2&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(9,c=x.colorPaletteAnchors.map(h)),2&t.$$.dirty[0]&&n(19,u=x.zDomain),514&t.$$.dirty[0]&&n(18,f=x.zScale().domain(x.zDomain).range(c))},n(12,o=50),n(21,s=null),[m,x,b,w,$,_,M,C,D,c,r,a,o,i,N,A,S,p,f,u,l,s,function(t){},function(){},function(t){n(14,N=!1),n(21,s=t)},function(){n(14,N=!0),n(21,s=null)},T,g,v,y,k,h,function(t){C=t,n(7,C)},function(t){M=t,n(6,M)},function(){D=U(this),n(8,D),n(26,T)}]}class Zf extends Rt{constructor(t){super(),Pt(this,t,Wf,Vf,s,{data:0,states:27,dataMap:28,fullDataMap:29,activeChart:1,caption:2,tooltipCaptions:3,url:4,includeCaption:5,politicalChecked:30},null,[-1,-1])}}var Gf=[{coordinates:[-86.766233,33.001471],state:"Alabama",population:4447100},{coordinates:[-148.716968,61.288254],state:"Alaska",population:626932},{coordinates:[-111.828711,33.373506],state:"Arizona",population:5130632},{coordinates:[-92.576816,35.080251],state:"Arkansas",population:2673400},{coordinates:[-119.355165,35.458606],state:"California",population:33871648},{coordinates:[-105.203628,39.500656],state:"Colorado",population:4301261},{coordinates:[-72.874365,41.494852],state:"Connecticut",population:3405565},{coordinates:[-75.561908,39.397164],state:"Delaware",population:783600},{coordinates:[-77.014001,38.910092],state:"District of Columbia",population:572059},{coordinates:[-81.634622,27.79585],state:"Florida",population:15982378},{coordinates:[-83.868887,33.332208],state:"Georgia",population:8186453},{coordinates:[-157.524452,21.146768],state:"Hawaii",population:1211537},{coordinates:[-115.133222,44.242605],state:"Idaho",population:1293953},{coordinates:[-88.380238,41.278216],state:"Illinois",population:12419293},{coordinates:[-86.261515,40.163935],state:"Indiana",population:6080485},{coordinates:[-93.049161,41.960392],state:"Iowa",population:2926324},{coordinates:[-96.536052,38.454303],state:"Kansas",population:2688418},{coordinates:[-85.241819,37.808159],state:"Kentucky",population:4041769},{coordinates:[-91.457133,30.69927],state:"Louisiana",population:4468976},{coordinates:[-69.719931,44.313614],state:"Maine",population:1274923},{coordinates:[-76.797396,39.145653],state:"Maryland",population:5296486},{coordinates:[-71.363628,42.271831],state:"Massachusetts",population:6349097},{coordinates:[-84.170753,42.866412],state:"Michigan",population:9938444},{coordinates:[-93.583003,45.210782],state:"Minnesota",population:4919479},{coordinates:[-89.593164,32.56642],state:"Mississippi",population:2844658},{coordinates:[-92.15377,38.437715],state:"Missouri",population:5595211},{coordinates:[-111.209708,46.813302],state:"Montana",population:902195},{coordinates:[-97.403875,41.183753],state:"Nebraska",population:1711263},{coordinates:[-116.304648,37.165965],state:"Nevada",population:1998257},{coordinates:[-71.463342,43.153046],state:"New Hampshire",population:1235786},{coordinates:[-74.428055,40.438458],state:"New Jersey",population:8414350},{coordinates:[-106.342108,34.623012],state:"New Mexico",population:1819046},{coordinates:[-74.645228,41.507548],state:"New York",population:18976457},{coordinates:[-79.667654,35.553334],state:"North Carolina",population:8049313},{coordinates:[-99.334736,47.375168],state:"North Dakota",population:642200},{coordinates:[-82.749366,40.480854],state:"Ohio",population:11353140},{coordinates:[-96.834653,35.59794],state:"Oklahoma",population:3450654},{coordinates:[-122.579524,44.732273],state:"Oregon",population:3421399},{coordinates:[-77.075925,40.463528],state:"Pennsylvania",population:12281054},{coordinates:[-71.448902,41.753318],state:"Rhode Island",population:1048319},{coordinates:[-81.032387,34.034551],state:"South Carolina",population:4012012},{coordinates:[-99.043799,44.047502],state:"South Dakota",population:754844},{coordinates:[-86.397772,35.795862],state:"Tennessee",population:5689283},{coordinates:[-97.388631,30.943149],state:"Texas",population:20851820},{coordinates:[-111.90016,40.438987],state:"Utah",population:2233169},{coordinates:[-72.814309,44.081127],state:"Vermont",population:608827},{coordinates:[-77.835857,37.750345],state:"Virginia",population:7078515},{coordinates:[-121.624501,47.341728],state:"Washington",population:5894121},{coordinates:[-80.820221,38.767195],state:"West Virginia",population:1808344},{coordinates:[-89.001006,43.728544],state:"Wisconsin",population:5363675},{coordinates:[-107.008835,42.675762],state:"Wyoming",population:493782}];function Xf(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function Kf(t){let e,n,r,i,o,a,s,l,c=t[17].value.title+"";const u=[td,Jf],f=[];function d(t,e){return t[5]&&t[6]&&t[6].length?0:1}return a=d(t),s=f[a]=u[a](t),{c(){e=T("div"),n=T("h3"),r=E(c),i=z(),o=T("div"),s.c(),O(n,"class","chart-title"),O(e,"class","title-container svelte-jw9cpr"),O(o,"class","chart-wrapper svelte-jw9cpr")},m(t,s){N(t,e,s),k(e,n),k(n,r),N(t,i,s),N(t,o,s),f[a].m(o,null),l=!0},p(t,e){(!l||4&e)&&c!==(c=t[17].value.title+"")&&I(r,c);let n=a;a=d(t),a===n?f[a].p(t,e):($t(),Mt(f[n],1,1,(()=>{f[n]=null})),_t(),s=f[a],s?s.p(t,e):(s=f[a]=u[a](t),s.c()),kt(s,1),s.m(o,null))},i(t){l||(kt(s),l=!0)},o(t){Mt(s),l=!1},d(t){t&&A(e),t&&A(i),t&&A(o),f[a].d()}}}function Qf(e){let n,r,i=e[17].value+"";return{c(){n=T("p"),r=E(i),O(n,"class","copy svelte-jw9cpr")},m(t,e){N(t,n,e),k(n,r)},p(t,e){4&e&&i!==(i=t[17].value+"")&&I(r,i)},i:t,o:t,d(t){t&&A(n)}}}function Jf(e){let n,r;return n=new Sl({}),{c(){Et(n.$$.fragment)},m(t,e){zt(n,t,e),r=!0},p:t,i(t){r||(kt(n.$$.fragment,t),r=!0)},o(t){Mt(n.$$.fragment,t),r=!1},d(t){Lt(n,t)}}}function td(t){let e,n;return e=new Zf({props:{data:t[6],states:Gf,dataMap:t[7],fullDataMap:t[8],activeChart:t[10],politicalChecked:t[9],caption:t[3].captions,tooltipCaptions:[1,2].map(t[13]),url:rd}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};64&n&&(r.data=t[6]),128&n&&(r.dataMap=t[7]),256&n&&(r.fullDataMap=t[8]),1024&n&&(r.activeChart=t[10]),512&n&&(r.politicalChecked=t[9]),8&n&&(r.caption=t[3].captions),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function ed(t){let e,n,r,i;const o=[Qf,Kf],a=[];function s(t,e){return"text"===t[17].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function nd(t){let e,n,r,i,s,l,c,u,f,d,h=t[4].value+"",p=t[2],m=[];for(let e=0;e<p.length;e+=1)m[e]=ed(Xf(t,p,e));const g=t=>Mt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=T("div"),n=T("h1"),r=E(h),i=z();for(let t=0;t<m.length;t+=1)m[t].c();s=z(),l=T("div"),l.textContent="GO BACK",O(n,"class","section-title svelte-jw9cpr"),O(l,"class","close-button bottom svelte-jw9cpr"),O(e,"class","section svelte-jw9cpr")},m(o,a){N(o,e,a),k(e,n),k(n,r),k(e,i);for(let t=0;t<m.length;t+=1)m[t].m(e,null);k(e,s),k(e,l),u=!0,f||(d=[j(l,"click",t[14]),v(c=re.call(null,e,{once:t[1]})),j(e,"enter",t[15])],f=!0)},p(t,[n]){if((!u||16&n)&&h!==(h=t[4].value+"")&&I(r,h),2028&n){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=Xf(t,p,r);m[r]?(m[r].p(i,n),kt(m[r],1)):(m[r]=ed(i),m[r].c(),kt(m[r],1),m[r].m(e,s))}for($t(),r=p.length;r<m.length;r+=1)g(r);_t()}c&&a(c.update)&&2&n&&c.update.call(null,{once:t[1]})},i(t){if(!u){for(let t=0;t<p.length;t+=1)kt(m[t]);u=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)Mt(m[t]);u=!1},d(t){t&&A(e),S(m,t),f=!1,o(d)}}}const rd="assets/data/EchoCh-by_state.csv";function id(t,e,n){let r,i,o,a,s,l,c=!1,{once:u}=e,{body:f}=e,{refs:d}=e,{chart:h}=e,{title:p}=e,{modal:m}=e;nt((async()=>{const t=await qe(rd,Pe),e=["left_pct","right_pct","left_size","right_size"],r=nn(t,(t=>{const n={};return e.forEach((e=>{const r={},i=dn(t.map((t=>t[e])),He);t.forEach(((t,e)=>{r[t.state]=i[e]+1})),n[e]=r})),n}),(t=>t.period),(t=>t.medium),(t=>t.diet_threshold),(t=>t.partisanship_scenario));n(6,a=t.map((t=>Object.assign(Object.assign({},t),{left_pct_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).left_pct[t.state],right_pct_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).right_pct[t.state],left_size_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).left_size[t.state],right_size_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).right_size[t.state]})))),n(7,s=tn(a,(t=>t.period),(t=>t.state),(t=>t.medium),(t=>t.diet_threshold),(t=>t.partisanship_scenario))),n(8,l=tn(a,(t=>t.state),(t=>t.medium),(t=>t.partisanship_scenario)))}));const g=new Map([[0,{type:"diverging",rScale:Gr,rDomain:[1e3,3e6],rRange:[8,70],zScale:Xr,zDomain:[-.1,-.05,-.01,.01,.05,.1],colorInterpolator:ya,colorInterpolatorDomain:[-.75,0,.75],colorInterpolatorScheme:["#011f5b","gainsboro","#990000"],colorPaletteAnchors:[-.7,-.35,-.18,0,.18,.35,.85]}]]);return t.$$set=t=>{"once"in t&&n(1,u=t.once),"body"in t&&n(2,f=t.body),"refs"in t&&n(11,d=t.refs),"chart"in t&&n(3,h=t.chart),"title"in t&&n(4,p=t.title),"modal"in t&&n(0,m=t.modal)},t.$$.update=()=>{4096&t.$$.dirty&&n(10,i=g.get(+r))},n(12,r="0"),n(9,o=!0),[m,u,f,h,p,c,a,s,l,true,i,d,r,t=>Gt["echo-chambers-part1"].filter((t=>"chart"===t.type))[0].value[`caption${t}`],()=>n(0,m=!1),()=>n(5,c=!0)]}class od extends Rt{constructor(t){super(),Pt(this,t,id,nd,s,{once:1,body:2,refs:11,chart:3,title:4,modal:0})}}function ad(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function sd(t){let e,n,r,i;return{c(){e=D("g"),n=D("path"),O(n,"class","path-area svelte-1xaeu6t"),O(n,"d",r=t[0](t[9])),O(n,"fill",i=t[2](t[9])),O(e,"class","area-group")},m(t,r){N(t,e,r),k(e,n)},p(t,e){3&e&&r!==(r=t[0](t[9]))&&O(n,"d",r),6&e&&i!==(i=t[2](t[9]))&&O(n,"fill",i)},d(t){t&&A(e)}}}function ld(e){let n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=sd(ad(e,r,t));return{c(){n=D("g");for(let t=0;t<i.length;t+=1)i[t].c();O(n,"class","vis")},m(t,e){N(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(7&e){let o;for(r=t[1],o=0;o<r.length;o+=1){const a=ad(t,r,o);i[o]?i[o].p(a,e):(i[o]=sd(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&A(n),S(i,t)}}}function cd(t,e,n){let r,i,o,a,s;const{data:l,xGet:u,yScale:f,zGet:d}=it("LayerCake");return c(t,l,(t=>n(1,a=t))),c(t,u,(t=>n(8,o=t))),c(t,f,(t=>n(7,i=t))),c(t,d,(t=>n(2,s=t))),t.$$.update=()=>{384&t.$$.dirty&&n(0,r=gs().x((t=>o(t))).y0((t=>i(t[0]))).y1((t=>i(t[1]))).curve(xs))},[r,a,s,l,u,f,d,i,o]}class ud extends Rt{constructor(t){super(),Pt(this,t,cd,ld,s,{})}}function fd(t){let e,n,r,i,o,a;return e=new Gs({props:{gridlines:!1,snapTicks:!1,tickMarks:!0,formatTick:t[6]}}),r=new nl({props:{formatTick:md,ticks:4}}),o=new ud({}),{c(){Et(e.$$.fragment),n=z(),Et(r.$$.fragment),i=z(),Et(o.$$.fragment)},m(t,s){zt(e,t,s),N(t,n,s),zt(r,t,s),N(t,i,s),zt(o,t,s),a=!0},p(t,n){const r={};64&n&&(r.formatTick=t[6]),e.$set(r)},i(t){a||(kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(o.$$.fragment,t),a=!0)},o(t){Mt(e.$$.fragment,t),Mt(r.$$.fragment,t),Mt(o.$$.fragment,t),a=!1},d(t){Lt(e,t),t&&A(n),Lt(r,t),t&&A(i),Lt(o,t)}}}function dd(t){let e,n;return e=new es({props:{$$slots:{default:[fd]},$$scope:{ctx:t}}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};32832&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function hd(t){let e,n;return e=new ol({props:{caption:t[1],url:t[3],type:"single-cols"}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),8&n&&(r.url=t[3]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function pd(t){let e,n,r,i,o;n=new Ha({props:{padding:t[0],flatData:ns(t[8]),data:t[8],x:gd,xScale:ma(),y:[0,1],yDomain:t[7],z:"key",zScale:bn(),zDomain:t[4],zRange:t[5],$$slots:{default:[dd]},$$scope:{ctx:t}}});let a=t[2]&&hd(t);return{c(){e=T("div"),Et(n.$$.fragment),r=z(),a&&a.c(),i=L(),O(e,"class",m("chart stacked-area-chart")+" svelte-9qr8y9")},m(t,s){N(t,e,s),zt(n,e,null),N(t,r,s),a&&a.m(t,s),N(t,i,s),o=!0},p(t,[e]){const r={};1&e&&(r.padding=t[0]),256&e&&(r.flatData=ns(t[8])),256&e&&(r.data=t[8]),128&e&&(r.yDomain=t[7]),16&e&&(r.zDomain=t[4]),32&e&&(r.zRange=t[5]),32832&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r),t[2]?a?(a.p(t,e),4&e&&kt(a,1)):(a=hd(t),a.c(),kt(a,1),a.m(i.parentNode,i)):a&&($t(),Mt(a,1,1,(()=>{a=null})),_t())},i(t){o||(kt(n.$$.fragment,t),kt(a),o=!0)},o(t){Mt(n.$$.fragment,t),Mt(a),o=!1},d(t){t&&A(e),Lt(n),t&&A(r),a&&a.d(t),t&&A(i)}}}const md=t=>t,gd=t=>t.data.date;function vd(t,e,n){let r,i,o,a,{margins:s={top:20,right:10,bottom:20,left:45}}=e,{caption:l=""}=e,{includeCaption:c=!0}=e,{url:u=""}=e,{data:f}=e,{dataMap:d}=e,{categories:h}=e,{colors:p}=e,{rows:m}=e,{formatter:g}=e,{yDomain:v}=e;return t.$$set=t=>{"margins"in t&&n(0,s=t.margins),"caption"in t&&n(1,l=t.caption),"includeCaption"in t&&n(2,c=t.includeCaption),"url"in t&&n(3,u=t.url),"data"in t&&n(9,f=t.data),"dataMap"in t&&n(10,d=t.dataMap),"categories"in t&&n(4,h=t.categories),"colors"in t&&n(5,p=t.colors),"rows"in t&&n(11,m=t.rows),"formatter"in t&&n(6,g=t.formatter),"yDomain"in t&&n(7,v=t.yDomain)},t.$$.update=()=>{3088&t.$$.dirty&&n(12,r=m.map((t=>{const e={},n=d.get(t);if(void 0!==n)return h.forEach((t=>{n.has(t)&&(e[t]=n.get(t)[0].value)})),Object.assign({date:new Date(t)},e)})).filter((t=>void 0!==t))),4096&t.$$.dirty&&n(14,i=Object.keys(r[0]).filter((t=>"date"!==t))),16384&t.$$.dirty&&n(13,o=function(){var t=cs([]),e=ks,n=_s,r=Ms;function i(i){var o,a,s=Array.from(t.apply(this,arguments),Cs),l=s.length,c=-1;for(const t of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(t,s[o].key,c,i)]).data=t;for(o=0,a=us(e(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:cs(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:cs(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?ks:"function"==typeof t?t:cs(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?_s:t,i):n},i}().keys(i).order(As)),12288&t.$$.dirty&&n(8,a=o(r))},[s,l,c,u,h,p,g,v,a,f,d,m,r,o,i]}class yd extends Rt{constructor(t){super(),Pt(this,t,vd,pd,s,{margins:0,caption:1,includeCaption:2,url:3,data:9,dataMap:10,categories:4,colors:5,rows:11,formatter:6,yDomain:7})}}const xd=new Map([["non-news","Non-news"],["news","News"],["non_news","Non-news"],["facebook","Facebook"],["hard_news","Hard news"],["youtube","YouTube"],["twitter","Twitter"],["reddit","Reddit"],["fake_news","Fake News"]]);function bd(t,e,n){const r=t.slice();return r[26]=e[n],r[28]=n,r}function wd(t,e,n){const r=t.slice();return r[29]=e[n],r}function $d(t,e,n){const r=t.slice();return r[32]=e[n],r}function _d(t){let e,n,r,i,a,s,l,c,u,f,d,h,p,m,g,v,y,x,b,w,$,_,M,C,D,L,P,R,F,U,H,Y,V,B,W,Z,G,X,K,Q,J=t[26].value.title+"";function tt(e){t[16](e)}let et={id:"medium",title:Gt.controls.medium.title,labels:["TV","Web"],info:Gt.controls.medium.description};void 0!==t[5]&&(et.checked=t[5]),s=new Nl({props:et}),at.push((()=>Dt(s,"checked",tt)));let nt=zf.sort(Ed),rt=[];for(let e=0;e<nt.length;e+=1)rt[e]=Md($d(t,nt,e));let it=gn(t[14].colors,t[14].order),ot=[];for(let e=0;e<it.length;e+=1)ot[e]=Cd(wd(t,it,e));const st=[Ad,Nd],lt=[];function ct(t,e){return t[11]?0:1}return Z=ct(t),G=lt[Z]=st[Z](t),{c(){e=T("div"),n=T("h3"),r=E(J),i=z(),a=T("div"),Et(s.$$.fragment),c=z(),u=T("div"),f=T("div"),f.textContent="Location",d=z(),h=T("select"),p=T("option"),p.textContent="US";for(let t=0;t<rt.length;t+=1)rt[t].c();m=z(),g=T("div"),v=T("div"),v.textContent="Age group",y=z(),x=T("select"),b=T("option"),b.textContent="All",w=T("option"),w.textContent="18-24",$=T("option"),$.textContent="25-34",_=T("option"),_.textContent="35-44",M=T("option"),M.textContent="45-54",C=T("option"),C.textContent="55+",D=z(),L=T("div"),P=T("div"),P.textContent="Gender",R=z(),F=T("select"),U=T("option"),U.textContent="All",H=T("option"),H.textContent="Male",Y=T("option"),Y.textContent="Female",V=z(),B=T("div");for(let t=0;t<ot.length;t+=1)ot[t].c();W=z(),G.c(),O(n,"class","chart-title svelte-psose0"),O(f,"class","control-title svelte-psose0"),p.__value="US",p.value=p.__value,O(h,"id","age-group-menu"),O(h,"name","location"),O(h,"class","svelte-psose0"),void 0===t[8]&&ft((()=>t[17].call(h))),O(u,"id","location"),O(u,"class","control control-menu svelte-psose0"),O(v,"class","control-title svelte-psose0"),b.__value="All",b.value=b.__value,w.__value="18-24",w.value=w.__value,$.__value="25-34",$.value=$.__value,_.__value="35-44",_.value=_.__value,M.__value="45-54",M.value=M.__value,C.__value="55+",C.value=C.__value,O(x,"id","age-group-menu"),O(x,"name","age-group"),O(x,"class","svelte-psose0"),void 0===t[7]&&ft((()=>t[18].call(x))),O(g,"id","age-group"),O(g,"class","control control-menu svelte-psose0"),O(P,"class","control-title svelte-psose0"),U.__value="All",U.value=U.__value,U.selected=!0,H.__value="Male",H.value=H.__value,Y.__value="Female",Y.value=Y.__value,O(F,"id","gender-menu"),O(F,"name","location"),O(F,"class","svelte-psose0"),void 0===t[6]&&ft((()=>t[19].call(F))),O(L,"id","gender"),O(L,"class","control control-menu svelte-psose0"),O(a,"class","controls svelte-psose0"),O(B,"class","legend svelte-psose0"),O(e,"class","title-container svelte-psose0")},m(o,l){N(o,e,l),k(e,n),k(n,r),k(e,i),k(e,a),zt(s,a,null),k(a,c),k(a,u),k(u,f),k(u,d),k(u,h),k(h,p);for(let t=0;t<rt.length;t+=1)rt[t].m(h,null);q(h,t[8]),k(a,m),k(a,g),k(g,v),k(g,y),k(g,x),k(x,b),k(x,w),k(x,$),k(x,_),k(x,M),k(x,C),q(x,t[7]),k(a,D),k(a,L),k(L,P),k(L,R),k(L,F),k(F,U),k(F,H),k(F,Y),q(F,t[6]),k(e,V),k(e,B);for(let t=0;t<ot.length;t+=1)ot[t].m(B,null);k(e,W),lt[Z].m(e,null),X=!0,K||(Q=[j(h,"change",t[17]),j(x,"change",t[18]),j(F,"change",t[19])],K=!0)},p(t,n){(!X||4&n[0])&&J!==(J=t[26].value.title+"")&&I(r,J);const i={};if(!l&&32&n[0]&&(l=!0,i.checked=t[5],dt((()=>l=!1))),s.$set(i),0&n){let e;for(nt=zf.sort(Ed),e=0;e<nt.length;e+=1){const r=$d(t,nt,e);rt[e]?rt[e].p(r,n):(rt[e]=Md(r),rt[e].c(),rt[e].m(h,null))}for(;e<rt.length;e+=1)rt[e].d(1);rt.length=nt.length}if(256&n[0]&&q(h,t[8]),128&n[0]&&q(x,t[7]),64&n[0]&&q(F,t[6]),16384&n[0]){let e;for(it=gn(t[14].colors,t[14].order),e=0;e<it.length;e+=1){const r=wd(t,it,e);ot[e]?ot[e].p(r,n):(ot[e]=Cd(r),ot[e].c(),ot[e].m(B,null))}for(;e<ot.length;e+=1)ot[e].d(1);ot.length=it.length}let o=Z;Z=ct(t),Z===o?lt[Z].p(t,n):($t(),Mt(lt[o],1,1,(()=>{lt[o]=null})),_t(),G=lt[Z],G?G.p(t,n):(G=lt[Z]=st[Z](t),G.c()),kt(G,1),G.m(e,null))},i(t){X||(kt(s.$$.fragment,t),kt(G),X=!0)},o(t){Mt(s.$$.fragment,t),Mt(G),X=!1},d(t){t&&A(e),Lt(s),S(rt,t),S(ot,t),lt[Z].d(),K=!1,o(Q)}}}function kd(e){let n,r,i=e[26].value+"";return{c(){n=T("p"),r=E(i),O(n,"class","copy svelte-psose0")},m(t,e){N(t,n,e),k(n,r)},p(t,e){4&e[0]&&i!==(i=t[26].value+"")&&I(r,i)},i:t,o:t,d(t){t&&A(n)}}}function Md(e){let n,r,i,o=e[32].state+"";return{c(){n=T("option"),r=E(o),n.__value=i=e[32].abbr,n.value=n.__value},m(t,e){N(t,n,e),k(n,r)},p:t,d(t){t&&A(n)}}}function Cd(t){let e,n,r,i,o,a,s,l=xd.get(t[29][1])+"";return{c(){e=T("div"),n=T("div"),i=z(),o=T("div"),a=E(l),s=z(),O(n,"class",r=m("legend-color")+" svelte-psose0"),F(n,"--color",t[29][0]),O(e,"class","legend-item svelte-psose0")},m(t,r){N(t,e,r),k(e,n),k(e,i),k(e,o),k(o,a),k(e,s)},p(t,e){16384&e[0]&&F(n,"--color",t[29][0]),16384&e[0]&&l!==(l=xd.get(t[29][1])+"")&&I(a,l)},d(t){t&&A(e)}}}function Nd(e){let n,r;return n=new Sl({}),{c(){Et(n.$$.fragment)},m(t,e){zt(n,t,e),r=!0},p:t,i(t){r||(kt(n.$$.fragment,t),r=!0)},o(t){Mt(n.$$.fragment,t),r=!1},d(t){Lt(n,t)}}}function Ad(t){let e,n;return e=new yd({props:{dataMap:t[12].get(t[9]).get(t[6]).get(t[7]).get(t[8]),data:t[11],rows:t[13],categories:t[14].order,colors:t[14].colors,yDomain:t[14].yDomain,formatter:Dl,caption:t[3].captions,url:Dd}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};5056&n[0]&&(r.dataMap=t[12].get(t[9]).get(t[6]).get(t[7]).get(t[8])),2048&n[0]&&(r.data=t[11]),8192&n[0]&&(r.rows=t[13]),16384&n[0]&&(r.categories=t[14].order),16384&n[0]&&(r.colors=t[14].colors),16384&n[0]&&(r.yDomain=t[14].yDomain),8&n[0]&&(r.caption=t[3].captions),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Sd(t){let e,n,r,i;const o=[kd,_d],a=[];function s(t,e){return"text"===t[26].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function Td(t){let e,n,r,i,s,l,c,u,f,d,h=t[4].value+"",p=t[2],m=[];for(let e=0;e<p.length;e+=1)m[e]=Sd(bd(t,p,e));const g=t=>Mt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=T("div"),n=T("h1"),r=E(h),i=z();for(let t=0;t<m.length;t+=1)m[t].c();s=z(),l=T("div"),l.textContent="GO BACK",O(n,"class","section-title svelte-psose0"),O(l,"class","close-button bottom svelte-psose0"),O(e,"class","section svelte-psose0")},m(o,a){N(o,e,a),k(e,n),k(n,r),k(e,i);for(let t=0;t<m.length;t+=1)m[t].m(e,null);k(e,s),k(e,l),u=!0,f||(d=[j(l,"click",t[20]),v(c=re.call(null,e,{once:t[1]})),j(e,"enter",t[21])],f=!0)},p(t,n){if((!u||16&n[0])&&h!==(h=t[4].value+"")&&I(r,h),31724&n[0]){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=bd(t,p,r);m[r]?(m[r].p(i,n),kt(m[r],1)):(m[r]=Sd(i),m[r].c(),kt(m[r],1),m[r].m(e,s))}for($t(),r=p.length;r<m.length;r+=1)g(r);_t()}c&&a(c.update)&&2&n[0]&&c.update.call(null,{once:t[1]})},i(t){if(!u){for(let t=0;t<p.length;t+=1)kt(m[t]);u=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)Mt(m[t]);u=!1},d(t){t&&A(e),S(m,t),f=!1,o(d)}}}const Dd="assets/data/EchoCh-national_consumption_tv_and_web.csv",Ed=(t,e)=>t.state.localeCompare(e.state);function zd(t,e,n){let r,i,o,a,s,l,c,u,f=!1,{once:d}=e,{body:h}=e,{refs:p}=e,{chart:m}=e,{title:g}=e,{modal:v}=e,y=!1;nt((async()=>{const t=await qe(Dd,Pe);n(11,l=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))).sort(((t,e)=>+t.date-+e.date))),n(12,c=tn(l,(t=>t.medium),(t=>t.gender),(t=>t.age_group),(t=>t.state),(t=>+t.date),(t=>t.category))),n(13,u=Array.from(new Set(l.map((t=>+t.date)))))}));const x=new Map([["tv",{order:["non-news","news"],colors:["#a6cee3","#fb9a99"],yDomain:[0,350]}],["web",{order:["non_news","facebook","hard_news","youtube","twitter","reddit","fake_news"],colors:["#a6cee3","#e31a1c","#fb9a99","#cab2d6","#fdbf6f","#ff7f00","#6a3d9a"],yDomain:[0,80]}]]);return t.$$set=t=>{"once"in t&&n(1,d=t.once),"body"in t&&n(2,h=t.body),"refs"in t&&n(15,p=t.refs),"chart"in t&&n(3,m=t.chart),"title"in t&&n(4,g=t.title),"modal"in t&&n(0,v=t.modal)},t.$$.update=()=>{32&t.$$.dirty[0]&&n(9,r=y?"web":"tv"),512&t.$$.dirty[0]&&n(14,s=x.get(r)),256&t.$$.dirty[0]&&"US"!==a&&(n(6,i="All"),n(7,o="All")),192&t.$$.dirty[0]&&("All"===o&&"All"===i||n(8,a="US"))},n(6,i="All"),n(7,o="All"),n(8,a="US"),[v,d,h,m,g,y,i,o,a,r,f,l,c,u,s,p,function(t){y=t,n(5,y)},function(){a=U(this),n(8,a)},function(){o=U(this),n(7,o)},function(){i=U(this),n(6,i)},()=>n(0,v=!1),()=>n(10,f=!0)]}class Ld extends Rt{constructor(t){super(),Pt(this,t,zd,Td,s,{once:1,body:2,refs:15,chart:3,title:4,modal:0},null,[-1,-1])}}const jd={origin:[0,0,0],round:4},Pd="SVGPathCommander Error",Rd={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},Od=t=>{let e=t.pathValue[t.segmentStart],n=e.toLowerCase();const{data:r}=t;for(;r.length>=Rd[n]&&("m"===n&&r.length>2?(t.segments.push([e,...r.splice(0,2)]),n="l",e="m"===e?"l":"L"):t.segments.push([e,...r.splice(0,Rd[n])]),Rd[n]););},Id=t=>{const{index:e,pathValue:n}=t,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err=`${Pd}: invalid Arc flag "${n[e]}", expecting 0 or 1 at index ${e}`)},Fd=t=>t>=48&&t<=57,qd="Invalid path value",Ud=t=>{const{max:e,pathValue:n,index:r}=t;let i,o=r,a=!1,s=!1,l=!1,c=!1;if(o>=e)t.err=`${Pd}: ${qd} at index ${o}, "pathValue" is missing param`;else if(i=n.charCodeAt(o),(43===i||45===i)&&(o+=1,i=n.charCodeAt(o)),Fd(i)||46===i){if(46!==i){if(a=48===i,o+=1,i=n.charCodeAt(o),a&&o<e&&i&&Fd(i))return void(t.err=`${Pd}: ${qd} at index ${r}, "${n[r]}" illegal number`);for(;o<e&&Fd(n.charCodeAt(o));)o+=1,s=!0;i=n.charCodeAt(o)}if(46===i){for(c=!0,o+=1;Fd(n.charCodeAt(o));)o+=1,l=!0;i=n.charCodeAt(o)}if(101===i||69===i){if(c&&!s&&!l)return void(t.err=`${Pd}: ${qd} at index ${o}, "${n[o]}" invalid float exponent`);if(o+=1,i=n.charCodeAt(o),(43===i||45===i)&&(o+=1),!(o<e&&Fd(n.charCodeAt(o))))return void(t.err=`${Pd}: ${qd} at index ${o}, "${n[o]}" invalid integer exponent`);for(;o<e&&Fd(n.charCodeAt(o));)o+=1}t.index=o,t.param=+t.pathValue.slice(r,o)}else t.err=`${Pd}: ${qd} at index ${o}, "${n[o]}" is not a number`},Hd=t=>[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279,10,13,8232,8233,32,9,11,12,160].includes(t),Yd=t=>{const{pathValue:e,max:n}=t;for(;t.index<n&&Hd(e.charCodeAt(t.index));)t.index+=1},Vd=t=>Fd(t)||43===t||45===t||46===t,Bd=t=>97==(32|t),Wd=t=>{const{max:e,pathValue:n,index:r}=t,i=n.charCodeAt(r),o=Rd[n[r].toLowerCase()];if(t.segmentStart=r,(t=>{switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}})(i))if(t.index+=1,Yd(t),t.data=[],o){for(;;){for(let r=o;r>0;r-=1){if(!Bd(i)||3!==r&&4!==r?Ud(t):Id(t),t.err.length)return;t.data.push(t.param),Yd(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,Yd(t))}if(t.index>=t.max||!Vd(n.charCodeAt(t.index)))break}Od(t)}else Od(t);else t.err=`${Pd}: ${qd} "${n[r]}" is not a path command`};class Zd{constructor(t){this.segments=[],this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}}const Gd=t=>Array.isArray(t)&&t.every((t=>{const e=t[0].toLowerCase();return Rd[e]===t.length-1&&"achlmqstvz".includes(e)})),Xd=t=>{if(Gd(t))return[...t];const e=new Zd(t);for(Yd(e);e.index<e.max&&!e.err.length;)Wd(e);if(e.err&&e.err.length)throw TypeError(e.err);return e.segments},Kd=t=>{const e=t.length;let n,r=-1,i=t[e-1],o=0;for(;++r<e;)n=i,i=t[r],o+=n[1]*i[0]-n[0]*i[1];return o/2},Qd=(t,e)=>Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),Jd=t=>t.reduce(((e,n,r)=>r?e+Qd(t[r-1],n):0),0);var th=Object.defineProperty,eh=(t,e,n)=>(((t,e,n)=>{e in t?th(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const nh={a:1,b:0,c:0,d:1,e:0,f:0,m11:1,m12:0,m13:0,m14:0,m21:0,m22:1,m23:0,m24:0,m31:0,m32:0,m33:1,m34:0,m41:0,m42:0,m43:0,m44:1,is2D:!0,isIdentity:!0},rh=t=>(t instanceof Float64Array||t instanceof Float32Array||Array.isArray(t)&&t.every((t=>"number"==typeof t)))&&[6,16].some((e=>t.length===e)),ih=t=>t instanceof DOMMatrix||t instanceof vh||"object"==typeof t&&Object.keys(nh).every((e=>t&&e in t)),oh=t=>{const e=new vh,n=Array.from(t);if(!rh(n))throw TypeError(`CSSMatrix: "${n.join(",")}" must be an array with 6/16 numbers.`);if(16===n.length){const[t,r,i,o,a,s,l,c,u,f,d,h,p,m,g,v]=n;e.m11=t,e.a=t,e.m21=a,e.c=a,e.m31=u,e.m41=p,e.e=p,e.m12=r,e.b=r,e.m22=s,e.d=s,e.m32=f,e.m42=m,e.f=m,e.m13=i,e.m23=l,e.m33=d,e.m43=g,e.m14=o,e.m24=c,e.m34=h,e.m44=v}else if(6===n.length){const[t,r,i,o,a,s]=n;e.m11=t,e.a=t,e.m12=r,e.b=r,e.m21=i,e.c=i,e.m22=o,e.d=o,e.m41=a,e.e=a,e.m42=s,e.f=s}return e},ah=t=>{if(ih(t))return oh([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a DOMMatrix / CSSMatrix / JSON compatible object.`)},sh=t=>{if("string"!=typeof t)throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a string.`);const e=String(t).replace(/\s/g,"");let n=new vh;const r=`CSSMatrix: invalid transform string "${t}"`;return e.split(")").filter((t=>t)).forEach((t=>{const[e,i]=t.split("(");if(!i)throw TypeError(r);const o=i.split(",").map((t=>t.includes("rad")?parseFloat(t)*(180/Math.PI):parseFloat(t))),[a,s,l,c]=o,u=[a,s,l],f=[a,s,l,c];if("perspective"===e&&a&&[s,l].every((t=>void 0===t)))n.m34=-1/a;else if(e.includes("matrix")&&[6,16].includes(o.length)&&o.every((t=>!Number.isNaN(+t)))){const t=o.map((t=>Math.abs(t)<1e-6?0:t));n=n.multiply(oh(t))}else if("translate3d"===e&&u.every((t=>!Number.isNaN(+t))))n=n.translate(a,s,l);else if("translate"===e&&a&&void 0===l)n=n.translate(a,s||0,0);else if("rotate3d"===e&&f.every((t=>!Number.isNaN(+t)))&&c)n=n.rotateAxisAngle(a,s,l,c);else if("rotate"===e&&a&&[s,l].every((t=>void 0===t)))n=n.rotate(0,0,a);else if("scale3d"===e&&u.every((t=>!Number.isNaN(+t)))&&u.some((t=>1!==t)))n=n.scale(a,s,l);else if("scale"!==e||Number.isNaN(a)||1===a||void 0!==l)if("skew"===e&&(a||!Number.isNaN(a)&&s)&&void 0===l)n=n.skew(a,s||0);else{if(!(["translate","rotate","scale","skew"].some((t=>e.includes(t)))&&/[XYZ]/.test(e)&&a&&[s,l].every((t=>void 0===t))))throw TypeError(r);if("skewX"===e||"skewY"===e)n=n[e](a);else{const t=e.replace(/[XYZ]/,""),r=e.replace(t,""),i=["X","Y","Z"].indexOf(r),o="scale"===t?1:0,s=[0===i?a:o,1===i?a:o,2===i?a:o];n=n[t](...s)}}else{const t=Number.isNaN(+s)?a:s;n=n.scale(a,t,1)}})),n},lh=(t,e)=>e?[t.a,t.b,t.c,t.d,t.e,t.f]:[t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44],ch=(t,e,n)=>{const r=new vh;return r.m41=t,r.e=t,r.m42=e,r.f=e,r.m43=n,r},uh=(t,e,n)=>{const r=new vh,i=Math.PI/180,o=t*i,a=e*i,s=n*i,l=Math.cos(o),c=-Math.sin(o),u=Math.cos(a),f=-Math.sin(a),d=Math.cos(s),h=-Math.sin(s),p=u*d,m=-u*h;r.m11=p,r.a=p,r.m12=m,r.b=m,r.m13=f;const g=c*f*d+l*h;r.m21=g,r.c=g;const v=l*d-c*f*h;return r.m22=v,r.d=v,r.m23=-c*u,r.m31=c*h-l*f*d,r.m32=c*d+l*f*h,r.m33=l*u,r},fh=(t,e,n,r)=>{const i=new vh,o=Math.sqrt(t*t+e*e+n*n);if(0===o)return i;const a=t/o,s=e/o,l=n/o,c=r*(Math.PI/360),u=Math.sin(c),f=Math.cos(c),d=u*u,h=a*a,p=s*s,m=l*l,g=1-2*(p+m)*d;i.m11=g,i.a=g;const v=2*(a*s*d+l*u*f);i.m12=v,i.b=v,i.m13=2*(a*l*d-s*u*f);const y=2*(s*a*d-l*u*f);i.m21=y,i.c=y;const x=1-2*(m+h)*d;return i.m22=x,i.d=x,i.m23=2*(s*l*d+a*u*f),i.m31=2*(l*a*d+s*u*f),i.m32=2*(l*s*d-a*u*f),i.m33=1-2*(h+p)*d,i},dh=(t,e,n)=>{const r=new vh;return r.m11=t,r.a=t,r.m22=e,r.d=e,r.m33=n,r},hh=(t,e)=>{const n=new vh;if(t){const e=t*Math.PI/180,r=Math.tan(e);n.m21=r,n.c=r}if(e){const t=e*Math.PI/180,r=Math.tan(t);n.m12=r,n.b=r}return n},ph=t=>hh(t,0),mh=t=>hh(0,t),gh=(t,e)=>{const n=e.m11*t.m11+e.m12*t.m21+e.m13*t.m31+e.m14*t.m41,r=e.m11*t.m12+e.m12*t.m22+e.m13*t.m32+e.m14*t.m42,i=e.m11*t.m13+e.m12*t.m23+e.m13*t.m33+e.m14*t.m43,o=e.m11*t.m14+e.m12*t.m24+e.m13*t.m34+e.m14*t.m44,a=e.m21*t.m11+e.m22*t.m21+e.m23*t.m31+e.m24*t.m41,s=e.m21*t.m12+e.m22*t.m22+e.m23*t.m32+e.m24*t.m42,l=e.m21*t.m13+e.m22*t.m23+e.m23*t.m33+e.m24*t.m43,c=e.m21*t.m14+e.m22*t.m24+e.m23*t.m34+e.m24*t.m44,u=e.m31*t.m11+e.m32*t.m21+e.m33*t.m31+e.m34*t.m41,f=e.m31*t.m12+e.m32*t.m22+e.m33*t.m32+e.m34*t.m42,d=e.m31*t.m13+e.m32*t.m23+e.m33*t.m33+e.m34*t.m43,h=e.m31*t.m14+e.m32*t.m24+e.m33*t.m34+e.m34*t.m44,p=e.m41*t.m11+e.m42*t.m21+e.m43*t.m31+e.m44*t.m41,m=e.m41*t.m12+e.m42*t.m22+e.m43*t.m32+e.m44*t.m42,g=e.m41*t.m13+e.m42*t.m23+e.m43*t.m33+e.m44*t.m43,v=e.m41*t.m14+e.m42*t.m24+e.m43*t.m34+e.m44*t.m44;return oh([n,r,i,o,a,s,l,c,u,f,d,h,p,m,g,v])};class vh{constructor(t){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.m11=1,this.m12=0,this.m13=0,this.m14=0,this.m21=0,this.m22=1,this.m23=0,this.m24=0,this.m31=0,this.m32=0,this.m33=1,this.m34=0,this.m41=0,this.m42=0,this.m43=0,this.m44=1,t?this.setMatrixValue(t):this}get isIdentity(){return 1===this.m11&&0===this.m12&&0===this.m13&&0===this.m14&&0===this.m21&&1===this.m22&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m41&&0===this.m42&&0===this.m43&&1===this.m44}get is2D(){return 0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m43&&1===this.m44}setMatrixValue(t){return"string"==typeof t&&t.length&&"none"!==t?sh(t):Array.isArray(t)||t instanceof Float64Array||t instanceof Float32Array?oh(t):"object"==typeof t?ah(t):this}toFloat32Array(t){return Float32Array.from(lh(this,t))}toFloat64Array(t){return Float64Array.from(lh(this,t))}toString(){const{is2D:t}=this;return`${t?"matrix":"matrix3d"}(${this.toFloat64Array(t).join(", ")})`}toJSON(){const{is2D:t,isIdentity:e}=this;return{...this,is2D:t,isIdentity:e}}multiply(t){return gh(this,t)}translate(t,e,n){let r=e,i=n;return typeof r>"u"&&(r=0),typeof i>"u"&&(i=0),gh(this,ch(t,r,i))}scale(t,e,n){let r=e,i=n;return typeof r>"u"&&(r=t),typeof i>"u"&&(i=1),gh(this,dh(t,r,i))}rotate(t,e,n){let r=t,i=e||0,o=n||0;return"number"==typeof t&&typeof e>"u"&&typeof n>"u"&&(o=r,r=0,i=0),gh(this,uh(r,i,o))}rotateAxisAngle(t,e,n,r){if([t,e,n,r].some((t=>Number.isNaN(+t))))throw new TypeError("CSSMatrix: expecting 4 values");return gh(this,fh(t,e,n,r))}skewX(t){return gh(this,ph(t))}skewY(t){return gh(this,mh(t))}skew(t,e){return gh(this,hh(t,e))}transformPoint(t){const e=this.m11*t.x+this.m21*t.y+this.m31*t.z+this.m41*t.w,n=this.m12*t.x+this.m22*t.y+this.m32*t.z+this.m42*t.w,r=this.m13*t.x+this.m23*t.y+this.m33*t.z+this.m43*t.w,i=this.m14*t.x+this.m24*t.y+this.m34*t.z+this.m44*t.w;return t instanceof DOMPoint?new DOMPoint(e,n,r,i):{x:e,y:n,z:r,w:i}}}eh(vh,"Translate",ch),eh(vh,"Rotate",uh),eh(vh,"RotateAxisAngle",fh),eh(vh,"Scale",dh),eh(vh,"SkewX",ph),eh(vh,"SkewY",mh),eh(vh,"Skew",hh),eh(vh,"Multiply",gh),eh(vh,"fromArray",oh),eh(vh,"fromMatrix",ah),eh(vh,"fromString",sh),eh(vh,"toArray",lh),eh(vh,"isCompatibleArray",rh),eh(vh,"isCompatibleObject",ih);const yh=t=>Gd(t)&&t.every((([t])=>t===t.toUpperCase())),xh=t=>{if(yh(t))return[...t];const e=Xd(t);let n=0,r=0,i=0,o=0;return e.map((t=>{const e=t.slice(1).map(Number),[a]=t,s=a.toUpperCase();if("M"===a)return[n,r]=e,i=n,o=r,["M",n,r];let l=[];if(a!==s)if("A"===s)l=[s,e[0],e[1],e[2],e[3],e[4],e[5]+n,e[6]+r];else if("V"===s)l=[s,e[0]+r];else if("H"===s)l=[s,e[0]+n];else{const t=e.map(((t,e)=>t+(e%2?r:n)));l=[s,...t]}else l=[s,...e];return"Z"===s?(n=i,r=o):"H"===s?[,n]=l:"V"===s?[,r]=l:([n,r]=l.slice(-2),"M"===s&&(i=n,o=r)),l}))},bh=(t,e)=>{const[n]=t,{x1:r,y1:i,x2:o,y2:a}=e,s=t.slice(1).map(Number);let l=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)l=["L",t[1],i];else if("V"===n)l=["L",r,t[1]];else if("S"===n){const t=2*r-o,n=2*i-a;e.x1=t,e.y1=n,l=["C",t,n,...s]}else if("T"===n){const t=2*r-(e.qx?e.qx:0),n=2*i-(e.qy?e.qy:0);e.qx=t,e.qy=n,l=["Q",t,n,...s]}else if("Q"===n){const[t,n]=s;e.qx=t,e.qy=n}return l},wh=t=>yh(t)&&t.every((([t])=>"ACLMQZ".includes(t))),$h={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},_h=t=>{if(wh(t))return[...t];const e=xh(t),n={...$h},r=e.length;for(let t=0;t<r;t+=1){e[t],e[t]=bh(e[t],n);const r=e[t],i=r.length;n.x1=+r[i-2],n.y1=+r[i-1],n.x2=+r[i-4]||n.x1,n.y2=+r[i-3]||n.y1}return e},kh=(t,e,n)=>{const[r,i]=t,[o,a]=e;return[r+(o-r)*n,i+(a-i)*n]},Mh=(t,e,n,r,i)=>{const o=Qd([t,e],[n,r]);let a={x:0,y:0};if("number"==typeof i)if(i<=0)a={x:t,y:e};else if(i>=o)a={x:n,y:r};else{const[s,l]=kh([t,e],[n,r],i/o);a={x:s,y:l}}return{length:o,point:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}},Ch=(t,e)=>{const{x:n,y:r}=t,{x:i,y:o}=e,a=n*i+r*o,s=Math.sqrt((n**2+r**2)*(i**2+o**2));return(n*o-r*i<0?-1:1)*Math.acos(a/s)},Nh=(t,e,n,r,i,o,a,s,l,c)=>{const{abs:u,sin:f,cos:d,sqrt:h,PI:p}=Math;let m=u(n),g=u(r);const v=(i%360+360)%360*(p/180);if(t===s&&e===l)return{x:t,y:e};if(0===m||0===g)return Mh(t,e,s,l,c).point;const y=(t-s)/2,x=(e-l)/2,b=d(v)*y+f(v)*x,w=-f(v)*y+d(v)*x,$=b**2/m**2+w**2/g**2;$>1&&(m*=h($),g*=h($));let _=(m**2*g**2-m**2*w**2-g**2*b**2)/(m**2*w**2+g**2*b**2);_=_<0?0:_;const k=(o!==a?1:-1)*h(_),M=k*(m*w/g),C=k*(-g*b/m),N=d(v)*M-f(v)*C+(t+s)/2,A=f(v)*M+d(v)*C+(e+l)/2,S={x:(b-M)/m,y:(w-C)/g},T=Ch({x:1,y:0},S);let D=Ch(S,{x:(-b-M)/m,y:(-w-C)/g});!a&&D>0?D-=2*p:a&&D<0&&(D+=2*p),D%=2*p;const E=T+D*c,z=m*d(E),L=g*f(E);return{x:d(v)*z-f(v)*L+N,y:f(v)*z+d(v)*L+A}},Ah=(t,e,n,r,i,o,a,s,l,c)=>{const u="number"==typeof c;let f=t,d=e,h=0,p=[f,d,h],m=[f,d],g=0,v={x:0,y:0},y=[{x:f,y:d}];u&&c<=0&&(v={x:f,y:d});for(let x=0;x<=300;x+=1){if(g=x/300,({x:f,y:d}=Nh(t,e,n,r,i,o,a,s,l,g)),y=[...y,{x:f,y:d}],h+=Qd(m,[f,d]),m=[f,d],u&&h>c&&c>p[2]){const t=(h-c)/(h-p[2]);v={x:m[0]*(1-t)+p[0]*t,y:m[1]*(1-t)+p[1]*t}}p=[f,d,h]}return u&&c>=h&&(v={x:s,y:l}),{length:h,point:v,min:{x:Math.min(...y.map((t=>t.x))),y:Math.min(...y.map((t=>t.y)))},max:{x:Math.max(...y.map((t=>t.x))),y:Math.max(...y.map((t=>t.y)))}}},Sh=(t,e,n,r,i,o,a,s,l)=>{const c=1-l;return{x:c**3*t+3*c**2*l*n+3*c*l**2*i+l**3*a,y:c**3*e+3*c**2*l*r+3*c*l**2*o+l**3*s}},Th=(t,e,n,r,i,o,a,s,l)=>{const c="number"==typeof l;let u=t,f=e,d=0,h=[u,f,d],p=[u,f],m=0,g={x:0,y:0},v=[{x:u,y:f}];c&&l<=0&&(g={x:u,y:f});for(let y=0;y<=300;y+=1){if(m=y/300,({x:u,y:f}=Sh(t,e,n,r,i,o,a,s,m)),v=[...v,{x:u,y:f}],d+=Qd(p,[u,f]),p=[u,f],c&&d>l&&l>h[2]){const t=(d-l)/(d-h[2]);g={x:p[0]*(1-t)+h[0]*t,y:p[1]*(1-t)+h[1]*t}}h=[u,f,d]}return c&&l>=d&&(g={x:a,y:s}),{length:d,point:g,min:{x:Math.min(...v.map((t=>t.x))),y:Math.min(...v.map((t=>t.y)))},max:{x:Math.max(...v.map((t=>t.x))),y:Math.max(...v.map((t=>t.y)))}}},Dh=(t,e,n,r,i,o,a)=>{const s=1-a;return{x:s**2*t+2*s*a*n+a**2*i,y:s**2*e+2*s*a*r+a**2*o}},Eh=(t,e,n,r,i,o,a)=>{const s="number"==typeof a;let l=t,c=e,u=0,f=[l,c,u],d=[l,c],h=0,p={x:0,y:0},m=[{x:l,y:c}];s&&a<=0&&(p={x:l,y:c});for(let g=0;g<=300;g+=1){if(h=g/300,({x:l,y:c}=Dh(t,e,n,r,i,o,h)),m=[...m,{x:l,y:c}],u+=Qd(d,[l,c]),d=[l,c],s&&u>a&&a>f[2]){const t=(u-a)/(u-f[2]);p={x:d[0]*(1-t)+f[0]*t,y:d[1]*(1-t)+f[1]*t}}f=[l,c,u]}return s&&a>=u&&(p={x:i,y:o}),{length:u,point:p,min:{x:Math.min(...m.map((t=>t.x))),y:Math.min(...m.map((t=>t.y)))},max:{x:Math.max(...m.map((t=>t.x))),y:Math.max(...m.map((t=>t.y)))}}},zh=(t,e)=>{const n=_h(t),r="number"==typeof e;let i,o,a,s=[],l=0,c=0,u=0,f=0,d=[],h=[],p=0,m={x:0,y:0},g=m,v=m,y=m,x=0;for(let t=0,b=n.length;t<b;t+=1)a=n[t],[o]=a,i="M"===o,s=i?s:[l,c,...a.slice(1)],i?([,u,f]=a,m={x:u,y:f},g=m,p=0,r&&e<.001&&(y=m)):"L"===o?({length:p,min:m,max:g,point:v}=Mh(...s,(e||0)-x)):"A"===o?({length:p,min:m,max:g,point:v}=Ah(...s,(e||0)-x)):"C"===o?({length:p,min:m,max:g,point:v}=Th(...s,(e||0)-x)):"Q"===o?({length:p,min:m,max:g,point:v}=Eh(...s,(e||0)-x)):"Z"===o&&(s=[l,c,u,f],({length:p,min:m,max:g,point:v}=Mh(...s,(e||0)-x))),r&&x<e&&x+p>=e&&(y=v),h=[...h,g],d=[...d,m],x+=p,[l,c]="Z"!==o?a.slice(-2):[u,f];return r&&e>=x&&(y={x:l,y:c}),{length:x,point:y,min:{x:Math.min(...d.map((t=>t.x))),y:Math.min(...d.map((t=>t.y)))},max:{x:Math.max(...h.map((t=>t.x))),y:Math.max(...h.map((t=>t.y)))}}},Lh=t=>{if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};const{min:{x:e,y:n},max:{x:r,y:i}}=zh(t),o=r-e,a=i-n;return{width:o,height:a,x:e,y:n,x2:r,y2:i,cx:e+o/2,cy:n+a/2,cz:Math.max(o,a)+Math.min(o,a)/2}},jh=(t,e,n)=>{if(t[n].length>7){t[n].shift();const r=t[n];let i=n;for(;r.length;)e[n]="A",t.splice(i+=1,0,["C",...r.splice(0,6)]);t.splice(n,1)}},Ph=t=>wh(t)&&t.every((([t])=>"MC".includes(t))),Rh=(t,e,n)=>({x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}),Oh=(t,e,n,r,i,o,a,s,l,c)=>{let u=t,f=e,d=n,h=r,p=s,m=l;const g=120*Math.PI/180,v=Math.PI/180*(+i||0);let y,x,b,w,$,_=[];if(c)[x,b,w,$]=c;else{y=Rh(u,f,-v),u=y.x,f=y.y,y=Rh(p,m,-v),p=y.x,m=y.y;const t=(u-p)/2,e=(f-m)/2;let n=t*t/(d*d)+e*e/(h*h);n>1&&(n=Math.sqrt(n),d*=n,h*=n);const r=d*d,i=h*h,s=(o===a?-1:1)*Math.sqrt(Math.abs((r*i-r*e*e-i*t*t)/(r*e*e+i*t*t)));w=s*d*e/h+(u+p)/2,$=s*-h*t/d+(f+m)/2,x=Math.asin(((f-$)/h*10**9>>0)/10**9),b=Math.asin(((m-$)/h*10**9>>0)/10**9),x=u<w?Math.PI-x:x,b=p<w?Math.PI-b:b,x<0&&(x=2*Math.PI+x),b<0&&(b=2*Math.PI+b),a&&x>b&&(x-=2*Math.PI),!a&&b>x&&(b-=2*Math.PI)}let k=b-x;if(Math.abs(k)>g){const t=b,e=p,n=m;b=x+g*(a&&b>x?1:-1),p=w+d*Math.cos(b),m=$+h*Math.sin(b),_=Oh(p,m,d,h,i,0,a,e,n,[b,t,w,$])}k=b-x;const M=Math.cos(x),C=Math.sin(x),N=Math.cos(b),A=Math.sin(b),S=Math.tan(k/4),T=4/3*d*S,D=4/3*h*S,E=[u,f],z=[u+T*C,f-D*M],L=[p+T*A,m-D*N],j=[p,m];if(z[0]=2*E[0]-z[0],z[1]=2*E[1]-z[1],c)return[...z,...L,...j,..._];_=[...z,...L,...j,..._];const P=[];for(let t=0,e=_.length;t<e;t+=1)P[t]=t%2?Rh(_[t-1],_[t],v).y:Rh(_[t],_[t+1],v).x;return P},Ih=(t,e,n,r,i,o)=>{const a=.3333333333333333,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},Fh=(t,e,n,r)=>[...kh([t,e],[n,r],.5),n,r,n,r],qh=(t,e)=>{const[n]=t,r=t.slice(1).map(Number),[i,o]=r;let a;const{x1:s,y1:l,x:c,y:u}=e;return"TQ".includes(n)||(e.qx=null,e.qy=null),"M"===n?(e.x=i,e.y=o,t):"A"===n?(a=[s,l,...r],["C",...Oh(...a)]):"Q"===n?(e.qx=i,e.qy=o,a=[s,l,...r],["C",...Ih(...a)]):"L"===n?["C",...Fh(s,l,i,o)]:"Z"===n?["C",...Fh(s,l,c,u)]:t},Uh=t=>{if(Ph(t))return[...t];const e=_h(t),n={...$h},r=[];let i="",o=e.length;for(let t=0;t<o;t+=1){[i]=e[t],r[t]=i,e[t]=qh(e[t],n),jh(e,r,t),o=e.length;const a=e[t],s=a.length;n.x1=+a[s-2],n.y1=+a[s-1],n.x2=+a[s-4]||n.x1,n.y2=+a[s-3]||n.y1}return e},Hh=t=>{let e=0,n=0,r=0;return Uh(t).map((t=>"M"===t[0]?([,e,n]=t,0):(r=((t,e,n,r,i,o,a,s)=>3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20)(e,n,...t.slice(1)),[e,n]=t.slice(-2),r))).reduce(((t,e)=>t+e),0)},Yh=t=>zh(t).length,Vh=t=>Hh(Uh(t))>=0,Bh=(t,e)=>zh(t,e).point,Wh=(t,e)=>{const n=Xd(t);let r=[...n],i=Yh(r),o=r.length-1,a=0,s=0,l=n[0];const[c,u]=l.slice(-2),f={x:c,y:u};if(o<=0||!e||!Number.isFinite(e))return{segment:l,index:0,length:s,point:f,lengthAtSegment:a};if(e>=i)return r=n.slice(0,-1),a=Yh(r),s=i-a,{segment:n[o],index:o,length:s,lengthAtSegment:a};const d=[];for(;o>0;)l=r[o],r=r.slice(0,-1),a=Yh(r),s=i-a,i=a,d.push({segment:l,index:o,length:s,lengthAtSegment:a}),o-=1;return d.find((({lengthAtSegment:t})=>t<=e))},Zh=(t,e)=>{const n=Xd(t),r=_h(n),i=Yh(n),o=t=>{const n=t.x-e.x,r=t.y-e.y;return n*n+r*r};let a,s=8,l={x:0,y:0},c=0,u=0,f=1/0;for(let t=0;t<=i;t+=s)a=Bh(r,t),c=o(a),c<f&&(l=a,u=t,f=c);s/=2;let d,h,p=0,m=0,g=0,v=0;for(;s>.5;)p=u-s,d=Bh(r,p),g=o(d),m=u+s,h=Bh(r,m),v=o(h),p>=0&&g<f?(l=d,u=p,f=g):m<=i&&v<f?(l=h,u=m,f=v):s/=2;const y=Wh(n,u);return{closest:l,distance:Math.sqrt(f),segment:y}},Gh=(t,e)=>Zh(t,e).closest,Xh=(t,e)=>Zh(t,e).segment,Kh=(t,e)=>Wh(t,e).segment,Qh=(t,e)=>{const{distance:n}=Zh(t,e);return Math.abs(n)<.001},Jh=t=>{if("string"!=typeof t)return!1;const e=new Zd(t);for(Yd(e);e.index<e.max&&!e.err.length;)Wd(e);return!e.err.length&&"mM".includes(e.segments[0][0])},tp=t=>Gd(t)&&t.slice(1).every((([t])=>t===t.toLowerCase())),ep=(t,e)=>{let{round:n}=jd;if("off"===e||"off"===n)return[...t];n="number"==typeof e&&e>=0?e:n;const r="number"==typeof n&&n>=1?10**n:1;return t.map((t=>{const e=t.slice(1).map(Number).map((t=>n?Math.round(t*r)/r:Math.round(t)));return[t[0],...e]}))},np=(t,e)=>ep(t,e).map((t=>t[0]+t.slice(1).join(" "))).join(""),rp={line:["x1","y1","x2","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],rect:["width","height","x","y","rx","ry"],polygon:["points"],polyline:["points"],glyph:["d"]},ip=(t,e,n)=>{const r=n||document,i=r.defaultView||window,o=Object.keys(rp),a=t instanceof i.SVGElement,s=a?t.tagName:null;if(s&&o.every((t=>s!==t)))throw TypeError(`${Pd}: "${s}" is not SVGElement`);const l=r.createElementNS("http://www.w3.org/2000/svg","path"),c=a?s:t.type,u=rp[c],f={type:c};a?(u.forEach((e=>{u.includes(e)&&(f[e]=t.getAttribute(e))})),Object.values(t.attributes).forEach((({name:t,value:e})=>{u.includes(t)||l.setAttribute(t,e)}))):(Object.assign(f,t),Object.keys(f).forEach((t=>{!u.includes(t)&&"type"!==t&&l.setAttribute(t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`)),f[t])})));let d="";const h=jd.round;return"circle"===c?d=np((t=>{const{cx:e,cy:n,r:r}=t;return[["M",e-r,n],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,-2*r,0]]})(f),h):"ellipse"===c?d=np((t=>{const{cx:e,cy:n,rx:r,ry:i}=t;return[["M",e-r,n],["a",r,i,0,1,0,2*r,0],["a",r,i,0,1,0,-2*r,0]]})(f),h):["polyline","polygon"].includes(c)?d=np((t=>{const e=[],n=(t.points||"").trim().split(/[\s|,]/).map(Number);let r=0;for(;r<n.length;)e.push([r?"L":"M",n[r],n[r+1]]),r+=2;return"polygon"===t.type?[...e,["z"]]:e})(f),h):"rect"===c?d=np((t=>{const e=+t.x||0,n=+t.y||0,r=+t.width,i=+t.height;let o=+t.rx,a=+t.ry;return o||a?(o=o||a,a=a||o,2*o>r&&(o-=(2*o-r)/2),2*a>i&&(a-=(2*a-i)/2),[["M",e+o,n],["h",r-2*o],["s",o,0,o,a],["v",i-2*a],["s",0,a,-o,a],["h",2*o-r],["s",-o,0,-o,-a],["v",2*a-i],["s",0,-a,o,-a]]):[["M",e,n],["h",r],["v",i],["H",e],["Z"]]})(f),h):"line"===c?d=np((t=>{const{x1:e,y1:n,x2:r,y2:i}=t;return[["M",e,n],["L",r,i]]})(f),h):"glyph"===c&&(d=a?t.getAttribute("d"):t.d),!!Jh(d)&&(l.setAttribute("d",d),e&&a&&(t.before(l,t),t.remove()),l)},op=t=>{const e=[];let n,r=-1;return t.forEach((t=>{"M"===t[0]?(n=[t],r+=1):n=[...n,t],e[r]=n})),e},ap=t=>{if(tp(t))return[...t];const e=Xd(t);let n=0,r=0,i=0,o=0;return e.map((t=>{const e=t.slice(1).map(Number),[a]=t,s=a.toLowerCase();if("M"===a)return[n,r]=e,i=n,o=r,["M",n,r];let l=[];if(a!==s)if("a"===s)l=[s,e[0],e[1],e[2],e[3],e[4],e[5]-n,e[6]-r];else if("v"===s)l=[s,e[0]-r];else if("h"===s)l=[s,e[0]-n];else{l=[s,...e.map(((t,e)=>t-(e%2?r:n)))]}else"m"===a&&(i=e[0]+n,o=e[1]+r),l=[s,...e];const c=l.length;return"z"===s?(n=i,r=o):"h"===s?n+=l[1]:"v"===s?r+=l[1]:(n+=l[c-2],r+=l[c-1]),l}))},sp=(t,e,n,r)=>{const[i]=t,o=t=>Math.round(1e4*t)/1e4,a=t.slice(1).map((t=>+t)),s=e.slice(1).map((t=>+t)),{x1:l,y1:c,x2:u,y2:f,x:d,y:h}=n;let p=t;const[m,g]=s.slice(-2);if("TQ".includes(i)||(n.qx=null,n.qy=null),["V","H","S","T","Z"].includes(i))p=[i,...a];else if("L"===i)o(d)===o(m)?p=["V",g]:o(h)===o(g)&&(p=["H",m]);else if("C"===i){const[t,e]=s;"CS".includes(r)&&(o(t)===o(2*l-u)&&o(e)===o(2*c-f)||o(l)===o(2*u-d)&&o(c)===o(2*f-h))&&(p=["S",...s.slice(-4)]),n.x1=t,n.y1=e}else if("Q"===i){const[t,e]=s;n.qx=t,n.qy=e,"QT".includes(r)&&(o(t)===o(2*l-u)&&o(e)===o(2*c-f)||o(l)===o(2*u-d)&&o(c)===o(2*f-h))&&(p=["T",...s.slice(-2)])}return p},lp=(t,e)=>{const n=xh(t),r=_h(n),i={...$h},o=[],a=n.length;let s="",l="",c=0,u=0,f=0,d=0;for(let t=0;t<a;t+=1){[s]=n[t],o[t]=s,t&&(l=o[t-1]),n[t]=sp(n[t],r[t],i,l);const e=n[t],a=e.length;switch(i.x1=+e[a-2],i.y1=+e[a-1],i.x2=+e[a-4]||i.x1,i.y2=+e[a-3]||i.y1,s){case"Z":c=f,u=d;break;case"H":[,c]=e;break;case"V":[,u]=e;break;default:[c,u]=e.slice(-2).map(Number),"M"===s&&(f=c,d=u)}i.x=c,i.y=u}const h=ep(n,e),p=ep(ap(n),e);return h.map(((t,e)=>e?t.join("").length<p[e].join("").length?t:p[e]:t))},cp=t=>{const e=t.slice(1).map(((e,n,r)=>n?[...r[n-1].slice(-2),...e.slice(1)]:[...t[0].slice(1),...e.slice(1)])).map((t=>t.map(((e,n)=>t[t.length-n-2*(1-n%2)])))).reverse();return[["M",...e[0].slice(0,2)],...e.map((t=>["C",...t.slice(2)]))]},up=t=>{const e=xh(t),n="Z"===e.slice(-1)[0][0],r=_h(e).map(((t,n)=>{const[r,i]=t.slice(-2).map(Number);return{seg:e[n],n:t,c:e[n][0],x:r,y:i}})).map(((t,e,r)=>{const i=t.seg,o=t.n,a=e&&r[e-1],s=r[e+1],l=t.c,c=r.length,u=e?r[e-1].x:r[c-1].x,f=e?r[e-1].y:r[c-1].y;let d=[];switch(l){case"M":d=n?["Z"]:[l,u,f];break;case"A":d=[l,...i.slice(1,-3),1===i[5]?0:1,u,f];break;case"C":d=s&&"S"===s.c?["S",i[1],i[2],u,f]:[l,i[3],i[4],i[1],i[2],u,f];break;case"S":d=!a||!"CS".includes(a.c)||s&&"S"===s.c?[l,o[1],o[2],u,f]:["C",o[3],o[4],o[1],o[2],u,f];break;case"Q":d=s&&"T"===s.c?["T",u,f]:[l,...i.slice(1,-2),u,f];break;case"T":d=!a||!"QT".includes(a.c)||s&&"T"===s.c?[l,u,f]:["Q",o[1],o[2],u,f];break;case"Z":d=["M",u,f];break;case"H":d=[l,u];break;case"V":d=[l,f];break;default:d=[l,...i.slice(1,-2),u,f]}return d}));return n?r.reverse():[r[0],...r.slice(1).reverse()]},fp=(t,e,n)=>{const[r,i,o]=n,[a,s,l]=((t,e)=>{let n=vh.Translate(...e.slice(0,-1));return[,,,n.m44]=e,n=t.multiply(n),[n.m41,n.m42,n.m43,n.m44]})(t,[...e,0,1]),c=s-i,u=l-o;return[(a-r)*(Math.abs(o)/Math.abs(u)||1)+r,c*(Math.abs(o)/Math.abs(u)||1)+i]},dp=(t,e)=>{let n,r,i,o,a,s,l=0,c=0;const u=xh(t),f=e&&Object.keys(e);if(!e||f&&!f.length)return[...u];const d=_h(u);if(!e.origin){const{origin:t}=jd;Object.assign(e,{origin:t})}const h=(t=>{let e=new vh;const{origin:n}=t,[r,i]=n,{translate:o}=t,{rotate:a}=t,{skew:s}=t,{scale:l}=t;return Array.isArray(o)&&o.length>=2&&o.every((t=>!Number.isNaN(+t)))&&o.some((t=>0!==t))?e=e.translate(...o):"number"==typeof o&&!Number.isNaN(o)&&(e=e.translate(o)),(a||s||l)&&(e=e.translate(r,i),Array.isArray(a)&&a.length>=2&&a.every((t=>!Number.isNaN(+t)))&&a.some((t=>0!==t))?e=e.rotate(...a):"number"==typeof a&&!Number.isNaN(a)&&(e=e.rotate(a)),Array.isArray(s)&&2===s.length&&s.every((t=>!Number.isNaN(+t)))&&s.some((t=>0!==t))?(e=s[0]?e.skewX(s[0]):e,e=s[1]?e.skewY(s[1]):e):"number"==typeof s&&!Number.isNaN(s)&&(e=e.skewX(s)),Array.isArray(l)&&l.length>=2&&l.every((t=>!Number.isNaN(+t)))&&l.some((t=>1!==t))?e=e.scale(...l):"number"==typeof l&&!Number.isNaN(l)&&(e=e.scale(l)),e=e.translate(-r,-i)),e})(e),{origin:p}=e,m={...$h};let g=[],v=0,y="",x=[];const b=[];if(!h.isIdentity){for(n=0,i=u.length;n<i;n+=1){g=u[n],u[n]&&([y]=g),b[n]=y,"A"===y&&(g=qh(d[n],m),u[n]=qh(d[n],m),jh(u,b,n),d[n]=qh(d[n],m),jh(d,b,n),i=Math.max(u.length,d.length)),g=d[n],v=g.length,m.x1=+g[v-2],m.y1=+g[v-1],m.x2=+g[v-4]||m.x1,m.y2=+g[v-3]||m.y1;const t={s:u[n],c:u[n][0],x:m.x1,y:m.y1};x=[...x,t]}return x.map((t=>{if(y=t.c,g=t.s,"L"===y||"H"===y||"V"===y)return[a,s]=fp(h,[t.x,t.y],p),l!==a&&c!==s?g=["L",a,s]:c===s?g=["H",a]:l===a&&(g=["V",s]),l=a,c=s,g;for(r=1,o=g.length;r<o;r+=2)[l,c]=fp(h,[+g[r],+g[r+1]],p),g[r]=l,g[r+1]=c;return g}))}return[...u]},hp=t=>{const e=t.slice(0,2),n=t.slice(2,4),r=t.slice(4,6),i=t.slice(6,8),o=kh(e,n,.5),a=kh(n,r,.5),s=kh(r,i,.5),l=kh(o,a,.5),c=kh(a,s,.5),u=kh(l,c,.5);return[["C",...o,...l,...u],["C",...c,...s,...i]]};class pp{static CSSMatrix=vh;static getPathBBox=Lh;static getPathArea=Hh;static getTotalLength=Yh;static getDrawDirection=Vh;static getPointAtLength=Bh;static pathLengthFactory=zh;static getPropertiesAtLength=Wh;static getPropertiesAtPoint=Zh;static polygonLength=Jd;static polygonArea=Kd;static getClosestPoint=Gh;static getSegmentOfPoint=Xh;static getSegmentAtLength=Kh;static isPointInStroke=Qh;static isValidPath=Jh;static isPathArray=Gd;static isAbsoluteArray=yh;static isRelativeArray=tp;static isCurveArray=Ph;static isNormalizedArray=wh;static shapeToPath=ip;static parsePathString=Xd;static roundPath=ep;static splitPath=op;static splitCubic=hp;static optimizePath=lp;static reverseCurve=cp;static reversePath=up;static normalizePath=_h;static transformPath=dp;static pathToAbsolute=xh;static pathToRelative=ap;static pathToCurve=Uh;static pathToString=np;constructor(t,e){const n=e||{},r=typeof t>"u";if(r||!t.length)throw TypeError(`${Pd}: "pathValue" is ${r?"undefined":"empty"}`);const i=Xd(t);this.segments=i;const{width:o,height:a,cx:s,cy:l,cz:c}=this.getBBox(),{round:u,origin:f}=n;let d,h;if("auto"===u){const t=`${Math.floor(Math.max(o,a))}`.length;d=t>=4?0:4-t}else d=Number.isInteger(u)||"off"===u?u:jd.round;if(Array.isArray(f)&&f.length>=2){const[t,e,n]=f.map(Number);h=[Number.isNaN(t)?s:t,Number.isNaN(e)?l:e,Number.isNaN(n)?c:n]}else h=[s,l,c];return this.round=d,this.origin=h,this}getBBox(){return Lh(this.segments)}getTotalLength(){return Yh(this.segments)}getPointAtLength(t){return Bh(this.segments,t)}toAbsolute(){const{segments:t}=this;return this.segments=xh(t),this}toRelative(){const{segments:t}=this;return this.segments=ap(t),this}toCurve(){const{segments:t}=this;return this.segments=Uh(t),this}reverse(t){this.toAbsolute();const{segments:e}=this,n=op(e),r=n.length>1&&n,i=r?[...r].map(((e,n)=>t?n?up(e):[...e]:up(e))):[...e];let o=[];return o=r?i.flat(1):t?e:up(e),this.segments=[...o],this}normalize(){const{segments:t}=this;return this.segments=_h(t),this}optimize(){const{segments:t}=this;return this.segments=lp(t,this.round),this}transform(t){if(!t||"object"!=typeof t||"object"==typeof t&&!["translate","rotate","skew","scale"].some((e=>e in t)))return this;const{segments:e,origin:[n,r,i]}=this,o={};for(const[e,n]of Object.entries(t))"skew"===e&&Array.isArray(n)||("rotate"===e||"translate"===e||"origin"===e||"scale"===e)&&Array.isArray(n)?o[e]=n.map(Number):"origin"!==e&&"number"==typeof Number(n)&&(o[e]=Number(n));const{origin:a}=o;if(Array.isArray(a)&&a.length>=2){const[t,e,s]=a.map(Number);o.origin=[Number.isNaN(t)?n:t,Number.isNaN(e)?r:e,s||i]}else o.origin=[n,r,i];return this.segments=dp(e,o),this}flipX(){return this.transform({rotate:[0,180,0]}),this}flipY(){return this.transform({rotate:[180,0,0]}),this}toString(){return np(this.segments,this.round)}}const mp=new Map([["MSNBC",0],["CNN",1],["Other Cable",2],["Hard Broadcast News",3],["Soft Broadcast News",4],["Spanish News",5],["FOX",6],["Newsmax",7]]),gp="àáäâèéëêìíïîòóöôùúüûñç·/_,:;";function vp(t){let e=t.replace(/^\s+|\s+$/g,"");e=e.toLowerCase();for(let t=0,n=gp.length;t<n;t++)e=e.replace(new RegExp(gp.charAt(t),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(t));return String(e).replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function yp(t,e,n){const r=t.slice();return r[30]=e[n],r[32]=n,r}function xp(t,e,n){const r=t.slice();return r[30]=e[n],r[32]=n,r}function bp(t,e,n){const r=t.slice();return r[34]=e[n],r[32]=n,r}function wp(e){let n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=$p(bp(e,r,t));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=L()},m(t,e){for(let n=0;n<i.length;n+=1)i[n].m(t,e);N(t,n,e)},p(t,e){if(522&e[0]){let o;for(r=t[1],o=0;o<r.length;o+=1){const a=bp(t,r,o);i[o]?(i[o].p(a,e),kt(i[o],1)):(i[o]=$p(a),i[o].c(),kt(i[o],1),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i(t){for(let t=0;t<r.length;t+=1)kt(i[t])},o:t,d(t){S(i,t),t&&A(n)}}}function $p(e){let n,r,i,o,a,s,l,c,u,f;return{c(){n=D("path"),s=D("path"),O(n,"class",r="link linkTo-"+vp(e[34].to.node)+" linkFrom-"+vp(e[34].from.node)+" svelte-1p1qjvz"),O(n,"stroke-width",i=e[34].w),O(n,"d",o=e[34].pathString),O(s,"class",l="arrow arrowTo-"+vp(e[34].to.node)+" arrowFrom-"+vp(e[34].from.node)+" svelte-1p1qjvz"),O(s,"d",c=e[9]([e[34].start,e[34].midpoint,e[34].end])),O(s,"marker-end","url(#triangle)")},m(t,r){N(t,n,r),N(t,s,r),u||(f=j(n,"introend",e[18]),u=!0)},p(t,e){2&e[0]&&r!==(r="link linkTo-"+vp(t[34].to.node)+" linkFrom-"+vp(t[34].from.node)+" svelte-1p1qjvz")&&O(n,"class",r),2&e[0]&&i!==(i=t[34].w)&&O(n,"stroke-width",i),2&e[0]&&o!==(o=t[34].pathString)&&O(n,"d",o),2&e[0]&&l!==(l="arrow arrowTo-"+vp(t[34].to.node)+" arrowFrom-"+vp(t[34].from.node)+" svelte-1p1qjvz")&&O(s,"class",l),2&e[0]&&c!==(c=t[9]([t[34].start,t[34].midpoint,t[34].end]))&&O(s,"d",c)},i(t){a||ft((()=>{a=Nt(n,Ht,{duration:1e3,delay:210}),a.start()}))},o:t,d(t){t&&A(n),t&&A(s),u=!1,f()}}}function _p(e){let n,r,i=e[2].filter(Sp),o=[];for(let t=0;t<i.length;t+=1)o[t]=Mp(xp(e,i,t));let a=e[2].filter(Tp),s=[];for(let t=0;t<a.length;t+=1)s[t]=Np(yp(e,a,t));return{c(){n=D("g");for(let t=0;t<o.length;t+=1)o[t].c();r=L();for(let t=0;t<s.length;t+=1)s[t].c();O(n,"class","node-group")},m(t,e){N(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);k(n,r);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,e){if(3125&e[0]){let a;for(i=t[2].filter(Sp),a=0;a<i.length;a+=1){const s=xp(t,i,a);o[a]?(o[a].p(s,e),kt(o[a],1)):(o[a]=Mp(s),o[a].c(),kt(o[a],1),o[a].m(n,r))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}if(3125&e[0]){let r;for(a=t[2].filter(Tp),r=0;r<a.length;r+=1){const i=yp(t,a,r);s[r]?(s[r].p(i,e),kt(s[r],1)):(s[r]=Np(i),s[r].c(),kt(s[r],1),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},i(t){for(let t=0;t<i.length;t+=1)kt(o[t]);for(let t=0;t<a.length;t+=1)kt(s[t])},o:t,d(t){t&&A(n),S(o,t),S(s,t)}}}function kp(t){let e,n,r,i,o,a=_f(t[0].get(t[30].archetype))+"";return{c(){e=D("text"),n=E(a),O(e,"class",r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-1p1qjvz"),O(e,"dx",i=t[30].r+3),O(e,"dy",o=5)},m(t,r){N(t,e,r),k(e,n)},p(t,o){5&o[0]&&a!==(a=_f(t[0].get(t[30].archetype))+"")&&I(n,a),37&o[0]&&r!==(r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-1p1qjvz")&&O(e,"class",r),4&o[0]&&i!==(i=t[30].r+3)&&O(e,"dx",i)},d(t){t&&A(e)}}}function Mp(e){let n,r,i,a,s,l,c,u,f,d,h,p=e[30].archetype+"";function m(...t){return e[19](e[30],...t)}function g(...t){return e[20](e[30],...t)}let v=e[5]&&kp(e);return{c(){n=D("g"),r=D("circle"),l=D("text"),c=E(p),v&&v.c(),O(r,"class",i="node "+(e[4]?"active":"")+" svelte-1p1qjvz"),O(r,"r",a=e[30].r),O(l,"class","node-label svelte-1p1qjvz"),O(l,"dy",u=-(e[30].r+3)),O(n,"transform",f="translate("+e[30].x+", "+e[30].y+")")},m(t,e){N(t,n,e),k(n,r),k(n,l),k(l,c),v&&v.m(n,null),d||(h=[j(r,"mouseenter",m),j(r,"mouseleave",g)],d=!0)},p(t,o){e=t,16&o[0]&&i!==(i="node "+(e[4]?"active":"")+" svelte-1p1qjvz")&&O(r,"class",i),4&o[0]&&a!==(a=e[30].r)&&O(r,"r",a),4&o[0]&&p!==(p=e[30].archetype+"")&&I(c,p),4&o[0]&&u!==(u=-(e[30].r+3))&&O(l,"dy",u),e[5]?v?v.p(e,o):(v=kp(e),v.c(),v.m(n,null)):v&&(v.d(1),v=null),4&o[0]&&f!==(f="translate("+e[30].x+", "+e[30].y+")")&&O(n,"transform",f)},i(t){s||ft((()=>{s=Nt(r,Ut,{duration:1e3}),s.start()}))},o:t,d(t){t&&A(n),v&&v.d(),d=!1,o(h)}}}function Cp(t){let e,n,r,i,o=_f(t[0].get(t[30].archetype))+"";return{c(){e=D("text"),n=E(o),O(e,"class",r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-1p1qjvz"),O(e,"dx",i=t[30].r+3)},m(t,r){N(t,e,r),k(e,n)},p(t,a){5&a[0]&&o!==(o=_f(t[0].get(t[30].archetype))+"")&&I(n,o),37&a[0]&&r!==(r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-1p1qjvz")&&O(e,"class",r),4&a[0]&&i!==(i=t[30].r+3)&&O(e,"dx",i)},d(t){t&&A(e)}}}function Np(e){let n,r,i,a,s,l,c,u,f,d,h,p=e[30].archetype+"";function m(...t){return e[21](e[30],...t)}function g(...t){return e[22](e[30],...t)}let v=e[5]&&Cp(e);return{c(){n=D("g"),r=D("circle"),l=D("text"),c=E(p),v&&v.c(),O(r,"class",i="node "+(e[4]?"active":"")+" svelte-1p1qjvz"),O(r,"r",a=e[30].r),O(l,"class","node-label svelte-1p1qjvz"),O(l,"dy",u=e[30].r+18),O(n,"transform",f="translate("+e[30].x+", "+e[30].y+")")},m(t,e){N(t,n,e),k(n,r),k(n,l),k(l,c),v&&v.m(n,null),d||(h=[j(r,"mouseenter",m),j(r,"mouseleave",g)],d=!0)},p(t,o){e=t,16&o[0]&&i!==(i="node "+(e[4]?"active":"")+" svelte-1p1qjvz")&&O(r,"class",i),4&o[0]&&a!==(a=e[30].r)&&O(r,"r",a),4&o[0]&&p!==(p=e[30].archetype+"")&&I(c,p),4&o[0]&&u!==(u=e[30].r+18)&&O(l,"dy",u),e[5]?v?v.p(e,o):(v=Cp(e),v.c(),v.m(n,null)):v&&(v.d(1),v=null),4&o[0]&&f!==(f="translate("+e[30].x+", "+e[30].y+")")&&O(n,"transform",f)},i(t){s||ft((()=>{s=Nt(r,Ut,{duration:1e3}),s.start()}))},o:t,d(t){t&&A(n),v&&v.d(),d=!1,o(h)}}}function Ap(e){let n,r,i,o=e[6]&&wp(e),a=e[6]&&_p(e);return{c(){n=D("g"),o&&o.c(),r=z(),a&&a.c(),i=L(),O(n,"class","link-group"),O(n,"id","link-group")},m(t,e){N(t,n,e),o&&o.m(n,null),N(t,r,e),a&&a.m(t,e),N(t,i,e)},p(t,e){t[6]?o?(o.p(t,e),64&e[0]&&kt(o,1)):(o=wp(t),o.c(),kt(o,1),o.m(n,null)):o&&(o.d(1),o=null),t[6]?a?(a.p(t,e),64&e[0]&&kt(a,1)):(a=_p(t),a.c(),kt(a,1),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(t){kt(o),kt(a)},o:t,d(t){t&&A(n),o&&o.d(),t&&A(r),a&&a.d(t),t&&A(i)}}}const Sp=t=>"No or Minimal News"!==t.node,Tp=t=>"No or Minimal News"===t.node;function Dp(t,e,n){let r,i,o,a,s,l;const{width:u,height:f}=it("LayerCake");c(t,u,(t=>n(17,l=t))),c(t,f,(t=>n(16,s=t)));let{nodes:d}=e,{links:h}=e,{flatLinks:p}=e,{netFlowMap:m}=e;const g=Hr().range([1,25]),v=Gr().range([5,25]);let y=[];const x=l/1.75,b=Math.acos((2*Math.pow(x,2)-Math.pow(l,2))/(2*Math.pow(x,2))),w=b/(d.length-1),$=b/2-w/2;let _,k;function M(t,e){if(t.moveTo(e.from.x,e.from.y),"No or Minimal News"===e.link.to){const n=e.from.x>l/2?l:0;t.quadraticCurveTo(n,s/1.5,e.to.x,e.to.y)}else 1===Math.abs(+e.link.to-+e.link.from)?t.lineTo(e.to.x,e.to.y):t.quadraticCurveTo(l/2,.01+Math.random()*s,e.to.x,e.to.y);return t}const C=ms().x((t=>t.x)).y((t=>t.y)).curve($s);function N(t,e){const r=vp(e.node),i=document.getElementById("link-group"),o=document.getElementsByClassName(`linkFrom-${r}`),s=document.getElementsByClassName(`arrowFrom-${r}`),l=document.getElementsByClassName(`linkTo-${r}`),c=document.getElementsByClassName(`arrowTo-${r}`),u=[];for(const t of o)t.classList.toggle("linkFrom"),u.push({selection:t});for(const t of l)t.classList.toggle("linkTo"),u.push({selection:t});for(const t of s)t.classList.toggle("arrowVisible"),u.push({selection:t});for(const t of c)t.classList.toggle("arrowVisible"),u.push({selection:t});for(const t of u)i.appendChild(t.selection);n(5,a=e.node)}function A(t,e){const r=vp(e.node),i=document.getElementsByClassName(`linkFrom-${r}`),o=document.getElementsByClassName(`arrowFrom-${r}`),s=document.getElementsByClassName(`linkTo-${r}`),l=document.getElementsByClassName(`arrowTo-${r}`);for(const t of i)t.classList.toggle("linkFrom");for(const t of s)t.classList.toggle("linkTo");for(const t of o)t.classList.toggle("arrowVisible");for(const t of l)t.classList.toggle("arrowVisible");n(5,a=!1)}nt((()=>{v.domain(Ze(d,(t=>t.value))),g.domain(Ze(h,(t=>t.value))),n(2,_=d.map((t=>{const e=mp.get(t.node);let n,r;const i=v(t.value);return"No or Minimal News"!==t.node?(n=l/2+x*Math.cos(w*e-Math.PI/2-$),r=(1+Math.sin(w*e-Math.PI/2-$))*x):(n=l/2,r=s-i),Object.assign(Object.assign({},t),{x:n,y:r,r:i})}))),n(15,k=new Map(_.map((t=>[t.node,t])))),n(1,y=h.map(((t,e)=>{const n=k.get(t.from),r=k.get(t.to),i=M(ls(),{from:n,to:r,link:t}).toString(),o=new pp(i),a=+o.getTotalLength().toPrecision(2),s=o.getPointAtLength(.48*a),l=o.getPointAtLength(.5*a),c=o.getPointAtLength(.52*a);return Object.assign(Object.assign({},t),{to:r,from:n,pathString:i,pathInstance:o,totalLength:a,start:s,midpoint:l,end:c,w:g(t.value)})}))),n(6,r=!0)}));return t.$$set=t=>{"nodes"in t&&n(12,d=t.nodes),"links"in t&&n(13,h=t.links),"flatLinks"in t&&n(14,p=t.flatLinks),"netFlowMap"in t&&n(0,m=t.netFlowMap)},t.$$.update=()=>{241668&t.$$.dirty[0]&&(v.domain(Ze(d,(t=>t.value))),g.domain(Ze(h,(t=>t.value))),n(2,_=d.map((t=>{const e=mp.get(t.node);let n,r;const i=v(t.value);return"No or Minimal News"!==t.node?(n=l/2+x*Math.cos(w*e-Math.PI/2-$),r=(1+Math.sin(w*e-Math.PI/2-$))*x):(n=l/2,r=s-i),Object.assign(Object.assign({},t),{x:n,y:r,r:i})}))),n(15,k=new Map(_.map((t=>[t.node,t])))),n(1,y=h.map(((t,e)=>{const n=k.get(t.from),r=k.get(t.to),i=M(ls(),{from:n,to:r,link:t}).toString(),o=new pp(i),a=+o.getTotalLength().toPrecision(2),s=o.getPointAtLength(.48*a),l=o.getPointAtLength(.5*a),c=o.getPointAtLength(.52*a);return Object.assign(Object.assign({},t),{to:r,from:n,pathString:i,pathInstance:o,totalLength:a,start:s,midpoint:l,end:c,w:g(t.value)})})))),10&t.$$.dirty[0]&&y.length>0&&y.length===i&&n(4,o=!0)},n(6,r=!1),n(3,i=0),n(4,o=!1),n(5,a=!1),[m,y,_,i,o,a,r,u,f,C,N,A,d,h,p,k,s,l,()=>n(3,i+=1),(t,e)=>N(0,t),(t,e)=>A(0,t),(t,e)=>N(0,t),(t,e)=>A(0,t)]}class Ep extends Rt{constructor(t){super(),Pt(this,t,Dp,Ap,s,{nodes:12,links:13,flatLinks:14,netFlowMap:0},null,[-1,-1])}}function zp(t){let e,n;return e=new Ep({props:{nodes:t[2],links:t[3],flatLinks:t[4],netFlowMap:t[9]}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.nodes=t[2]),8&n&&(r.links=t[3]),16&n&&(r.flatLinks=t[4]),512&n&&(r.netFlowMap=t[9]),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Lp(t){let e,n,r,i,o,a,s=t[10]&&zp(t);return{c(){e=D("defs"),n=D("marker"),r=D("path"),i=z(),s&&s.c(),o=L(),O(r,"d","M 0 0 L 10 5 L 0 10 z"),O(r,"fill","black"),O(n,"id","triangle"),O(n,"viewBox","0 0 10 10"),O(n,"refX","1"),O(n,"refY","5"),O(n,"markerUnits","userSpaceOnUse"),O(n,"markerWidth","6"),O(n,"markerHeight","6"),O(n,"orient","auto")},m(t,l){N(t,e,l),k(e,n),k(n,r),N(t,i,l),s&&s.m(t,l),N(t,o,l),a=!0},p(t,e){t[10]?s?(s.p(t,e),1024&e&&kt(s,1)):(s=zp(t),s.c(),kt(s,1),s.m(o.parentNode,o)):s&&($t(),Mt(s,1,1,(()=>{s=null})),_t())},i(t){a||(kt(s),a=!0)},o(t){Mt(s),a=!1},d(t){t&&A(e),t&&A(i),s&&s.d(t),t&&A(o)}}}function jp(t){let e,n;return e=new es({props:{$$slots:{default:[Lp]},$$scope:{ctx:t}}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};5660&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Pp(t){let e,n;return e=new ol({props:{caption:t[1],url:t[5],type:12===t[7]?"split-cols":"single-cols"}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),32&n&&(r.url=t[5]),128&n&&(r.type=12===t[7]?"split-cols":"single-cols"),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Rp(t){let e,n,r,i,o,a;n=new Ha({props:{padding:t[10]?t[0]:{},$$slots:{default:[jp]},$$scope:{ctx:t}}});let s=t[6]&&Pp(t);return{c(){e=T("div"),Et(n.$$.fragment),i=z(),s&&s.c(),o=L(),O(e,"class",r="chart flow-chart "+t[8])},m(t,r){N(t,e,r),zt(n,e,null),N(t,i,r),s&&s.m(t,r),N(t,o,r),a=!0},p(t,[i]){const l={};1025&i&&(l.padding=t[10]?t[0]:{}),5660&i&&(l.$$scope={dirty:i,ctx:t}),n.$set(l),(!a||256&i&&r!==(r="chart flow-chart "+t[8]))&&O(e,"class",r),t[6]?s?(s.p(t,i),64&i&&kt(s,1)):(s=Pp(t),s.c(),kt(s,1),s.m(o.parentNode,o)):s&&($t(),Mt(s,1,1,(()=>{s=null})),_t())},i(t){a||(kt(n.$$.fragment,t),kt(s),a=!0)},o(t){Mt(n.$$.fragment,t),Mt(s),a=!1},d(t){t&&A(e),Lt(n),t&&A(i),s&&s.d(t),t&&A(o)}}}function Op(t,e,n){let r,i,{margins:o={top:50,right:0,bottom:50,left:0}}=e,{caption:a=""}=e,{nodes:s}=e,{links:l}=e,{flatLinks:c}=e,{url:u=""}=e,{includeCaption:f=!0}=e,{spanCol:d}=e,{customClass:h=""}=e;return nt((()=>{n(10,r=!0)})),t.$$set=t=>{"margins"in t&&n(0,o=t.margins),"caption"in t&&n(1,a=t.caption),"nodes"in t&&n(2,s=t.nodes),"links"in t&&n(3,l=t.links),"flatLinks"in t&&n(4,c=t.flatLinks),"url"in t&&n(5,u=t.url),"includeCaption"in t&&n(6,f=t.includeCaption),"spanCol"in t&&n(7,d=t.spanCol),"customClass"in t&&n(8,h=t.customClass)},t.$$.update=()=>{if(t.$$.dirty,12&t.$$.dirty){const t=nn(l,(t=>hn(t,(t=>t.value))),(t=>t.to)),e=nn(l,(t=>hn(t,(t=>t.value))),(t=>t.from));n(9,i=new Map(s.map((n=>[n.archetype,(t.has(n.archetype)?t.get(n.archetype):0)-(e.has(n.archetype)?e.get(n.archetype):0)]))))}},n(10,r=!1),[o,a,s,l,c,u,f,d,h,i,r]}class Ip extends Rt{constructor(t){super(),Pt(this,t,Op,Rp,s,{margins:0,caption:1,nodes:2,links:3,flatLinks:4,url:5,includeCaption:6,spanCol:7,customClass:8})}}function Fp(t,e,n){const r=t.slice();return r[27]=e[n],r[29]=n,r}function qp(t){let e,n,r,i,o,a,s,l,c,u,f,d,h=t[27].value.title+"";function p(e){t[20](e)}let m={id:"audience",title:Gt.controls["node-size"].title,labels:["Audience","Consumption"],info:Gt.controls["node-size"].description};void 0!==t[8]&&(m.checked=t[8]),a=new Nl({props:m}),at.push((()=>Dt(a,"checked",p)));let g=t[9]&&t[5]&&Hp(t);const v=[Vp,Yp],y=[];function x(t,e){return t[9]&&t[5]?0:1}return u=x(t),f=y[u]=v[u](t),{c(){e=T("div"),n=T("h3"),r=E(h),i=z(),o=T("div"),Et(a.$$.fragment),l=z(),g&&g.c(),c=z(),f.c(),O(n,"class","chart-title svelte-ruxr57"),O(o,"class","controls svelte-ruxr57"),O(e,"class","title-container svelte-ruxr57")},m(t,s){N(t,e,s),k(e,n),k(n,r),k(e,i),k(e,o),zt(a,o,null),k(o,l),g&&g.m(o,null),k(e,c),y[u].m(e,null),d=!0},p(t,n){(!d||4&n)&&h!==(h=t[27].value.title+"")&&I(r,h);const i={};!s&&256&n&&(s=!0,i.checked=t[8],dt((()=>s=!1))),a.$set(i),t[9]&&t[5]?g?(g.p(t,n),544&n&&kt(g,1)):(g=Hp(t),g.c(),kt(g,1),g.m(o,null)):g&&($t(),Mt(g,1,1,(()=>{g=null})),_t());let l=u;u=x(t),u===l?y[u].p(t,n):($t(),Mt(y[l],1,1,(()=>{y[l]=null})),_t(),f=y[u],f?f.p(t,n):(f=y[u]=v[u](t),f.c()),kt(f,1),f.m(e,null))},i(t){d||(kt(a.$$.fragment,t),kt(g),kt(f),d=!0)},o(t){Mt(a.$$.fragment,t),Mt(g),Mt(f),d=!1},d(t){t&&A(e),Lt(a),g&&g.d(),y[u].d()}}}function Up(e){let n,r,i=e[27].value+"";return{c(){n=T("p"),r=E(i),O(n,"class","copy svelte-ruxr57")},m(t,e){N(t,n,e),k(n,r)},p(t,e){4&e&&i!==(i=t[27].value+"")&&I(r,i)},i:t,o:t,d(t){t&&A(n)}}}function Hp(t){let e,n,r,i,o,a,s,l,c,u,f,d,h,p,m=Tl(t[13](t[7]))+"",g=Tl(t[13](t[6]))+"";function v(e){t[21](e)}function y(e){t[22](e)}let x={};return void 0!==t[7]&&(x.start=t[7]),void 0!==t[6]&&(x.end=t[6]),i=new kl({props:x}),at.push((()=>Dt(i,"start",v))),at.push((()=>Dt(i,"end",y))),{c(){e=T("div"),n=T("div"),n.textContent="Period",r=z(),Et(i.$$.fragment),s=z(),l=T("div"),c=T("div"),u=E(m),f=z(),d=T("div"),h=E(g),O(n,"class","control-title svelte-ruxr57"),O(c,"class","label svelte-ruxr57"),O(d,"class","label svelte-ruxr57"),O(l,"class","labels svelte-ruxr57"),O(e,"id","period"),O(e,"class","control control-range svelte-ruxr57")},m(t,o){N(t,e,o),k(e,n),k(e,r),zt(i,e,null),k(e,s),k(e,l),k(l,c),k(c,u),k(l,f),k(l,d),k(d,h),p=!0},p(t,e){const n={};!o&&128&e&&(o=!0,n.start=t[7],dt((()=>o=!1))),!a&&64&e&&(a=!0,n.end=t[6],dt((()=>a=!1))),i.$set(n),(!p||128&e)&&m!==(m=Tl(t[13](t[7]))+"")&&I(u,m),(!p||64&e)&&g!==(g=Tl(t[13](t[6]))+"")&&I(h,g)},i(t){p||(kt(i.$$.fragment,t),p=!0)},o(t){Mt(i.$$.fragment,t),p=!1},d(t){t&&A(e),Lt(i)}}}function Yp(e){let n,r;return n=new Sl({}),{c(){Et(n.$$.fragment)},m(t,e){zt(n,t,e),r=!0},p:t,i(t){r||(kt(n.$$.fragment,t),r=!0)},o(t){Mt(n.$$.fragment,t),r=!1},d(t){Lt(n,t)}}}function Vp(t){let e,n;return e=new Ip({props:{nodes:t[10],links:t[12],flatLinks:t[11],spanCol:12,url:Zp,caption:t[3].captions,customClass:"chart-large"}}),{c(){Et(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};1024&n&&(r.nodes=t[10]),4096&n&&(r.links=t[12]),2048&n&&(r.flatLinks=t[11]),8&n&&(r.caption=t[3].captions),e.$set(r)},i(t){n||(kt(e.$$.fragment,t),n=!0)},o(t){Mt(e.$$.fragment,t),n=!1},d(t){Lt(e,t)}}}function Bp(t){let e,n,r,i;const o=[Up,qp],a=[];function s(t,e){return"text"===t[27].type?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){a[e].m(t,n),N(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?a[e].p(t,i):($t(),Mt(a[l],1,1,(()=>{a[l]=null})),_t(),n=a[e],n?n.p(t,i):(n=a[e]=o[e](t),n.c()),kt(n,1),n.m(r.parentNode,r))},i(t){i||(kt(n),i=!0)},o(t){Mt(n),i=!1},d(t){a[e].d(t),t&&A(r)}}}function Wp(t){let e,n,r,i,s,l,c,u,f,d,h=t[4].value+"",p=t[2],m=[];for(let e=0;e<p.length;e+=1)m[e]=Bp(Fp(t,p,e));const g=t=>Mt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=T("div"),n=T("h1"),r=E(h),i=z();for(let t=0;t<m.length;t+=1)m[t].c();s=z(),l=T("div"),l.textContent="GO BACK",O(n,"class","section-title svelte-ruxr57"),O(l,"class","close-button bottom svelte-ruxr57"),O(e,"class","section svelte-ruxr57")},m(o,a){N(o,e,a),k(e,n),k(n,r),k(e,i);for(let t=0;t<m.length;t+=1)m[t].m(e,null);k(e,s),k(e,l),u=!0,f||(d=[j(l,"click",t[23]),v(c=re.call(null,e,{once:t[1]})),j(e,"enter",t[24])],f=!0)},p(t,[n]){if((!u||16&n)&&h!==(h=t[4].value+"")&&I(r,h),16364&n){let r;for(p=t[2],r=0;r<p.length;r+=1){const i=Fp(t,p,r);m[r]?(m[r].p(i,n),kt(m[r],1)):(m[r]=Bp(i),m[r].c(),kt(m[r],1),m[r].m(e,s))}for($t(),r=p.length;r<m.length;r+=1)g(r);_t()}c&&a(c.update)&&2&n&&c.update.call(null,{once:t[1]})},i(t){if(!u){for(let t=0;t<p.length;t+=1)kt(m[t]);u=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)Mt(m[t]);u=!1},d(t){t&&A(e),S(m,t),f=!1,o(d)}}}let Zp="assets/data/EchoCh-nodes.csv";function Gp(t,e,n){let r,i,o,a,s,l,c,u,f,d,h,p,m,g=!1,{once:v}=e,{body:y}=e,{refs:x}=e,{chart:b}=e,{title:w}=e,{modal:$}=e;const _=Hr(),k=t=>{const e=new Date(_(t));return e.setDate(1),e.setHours(0,0,0),e.setMilliseconds(0),+e};nt((async()=>{const t=await qe(Zp,Pe);u=t.map((t=>Object.assign(Object.assign({},t),{node:t.archetype,date:new Date(t.year,t.month,1)}))),n(15,f=tn(u,(t=>+t.date),(t=>t.variable)));const[e,i]=Ze(Array.from(f).map((t=>t[0])));_.range([e,i]);const o=await qe("assets/data/EchoCh-links.csv",Pe);n(11,h=o.map((t=>Object.assign(Object.assign({},t),{start_date:new Date(t["start year"],t["start month"],1),end_date:new Date(t["end year"],t["end month"],1)}))).reduce(((t,e)=>{const n=Object.entries(e),r=n.filter((t=>!["start year","end year","start month","end month","from","start_date","end_date"].includes(t[0])&&null!==t[1])),i=n.filter((t=>"from"===t[0]))[0][1];return r.forEach((n=>{t.push({from:i,to:n[0],value:n[1],start_date:e.start_date,end_date:e.end_date})})),t}),[])),n(16,p=tn(h,(t=>+t.start_date),(t=>+t.end_date))),n(5,r=!0),n(18,l=k(0)),n(17,c=k(1))}));return t.$$set=t=>{"once"in t&&n(1,v=t.once),"body"in t&&n(2,y=t.body),"refs"in t&&n(14,x=t.refs),"chart"in t&&n(3,b=t.chart),"title"in t&&n(4,w=t.title),"modal"in t&&n(0,$=t.modal)},t.$$.update=()=>{256&t.$$.dirty&&n(19,o=i?"sizes":"mins_p_person"),128&t.$$.dirty&&n(18,l=k(a)),64&t.$$.dirty&&n(17,c=k(s)),1015840&t.$$.dirty&&r&&(n(10,d=f.get(c).get(o)),n(12,m=p.get(l).get(c)))},n(5,r=!1),n(8,i=!0),n(7,a=0),n(6,s=1),[$,v,y,b,w,r,s,a,i,g,d,h,m,_,x,f,p,c,l,o,function(t){i=t,n(8,i)},function(t){a=t,n(7,a)},function(t){s=t,n(6,s)},()=>n(0,$=!1),()=>n(9,g=!0)]}class Xp extends Rt{constructor(t){super(),Pt(this,t,Gp,Wp,s,{once:1,body:2,refs:14,chart:3,title:4,modal:0})}}function Kp(e){let n,r,i,o,a,s,l,c,u=e[2].title+"";return{c(){n=T("div"),r=T("div"),i=z(),o=T("h4"),a=E(u),O(r,"class","option-img svelte-1tipbh4"),F(r,"background-image","url("+e[2].image+")"),O(n,"class",s="option section-"+(e[1]+1)+" svelte-1tipbh4")},m(t,s){N(t,n,s),k(n,r),k(n,i),k(n,o),k(o,a),l||(c=j(n,"click",e[3]),l=!0)},p(t,[e]){4&e&&F(r,"background-image","url("+t[2].image+")"),4&e&&u!==(u=t[2].title+"")&&I(a,u),2&e&&s!==(s="option section-"+(t[1]+1)+" svelte-1tipbh4")&&O(n,"class",s)},i:t,o:t,d(t){t&&A(n),l=!1,c()}}}function Qp(t,e,n){let{index:r}=e,{comp:i}=e,{modal:o}=e;return t.$$set=t=>{"index"in t&&n(1,r=t.index),"comp"in t&&n(2,i=t.comp),"modal"in t&&n(0,o=t.modal)},[o,r,i,()=>n(0,o=i)]}class Jp extends Rt{constructor(t){super(),Pt(this,t,Qp,Kp,s,{index:1,comp:2,modal:0})}}function tm(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function em(t){let e,n,r;function i(e){t[4](e)}let o={comp:t[7],index:t[9]};return void 0!==t[0]&&(o.modal=t[0]),e=new Jp({props:o}),at.push((()=>Dt(e,"modal",i))),{c(){Et(e.$$.fragment)},m(t,n){zt(e,t,n),r=!0},p(t,r){const i={};!n&&1&r&&(n=!0,i.modal=t[0],dt((()=>n=!1))),e.$set(i)},i(t){r||(kt(e.$$.fragment,t),r=!0)},o(t){Mt(e.$$.fragment,t),r=!1},d(t){Lt(e,t)}}}function nm(t){let e,n,r,i,o,a,s=t[2],l=[];for(let e=0;e<s.length;e+=1)l[e]=em(tm(t,s,e));const c=t=>Mt(l[t],1,1,(()=>{l[t]=null}));return{c(){e=T("div");for(let t=0;t<l.length;t+=1)l[t].c();n=z(),r=T("div"),r.textContent="Read the methodology",O(r,"class","methodology svelte-1wuvzx2"),O(e,"class","menu-wrapper svelte-1wuvzx2")},m(s,c){N(s,e,c);for(let t=0;t<l.length;t+=1)l[t].m(e,null);k(e,n),k(e,r),i=!0,o||(a=j(r,"click",t[5]),o=!0)},p(t,[r]){if(5&r){let i;for(s=t[2],i=0;i<s.length;i+=1){const o=tm(t,s,i);l[i]?(l[i].p(o,r),kt(l[i],1)):(l[i]=em(o),l[i].c(),kt(l[i],1),l[i].m(e,n))}for($t(),i=s.length;i<l.length;i+=1)c(i);_t()}},i(t){if(!i){for(let t=0;t<s.length;t+=1)kt(l[t]);i=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)Mt(l[t]);i=!1},d(t){t&&A(e),S(l,t),o=!1,a()}}}function rm(t,e,n){const r=new Map([["overall-news-consumption",{renderer:Ld}],["echo-chambers-part1",{renderer:Vl}],["echo-chambers-part2",{renderer:od}],["changing-tv-audiences",{renderer:Xp}]]),i={tag:"methodology",renderer:ce};let{tiles:o}=e;const a=o[0].value.map((t=>({title:t.title,image:`/assets/images/${t.tag}.png`,tag:t.tag,renderer:r.get(t.tag).renderer})));let{modal:s}=e;return t.$$set=t=>{"tiles"in t&&n(3,o=t.tiles),"modal"in t&&n(0,s=t.modal)},[s,i,a,o,function(t){s=t,n(0,s)},()=>n(0,s=i)]}class im extends Rt{constructor(t){super(),Pt(this,t,rm,nm,s,{tiles:3,modal:0})}}function om(t){let e,n,r,i,o,a,s,l,c,u,f,d;function h(e){t[1](e)}r=new Jt({props:{title:Gt.title}});let p={content:Gt.intro.filter(am)};function m(e){t[2](e)}void 0!==t[0]&&(p.modal=t[0]),o=new ye({props:p}),at.push((()=>Dt(o,"modal",h))),l=new Ne({props:{authors:Xt}});let g={tiles:Gt.intro.filter(sm)};return void 0!==t[0]&&(g.modal=t[0]),u=new im({props:g}),at.push((()=>Dt(u,"modal",m))),{c(){e=T("section"),n=T("div"),Et(r.$$.fragment),i=z(),Et(o.$$.fragment),s=z(),Et(l.$$.fragment),c=z(),Et(u.$$.fragment),O(n,"class","header-wrapper main-column svelte-a1x4q6"),O(e,"class","svelte-a1x4q6")},m(t,a){N(t,e,a),k(e,n),zt(r,n,null),k(n,i),zt(o,n,null),k(n,s),zt(l,n,null),k(e,c),zt(u,e,null),d=!0},p(t,[e]){const n={};!a&&1&e&&(a=!0,n.modal=t[0],dt((()=>a=!1))),o.$set(n);const r={};!f&&1&e&&(f=!0,r.modal=t[0],dt((()=>f=!1))),u.$set(r)},i(t){d||(kt(r.$$.fragment,t),kt(o.$$.fragment,t),kt(l.$$.fragment,t),kt(u.$$.fragment,t),d=!0)},o(t){Mt(r.$$.fragment,t),Mt(o.$$.fragment,t),Mt(l.$$.fragment,t),Mt(u.$$.fragment,t),d=!1},d(t){t&&A(e),Lt(r),Lt(o),Lt(l),Lt(u)}}}const am=t=>"tiles"!==t.type,sm=t=>"tiles"===t.type;function lm(t,e,n){let{modal:r}=e;return t.$$set=t=>{"modal"in t&&n(0,r=t.modal)},[r,function(t){r=t,n(0,r)},function(t){r=t,n(0,r)}]}class cm extends Rt{constructor(t){super(),Pt(this,t,lm,om,s,{modal:0})}}function um(t){let e,n,r,i,o,a,s,l,c,u,f;function d(e){t[8](e)}let h={once:!0,title:t[3],body:t[2],refs:[],chart:t[1]};return void 0!==t[0]&&(h.modal=t[0]),r=new t[6]({props:h}),at.push((()=>Dt(r,"modal",d))),{c(){e=T("div"),n=T("div"),Et(r.$$.fragment),o=z(),a=T("div"),a.textContent="GO BACK",O(a,"class","close-button svelte-18zilnr"),O(n,"class","modal svelte-18zilnr"),O(e,"class","modal-wrapper svelte-18zilnr"),F(e,"--top",t[5]+fm+"px"),F(e,"--height",t[4]+"px"),F(e,"--offset",fm/2+"px")},m(i,s){N(i,e,s),k(e,n),zt(r,n,null),k(n,o),k(n,a),c=!0,u||(f=j(a,"click",t[9]),u=!0)},p(t,[n]){const o={};8&n&&(o.title=t[3]),4&n&&(o.body=t[2]),2&n&&(o.chart=t[1]),!i&&1&n&&(i=!0,o.modal=t[0],dt((()=>i=!1))),r.$set(o),(!c||32&n)&&F(e,"--top",t[5]+fm+"px"),(!c||16&n)&&F(e,"--height",t[4]+"px")},i(t){c||(kt(r.$$.fragment,t),ft((()=>{l&&l.end(1),s=Nt(e,qt,{y:200,duration:1e3}),s.start()})),c=!0)},o(t){Mt(r.$$.fragment,t),s&&s.invalidate(),l=At(e,Ft,{}),c=!1},d(t){t&&A(e),Lt(r),t&&l&&l.end(),u=!1,f()}}}const fm=84;function dm(t,e,n){let r,i,o,a,{comp:s}=e,{modal:l}=e,c=!1;const{renderer:u,tag:f}=s;t.$$set=t=>{"comp"in t&&n(7,s=t.comp),"modal"in t&&n(0,l=t.modal)},n(5,r=window.scrollY),n(4,i=window.innerHeight),n(3,o=Gt[f].filter((t=>"title"===t.type))[0]),n(2,a=Gt[f].filter((t=>"title"!==t.type)));{const t=Gt[f].filter((t=>"chart"===t.type));t&&t.length&&n(1,c=t[0].value)}return[l,c,a,o,i,r,u,s,function(t){l=t,n(0,l)},()=>n(0,l=!1)]}class hm extends Rt{constructor(t){super(),Pt(this,t,dm,um,s,{comp:7,modal:0})}}function pm(t){let e,n,r,i,o,a,s,l,c;function u(e){t[3](e)}let f={comp:t[0]};return void 0!==t[0]&&(f.modal=t[0]),e=new hm({props:f}),at.push((()=>Dt(e,"modal",u))),{c(){Et(e.$$.fragment),r=z(),i=T("div"),O(i,"class","modal-background")},m(n,o){zt(e,n,o),N(n,r,o),N(n,i,o),s=!0,l||(c=j(i,"click",t[4]),l=!0)},p(t,r){const i={};1&r&&(i.comp=t[0]),!n&&1&r&&(n=!0,i.modal=t[0],dt((()=>n=!1))),e.$set(i)},i(t){s||(kt(e.$$.fragment,t),ft((()=>{a&&a.end(1),o=Nt(i,Ft,{}),o.start()})),s=!0)},o(t){Mt(e.$$.fragment,t),o&&o.invalidate(),a=At(i,Ft,{}),s=!1},d(t){Lt(e,t),t&&A(r),t&&A(i),t&&a&&a.end(),l=!1,c()}}}function mm(t){let e,n,r,i,o,a,s,l,c,u;function f(e){t[2](e)}n=new Bt({});let d={};void 0!==t[0]&&(d.modal=t[0]),o=new cm({props:d}),at.push((()=>Dt(o,"modal",f)));let h=t[1]&&pm(t);return c=new Zt({}),{c(){e=T("div"),Et(n.$$.fragment),r=z(),i=T("main"),Et(o.$$.fragment),s=z(),h&&h.c(),l=z(),Et(c.$$.fragment),O(e,"class","body"),V(e,"modalType",t[1]),V(e,"landingType",!t[1])},m(t,a){N(t,e,a),zt(n,e,null),k(e,r),k(e,i),zt(o,i,null),k(e,s),h&&h.m(e,null),k(e,l),zt(c,e,null),u=!0},p(t,[n]){const r={};!a&&1&n&&(a=!0,r.modal=t[0],dt((()=>a=!1))),o.$set(r),t[1]?h?(h.p(t,n),2&n&&kt(h,1)):(h=pm(t),h.c(),kt(h,1),h.m(e,l)):h&&($t(),Mt(h,1,1,(()=>{h=null})),_t()),2&n&&V(e,"modalType",t[1]),2&n&&V(e,"landingType",!t[1])},i(t){u||(kt(n.$$.fragment,t),kt(o.$$.fragment,t),kt(h),kt(c.$$.fragment,t),u=!0)},o(t){Mt(n.$$.fragment,t),Mt(o.$$.fragment,t),Mt(h),Mt(c.$$.fragment,t),u=!1},d(t){t&&A(e),Lt(n),Lt(o),h&&h.d(),Lt(c)}}}function gm(t,e,n){let r,{modal:i}=e;return t.$$set=t=>{"modal"in t&&n(0,i=t.modal)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=i&&Object.hasOwn(i,"renderer")),2&t.$$.dirty&&document.body.classList[r?"add":"remove"]("noscroll")},n(0,i=!1),[i,r,function(t){i=t,n(0,i)},function(t){i=t,n(0,i)},()=>{i&&n(0,i=!1)}]}return new class extends Rt{constructor(t){super(),Pt(this,t,gm,mm,s,{modal:0})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
