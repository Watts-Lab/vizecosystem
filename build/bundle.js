var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t,e,n){t.$$.on_destroy.push(s(e,n))}function c(t,e,n,r){if(t){const i=u(t,e,n,r);return t[0](i)}}function u(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function f(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function h(t,e,n,r,i,o){if(i){const a=u(e,n,r,o);t.p(a,i)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function d(t){return null==t?"":t}function m(t,e,n){return t.set(n),e}function g(e){return e&&o(e.destroy)?e.destroy:t}const v="undefined"!=typeof window;let y=v?()=>window.performance.now():()=>Date.now(),b=v?t=>requestAnimationFrame(t):t;const x=new Set;function w(t){x.forEach((e=>{e.c(t)||(x.delete(e),e.f())})),0!==x.size&&b(w)}function $(t){let e;return 0===x.size&&b(w),{promise:new Promise((n=>{x.add(e={c:t,f:n})})),abort(){x.delete(e)}}}function _(t,e){t.appendChild(e)}function k(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function M(t){const e=T("style");return function(t,e){_(t.head||t,e)}(k(t),e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function N(t){t.parentNode.removeChild(t)}function S(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function T(t){return document.createElement(t)}function A(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function z(t){return document.createTextNode(t)}function D(){return z(" ")}function j(){return z("")}function E(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function L(t){return function(e){return e.preventDefault(),t.call(this,e)}}function P(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function R(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function O(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function F(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function q(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let Y;function U(){if(void 0===Y){Y=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){Y=!0}}return Y}function H(t,e,n){t.classList[n?"add":"remove"](e)}function V(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}const B=new Map;let W,Z=0;function X(t,e,n,r,i,o,a,s=0){const l=16.666/r;let c="{\n";for(let t=0;t<=1;t+=l){const r=e+(n-e)*o(t);c+=100*t+`%{${a(r,1-r)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,h=k(t),{stylesheet:p,rules:d}=B.get(h)||function(t,e){const n={stylesheet:M(e),rules:{}};return B.set(t,n),n}(h,t);d[f]||(d[f]=!0,p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${i}ms 1 both`,Z+=1,f}function G(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),Z-=i,Z||b((()=>{Z||(B.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),B.clear())})))}function K(n,r,i,o){if(!r)return t;const a=n.getBoundingClientRect();if(r.left===a.left&&r.right===a.right&&r.top===a.top&&r.bottom===a.bottom)return t;const{delay:s=0,duration:l=300,easing:c=e,start:u=y()+s,end:f=u+l,tick:h=t,css:p}=i(n,{from:r,to:a},o);let d,m=!0,g=!1;function v(){p&&G(n,d),m=!1}return $((t=>{if(!g&&t>=u&&(g=!0),g&&t>=f&&(h(1,0),v()),!m)return!1;if(g){const e=0+1*c((t-u)/l);h(e,1-e)}return!0})),p&&(d=X(n,0,1,l,s,c,p)),s||(g=!0),h(0,1),v}function Q(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),i="none"===r.transform?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,i)}}function J(t){W=t}function tt(){if(!W)throw new Error("Function called outside component initialization");return W}function et(t){tt().$$.on_mount.push(t)}function nt(){const t=tt();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=V(e,n,{cancelable:r});return i.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function rt(t){return tt().$$.context.get(t)}const it=[],ot=[],at=[],st=[],lt=Promise.resolve();let ct=!1;function ut(t){at.push(t)}function ft(t){st.push(t)}const ht=new Set;let pt,dt=0;function mt(){const t=W;do{for(;dt<it.length;){const t=it[dt];dt++,J(t),gt(t.$$)}for(J(null),it.length=0,dt=0;ot.length;)ot.pop()();for(let t=0;t<at.length;t+=1){const e=at[t];ht.has(e)||(ht.add(e),e())}at.length=0}while(it.length);for(;st.length;)st.pop()();ct=!1,ht.clear(),J(t)}function gt(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ut)}}function vt(){return pt||(pt=Promise.resolve(),pt.then((()=>{pt=null}))),pt}function yt(t,e,n){t.dispatchEvent(V(`${e?"intro":"outro"}${n}`))}const bt=new Set;let xt;function wt(){xt={r:0,c:[],p:xt}}function $t(){xt.r||i(xt.c),xt=xt.p}function _t(t,e){t&&t.i&&(bt.delete(t),t.i(e))}function kt(t,e,n,r){if(t&&t.o){if(bt.has(t))return;bt.add(t),xt.c.push((()=>{bt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const Mt={duration:0};function Ct(n,r,i){let a,s,l=r(n,i),c=!1,u=0;function f(){a&&G(n,a)}function h(){const{delay:r=0,duration:i=300,easing:o=e,tick:h=t,css:p}=l||Mt;p&&(a=X(n,0,1,i,r,o,p,u++)),h(0,1);const d=y()+r,m=d+i;s&&s.abort(),c=!0,ut((()=>yt(n,!0,"start"))),s=$((t=>{if(c){if(t>=m)return h(1,0),yt(n,!0,"end"),f(),c=!1;if(t>=d){const e=o((t-d)/i);h(e,1-e)}}return c}))}let p=!1;return{start(){p||(p=!0,G(n),o(l)?(l=l(),vt().then(h)):h())},invalidate(){p=!1},end(){c&&(f(),c=!1)}}}function Nt(t,e){t.f(),function(t,e){t.d(1),e.delete(t.key)}(t,e)}function St(t,e,n,r,i,o,a,s,l,c,u,f){let h=t.length,p=o.length,d=h;const m={};for(;d--;)m[t[d].key]=d;const g=[],v=new Map,y=new Map;for(d=p;d--;){const t=f(i,o,d),s=n(t);let l=a.get(s);l?r&&l.p(t,e):(l=c(s,t),l.c()),v.set(s,g[d]=l),s in m&&y.set(s,Math.abs(d-m[s]))}const b=new Set,x=new Set;function w(t){_t(t,1),t.m(s,u),a.set(t.key,t),u=t.first,p--}for(;h&&p;){const e=g[p-1],n=t[h-1],r=e.key,i=n.key;e===n?(u=e.first,h--,p--):v.has(i)?!a.has(r)||b.has(r)?w(e):x.has(i)?h--:y.get(r)>y.get(i)?(x.add(r),w(e)):(b.add(i),h--):(l(n,a),h--)}for(;h--;){const e=t[h];v.has(e.key)||l(e,a)}for(;p;)w(g[p-1]);return g}function Tt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function At(t){t&&t.c()}function zt(t,e,r,a){const{fragment:s,on_mount:l,on_destroy:c,after_update:u}=t.$$;s&&s.m(e,r),a||ut((()=>{const e=l.map(n).filter(o);c?c.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(ut)}function Dt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function jt(t,e){-1===t.$$.dirty[0]&&(it.push(t),ct||(ct=!0,lt.then(mt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Et(e,n,o,a,s,l,c,u=[-1]){const f=W;J(e);const h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};c&&c(h.root);let p=!1;if(h.ctx=o?o(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),p&&jt(e,t)),n})):[],h.update(),p=!0,i(h.before_update),h.fragment=!!a&&a(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(N)}else h.fragment&&h.fragment.c();n.intro&&_t(e.$$.fragment),zt(e,n.target,n.anchor,n.customElement),mt()}J(f)}class Lt{$destroy(){Dt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Pt(e){let n,r,i,o,a,s,l,c,u,f,h,p,d;return{c(){n=T("header"),r=T("div"),i=T("div"),i.innerHTML='<a class="logo_anchor svelte-14bps0i" href="https://css.seas.upenn.edu/"><img class="logo_img svelte-14bps0i" src="https://css.seas.upenn.edu/wp-content/uploads/2021/09/WEBSITE-LOGO.png" alt="Computational Social Science Lab" id="logo"/></a>',o=D(),a=T("div"),a.innerHTML='<nav id="top-menu-nav"><ul id="top-menu" class="nav svelte-14bps0i"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-2731 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/about/">About</a> \n                        <ul class="sub-menu svelte-14bps0i"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1554 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/about/lab/">The Lab</a></li> \n                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2232 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/about/community/">CSS Community</a></li></ul></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1747 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/people/">People</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-37 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/research/">Research</a> \n                        <ul class="sub-menu svelte-14bps0i"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-735 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/project/penn-map/">PennMAP</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-292 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/project/virtual-lab/">Group Dynamics</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-291 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/project/covid-philadelphia/">COVID-Philadelphia</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-377 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/project/common-sense/">Common Sense</a></li></ul></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-344 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/partnerships/">Partners</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-58 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/publications/">Publications</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-105 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/blog-news-events/">News</a></li></ul></nav>',s=D(),l=T("div"),c=T("nav"),u=T("div"),u.innerHTML='<div class="line svelte-14bps0i"></div> \n                    <div class="line svelte-14bps0i"></div> \n                    <div class="line svelte-14bps0i"></div>',f=D(),h=T("ul"),h.innerHTML='<li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/about/">About</a> \n                        <ul class="sub-menu-mobile"><li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/about/lab/">The Lab</a></li> \n                            <li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/about/community/">CSS Community</a></li></ul></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/people/">People</a></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/research/">Research</a> \n                        <ul class="sub-menu-mobile"><li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/project/penn-map/">PennMAP</a></li> \n                            <li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/project/virtual-lab/">Group Dynamics</a></li> \n                            <li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/project/covid-philadelphia/">COVID-Philadelphia</a></li> \n                            <li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/project/common-sense/">Common Sense</a></li></ul></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/partnerships/">Partners</a></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/publications/">Publications</a></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/blog-news-events/">News</a></li>',R(i,"class","logo_container svelte-14bps0i"),R(a,"id","et-top-navigation"),R(a,"class","svelte-14bps0i"),R(u,"class","icon svelte-14bps0i"),R(h,"id","nav-mobile"),R(h,"class","nav-mobile nav-mobile-hidden svelte-14bps0i"),R(c,"id","top-menu-nav-mobile"),R(c,"class","svelte-14bps0i"),R(l,"id","et-top-navigation-mobile"),R(l,"class","svelte-14bps0i"),R(r,"class","container clearfix et_menu_container svelte-14bps0i"),R(n,"id","main-header"),R(n,"data-height-onload","84"),R(n,"data-height-loaded","true"),R(n,"data-fixed-height-onload","84"),O(n,"top","0px"),R(n,"class","svelte-14bps0i")},m(t,m){C(t,n,m),_(n,r),_(r,i),_(r,o),_(r,a),_(r,s),_(r,l),_(l,c),_(c,u),_(c,f),_(c,h),p||(d=E(u,"click",e[0]),p=!0)},p:t,i:t,o:t,d(t){t&&N(n),p=!1,d()}}}function Rt(t){let e=null;return et((()=>{e=document.getElementById("nav-mobile")})),[function(t){const{classList:n}=e;n.contains("nav-mobile-active")?(n.remove("nav-mobile-active"),n.add("nav-mobile-hidden")):(n.add("nav-mobile-active"),n.remove("nav-mobile-hidden"))}]}class It extends Lt{constructor(t){super(),Et(this,t,Rt,Pt,a,{})}}function Ot(e){let n;return{c(){n=T("footer"),n.innerHTML='<div class="et_builder_inner_content et_pb_gutters3"><div class="et_pb_section et_pb_section_0_tb_footer et_pb_with_background et_section_regular et_pb_section--with-menu svelte-16zif5j"><div class="et_pb_row et_pb_row_0_tb_footer et_pb_row--with-menu et_pb_row_4col svelte-16zif5j" style="z-index: 3;"><div class="et_pb_column et_pb_column_1_4 et_pb_column_0_tb_footer global-footer-column-1 et_pb_css_mix_blend_mode_passthrough svelte-16zif5j"><div class="et_pb_module et_pb_image et_pb_image_0_tb_footer et_pb_image_sticky svelte-16zif5j"><a href="https://www.seas.upenn.edu/" target="_blank" class="svelte-16zif5j"><span class="et_pb_image_wrap  svelte-16zif5j"><img loading="lazy" width="480" height="123" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas-300x77.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3438 svelte-16zif5j"/></span></a></div> \n                    <div class="et_pb_module et_pb_image et_pb_image_1_tb_footer et_pb_image_sticky svelte-16zif5j"><a href="https://www.asc.upenn.edu/" target="_blank" class="svelte-16zif5j"><span class="et_pb_image_wrap  svelte-16zif5j"><img loading="lazy" width="480" height="123" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc-300x77.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3440 svelte-16zif5j"/></span></a></div> \n                    <div class="et_pb_module et_pb_image et_pb_image_2_tb_footer et_pb_image_sticky svelte-16zif5j"><a href="https://www.wharton.upenn.edu/" target="_blank" class="svelte-16zif5j"><span class="et_pb_image_wrap  svelte-16zif5j"><img loading="lazy" width="480" height="111" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton-300x69.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3439 svelte-16zif5j"/></span></a></div></div> \n\n            <div class="et_pb_column et_pb_column_1_4 et_pb_column_1_tb_footer global-footer-column-2 et_pb_css_mix_blend_mode_passthrough et_pb_column--with-menu svelte-16zif5j"><div class="et_pb_module et_pb_text et_pb_text_0_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><h2 class="svelte-16zif5j">Navigate</h2></div></div> \n                <div class="et_pb_module et_pb_divider et_pb_divider_0_tb_footer et_pb_divider_position_ et_pb_space svelte-16zif5j"><div class="et_pb_divider_internal svelte-16zif5j"></div></div> \n                <div class="et_pb_module et_pb_menu et_pb_menu_0_tb_footer footer-vertical-menu et_pb_bg_layout_light et_pb_text_align_left et_dropdown_animation_fade et_pb_menu--without-logo et_pb_menu--style-left_aligned svelte-16zif5j"><div class="et_pb_menu_inner_container clearfix"><div class="et_pb_menu__wrap"><div class="et_pb_menu__menu svelte-16zif5j"><nav class="et-menu-nav svelte-16zif5j"><ul id="menu-footer-menu-new" class="et-menu nav svelte-16zif5j"><li id="menu-item-3425" class="et_pb_menu_page_id-2233 menu-item menu-item-type-post_type menu-item-object-page menu-item-3425 svelte-16zif5j"><a href="https://css.seas.upenn.edu/about/" class="svelte-16zif5j">About</a></li> \n                                        <li id="menu-item-3426" class="et_pb_menu_page_id-1732 menu-item menu-item-type-post_type menu-item-object-page menu-item-3426 svelte-16zif5j"><a href="https://css.seas.upenn.edu/people/" class="svelte-16zif5j">People</a></li> \n                                        <li id="menu-item-3430" class="et_pb_menu_page_id-22 menu-item menu-item-type-post_type menu-item-object-page menu-item-3430 svelte-16zif5j"><a href="https://css.seas.upenn.edu/research/" class="svelte-16zif5j">Research</a></li> \n                                        <li id="menu-item-3428" class="et_pb_menu_page_id-65 menu-item menu-item-type-post_type menu-item-object-page menu-item-3428 svelte-16zif5j"><a href="https://css.seas.upenn.edu/partnerships/" class="svelte-16zif5j">Partners</a></li> \n                                        <li id="menu-item-3429" class="et_pb_menu_page_id-52 menu-item menu-item-type-post_type menu-item-object-page menu-item-3429 svelte-16zif5j"><a href="https://css.seas.upenn.edu/publications/" class="svelte-16zif5j">Publications</a></li> \n                                        <li id="menu-item-3427" class="et_pb_menu_page_id-92 menu-item menu-item-type-post_type menu-item-object-page menu-item-3427 svelte-16zif5j"><a href="https://css.seas.upenn.edu/blog-news-events/" class="svelte-16zif5j">News</a></li></ul></nav></div></div></div></div></div> \n    \n    <div class="et_pb_column et_pb_column_1_4 et_pb_column_2_tb_footer global-footer-column-3 et_pb_css_mix_blend_mode_passthrough svelte-16zif5j"><div class="et_pb_module et_pb_text et_pb_text_1_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><h2 class="svelte-16zif5j">Contact</h2></div></div> \n        <div class="et_pb_module et_pb_divider et_pb_divider_1_tb_footer et_pb_divider_position_ et_pb_space svelte-16zif5j"><div class="et_pb_divider_internal svelte-16zif5j"></div></div> \n        <div class="et_pb_module et_pb_text et_pb_text_2_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><p class="svelte-16zif5j">3401 Walnut Street<br/>Suite 417B<br/>Philadelphia PA, 19104</p> \n                <p class="svelte-16zif5j">CSSLab@seas.upenn.edu</p> \n                <p class="svelte-16zif5j">(215) 573-7098</p></div></div></div></div> \n    <div class="et_pb_row et_pb_row_1_tb_footer et_pb_equal_columns svelte-16zif5j"><div class="et_pb_column et_pb_column_4_4 et_pb_column_4_tb_footer et_pb_css_mix_blend_mode_passthrough et-last-child"><div class="et_pb_module et_pb_text et_pb_text_4_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><p style="text-align: center;" class="svelte-16zif5j"><a href="https://www.upenn.edu/" class="svelte-16zif5j">Penn Homepage</a> \n                        <a href="https://www.upenn.edu/about/disclaimer" class="svelte-16zif5j">Disclaimer</a> \n                        <a href="https://www.publicsafety.upenn.edu/contact/" class="svelte-16zif5j">Emergency Services</a> \n                        <a href="https://www.upenn.edu/about/privacy-policy" class="svelte-16zif5j">Privacy Policy</a> \n                        <a href="https://accessibility.web-resources.upenn.edu/get-help" class="svelte-16zif5j">Report Accessibility Issues and Get Help</a> \n                        <a href="https://www.upenn.edu/about/report-copyright-infringement" class="svelte-16zif5j">Report Copyright Infringement</a></p></div></div> \n            <div class="et_pb_module et_pb_text et_pb_text_5_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><p style="text-align: center;" class="svelte-16zif5j"><em><strong></strong></em></p> \n                    <p style="text-align: center;" class="svelte-16zif5j"><em><a href="https://css.seas.upenn.edu/research-assistant-positions/" class="svelte-16zif5j"><strong>Interested in working at the CSSLab?</strong> Click here to view opportunities for Penn students</a></em></p></div></div></div></div></div></div>',R(n,"class","et-l et-l--footer svelte-16zif5j")},m(t,e){C(t,n,e)},p:t,i:t,o:t,d(t){t&&N(n)}}}class Ft extends Lt{constructor(t){super(),Et(this,t,null,Ot,a,{})}}const qt=[];function Yt(e,n=t){let r;const i=new Set;function o(t){if(a(e,t)&&(e=t,r)){const t=!qt.length;for(const t of i)t[1](),qt.push(t,e);if(t){for(let t=0;t<qt.length;t+=2)qt[t][0](qt[t+1]);qt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const l=[a,s];return i.add(l),1===i.size&&(r=n(o)||t),a(e),()=>{i.delete(l),0===i.size&&(r(),r=null)}}}}function Ut(e,n,r){const a=!Array.isArray(e),l=a?[e]:e,c=n.length<2;return u=e=>{let r=!1;const u=[];let f=0,h=t;const p=()=>{if(f)return;h();const r=n(a?u[0]:u,e);c?e(r):h=o(r)?r:t},d=l.map(((t,e)=>s(t,(t=>{u[e]=t,f&=~(1<<e),r&&p()}),(()=>{f|=1<<e}))));return r=!0,p(),function(){i(d),h()}},{subscribe:Yt(r,u).subscribe};var u}function Ht(t){return 0===(e=t)||e?Array.isArray(t)?e=>t.map((t=>"function"!=typeof t?e[t]:t(e))):"function"!=typeof t?e=>e[t]:t:null;var e}function Vt(t,e={}){return function(t){const e={};for(const n of t){if(Object(n)!==n)throw new TypeError("iterable for fromEntries should yield objects");const{0:t,1:r}=n;Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r})}return e}(Object.entries(t).filter((([t,n])=>void 0!==n&&void 0===e[t])))}function Bt(t,e){if(!Array.isArray(t))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const n={},r=Object.keys(e),i=r.length;let o,a,s,l,c,u,f,h;const p=t.length;for(o=0;o<i;o+=1){for(l=r[o],f=e[l],c=null,u=null,a=0;a<p;a+=1)if(h=f(t[a]),Array.isArray(h)){const t=h.length;for(s=0;s<t;s+=1)!1!==h[s]&&void 0!==h[s]&&null!==h[s]&&!1===Number.isNaN(h[s])&&((null===c||h[s]<c)&&(c=h[s]),(null===u||h[s]>u)&&(u=h[s]))}else!1!==h&&null!=h&&!1===Number.isNaN(h)&&((null===c||h<c)&&(c=h),(null===u||h>u)&&(u=h));n[l]=[c,u]}return n}function Wt(t,e,n){const r=Object.keys(n).reduce(((t,r)=>{const i=function(t){return"function"==typeof t.bandwidth?"ordinal":(e=Object.keys(t),n=["domain","range","unknown","copy"],e.length===n.length&&e.every((t=>n.includes(t)))?"ordinal":"other");var e,n}(n[r]);return t[i]||(t[i]={}),t[i][r]=e[r],t}),{ordinal:!1,other:!1});let i={};return r.ordinal&&(i=function(t,e,{sort:n=!1}={}){if(!Array.isArray(t))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const r={},i=Object.keys(e),o=i.length;let a,s,l,c,u,f,h;const p=t.length;for(a=0;a<o;a+=1){for(h=new Set,c=i[a],u=e[c],s=0;s<p;s+=1)if(f=u(t[s]),Array.isArray(f)){const t=f.length;for(l=0;l<t;l+=1)h.add(f[l])}else h.add(f);const o=Array.from(h);r[c]=!0===n?o.sort():o}return r}(t,r.ordinal)),r.other&&(i={...i,...Bt(t,r.other)}),i}function Zt(t){return function([e,n]){return"function"==typeof n&&(n=n(e[t])),e?function(t=[],e){return!0===Array.isArray(e)?e.map(((e,n)=>null===e?t[n]:e)):t}(e[t],n):n}}function Xt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gt(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kt(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=Xt,n=(e,n)=>Xt(t(e),n),r=(e,n)=>t(e)-n):(e=t===Xt||t===Gt?t:Qt,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function Qt(){return 0}const Jt=Kt(Xt).right;Kt((function(t){return null===t?NaN:+t})).center;var te=Jt;function ee(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class ne{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}class re extends Map{constructor(t,e=oe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(ie(this,t))}has(t){return super.has(ie(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);t.has(r)&&(n=t.get(r),t.delete(r));return n}(this,t))}}function ie({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function oe(t){return null!==t&&"object"==typeof t?t.valueOf():t}function ae(t){return t}function se(t,...e){return ue(t,ae,ae,e)}function le(t,...e){return ue(t,Array.from,ae,e)}function ce(t,e,...n){return ue(t,ae,e,n)}function ue(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new re,s=r[o++];let l=-1;for(const t of i){const e=s(t,++l,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function fe(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}var he=Math.sqrt(50),pe=Math.sqrt(10),de=Math.sqrt(2);function me(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=he?10:o>=pe?5:o>=de?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=he?10:o>=pe?5:o>=de?2:1)}function ge(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=he?i*=10:o>=pe?i*=5:o>=de&&(i*=2),e<t?-i:i}function ve(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function ye(t,e=Xt){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=Xt);const i=(t,r)=>e(n[t],n[r]);let o,a;return Uint32Array.from(n,((t,e)=>e)).sort(e===Xt?(t,e)=>fe(n[t],n[e]):function(t=Xt){if(t===Xt)return fe;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}(i)).forEach(((t,e)=>{const n=i(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,a=e),r[t]=a):r[t]=NaN})),r}function be(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function xe(t){if(!(i=t.length))return[];for(var e=-1,n=function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}(t,we),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function we(t){return t.length}function $e(){return xe(arguments)}function _e(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function ke(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const Me=Symbol("implicit");function Ce(){var t=new re,e=[],n=[],r=Me;function i(i){let o=t.get(i);if(void 0===o){if(r!==Me)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new re;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Ce(e,n).unknown(r)},_e.apply(i,arguments),i}function Ne(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Se(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Te(){}var Ae=.7,ze=1/Ae,De="\\s*([+-]?\\d+)\\s*",je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Le=/^#([0-9a-f]{3,8})$/,Pe=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),Re=new RegExp(`^rgb\\(${Ee},${Ee},${Ee}\\)$`),Ie=new RegExp(`^rgba\\(${De},${De},${De},${je}\\)$`),Oe=new RegExp(`^rgba\\(${Ee},${Ee},${Ee},${je}\\)$`),Fe=new RegExp(`^hsl\\(${je},${Ee},${Ee}\\)$`),qe=new RegExp(`^hsla\\(${je},${Ee},${Ee},${je}\\)$`),Ye={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ue(){return this.rgb().formatHex()}function He(){return this.rgb().formatRgb()}function Ve(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Le.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Be(e):3===n?new Ge(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?We(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?We(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Pe.exec(t))?new Ge(e[1],e[2],e[3],1):(e=Re.exec(t))?new Ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ie.exec(t))?We(e[1],e[2],e[3],e[4]):(e=Oe.exec(t))?We(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Fe.exec(t))?nn(e[1],e[2]/100,e[3]/100,1):(e=qe.exec(t))?nn(e[1],e[2]/100,e[3]/100,e[4]):Ye.hasOwnProperty(t)?Be(Ye[t]):"transparent"===t?new Ge(NaN,NaN,NaN,0):null}function Be(t){return new Ge(t>>16&255,t>>8&255,255&t,1)}function We(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ge(t,e,n,r)}function Ze(t){return t instanceof Te||(t=Ve(t)),t?new Ge((t=t.rgb()).r,t.g,t.b,t.opacity):new Ge}function Xe(t,e,n,r){return 1===arguments.length?Ze(t):new Ge(t,e,n,null==r?1:r)}function Ge(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ke(){return`#${en(this.r)}${en(this.g)}${en(this.b)}`}function Qe(){const t=Je(this.opacity);return`${1===t?"rgb(":"rgba("}${tn(this.r)}, ${tn(this.g)}, ${tn(this.b)}${1===t?")":`, ${t})`}`}function Je(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function tn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function en(t){return((t=tn(t))<16?"0":"")+t.toString(16)}function nn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new on(t,e,n,r)}function rn(t){if(t instanceof on)return new on(t.h,t.s,t.l,t.opacity);if(t instanceof Te||(t=Ve(t)),!t)return new on;if(t instanceof on)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new on(a,s,l,t.opacity)}function on(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function an(t){return(t=(t||0)%360)<0?t+360:t}function sn(t){return Math.max(0,Math.min(1,t||0))}function ln(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Ne(Te,Ve,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ue,formatHex:Ue,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return rn(this).formatHsl()},formatRgb:He,toString:He}),Ne(Ge,Xe,Se(Te,{brighter(t){return t=null==t?ze:Math.pow(ze,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Ae:Math.pow(Ae,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ge(tn(this.r),tn(this.g),tn(this.b),Je(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ke,formatHex:Ke,formatHex8:function(){return`#${en(this.r)}${en(this.g)}${en(this.b)}${en(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Qe,toString:Qe})),Ne(on,(function(t,e,n,r){return 1===arguments.length?rn(t):new on(t,e,n,null==r?1:r)}),Se(Te,{brighter(t){return t=null==t?ze:Math.pow(ze,t),new on(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Ae:Math.pow(Ae,t),new on(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ge(ln(t>=240?t-240:t+120,i,r),ln(t,i,r),ln(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new on(an(this.h),sn(this.s),sn(this.l),Je(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Je(this.opacity);return`${1===t?"hsl(":"hsla("}${an(this.h)}, ${100*sn(this.s)}%, ${100*sn(this.l)}%${1===t?")":`, ${t})`}`}}));var cn=t=>()=>t;function un(t){return 1==(t=+t)?fn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):cn(isNaN(e)?n:e)}}function fn(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):cn(isNaN(t)?e:t)}var hn=function t(e){var n=un(e);function r(t,e){var r=n((t=Xe(t)).r,(e=Xe(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=fn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function pn(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function dn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=wn(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function mn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function gn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vn(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=wn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var yn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bn=new RegExp(yn.source,"g");function xn(t,e){var n,r,i,o=yn.lastIndex=bn.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=yn.exec(t))&&(r=bn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:gn(n,r)})),o=bn.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function wn(t,e){var n,r=typeof e;return null==e||"boolean"===r?cn(e):("number"===r?gn:"string"===r?(n=Ve(e))?(e=n,hn):xn:e instanceof Ve?hn:e instanceof Date?mn:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?pn:Array.isArray(e)?dn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?vn:gn)(t,e)}function $n(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function _n(t,e){void 0===e&&(e=t,t=wn);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function kn(t){return+t}var Mn=[0,1];function Cn(t){return t}function Nn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Sn(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Nn(i,r),o=n(a,o)):(r=Nn(r,i),o=n(o,a)),function(t){return o(r(t))}}function Tn(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Nn(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=te(t,e,1,r)-1;return o[n](i[n](e))}}function An(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function zn(){var t,e,n,r,i,o,a=Mn,s=Mn,l=wn,c=Cn;function u(){var t=Math.min(a.length,s.length);return c!==Cn&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?Tn:Sn,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,l)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),gn)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,kn),u()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),l=$n,u()},f.clamp=function(t){return arguments.length?(c=!!t||Cn,u()):c!==Cn},f.interpolate=function(t){return arguments.length?(l=t,u()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,u()}}function Dn(){return zn()(Cn,Cn)}function jn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function En(t){return(t=jn(Math.abs(t)))?t[1]:NaN}var Ln,Pn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rn(t){if(!(e=Pn.exec(t)))throw new Error("invalid format: "+t);var e;return new In({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function In(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function On(t,e){var n=jn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Rn.prototype=In.prototype,In.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Fn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>On(100*t,e),r:On,s:function(t,e){var n=jn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ln=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+jn(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qn(t){return t}var Yn,Un,Hn,Vn=Array.prototype.map,Bn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Wn(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?qn:(e=Vn.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?qn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Vn.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Rn(t)).fill,n=t.align,f=t.sign,h=t.symbol,p=t.zero,d=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Fn[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?o:/[%p]/.test(y)?l:"",w=Fn[y],$=/[defgprs%]/.test(y);function _(t){var i,o,l,h=b,_=x;if("c"===y)_=w(t)+_,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),g),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==f&&(k=!1),h=(k?"("===f?f:c:"-"===f||"("===f?"":f)+h,_=("s"===y?Bn[8+Ln/3]:"")+_+(k&&"("===f?")":""),$)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){_=(46===l?a+t.slice(i+1):t.slice(i))+_,t=t.slice(0,i);break}}m&&!p&&(t=r(t,1/0));var M=h.length+t.length+_.length,C=M<d?new Array(d-M+1).join(e):"";switch(m&&p&&(t=r(C+t,C.length?d-_.length:1/0),C=""),n){case"<":t=h+t+_+C;break;case"=":t=h+C+t+_;break;case"^":t=C.slice(0,M=C.length>>1)+h+t+_+C.slice(M);break;default:t=C+h+t+_}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return t+""},_}return{format:f,formatPrefix:function(t,e){var n=f(((t=Rn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(En(e)/3))),i=Math.pow(10,-r),o=Bn[8+r/3];return function(t){return n(i*t)+o}}}}function Zn(t,e,n,r){var i,o=ge(t,e,n);switch((r=Rn(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(En(e)/3)))-En(Math.abs(t)))}(o,a))||(r.precision=i),Hn(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,En(e)-En(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-En(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Un(r)}function Xn(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=me(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),r=Math.round(e/a);for(n*a<t&&++n,r*a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),r=Math.round(e*a);for(n/a<t&&++n,r/a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Zn(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=me(l,c,n))===r)return o[a]=l,o[s]=c,e(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Gn(){var t=Dn();return t.copy=function(){return An(t,Gn())},_e.apply(t,arguments),Xn(t)}function Kn(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Qn(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Jn(t){return t<0?-t*t:t*t}function tr(t){var e=t(Cn,Cn),n=1;function r(){return 1===n?t(Cn,Cn):.5===n?t(Qn,Jn):t(Kn(n),Kn(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Xn(e)}function er(){var t=tr(zn());return t.copy=function(){return An(t,er()).exponent(t.exponent())},_e.apply(t,arguments),t}function nr(){return er.apply(null,arguments).exponent(.5)}function rr(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[te(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return rr().domain(e).range(n).unknown(t)},_e.apply(i,arguments)}Yn=Wn({thousands:",",grouping:[3],currency:["$",""]}),Un=Yn.format,Hn=Yn.formatPrefix;var ir=new Date,or=new Date;function ar(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return ar((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return ir.setTime(+e),or.setTime(+r),t(ir),t(or),Math.floor(n(ir,or))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var sr=ar((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));sr.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ar((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):sr:null};var lr=sr;sr.range;const cr=1e3,ur=6e4,fr=36e5,hr=864e5,pr=6048e5,dr=2592e6,mr=31536e6;var gr=ar((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*cr)}),(function(t,e){return(e-t)/cr}),(function(t){return t.getUTCSeconds()})),vr=gr;gr.range;var yr=ar((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*cr)}),(function(t,e){t.setTime(+t+e*ur)}),(function(t,e){return(e-t)/ur}),(function(t){return t.getMinutes()})),br=yr;yr.range;var xr=ar((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*cr-t.getMinutes()*ur)}),(function(t,e){t.setTime(+t+e*fr)}),(function(t,e){return(e-t)/fr}),(function(t){return t.getHours()})),wr=xr;xr.range;var $r=ar((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ur)/hr),(t=>t.getDate()-1)),_r=$r;function kr(t){return ar((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ur)/pr}))}$r.range;var Mr=kr(0),Cr=kr(1),Nr=kr(2),Sr=kr(3),Tr=kr(4),Ar=kr(5),zr=kr(6);Mr.range,Cr.range,Nr.range,Sr.range,Tr.range,Ar.range,zr.range;var Dr=ar((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),jr=Dr;Dr.range;var Er=ar((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Er.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ar((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Lr=Er;Er.range;var Pr=ar((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/hr}),(function(t){return t.getUTCDate()-1})),Rr=Pr;function Ir(t){return ar((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/pr}))}Pr.range;var Or=Ir(0),Fr=Ir(1),qr=Ir(2),Yr=Ir(3),Ur=Ir(4),Hr=Ir(5),Vr=Ir(6);Or.range,Fr.range,qr.range,Yr.range,Ur.range,Hr.range,Vr.range;var Br=ar((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Br.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ar((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Wr=Br;Br.range;const[Zr,Xr]=function(t,e,n,r,i,o){const a=[[vr,1,cr],[vr,5,5e3],[vr,15,15e3],[vr,30,3e4],[o,1,ur],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,fr],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,hr],[r,2,1728e5],[n,1,pr],[e,1,dr],[e,3,7776e6],[t,1,mr]];function s(e,n,r){const i=Math.abs(n-e)/r,o=Kt((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(ge(e/mr,n/mr,r));if(0===o)return lr.every(Math.max(ge(e,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}(Lr,jr,Mr,_r,wr,br);function Gr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Kr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Jr,ti,ei={"-":"",_:" ",0:"0"},ni=/^\s*\d+/,ri=/^%/,ii=/[\\^$*+?|[\]().{}]/g;function oi(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function ai(t){return t.replace(ii,"\\$&")}function si(t){return new RegExp("^(?:"+t.map(ai).join("|")+")","i")}function li(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function ci(t,e,n){var r=ni.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ui(t,e,n){var r=ni.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function fi(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function hi(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function pi(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function di(t,e,n){var r=ni.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function mi(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function gi(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vi(t,e,n){var r=ni.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function yi(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function bi(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function xi(t,e,n){var r=ni.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wi(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function $i(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function _i(t,e,n){var r=ni.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ki(t,e,n){var r=ni.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Mi(t,e,n){var r=ni.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ci(t,e,n){var r=ri.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ni(t,e,n){var r=ni.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Si(t,e,n){var r=ni.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Ti(t,e){return oi(t.getDate(),e,2)}function Ai(t,e){return oi(t.getHours(),e,2)}function zi(t,e){return oi(t.getHours()%12||12,e,2)}function Di(t,e){return oi(1+_r.count(Lr(t),t),e,3)}function ji(t,e){return oi(t.getMilliseconds(),e,3)}function Ei(t,e){return ji(t,e)+"000"}function Li(t,e){return oi(t.getMonth()+1,e,2)}function Pi(t,e){return oi(t.getMinutes(),e,2)}function Ri(t,e){return oi(t.getSeconds(),e,2)}function Ii(t){var e=t.getDay();return 0===e?7:e}function Oi(t,e){return oi(Mr.count(Lr(t)-1,t),e,2)}function Fi(t){var e=t.getDay();return e>=4||0===e?Tr(t):Tr.ceil(t)}function qi(t,e){return t=Fi(t),oi(Tr.count(Lr(t),t)+(4===Lr(t).getDay()),e,2)}function Yi(t){return t.getDay()}function Ui(t,e){return oi(Cr.count(Lr(t)-1,t),e,2)}function Hi(t,e){return oi(t.getFullYear()%100,e,2)}function Vi(t,e){return oi((t=Fi(t)).getFullYear()%100,e,2)}function Bi(t,e){return oi(t.getFullYear()%1e4,e,4)}function Wi(t,e){var n=t.getDay();return oi((t=n>=4||0===n?Tr(t):Tr.ceil(t)).getFullYear()%1e4,e,4)}function Zi(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+oi(e/60|0,"0",2)+oi(e%60,"0",2)}function Xi(t,e){return oi(t.getUTCDate(),e,2)}function Gi(t,e){return oi(t.getUTCHours(),e,2)}function Ki(t,e){return oi(t.getUTCHours()%12||12,e,2)}function Qi(t,e){return oi(1+Rr.count(Wr(t),t),e,3)}function Ji(t,e){return oi(t.getUTCMilliseconds(),e,3)}function to(t,e){return Ji(t,e)+"000"}function eo(t,e){return oi(t.getUTCMonth()+1,e,2)}function no(t,e){return oi(t.getUTCMinutes(),e,2)}function ro(t,e){return oi(t.getUTCSeconds(),e,2)}function io(t){var e=t.getUTCDay();return 0===e?7:e}function oo(t,e){return oi(Or.count(Wr(t)-1,t),e,2)}function ao(t){var e=t.getUTCDay();return e>=4||0===e?Ur(t):Ur.ceil(t)}function so(t,e){return t=ao(t),oi(Ur.count(Wr(t),t)+(4===Wr(t).getUTCDay()),e,2)}function lo(t){return t.getUTCDay()}function co(t,e){return oi(Fr.count(Wr(t)-1,t),e,2)}function uo(t,e){return oi(t.getUTCFullYear()%100,e,2)}function fo(t,e){return oi((t=ao(t)).getUTCFullYear()%100,e,2)}function ho(t,e){return oi(t.getUTCFullYear()%1e4,e,4)}function po(t,e){var n=t.getUTCDay();return oi((t=n>=4||0===n?Ur(t):Ur.ceil(t)).getUTCFullYear()%1e4,e,4)}function mo(){return"+0000"}function go(){return"%"}function vo(t){return+t}function yo(t){return Math.floor(+t/1e3)}function bo(t){return new Date(t)}function xo(t){return t instanceof Date?+t:+new Date(+t)}function wo(t,e,n,r,i,o,a,s,l,c){var u=Dn(),f=u.invert,h=u.domain,p=c(".%L"),d=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function w(t){return(l(t)<t?p:s(t)<t?d:a(t)<t?m:o(t)<t?g:r(t)<t?i(t)<t?v:y:n(t)<t?b:x)(t)}return u.invert=function(t){return new Date(f(t))},u.domain=function(t){return arguments.length?h(Array.from(t,xo)):h().map(bo)},u.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?w:c(e)},u.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h(function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}(n,t)):u},u.copy=function(){return An(u,wo(t,e,n,r,i,o,a,s,l,c))},u}function $o(){return _e.apply(wo(Zr,Xr,Lr,jr,Mr,_r,wr,br,vr,ti).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _o(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ko(){var t,e,n,r,i,o,a,s=0,l=.5,c=1,u=1,f=Cn,h=!1;function p(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(u*t<u*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function d(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=_n(t,[n,r,i]),p):[f(0),f(.5),f(1)]}}return p.domain=function(a){return arguments.length?([s,l,c]=a,t=o(s=+s),e=o(l=+l),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,p):[s,l,c]},p.clamp=function(t){return arguments.length?(h=!!t,p):h},p.interpolator=function(t){return arguments.length?(f=t,p):f},p.range=d(wn),p.rangeRound=d($n),p.unknown=function(t){return arguments.length?(a=t,p):a},function(a){return o=a,t=a(s),e=a(l),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,p}}function Mo(){var t=Xn(ko()(Cn));return t.copy=function(){return _o(t,Mo())},ke.apply(t,arguments)}!function(t){Jr=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=si(i),u=li(i),f=si(o),h=li(o),p=si(a),d=li(a),m=si(s),g=li(s),v=si(l),y=li(l),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Ti,e:Ti,f:Ei,g:Vi,G:Wi,H:Ai,I:zi,j:Di,L:ji,m:Li,M:Pi,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:vo,s:yo,S:Ri,u:Ii,U:Oi,V:qi,w:Yi,W:Ui,x:null,X:null,y:Hi,Y:Bi,Z:Zi,"%":go},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Xi,e:Xi,f:to,g:fo,G:po,H:Gi,I:Ki,j:Qi,L:Ji,m:eo,M:no,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:vo,s:yo,S:ro,u:io,U:oo,V:so,w:lo,W:co,x:null,X:null,y:uo,Y:ho,Z:mo,"%":go},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return k(t,e,n,r)},d:bi,e:bi,f:Mi,g:mi,G:di,H:wi,I:wi,j:xi,L:ki,m:yi,M:$i,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:vi,Q:Ni,s:Si,S:_i,u:ui,U:fi,V:hi,w:ci,W:pi,x:function(t,e,r){return k(t,n,e,r)},X:function(t,e,n){return k(t,r,e,n)},y:mi,Y:di,Z:gi,"%":Ci};function $(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=ei[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function _(t,e){return function(n){var r,i,o=Qr(1900,void 0,1);if(k(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Kr(Qr(o.y,0,1))).getUTCDay(),r=i>4||0===i?Fr.ceil(r):Fr(r),r=Rr.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Gr(Qr(o.y,0,1))).getDay(),r=i>4||0===i?Cr.ceil(r):Cr(r),r=_r.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Kr(Qr(o.y,0,1)).getUTCDay():Gr(Qr(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Kr(o)):Gr(o)}}function k(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in ei?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=$(n,b),b.X=$(r,b),b.c=$(e,b),x.x=$(n,x),x.X=$(r,x),x.c=$(e,x),{format:function(t){var e=$(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=_(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=$(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=_(t+="",!0);return e.toString=function(){return t},e}}}(t),ti=Jr.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Co={x:Gn,y:Gn,z:Gn,r:nr};function No(t){return t}function So(t){return e=>Math.log(t*e)}function To(t){return e=>t*Math.exp(e)}function Ao(t){return e=>Math.sign(e)*Math.log1p(Math.abs(e/t))}function zo(t){return e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}function Do(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function jo(t,e){if("function"!=typeof t.range)throw new Error("Scale method `range` must be a function");if("function"!=typeof t.domain)throw new Error("Scale method `domain` must be a function");if(!Array.isArray(e))return t.domain();2!==t.domain().length&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",t.domain()),2!==t.range().length&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",t.range());const{lift:n,ground:r}=function(t){const e=function(t){return t.constant?"symlog":t.base?"log":t.exponent?.5===t.exponent()?"sqrt":"pow":"other"}(t);if("log"===e){const n=Math.sign(t.domain()[0]);return{lift:So(n),ground:To(n),scaleType:e}}if("pow"===e){const t=1;return{lift:Do(t),ground:Do(1/t),scaleType:e}}if("sqrt"===e){const t=.5;return{lift:Do(t),ground:Do(1/t),scaleType:e}}if("symlog"===e){const t=1;return{lift:Ao(t),ground:zo(t),scaleType:e}}return{lift:No,ground:No,scaleType:e}}(t),i=t.domain()[0],o="[object Date]"===Object.prototype.toString.call(i),[a,s]=t.domain().map((t=>n(o?t.getTime():t))),[l,c]=t.range(),u=e[0]||0,f=e[1]||0,h=(s-a)/(Math.abs(c-l)-u-f);return[a-u*h,f*h+s].map((t=>r(o?new Date(t):t)))}function Eo(t){return function([e,n,r,i,o,a,s,l,c,u]){if(null===n)return null;const f=function(t,e,n,r,i,o){return i?"function"==typeof i?i({width:e,height:n}):i:function(t,e,n,r,i){let o,a;return!0===i?(o=0,a=100):(o="r"===t?1:0,a="y"===t?n:"r"===t?25:e),!0===r?[a,o]:[o,a]}(t,e,n,r,o)}(t,s,l,a,c,u),h=e===Co[t]?e():e.copy();return h.domain(r),(!h.interpolator||"function"==typeof h.interpolator&&h.interpolator().name.startsWith("identity"))&&h.range(f),i&&h.domain(jo(h,i)),!0!==o&&"number"!=typeof o||("function"==typeof h.nice?h.nice("number"==typeof o?o:void 0):console.error(`[Layer Cake] You set \`${t}Nice: true\` but the ${t}Scale does not have a \`.nice\` method. Ignoring...`)),h}}function Lo([t,e]){return n=>{const r=t(n);return Array.isArray(r)?r.map((t=>e(t))):e(r)}}function Po([t]){if("function"==typeof t){if("function"==typeof t.range)return t.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const Ro=t=>({element:4&t[0],width:256&t[0],height:512&t[0],aspectRatio:1024&t[0],containerWidth:128&t[0],containerHeight:64&t[0]}),Io=t=>({element:t[2],width:t[8],height:t[9],aspectRatio:t[10],containerWidth:t[7],containerHeight:t[6]});function Oo(t){let e,n,r;const i=t[90].default,o=c(i,t,t[89],Io);return{c(){e=T("div"),o&&o.c(),R(e,"class","layercake-container svelte-1ll0j6t"),ut((()=>t[92].call(e))),O(e,"position",t[5],!1),O(e,"top","absolute"===t[5]?"0":null,!1),O(e,"right","absolute"===t[5]?"0":null,!1),O(e,"bottom","absolute"===t[5]?"0":null,!1),O(e,"left","absolute"===t[5]?"0":null,!1),O(e,"pointer-events",!1===t[4]?"none":null,!1)},m(i,a){C(i,e,a),o&&o.m(e,null),t[91](e),n=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=T("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=U();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=E(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=E(n.contentWindow,"resize",e)}),_(t,n),()=>{(r||i&&n.contentWindow)&&i(),N(n)}}(e,t[92].bind(e)),r=!0},p(t,n){o&&o.p&&(!r||1988&n[0]|134217728&n[2])&&h(o,i,t,t[89],r?f(i,t[89],n,Ro):p(t[89]),Io),32&n[0]&&O(e,"position",t[5],!1),32&n[0]&&O(e,"top","absolute"===t[5]?"0":null,!1),32&n[0]&&O(e,"right","absolute"===t[5]?"0":null,!1),32&n[0]&&O(e,"bottom","absolute"===t[5]?"0":null,!1),32&n[0]&&O(e,"left","absolute"===t[5]?"0":null,!1),16&n[0]&&O(e,"pointer-events",!1===t[4]?"none":null,!1)},i(t){r||(_t(o,t),r=!0)},o(t){kt(o,t),r=!1},d(r){r&&N(e),o&&o.d(r),t[91](null),n()}}}function Fo(t){let e,n,r=(!0===t[3]||"undefined"!=typeof window)&&Oo(t);return{c(){r&&r.c(),e=j()},m(t,i){r&&r.m(t,i),C(t,e,i),n=!0},p(t,n){!0===t[3]||"undefined"!=typeof window?r?(r.p(t,n),8&n[0]&&_t(r,1)):(r=Oo(t),r.c(),_t(r,1),r.m(e.parentNode,e)):r&&(wt(),kt(r,1,1,(()=>{r=null})),$t())},i(t){n||(_t(r),n=!0)},o(t){kt(r),n=!1},d(t){r&&r.d(t),t&&N(e)}}}function qo(t,e,n){let r,i,o,a,s,c,u,f,h,p,d,g,v,y,b,x,w,$,_,k,M,C,N,S,T,A,z,D,j,E,L,P,R,I,O,F,q,Y,U,H,V,{$$slots:B={},$$scope:W}=e,{ssr:Z=!1}=e,{pointerEvents:X=!0}=e,{position:G="relative"}=e,{percentRange:K=!1}=e,{width:Q}=e,{height:J}=e,{containerWidth:nt=Q||100}=e,{containerHeight:rt=J||100}=e,{element:it}=e,{x:at}=e,{y:st}=e,{z:lt}=e,{r:ct}=e,{data:ut=[]}=e,{xDomain:ft}=e,{yDomain:ht}=e,{zDomain:pt}=e,{rDomain:dt}=e,{xNice:mt=!1}=e,{yNice:gt=!1}=e,{zNice:vt=!1}=e,{rNice:yt=!1}=e,{xPadding:bt}=e,{yPadding:xt}=e,{zPadding:wt}=e,{rPadding:$t}=e,{xScale:_t=Co.x}=e,{yScale:kt=Co.y}=e,{zScale:Mt=Co.z}=e,{rScale:Ct=Co.r}=e,{xRange:Nt}=e,{yRange:St}=e,{zRange:Tt}=e,{rRange:At}=e,{xReverse:zt=!1}=e,{yReverse:Dt="function"!=typeof kt.bandwidth}=e,{zReverse:jt=!1}=e,{rReverse:Et=!1}=e,{padding:Lt={}}=e,{extents:Pt={}}=e,{flatData:Rt}=e,{custom:It={}}=e,Ot=!1;et((()=>{Ot=!0}));const Ft={},qt=Yt(K);l(t,qt,(t=>n(128,Y=t)));const Bt=Yt(nt);l(t,Bt,(t=>n(7,q=t)));const Xt=Yt(rt);l(t,Xt,(t=>n(6,F=t)));const Gt=Yt(Vt(Pt));l(t,Gt,(t=>n(127,O=t)));const Kt=Yt(ut);l(t,Kt,(t=>n(126,I=t)));const Qt=Yt(Rt||ut);l(t,Qt,(t=>n(125,R=t)));const Jt=Yt(Lt);l(t,Jt,(t=>n(124,P=t)));const te=Yt(Ht(at));l(t,te,(t=>n(123,L=t)));const ee=Yt(Ht(st));l(t,ee,(t=>n(122,E=t)));const ne=Yt(Ht(lt));l(t,ne,(t=>n(121,j=t)));const re=Yt(Ht(ct));l(t,re,(t=>n(120,D=t)));const ie=Yt(ft);l(t,ie,(t=>n(119,z=t)));const oe=Yt(ht);l(t,oe,(t=>n(118,A=t)));const ae=Yt(pt);l(t,ae,(t=>n(117,T=t)));const se=Yt(dt);l(t,se,(t=>n(116,S=t)));const le=Yt(mt);l(t,le,(t=>n(115,N=t)));const ce=Yt(gt);l(t,ce,(t=>n(114,C=t)));const ue=Yt(vt);l(t,ue,(t=>n(113,M=t)));const fe=Yt(yt);l(t,fe,(t=>n(112,k=t)));const he=Yt(zt);l(t,he,(t=>n(111,_=t)));const pe=Yt(Dt);l(t,pe,(t=>n(110,$=t)));const de=Yt(jt);l(t,de,(t=>n(109,w=t)));const me=Yt(Et);l(t,me,(t=>n(108,x=t)));const ge=Yt(bt);l(t,ge,(t=>n(107,b=t)));const ve=Yt(xt);l(t,ve,(t=>n(106,y=t)));const ye=Yt(wt);l(t,ye,(t=>n(105,v=t)));const be=Yt($t);l(t,be,(t=>n(104,g=t)));const xe=Yt(Nt);l(t,xe,(t=>n(103,d=t)));const we=Yt(St);l(t,we,(t=>n(102,p=t)));const $e=Yt(Tt);l(t,$e,(t=>n(101,h=t)));const _e=Yt(At);l(t,_e,(t=>n(100,f=t)));const ke=Yt(_t);l(t,ke,(t=>n(99,u=t)));const Me=Yt(kt);l(t,Me,(t=>n(98,c=t)));const Ce=Yt(Mt);l(t,Ce,(t=>n(97,s=t)));const Ne=Yt(Ct);l(t,Ne,(t=>n(96,a=t)));const Se=Yt(Ft);l(t,Se,(t=>n(94,i=t)));const Te=Yt(It);l(t,Te,(t=>n(95,o=t)));const Ae=Ut([te,ee,ne,re],(([t,e,n,r])=>{const i={};return t&&(i.x=t),e&&(i.y=e),n&&(i.z=n),r&&(i.r=r),i})),ze=Ut([Jt,Bt,Xt],(([t])=>Object.assign({top:0,right:0,bottom:0,left:0},t))),De=Ut([Bt,Xt,ze],(([t,e,n])=>{const r={};return r.top=n.top,r.right=t-n.right,r.bottom=e-n.bottom,r.left=n.left,r.width=r.right-r.left,r.height=r.bottom-r.top,r.width<=0&&!0===Ot&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),r.height<=0&&!0===Ot&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),r})),je=Ut([De],(([t])=>t.width));l(t,je,(t=>n(8,U=t)));const Ee=Ut([De],(([t])=>t.height));l(t,Ee,(t=>n(9,H=t)));const Le=Ut([Qt,Ae,Gt,ke,Me,Ne,Ce],(([t,e,n,r,i,o,a])=>{const s={x:r,y:i,r:o,z:a},l=Vt(e,n),c=Object.fromEntries(Object.keys(l).map((t=>[t,s[t]])));if(Object.keys(l).length>0){return{...Wt(t,l,c),...n}}return{}})),Pe=Ut([Le,ie],Zt("x")),Re=Ut([Le,oe],Zt("y")),Ie=Ut([Le,ae],Zt("z")),Oe=Ut([Le,se],Zt("r")),Fe=Ut([ke,Le,Pe,ge,le,he,je,Ee,xe,qt],Eo("x")),qe=Ut([te,Fe],Lo),Ye=Ut([Me,Le,Re,ve,ce,pe,je,Ee,we,qt],Eo("y")),Ue=Ut([ee,Ye],Lo),He=Ut([Ce,Le,Ie,ye,ue,de,je,Ee,$e,qt],Eo("z")),Ve=Ut([ne,He],Lo),Be=Ut([Ne,Le,Oe,be,fe,me,je,Ee,_e,qt],Eo("r")),We=Ut([re,Be],Lo),Ze=Ut([Fe],Po),Xe=Ut([Ye],Po),Ge=Ut([He],Po),Ke=Ut([Be],Po),Qe=Ut([je,Ee],(([t,e])=>t/e));return l(t,Qe,(t=>n(10,V=t))),t.$$set=t=>{"ssr"in t&&n(3,Z=t.ssr),"pointerEvents"in t&&n(4,X=t.pointerEvents),"position"in t&&n(5,G=t.position),"percentRange"in t&&n(51,K=t.percentRange),"width"in t&&n(52,Q=t.width),"height"in t&&n(53,J=t.height),"containerWidth"in t&&n(0,nt=t.containerWidth),"containerHeight"in t&&n(1,rt=t.containerHeight),"element"in t&&n(2,it=t.element),"x"in t&&n(54,at=t.x),"y"in t&&n(55,st=t.y),"z"in t&&n(56,lt=t.z),"r"in t&&n(57,ct=t.r),"data"in t&&n(58,ut=t.data),"xDomain"in t&&n(59,ft=t.xDomain),"yDomain"in t&&n(60,ht=t.yDomain),"zDomain"in t&&n(61,pt=t.zDomain),"rDomain"in t&&n(62,dt=t.rDomain),"xNice"in t&&n(63,mt=t.xNice),"yNice"in t&&n(64,gt=t.yNice),"zNice"in t&&n(65,vt=t.zNice),"rNice"in t&&n(66,yt=t.rNice),"xPadding"in t&&n(67,bt=t.xPadding),"yPadding"in t&&n(68,xt=t.yPadding),"zPadding"in t&&n(69,wt=t.zPadding),"rPadding"in t&&n(70,$t=t.rPadding),"xScale"in t&&n(71,_t=t.xScale),"yScale"in t&&n(72,kt=t.yScale),"zScale"in t&&n(73,Mt=t.zScale),"rScale"in t&&n(74,Ct=t.rScale),"xRange"in t&&n(75,Nt=t.xRange),"yRange"in t&&n(76,St=t.yRange),"zRange"in t&&n(77,Tt=t.zRange),"rRange"in t&&n(78,At=t.rRange),"xReverse"in t&&n(79,zt=t.xReverse),"yReverse"in t&&n(80,Dt=t.yReverse),"zReverse"in t&&n(81,jt=t.zReverse),"rReverse"in t&&n(82,Et=t.rReverse),"padding"in t&&n(83,Lt=t.padding),"extents"in t&&n(84,Pt=t.extents),"flatData"in t&&n(85,Rt=t.flatData),"custom"in t&&n(86,It=t.custom),"$$scope"in t&&n(89,W=t.$$scope)},t.$$.update=()=>{8388608&t.$$.dirty[1]&&at&&n(87,Ft.x=at,Ft),16777216&t.$$.dirty[1]&&st&&n(87,Ft.y=st,Ft),33554432&t.$$.dirty[1]&&lt&&n(87,Ft.z=lt,Ft),67108864&t.$$.dirty[1]&&ct&&n(87,Ft.r=ct,Ft),268435456&t.$$.dirty[1]&&ft&&n(87,Ft.xDomain=ft,Ft),536870912&t.$$.dirty[1]&&ht&&n(87,Ft.yDomain=ht,Ft),1073741824&t.$$.dirty[1]&&pt&&n(87,Ft.zDomain=pt,Ft),1&t.$$.dirty[2]&&dt&&n(87,Ft.rDomain=dt,Ft),8192&t.$$.dirty[2]&&Nt&&n(87,Ft.xRange=Nt,Ft),16384&t.$$.dirty[2]&&St&&n(87,Ft.yRange=St,Ft),32768&t.$$.dirty[2]&&Tt&&n(87,Ft.zRange=Tt,Ft),65536&t.$$.dirty[2]&&At&&n(87,Ft.rRange=At,Ft),1048576&t.$$.dirty[1]&&m(qt,Y=K,Y),1&t.$$.dirty[0]&&m(Bt,q=nt,q),2&t.$$.dirty[0]&&m(Xt,F=rt,F),4194304&t.$$.dirty[2]&&m(Gt,O=Vt(Pt),O),134217728&t.$$.dirty[1]&&m(Kt,I=ut,I),134217728&t.$$.dirty[1]|8388608&t.$$.dirty[2]&&m(Qt,R=Rt||ut,R),2097152&t.$$.dirty[2]&&m(Jt,P=Lt,P),8388608&t.$$.dirty[1]&&m(te,L=Ht(at),L),16777216&t.$$.dirty[1]&&m(ee,E=Ht(st),E),33554432&t.$$.dirty[1]&&m(ne,j=Ht(lt),j),67108864&t.$$.dirty[1]&&m(re,D=Ht(ct),D),268435456&t.$$.dirty[1]&&m(ie,z=ft,z),536870912&t.$$.dirty[1]&&m(oe,A=ht,A),1073741824&t.$$.dirty[1]&&m(ae,T=pt,T),1&t.$$.dirty[2]&&m(se,S=dt,S),2&t.$$.dirty[2]&&m(le,N=mt,N),4&t.$$.dirty[2]&&m(ce,C=gt,C),8&t.$$.dirty[2]&&m(ue,M=vt,M),16&t.$$.dirty[2]&&m(fe,k=yt,k),131072&t.$$.dirty[2]&&m(he,_=zt,_),262144&t.$$.dirty[2]&&m(pe,$=Dt,$),524288&t.$$.dirty[2]&&m(de,w=jt,w),1048576&t.$$.dirty[2]&&m(me,x=Et,x),32&t.$$.dirty[2]&&m(ge,b=bt,b),64&t.$$.dirty[2]&&m(ve,y=xt,y),128&t.$$.dirty[2]&&m(ye,v=wt,v),256&t.$$.dirty[2]&&m(be,g=$t,g),8192&t.$$.dirty[2]&&m(xe,d=Nt,d),16384&t.$$.dirty[2]&&m(we,p=St,p),32768&t.$$.dirty[2]&&m($e,h=Tt,h),65536&t.$$.dirty[2]&&m(_e,f=At,f),512&t.$$.dirty[2]&&m(ke,u=_t,u),1024&t.$$.dirty[2]&&m(Me,c=kt,c),2048&t.$$.dirty[2]&&m(Ce,s=Mt,s),4096&t.$$.dirty[2]&&m(Ne,a=Ct,a),16777216&t.$$.dirty[2]&&m(Te,o=It,o),33554432&t.$$.dirty[2]&&m(Se,i=Ft,i),67108864&t.$$.dirty[2]&&function(t,e){tt().$$.context.set(t,e)}("LayerCake",r)},n(88,r={activeGetters:Ae,width:je,height:Ee,percentRange:qt,aspectRatio:Qe,containerWidth:Bt,containerHeight:Xt,x:te,y:ee,z:ne,r:re,custom:Te,data:Kt,xNice:le,yNice:ce,zNice:ue,rNice:fe,xReverse:he,yReverse:pe,zReverse:de,rReverse:me,xPadding:ge,yPadding:ve,zPadding:ye,rPadding:be,padding:ze,flatData:Qt,extents:Le,xDomain:Pe,yDomain:Re,zDomain:Ie,rDomain:Oe,xRange:Ze,yRange:Xe,zRange:Ge,rRange:Ke,config:Se,xScale:Fe,xGet:qe,yScale:Ye,yGet:Ue,zScale:He,zGet:Ve,rScale:Be,rGet:We}),[nt,rt,it,Z,X,G,F,q,U,H,V,qt,Bt,Xt,Gt,Kt,Qt,Jt,te,ee,ne,re,ie,oe,ae,se,le,ce,ue,fe,he,pe,de,me,ge,ve,ye,be,xe,we,$e,_e,ke,Me,Ce,Ne,Se,Te,je,Ee,Qe,K,Q,J,at,st,lt,ct,ut,ft,ht,pt,dt,mt,gt,vt,yt,bt,xt,wt,$t,_t,kt,Mt,Ct,Nt,St,Tt,At,zt,Dt,jt,Et,Lt,Pt,Rt,It,Ft,r,W,B,function(t){ot[t?"unshift":"push"]((()=>{it=t,n(2,it)}))},function(){nt=this.clientWidth,rt=this.clientHeight,n(0,nt),n(1,rt)}]}class Yo extends Lt{constructor(t){super(),Et(this,t,qo,Fo,a,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const Uo=t=>({element:1&t}),Ho=t=>({element:t[0]});function Vo(t){let e,n;const r=t[6].default,i=c(r,t,t[5],Ho);return{c(){e=T("div"),i&&i.c(),R(e,"class","layercake-layout-html svelte-1u9nfei"),O(e,"z-index",t[1],!1),O(e,"pointer-events",!1===t[2]?"none":null,!1),O(e,"top",t[3].top+"px",!1),O(e,"right",t[3].right+"px",!1),O(e,"bottom",t[3].bottom+"px",!1),O(e,"left",t[3].left+"px",!1)},m(r,o){C(r,e,o),i&&i.m(e,null),t[7](e),n=!0},p(t,[o]){i&&i.p&&(!n||33&o)&&h(i,r,t,t[5],n?f(r,t[5],o,Uo):p(t[5]),Ho),2&o&&O(e,"z-index",t[1],!1),4&o&&O(e,"pointer-events",!1===t[2]?"none":null,!1),8&o&&O(e,"top",t[3].top+"px",!1),8&o&&O(e,"right",t[3].right+"px",!1),8&o&&O(e,"bottom",t[3].bottom+"px",!1),8&o&&O(e,"left",t[3].left+"px",!1)},i(t){n||(_t(i,t),n=!0)},o(t){kt(i,t),n=!1},d(n){n&&N(e),i&&i.d(n),t[7](null)}}}function Bo(t,e,n){let r,{$$slots:i={},$$scope:o}=e,{element:a}=e,{zIndex:s}=e,{pointerEvents:c}=e;const{padding:u}=rt("LayerCake");return l(t,u,(t=>n(3,r=t))),t.$$set=t=>{"element"in t&&n(0,a=t.element),"zIndex"in t&&n(1,s=t.zIndex),"pointerEvents"in t&&n(2,c=t.pointerEvents),"$$scope"in t&&n(5,o=t.$$scope)},[a,s,c,r,u,o,i,function(t){ot[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}class Wo extends Lt{constructor(t){super(),Et(this,t,Bo,Vo,a,{element:0,zIndex:1,pointerEvents:2})}}const Zo=t=>({element:1&t}),Xo=t=>({element:t[0]}),Go=t=>({element:1&t}),Ko=t=>({element:t[0]});function Qo(t){let e,n,r,i,o;const a=t[12].defs,s=c(a,t,t[11],Ko),l=t[12].default,u=c(l,t,t[11],Xo);return{c(){e=A("svg"),n=A("defs"),s&&s.c(),r=A("g"),u&&u.c(),R(r,"class","layercake-layout-svg_g"),R(r,"transform",i="translate("+t[7].left+", "+t[7].top+")"),R(e,"class","layercake-layout-svg svelte-17l4rdd"),R(e,"viewBox",t[4]),R(e,"width",t[5]),R(e,"height",t[6]),O(e,"z-index",t[2],!1),O(e,"pointer-events",!1===t[3]?"none":null,!1)},m(i,a){C(i,e,a),_(e,n),s&&s.m(n,null),_(e,r),u&&u.m(r,null),t[13](r),t[14](e),o=!0},p(t,[n]){s&&s.p&&(!o||2049&n)&&h(s,a,t,t[11],o?f(a,t[11],n,Go):p(t[11]),Ko),u&&u.p&&(!o||2049&n)&&h(u,l,t,t[11],o?f(l,t[11],n,Zo):p(t[11]),Xo),(!o||128&n&&i!==(i="translate("+t[7].left+", "+t[7].top+")"))&&R(r,"transform",i),(!o||16&n)&&R(e,"viewBox",t[4]),(!o||32&n)&&R(e,"width",t[5]),(!o||64&n)&&R(e,"height",t[6]),4&n&&O(e,"z-index",t[2],!1),8&n&&O(e,"pointer-events",!1===t[3]?"none":null,!1)},i(t){o||(_t(s,t),_t(u,t),o=!0)},o(t){kt(s,t),kt(u,t),o=!1},d(n){n&&N(e),s&&s.d(n),u&&u.d(n),t[13](null),t[14](null)}}}function Jo(t,e,n){let r,i,o,{$$slots:a={},$$scope:s}=e,{element:c}=e,{innerElement:u}=e,{zIndex:f}=e,{pointerEvents:h}=e,{viewBox:p}=e;const{containerWidth:d,containerHeight:m,padding:g}=rt("LayerCake");return l(t,d,(t=>n(5,r=t))),l(t,m,(t=>n(6,i=t))),l(t,g,(t=>n(7,o=t))),t.$$set=t=>{"element"in t&&n(0,c=t.element),"innerElement"in t&&n(1,u=t.innerElement),"zIndex"in t&&n(2,f=t.zIndex),"pointerEvents"in t&&n(3,h=t.pointerEvents),"viewBox"in t&&n(4,p=t.viewBox),"$$scope"in t&&n(11,s=t.$$scope)},[c,u,f,h,p,r,i,o,d,m,g,s,a,function(t){ot[t?"unshift":"push"]((()=>{u=t,n(1,u)}))},function(t){ot[t?"unshift":"push"]((()=>{c=t,n(0,c)}))}]}class ta extends Lt{constructor(t){super(),Et(this,t,Jo,Qo,a,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function ea(t){if(Array.isArray(t)&&Array.isArray(t[0])){let e=[];const n=t.length;for(let r=0;r<n;r+=1)e=e.concat(t[r]);return e}return t}var na={},ra={};function ia(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function oa(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function aa(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function sa(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+aa(-t,6):t>9999?"+"+aa(t,6):aa(t,4)}(t.getUTCFullYear())+"-"+aa(t.getUTCMonth()+1,2)+"-"+aa(t.getUTCDate(),2)+(i?"T"+aa(e,2)+":"+aa(n,2)+":"+aa(r,2)+"."+aa(i,3)+"Z":r?"T"+aa(e,2)+":"+aa(n,2)+":"+aa(r,2)+"Z":n||e?"T"+aa(e,2)+":"+aa(n,2)+"Z":"")}var la=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return ra;if(c)return c=!1,na;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?l=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=u())!==ra;){for(var f=[];r!==na&&r!==ra;)f.push(r),r=u();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?sa(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=ia(t);return function(r,i){return e(n(r),i,t)}}(t,e):ia(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=oa(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=oa(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}(","),ca=la.parse;function ua(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;fa&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const fa=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function ha(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function pa(t,e){return fetch(t,e).then(ha)}var da,ma=(da=ca,function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),pa(t,e).then((function(t){return da(t,n)}))}),ga=[{state:"Maine",abbr:"ME",row:1,col:11},{state:"Wisconsin",abbr:"WI",row:2,col:6},{state:"Vermont",abbr:"VT",row:2,col:10},{state:"New Hampshire",abbr:"NH",row:2,col:11},{state:"Washington",abbr:"WA",row:3,col:1},{state:"Idaho",abbr:"ID",row:3,col:2},{state:"Montana",abbr:"MT",row:3,col:3},{state:"North Dakota",abbr:"ND",row:3,col:4},{state:"Minnesota",abbr:"MN",row:3,col:5},{state:"Illinois",abbr:"IL",row:3,col:6},{state:"Michigan",abbr:"MI",row:3,col:7},{state:"New York",abbr:"NY",row:3,col:9},{state:"Massachusetts",abbr:"MA",row:3,col:10},{state:"Oregon",abbr:"OR",row:4,col:1},{state:"Nevada",abbr:"NV",row:4,col:2},{state:"Wyoming",abbr:"WY",row:4,col:3},{state:"South Dakota",abbr:"SD",row:4,col:4},{state:"Iowa",abbr:"IA",row:4,col:5},{state:"Indiana",abbr:"IN",row:4,col:6},{state:"Ohio",abbr:"OH",row:4,col:7},{state:"Pennsylvania",abbr:"PA",row:4,col:8},{state:"New Jersey",abbr:"NJ",row:4,col:9},{state:"Connecticut",abbr:"CT",row:4,col:10},{state:"Rhode Island",abbr:"RI",row:4,col:11},{state:"California",abbr:"CA",row:5,col:1},{state:"Utah",abbr:"UT",row:5,col:2},{state:"Colorado",abbr:"CO",row:5,col:3},{state:"Nebraska",abbr:"NE",row:5,col:4},{state:"Missouri",abbr:"MO",row:5,col:5},{state:"Kentucky",abbr:"KY",row:5,col:6},{state:"West Virginia",abbr:"WV",row:5,col:7},{state:"Virginia",abbr:"VA",row:5,col:8},{state:"Maryland",abbr:"MD",row:5,col:9},{state:"Delaware",abbr:"DE",row:5,col:10},{state:"Arizona",abbr:"AZ",row:6,col:2},{state:"New Mexico",abbr:"NM",row:6,col:3},{state:"Kansas",abbr:"KS",row:6,col:4},{state:"Arkansas",abbr:"AR",row:6,col:5},{state:"Tennessee",abbr:"TN",row:6,col:6},{state:"North Carolina",abbr:"NC",row:6,col:7},{state:"South Carolina",abbr:"SC",row:6,col:8},{state:"District of Columbia",abbr:"DC",row:6,col:9},{state:"Oklahoma",abbr:"OK",row:7,col:4},{state:"Louisiana",abbr:"LA",row:7,col:5},{state:"Mississippi",abbr:"MS",row:7,col:6},{state:"Alabama",abbr:"AL",row:7,col:7},{state:"Georgia",abbr:"GA",row:7,col:8},{state:"Hawaii",abbr:"HI",row:8,col:1},{state:"Alaska",abbr:"AK",row:8,col:2},{state:"Texas",abbr:"TX",row:8,col:4},{state:"Florida",abbr:"FL",row:8,col:9}],va={title:"Information ecosystem",standfirst:[{type:"text",value:"The idea of a media “echo chamber"}],controls:{medium:{title:"Medium",description:"Internet or TV"},partisanship:{title:"Partisanship",description:"Lenient means that websites more partisan than TheGuardian.com (FoxNews.com) are counted as left (right), and CNN is counted as left-leaning. The strict definition means partisan content bounds are Slate.com (Breitbart.com) on the left (right)"},"node-size":{title:"Node size",description:"Audience size or average consumption"}},"main-section":{captions:[{type:"text",value:"Percent of YouTube users falling into the six political categories. In other words, out of all American YouTube viewers, 1.3% were in the left cluster in February 2020"}]},"section-one":{copy:[{type:"text",value:"To check for overall trends in political category preferences, we examine changes in the six viewing clusters’ total consumption. Here, we track how many YouTube users fall into each political cluster over time, which tells us whether these communities are growing or shrinking."},{type:"text",value:"Selecting “User share” from the dropdown above shows the percentages of the total number of YouTube users who fall into each of our six defined viewing clusters, corresponding to the political content categories."},{type:"text",value:"Selecting “Total consumption share” shows the percentages of the total amount (in minutes) of viewed YouTube content which fall into each of the six categories of news content."},{type:"text",value:"Our results reveal that news, in general, makes up only a small portion of YouTube consumption. However, even a small percentage of users can mean large absolute numbers at the scale of YouTube. For example, averaged over the 4-year period, 764,405 Americans consumed anti-woke content at least once in a given month, with that number growing steadily over time."}],references:[{type:"text",value:"Iyengar et al, The origins and consequences of affective polarization in the United States, 2019"},{type:"text",value:"Jones, Declining trust in congress: Effects of polarization and consequences for Democracy, 2015"}],captions:[{type:"text",value:"Caption for the map"},{type:"text",value:"Percent of YouTube users falling into the six political categories. In other words, out of all American YouTube viewers, 1.3% were in the left cluster in February 2020. This shows how large YouTube’s political communities are relative to the entire platform."},{type:"text",value:"Consumption share of the six political channel categories. For example, out of the total minutes of content that Americans viewed across the platform in October 2018, 1.76% of those minutes were far-right content. These statistics shed light on the amount of political content being consumed, and not necessarily the communities that consume it."}]},"section-two":{copy:[{type:"text",value:"To check for overall trends in political category preferences, we examine changes in the six viewing clusters’ total consumption. Here, we track how many YouTube users fall into each political cluster over time, which tells us whether these communities are growing or shrinking."},{type:"text",value:"Selecting “User share” from the dropdown above shows the percentages of the total number of YouTube users who fall into each of our six defined viewing clusters, corresponding to the political content categories."},{type:"text",value:"Selecting “Total consumption share” shows the percentages of the total amount (in minutes) of viewed YouTube content which fall into each of the six categories of news content."},{type:"text",value:"Our results reveal that news, in general, makes up only a small portion of YouTube consumption. However, even a small percentage of users can mean large absolute numbers at the scale of YouTube. For example, averaged over the 4-year period, 764,405 Americans consumed anti-woke content at least once in a given month, with that number growing steadily over time."}],references:[{type:"text",value:"Iyengar et al, The origins and consequences of affective polarization in the United States, 2019"},{type:"text",value:"Jones, Declining trust in congress: Effects of polarization and consequences for Democracy, 2015"}],captions:[{type:"text",value:"Percent of YouTube users falling into the six political categories. In other words, out of all American YouTube viewers, 1.3% were in the left cluster in February 2020. This shows how large YouTube’s political communities are relative to the entire platform."},{type:"text",value:"Consumption share of the six political channel categories. For example, out of the total minutes of content that Americans viewed across the platform in October 2018, 1.76% of those minutes were far-right content. These statistics shed light on the amount of political content being consumed, and not necessarily the communities that consume it."}]},"section-three":{copy:[{type:"text",value:"To check for overall trends in political category preferences, we examine changes in the six viewing clusters’ total consumption. Here, we track how many YouTube users fall into each political cluster over time, which tells us whether these communities are growing or shrinking."},{type:"text",value:"Selecting “User share” from the dropdown above shows the percentages of the total number of YouTube users who fall into each of our six defined viewing clusters, corresponding to the political content categories."},{type:"text",value:"Selecting “Total consumption share” shows the percentages of the total amount (in minutes) of viewed YouTube content which fall into each of the six categories of news content."},{type:"text",value:"Our results reveal that news, in general, makes up only a small portion of YouTube consumption. However, even a small percentage of users can mean large absolute numbers at the scale of YouTube. For example, averaged over the 4-year period, 764,405 Americans consumed anti-woke content at least once in a given month, with that number growing steadily over time."}],references:[{type:"text",value:"Iyengar et al, The origins and consequences of affective polarization in the United States, 2019"},{type:"text",value:"Jones, Declining trust in congress: Effects of polarization and consequences for Democracy, 2015"}],captions:[{type:"text",value:"Percent of YouTube users falling into the six political categories. In other words, out of all American YouTube viewers, 1.3% were in the left cluster in February 2020. This shows how large YouTube’s political communities are relative to the entire platform."},{type:"text",value:"Consumption share of the six political channel categories. For example, out of the total minutes of content that Americans viewed across the platform in October 2018, 1.76% of those minutes were far-right content. These statistics shed light on the amount of political content being consumed, and not necessarily the communities that consume it."}]}};function ya(e){let n,r;return{c(){n=T("h1"),r=z(e[0]),R(n,"class","svelte-wev0vk")},m(t,e){C(t,n,e),_(n,r)},p(t,[e]){1&e&&I(r,t[0])},i:t,o:t,d(t){t&&N(n)}}}function ba(t,e,n){let{title:r}=e;return t.$$set=t=>{"title"in t&&n(0,r=t.title)},[r]}class xa extends Lt{constructor(t){super(),Et(this,t,ba,ya,a,{title:0})}}function wa(e){let n,r,i,o,a,s,l;return{c(){n=T("div"),r=T("a"),i=z("Read the original research\n    "),o=A("svg"),a=A("path"),s=A("polyline"),l=A("line"),R(a,"d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"),R(s,"points","15 3 21 3 21 9"),R(l,"x1","10"),R(l,"y1","14"),R(l,"x2","21"),R(l,"y2","3"),R(o,"xmlns","http://www.w3.org/2000/svg"),R(o,"viewBox","0 0 24 24"),R(o,"fill","none"),R(o,"stroke","currentColor"),R(o,"stroke-width","2"),R(o,"stroke-linecap","round"),R(o,"stroke-linejoin","round"),R(o,"class","feather feather-external-link svelte-mwaz07"),R(r,"class","btn svelte-mwaz07"),R(r,"href",e[0]),R(r,"target","_top"),R(n,"class","btn-container svelte-mwaz07")},m(t,e){C(t,n,e),_(n,r),_(r,i),_(r,o),_(o,a),_(o,s),_(o,l)},p(t,[e]){1&e&&R(r,"href",t[0])},i:t,o:t,d(t){t&&N(n)}}}function $a(t,e,n){let{url:r}=e;return t.$$set=t=>{"url"in t&&n(0,r=t.url)},[r]}class _a extends Lt{constructor(t){super(),Et(this,t,$a,wa,a,{url:0})}}function ka(t,e,n){const r=t.slice();return r[1]=e[n],r}function Ma(t){let e,n,r=t[1].value+"";return{c(){e=T("p"),n=z(r),R(e,"class","svelte-hixzrs")},m(t,r){C(t,e,r),_(e,n)},p(t,e){1&e&&r!==(r=t[1].value+"")&&I(n,r)},d(t){t&&N(e)}}}function Ca(t){let e,n,r,i,o=t[0],a=[];for(let e=0;e<o.length;e+=1)a[e]=Ma(ka(t,o,e));return r=new _a({props:{url:"https://www.pnas.org/doi/10.1073/pnas.2101967118"}}),{c(){e=T("div");for(let t=0;t<a.length;t+=1)a[t].c();n=D(),At(r.$$.fragment),R(e,"class","standfirst-wrapper svelte-hixzrs")},m(t,o){C(t,e,o);for(let t=0;t<a.length;t+=1)a[t].m(e,null);_(e,n),zt(r,e,null),i=!0},p(t,[r]){if(1&r){let i;for(o=t[0],i=0;i<o.length;i+=1){const s=ka(t,o,i);a[i]?a[i].p(s,r):(a[i]=Ma(s),a[i].c(),a[i].m(e,n))}for(;i<a.length;i+=1)a[i].d(1);a.length=o.length}},i(t){i||(_t(r.$$.fragment,t),i=!0)},o(t){kt(r.$$.fragment,t),i=!1},d(t){t&&N(e),S(a,t),Dt(r)}}}function Na(t,e,n){let{standfirst:r}=e;return t.$$set=t=>{"standfirst"in t&&n(0,r=t.standfirst)},[r]}class Sa extends Lt{constructor(t){super(),Et(this,t,Na,Ca,a,{standfirst:0})}}function Ta(t,e,n){const r=t.slice();return r[1]=e[n],r[3]=n,r}function Aa(t,e,n){const r=t.slice();return r[4]=e[n],r}function za(t){let e,n,r=t[4]+"";return{c(){e=T("p"),n=z(r),R(e,"class","detail-list-value svelte-1vllag3")},m(t,r){C(t,e,r),_(e,n)},p(t,e){1&e&&r!==(r=t[4]+"")&&I(n,r)},d(t){t&&N(e)}}}function Da(t){let e,n,r,o,a,s,l,c,u,f=t[1].name+"",h=t[1].detail,p=[];for(let e=0;e<h.length;e+=1)p[e]=za(Aa(t,h,e));return{c(){e=T("div"),n=T("p"),r=z(f),o=D(),a=T("div"),s=T("div");for(let t=0;t<p.length;t+=1)p[t].c();l=D(),R(n,"class","author-name svelte-1vllag3"),R(s,"class","detail-list svelte-1vllag3"),R(a,"class","detail svelte-1vllag3"),R(e,"class","author-container svelte-1vllag3")},m(t,i){C(t,e,i),_(e,n),_(n,r),_(e,o),_(e,a),_(a,s);for(let t=0;t<p.length;t+=1)p[t].m(s,null);_(e,l),c||(u=[E(e,"mouseover",Ea),E(e,"focus",Ea),E(e,"mouseout",La),E(e,"blur",La)],c=!0)},p(t,e){if(1&e&&f!==(f=t[1].name+"")&&I(r,f),1&e){let n;for(h=t[1].detail,n=0;n<h.length;n+=1){const r=Aa(t,h,n);p[n]?p[n].p(r,e):(p[n]=za(r),p[n].c(),p[n].m(s,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=h.length}},d(t){t&&N(e),S(p,t),c=!1,i(u)}}}function ja(e){let n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=Da(Ta(e,r,t));return{c(){n=T("div");for(let t=0;t<i.length;t+=1)i[t].c();R(n,"class","authors svelte-1vllag3")},m(t,e){C(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(1&e){let o;for(r=t[0],o=0;o<r.length;o+=1){const a=Ta(t,r,o);i[o]?i[o].p(a,e):(i[o]=Da(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&N(n),S(i,t)}}}function Ea(t){t.target.classList.add("active")}function La(t){t.target.classList.remove("active")}function Pa(t,e,n){let{authors:r}=e;return t.$$set=t=>{"authors"in t&&n(0,r=t.authors)},[r]}class Ra extends Lt{constructor(t){super(),Et(this,t,Pa,ja,a,{authors:0})}}function Ia(e){let n,r,i;return{c(){n=T("div"),r=T("div"),r.innerHTML='<div class="svelte-zg9i93"></div> \n    <div class="svelte-zg9i93"></div> \n    <div class="svelte-zg9i93"></div> \n    <div class="svelte-zg9i93"></div> \n    <div class="svelte-zg9i93"></div> \n    <div class="svelte-zg9i93"></div> \n    <div class="svelte-zg9i93"></div> \n    <div class="svelte-zg9i93"></div>',R(r,"class","lds-roller svelte-zg9i93"),R(n,"class","chart-placeholder svelte-zg9i93"),R(n,"style",i=`--row: ${e[0]}`)},m(t,e){C(t,n,e),_(n,r)},p(t,[e]){1&e&&i!==(i=`--row: ${t[0]}`)&&R(n,"style",i)},i:t,o:t,d(t){t&&N(n)}}}function Oa(t,e,n){let{row:r}=e;return t.$$set=t=>{"row"in t&&n(0,r=t.row)},[r]}class Fa extends Lt{constructor(t){super(),Et(this,t,Oa,Ia,a,{row:0})}}function qa(e){let n,r,o,a,s,l,c,u,f,h,p,d,m,g,v,y,b,x,w,$,k,M,S,A,j=e[3][0]+"",L=e[3][1]+"";return{c(){n=T("div"),r=T("div"),o=z(e[2]),a=D(),s=T("span"),s.textContent="?",l=D(),c=T("div"),u=z(j),h=D(),p=T("label"),d=T("input"),m=D(),g=T("span"),v=D(),y=T("div"),b=z(L),w=D(),$=T("div"),k=z(e[4]),R(s,"class","info svelte-w9wtv0"),R(r,"class","control-title svelte-w9wtv0"),R(c,"class",f="control-label "+(e[0]?"":"active")+" svelte-w9wtv0"),R(d,"type","checkbox"),R(d,"id","medium"),R(d,"name","medium"),R(d,"class","svelte-w9wtv0"),R(g,"class","slider svelte-w9wtv0"),O(g,"--colorFalse",e[5][0]),O(g,"--colorTrue",e[5][1]),R(p,"class","switch svelte-w9wtv0"),R(y,"class",x="control-label "+(e[0]?"active":"")+" svelte-w9wtv0"),R($,"class",M="info-detail "+e[7]+" svelte-w9wtv0"),R(n,"id",e[1]),R(n,"class","control control-switch svelte-w9wtv0")},m(t,i){C(t,n,i),_(n,r),_(r,o),_(r,a),_(r,s),_(n,l),_(n,c),_(c,u),_(n,h),_(n,p),_(p,d),d.checked=e[0],_(p,m),_(p,g),_(n,v),_(n,y),_(y,b),_(n,w),_(n,$),_($,k),S||(A=[E(s,"mouseenter",e[8]),E(s,"mouseleave",e[9]),E(d,"change",e[10])],S=!0)},p(t,[e]){4&e&&I(o,t[2]),8&e&&j!==(j=t[3][0]+"")&&I(u,j),1&e&&f!==(f="control-label "+(t[0]?"":"active")+" svelte-w9wtv0")&&R(c,"class",f),1&e&&(d.checked=t[0]),32&e&&O(g,"--colorFalse",t[5][0]),32&e&&O(g,"--colorTrue",t[5][1]),8&e&&L!==(L=t[3][1]+"")&&I(b,L),1&e&&x!==(x="control-label "+(t[0]?"active":"")+" svelte-w9wtv0")&&R(y,"class",x),16&e&&I(k,t[4]),128&e&&M!==(M="info-detail "+t[7]+" svelte-w9wtv0")&&R($,"class",M),2&e&&R(n,"id",t[1])},i:t,o:t,d(t){t&&N(n),S=!1,i(A)}}}function Ya(t,e,n){let r,i,{id:o=""}=e,{title:a="Title"}=e,{labels:s=["False","True"]}=e,{info:l=""}=e,{checked:c=!0}=e,{colors:u=["#555","#ccc"]}=e;return t.$$set=t=>{"id"in t&&n(1,o=t.id),"title"in t&&n(2,a=t.title),"labels"in t&&n(3,s=t.labels),"info"in t&&n(4,l=t.info),"checked"in t&&n(0,c=t.checked),"colors"in t&&n(5,u=t.colors)},t.$$.update=()=>{64&t.$$.dirty&&n(7,i=r?"active":"")},n(6,r=!1),[c,o,a,s,l,u,r,i,()=>{n(6,r=!0)},()=>{n(6,r=!1)},function(){c=this.checked,n(0,c)}]}class Ua extends Lt{constructor(t){super(),Et(this,t,Ya,qa,a,{id:1,title:2,labels:3,info:4,checked:0,colors:5})}}const Ha=Math.PI,Va=2*Ha,Ba=1e-6,Wa=Va-Ba;function Za(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Xa(){return new Za}function Ga(t){return function(){return t}}function Ka(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Qa(t){this._context=t}function Ja(t){return new Qa(t)}function ts(t){return t[0]}function es(t){return t[1]}function ns(t,e){var n=Ga(!0),r=null,i=Ja,o=null;function a(a){var s,l,c,u=(a=Ka(a)).length,f=!1;for(null==r&&(o=i(c=Xa())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(l,s,a),+e(l,s,a));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?ts:Ga(t),e="function"==typeof e?e:void 0===e?es:Ga(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:Ga(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:Ga(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:Ga(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function rs(t,e,n){var r=null,i=Ga(!0),o=null,a=Ja,s=null;function l(l){var c,u,f,h,p,d=(l=Ka(l)).length,m=!1,g=new Array(d),v=new Array(d);for(null==o&&(s=a(p=Xa())),c=0;c<=d;++c){if(!(c<d&&i(h=l[c],c,l))===m)if(m=!m)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=u;--f)s.point(g[f],v[f]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+t(h,c,l),v[c]=+e(h,c,l),s.point(r?+r(h,c,l):g[c],n?+n(h,c,l):v[c]))}if(p)return s=null,p+""||null}function c(){return ns().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?ts:Ga(+t),e="function"==typeof e?e:Ga(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?es:Ga(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:Ga(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:Ga(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Ga(+t),l):r},l.y=function(t){return arguments.length?(e="function"==typeof t?t:Ga(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:Ga(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Ga(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:Ga(!!t),l):i},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l}function is(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function os(t){this._context=t}function as(t){return new os(t)}function ss(t){this._context=t}function ls(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function cs(t){return new ss(t)}function us(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function fs(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function hs(t,e){return t[e]}function ps(t){const e=[];return e.key=t,e}function ds(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function ms(t){return function(t){var e=t.map(ds);return fs(t).sort((function(t,n){return e[t]-e[n]}))}(t).reverse()}function gs(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function vs(t){let e,n,r;return{c(){e=A("line"),R(e,"class","gridline svelte-6edweo"),R(e,"x2","100%"),R(e,"y1",n=t[4]+(t[8]?t[9].bandwidth()/2:0)),R(e,"y2",r=t[4]+(t[8]?t[9].bandwidth()/2:0))},m(t,n){C(t,e,n)},p(t,i){784&i&&n!==(n=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(e,"y1",n),784&i&&r!==(r=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(e,"y2",r)},d(t){t&&N(e)}}}function ys(t){let e,n,r,i;return{c(){e=A("line"),R(e,"class","tick-mark svelte-6edweo"),R(e,"x1","0"),R(e,"x2",n=t[8]?-6:6),R(e,"y1",r=t[4]+(t[8]?t[9].bandwidth()/2:0)),R(e,"y2",i=t[4]+(t[8]?t[9].bandwidth()/2:0))},m(t,n){C(t,e,n)},p(t,o){256&o&&n!==(n=t[8]?-6:6)&&R(e,"x2",n),784&o&&r!==(r=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(e,"y1",r),784&o&&i!==(i=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(e,"y2",i)},d(t){t&&N(e)}}}function bs(t){let e,n,r,i,o,a,s,l,c,u=t[2](t[17],t[19],t[10].length)+"",f=!1!==t[0]&&vs(t),h=!0===t[1]&&ys(t);return{c(){e=A("g"),f&&f.c(),n=j(),h&&h.c(),r=A("text"),i=z(u),R(r,"x",t[3]),R(r,"y",o=t[4]+(t[8]?t[9].bandwidth()/2:0)),R(r,"dx",a=t[8]?-9:t[5]),R(r,"dy",s=t[8]?4:t[6]),O(r,"text-anchor",t[8]?"end":t[7]),R(r,"class","svelte-6edweo"),R(e,"class",l="tick tick-"+t[17]+" svelte-6edweo"),R(e,"transform",c="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")},m(t,o){C(t,e,o),f&&f.m(e,null),_(e,n),h&&h.m(e,null),_(e,r),_(r,i)},p(t,p){!1!==t[0]?f?f.p(t,p):(f=vs(t),f.c(),f.m(e,n)):f&&(f.d(1),f=null),!0===t[1]?h?h.p(t,p):(h=ys(t),h.c(),h.m(e,r)):h&&(h.d(1),h=null),1028&p&&u!==(u=t[2](t[17],t[19],t[10].length)+"")&&I(i,u),8&p&&R(r,"x",t[3]),784&p&&o!==(o=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(r,"y",o),288&p&&a!==(a=t[8]?-9:t[5])&&R(r,"dx",a),320&p&&s!==(s=t[8]?4:t[6])&&R(r,"dy",s),384&p&&O(r,"text-anchor",t[8]?"end":t[7]),1024&p&&l!==(l="tick tick-"+t[17]+" svelte-6edweo")&&R(e,"class",l),7936&p&&c!==(c="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")&&R(e,"transform",c)},d(t){t&&N(e),f&&f.d(),h&&h.d()}}}function xs(e){let n,r,i=e[10],o=[];for(let t=0;t<i.length;t+=1)o[t]=bs(gs(e,i,t));return{c(){n=A("g");for(let t=0;t<o.length;t+=1)o[t].c();R(n,"class","axis y-axis"),R(n,"transform",r="translate("+-e[11].left+", 0)")},m(t,e){C(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(8191&e){let r;for(i=t[10],r=0;r<i.length;r+=1){const a=gs(t,i,r);o[r]?o[r].p(a,e):(o[r]=bs(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}2048&e&&r!==(r="translate("+-t[11].left+", 0)")&&R(n,"transform",r)},i:t,o:t,d(t){t&&N(n),S(o,t)}}}function ws(t,e,n){let r,i,o,a,s;const{padding:c,xRange:u,yScale:f}=rt("LayerCake");l(t,c,(t=>n(11,a=t))),l(t,u,(t=>n(12,s=t))),l(t,f,(t=>n(9,o=t)));let{gridlines:h=!0}=e,{tickMarks:p=!1}=e,{formatTick:d=(t=>t)}=e,{ticks:m=4}=e,{xTick:g=0}=e,{yTick:v=0}=e,{dxTick:y=0}=e,{dyTick:b=-4}=e,{textAnchor:x="start"}=e;return t.$$set=t=>{"gridlines"in t&&n(0,h=t.gridlines),"tickMarks"in t&&n(1,p=t.tickMarks),"formatTick"in t&&n(2,d=t.formatTick),"ticks"in t&&n(16,m=t.ticks),"xTick"in t&&n(3,g=t.xTick),"yTick"in t&&n(4,v=t.yTick),"dxTick"in t&&n(5,y=t.dxTick),"dyTick"in t&&n(6,b=t.dyTick),"textAnchor"in t&&n(7,x=t.textAnchor)},t.$$.update=()=>{512&t.$$.dirty&&n(8,r="function"==typeof o.bandwidth),66304&t.$$.dirty&&n(10,i=Array.isArray(m)?m:r?o.domain():"function"==typeof m?m(o.ticks()):o.ticks(m))},[h,p,d,g,v,y,b,x,r,o,i,a,s,c,u,f,m]}Za.prototype=Xa.prototype={constructor:Za,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,l=r-e,c=o-t,u=a-e,f=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>Ba)if(Math.abs(u*s-l*c)>Ba&&i){var h=n-o,p=r-a,d=s*s+l*l,m=h*h+p*p,g=Math.sqrt(d),v=Math.sqrt(f),y=i*Math.tan((Ha-Math.acos((d+f-m)/(2*g*v)))/2),b=y/v,x=y/g;Math.abs(b-1)>Ba&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*p)+","+(this._x1=t+x*s)+","+(this._y1=e+x*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,u=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Ba||Math.abs(this._y1-c)>Ba)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%Va+Va),f>Wa?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):f>Ba&&(this._+="A"+n+","+n+",0,"+ +(f>=Ha)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},Qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},os.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:is(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:is(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ss.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=ls(t),i=ls(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};class $s extends Lt{constructor(t){super(),Et(this,t,ws,xs,a,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}function _s(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function ks(t){let e,n;return{c(){e=A("line"),R(e,"class","gridline svelte-11s23aw"),R(e,"y1",n=-1*t[11]),R(e,"y2","0"),R(e,"x1","0"),R(e,"x2","0")},m(t,n){C(t,e,n)},p(t,r){2048&r&&n!==(n=-1*t[11])&&R(e,"y1",n)},d(t){t&&N(e)}}}function Ms(t){let e,n,r;return{c(){e=A("line"),R(e,"class","tick-mark svelte-11s23aw"),R(e,"y1",0),R(e,"y2",6),R(e,"x1",n=t[5]||t[7]?t[8].bandwidth()/2:0),R(e,"x2",r=t[5]||t[7]?t[8].bandwidth()/2:0)},m(t,n){C(t,e,n)},p(t,i){416&i&&n!==(n=t[5]||t[7]?t[8].bandwidth()/2:0)&&R(e,"x1",n),416&i&&r!==(r=t[5]||t[7]?t[8].bandwidth()/2:0)&&R(e,"x2",r)},d(t){t&&N(e)}}}function Cs(t){let e,n,r,i,o,a,s,l,c=t[4](t[19])+"",u=!1!==t[0]&&ks(t),f=!0===t[1]&&Ms(t);return{c(){e=A("g"),u&&u.c(),n=j(),f&&f.c(),r=A("text"),i=z(c),R(r,"x",o=t[5]||t[7]?t[8].bandwidth()/2:0),R(r,"y",t[6]),R(r,"dx",""),R(r,"dy",""),R(r,"text-anchor",a=t[17](t[21])),R(r,"class","svelte-11s23aw"),R(e,"class",s="tick tick-"+t[21]+" svelte-11s23aw"),R(e,"transform",l="translate("+t[8](t[19])+","+t[10][0]+")")},m(t,o){C(t,e,o),u&&u.m(e,null),_(e,n),f&&f.m(e,null),_(e,r),_(r,i)},p(t,a){!1!==t[0]?u?u.p(t,a):(u=ks(t),u.c(),u.m(e,n)):u&&(u.d(1),u=null),!0===t[1]?f?f.p(t,a):(f=Ms(t),f.c(),f.m(e,r)):f&&(f.d(1),f=null),528&a&&c!==(c=t[4](t[19])+"")&&I(i,c),416&a&&o!==(o=t[5]||t[7]?t[8].bandwidth()/2:0)&&R(r,"x",o),64&a&&R(r,"y",t[6]),1792&a&&l!==(l="translate("+t[8](t[19])+","+t[10][0]+")")&&R(e,"transform",l)},d(t){t&&N(e),u&&u.d(),f&&f.d()}}}function Ns(t){let e,n,r;return{c(){e=A("line"),R(e,"class","baseline svelte-11s23aw"),R(e,"y1",n=t[11]+.5),R(e,"y2",r=t[11]+.5),R(e,"x1","0"),R(e,"x2",t[12])},m(t,n){C(t,e,n)},p(t,i){2048&i&&n!==(n=t[11]+.5)&&R(e,"y1",n),2048&i&&r!==(r=t[11]+.5)&&R(e,"y2",r),4096&i&&R(e,"x2",t[12])},d(t){t&&N(e)}}}function Ss(e){let n,r,i=e[9],o=[];for(let t=0;t<i.length;t+=1)o[t]=Cs(_s(e,i,t));let a=!0===e[2]&&Ns(e);return{c(){n=A("g");for(let t=0;t<o.length;t+=1)o[t].c();r=j(),a&&a.c(),R(n,"class","axis x-axis svelte-11s23aw"),H(n,"snapTicks",e[3])},m(t,e){C(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);_(n,r),a&&a.m(n,null)},p(t,[e]){if(135155&e){let a;for(i=t[9],a=0;a<i.length;a+=1){const s=_s(t,i,a);o[a]?o[a].p(s,e):(o[a]=Cs(s),o[a].c(),o[a].m(n,r))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}!0===t[2]?a?a.p(t,e):(a=Ns(t),a.c(),a.m(n,null)):a&&(a.d(1),a=null),8&e&&H(n,"snapTicks",t[3])},i:t,o:t,d(t){t&&N(n),S(o,t),a&&a.d()}}}function Ts(t,e,n){let r,i,o,a,s,c;const{width:u,height:f,xScale:h,yRange:p}=rt("LayerCake");l(t,u,(t=>n(12,c=t))),l(t,f,(t=>n(11,s=t))),l(t,h,(t=>n(8,o=t))),l(t,p,(t=>n(10,a=t)));let{gridlines:d=!0}=e,{tickMarks:m=!1}=e,{baseline:g=!1}=e,{snapTicks:v=!1}=e,{formatTick:y=(t=>t)}=e,{ticks:b}=e,{xTick:x=0}=e,{yTick:w=16}=e;return t.$$set=t=>{"gridlines"in t&&n(0,d=t.gridlines),"tickMarks"in t&&n(1,m=t.tickMarks),"baseline"in t&&n(2,g=t.baseline),"snapTicks"in t&&n(3,v=t.snapTicks),"formatTick"in t&&n(4,y=t.formatTick),"ticks"in t&&n(18,b=t.ticks),"xTick"in t&&n(5,x=t.xTick),"yTick"in t&&n(6,w=t.yTick)},t.$$.update=()=>{256&t.$$.dirty&&n(7,r="function"==typeof o.bandwidth),262528&t.$$.dirty&&n(9,i=Array.isArray(b)?b:r?o.domain():"function"==typeof b?b(o.ticks()):o.ticks(b))},[d,m,g,v,y,x,w,r,o,i,a,s,c,u,f,h,p,function(t){if(!0===v){if(0===t)return"start";if(t===i.length-1)return"end"}return"middle"},b]}class As extends Lt{constructor(t){super(),Et(this,t,Ts,Ss,a,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:18,xTick:5,yTick:6})}}function zs(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function Ds(t){let e,n,r,i;return{c(){e=A("g"),n=A("path"),R(n,"class","path-area svelte-1oyvjie"),R(n,"d",r=t[0](t[9])),R(n,"fill",i=t[2](t[9])),R(e,"class","area-group")},m(t,r){C(t,e,r),_(e,n)},p(t,e){3&e&&r!==(r=t[0](t[9]))&&R(n,"d",r),6&e&&i!==(i=t[2](t[9]))&&R(n,"fill",i)},d(t){t&&N(e)}}}function js(e){let n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=Ds(zs(e,r,t));return{c(){n=A("g");for(let t=0;t<i.length;t+=1)i[t].c();R(n,"class","vis")},m(t,e){C(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(7&e){let o;for(r=t[1],o=0;o<r.length;o+=1){const a=zs(t,r,o);i[o]?i[o].p(a,e):(i[o]=Ds(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&N(n),S(i,t)}}}function Es(t,e,n){let r,i,o,a,s;const{data:c,xGet:u,yScale:f,zGet:h}=rt("LayerCake");return l(t,c,(t=>n(1,a=t))),l(t,u,(t=>n(8,o=t))),l(t,f,(t=>n(7,i=t))),l(t,h,(t=>n(2,s=t))),t.$$.update=()=>{384&t.$$.dirty&&n(0,r=rs().x((t=>o(t))).y0((t=>i(t[0]))).y1((t=>i(t[1]))))},[r,a,s,c,u,f,h,i,o]}class Ls extends Lt{constructor(t){super(),Et(this,t,Es,js,a,{})}}function Ps(e){let n,r,i,o,a,s,l,c,u,f,h;return{c(){n=T("div"),r=T("span"),i=z(e[0]),o=D(),a=T("a"),s=z("Download data "),l=A("svg"),c=A("path"),u=A("polyline"),f=A("line"),R(r,"class","caption-text svelte-1s413p1"),R(c,"d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"),R(u,"points","7 10 12 15 17 10"),R(f,"x1","12"),R(f,"y1","15"),R(f,"x2","12"),R(f,"y2","3"),R(l,"xmlns","http://www.w3.org/2000/svg"),R(l,"width","24"),R(l,"height","24"),R(l,"viewBox","0 0 24 24"),R(l,"fill","none"),R(l,"stroke","currentColor"),R(l,"stroke-width","2"),R(l,"stroke-linecap","round"),R(l,"stroke-linejoin","round"),R(l,"class","feather feather-download svelte-1s413p1"),R(a,"class","download-button svelte-1s413p1"),R(a,"href",e[1]),R(a,"download",""),R(n,"class",h="caption caption-"+e[2]+" svelte-1s413p1")},m(t,e){C(t,n,e),_(n,r),_(r,i),_(n,o),_(n,a),_(a,s),_(a,l),_(l,c),_(l,u),_(l,f)},p(t,[e]){1&e&&I(i,t[0]),2&e&&R(a,"href",t[1]),4&e&&h!==(h="caption caption-"+t[2]+" svelte-1s413p1")&&R(n,"class",h)},i:t,o:t,d(t){t&&N(n)}}}function Rs(t,e,n){let{caption:r}=e,{url:i}=e,{type:o}=e;return t.$$set=t=>{"caption"in t&&n(0,r=t.caption),"url"in t&&n(1,i=t.url),"type"in t&&n(2,o=t.type)},[r,i,o]}class Is extends Lt{constructor(t){super(),Et(this,t,Rs,Ps,a,{caption:0,url:1,type:2})}}function Os(t){let e,n,r,i,o,a;return e=new As({props:{gridlines:!1,ticks:3,snapTicks:!0,tickMarks:!0,formatTick:t[6]}}),r=new $s({props:{formatTick:Us,ticks:4}}),o=new Ls({}),{c(){At(e.$$.fragment),n=D(),At(r.$$.fragment),i=D(),At(o.$$.fragment)},m(t,s){zt(e,t,s),C(t,n,s),zt(r,t,s),C(t,i,s),zt(o,t,s),a=!0},p(t,n){const r={};64&n&&(r.formatTick=t[6]),e.$set(r)},i(t){a||(_t(e.$$.fragment,t),_t(r.$$.fragment,t),_t(o.$$.fragment,t),a=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(o.$$.fragment,t),a=!1},d(t){Dt(e,t),t&&N(n),Dt(r,t),t&&N(i),Dt(o,t)}}}function Fs(t){let e,n;return e=new ta({props:{$$slots:{default:[Os]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};32832&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function qs(t){let e,n;return e=new Is({props:{caption:t[1],url:t[3],type:"single-cols"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),8&n&&(r.url=t[3]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function Ys(t){let e,n,r,i,o;n=new Yo({props:{padding:t[0],flatData:ea(t[8]),data:t[8],x:Hs,xScale:$o(),y:[0,1],yDomain:t[7],z:"key",zScale:Ce(),zDomain:t[4],zRange:t[5],$$slots:{default:[Fs]},$$scope:{ctx:t}}});let a=t[2]&&qs(t);return{c(){e=T("div"),At(n.$$.fragment),r=D(),a&&a.c(),i=j(),R(e,"class",d("chart stacked-area-chart")+" svelte-wrhpuq")},m(t,s){C(t,e,s),zt(n,e,null),C(t,r,s),a&&a.m(t,s),C(t,i,s),o=!0},p(t,[e]){const r={};1&e&&(r.padding=t[0]),256&e&&(r.flatData=ea(t[8])),256&e&&(r.data=t[8]),128&e&&(r.yDomain=t[7]),16&e&&(r.zDomain=t[4]),32&e&&(r.zRange=t[5]),32832&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r),t[2]?a?(a.p(t,e),4&e&&_t(a,1)):(a=qs(t),a.c(),_t(a,1),a.m(i.parentNode,i)):a&&(wt(),kt(a,1,1,(()=>{a=null})),$t())},i(t){o||(_t(n.$$.fragment,t),_t(a),o=!0)},o(t){kt(n.$$.fragment,t),kt(a),o=!1},d(t){t&&N(e),Dt(n),t&&N(r),a&&a.d(t),t&&N(i)}}}const Us=t=>t,Hs=t=>t.data.date;function Vs(t,e,n){let r,i,o,a,{margins:s={top:20,right:10,bottom:20,left:45}}=e,{caption:l=""}=e,{includeCaption:c=!0}=e,{url:u=""}=e,{data:f}=e,{dataMap:h}=e,{categories:p}=e,{colors:d}=e,{rows:m}=e,{formatter:g}=e,{yDomain:v}=e;return t.$$set=t=>{"margins"in t&&n(0,s=t.margins),"caption"in t&&n(1,l=t.caption),"includeCaption"in t&&n(2,c=t.includeCaption),"url"in t&&n(3,u=t.url),"data"in t&&n(9,f=t.data),"dataMap"in t&&n(10,h=t.dataMap),"categories"in t&&n(4,p=t.categories),"colors"in t&&n(5,d=t.colors),"rows"in t&&n(11,m=t.rows),"formatter"in t&&n(6,g=t.formatter),"yDomain"in t&&n(7,v=t.yDomain)},t.$$.update=()=>{3088&t.$$.dirty&&n(12,r=m.map((t=>{const e={},n=h.get(t);if(void 0!==n)return p.forEach((t=>{n.has(t)&&(e[t]=n.get(t)[0].value)})),Object.assign({date:new Date(t)},e)})).filter((t=>void 0!==t))),4096&t.$$.dirty&&n(14,i=Object.keys(r[0]).filter((t=>"date"!==t))),16384&t.$$.dirty&&n(13,o=function(){var t=Ga([]),e=fs,n=us,r=hs;function i(i){var o,a,s=Array.from(t.apply(this,arguments),ps),l=s.length,c=-1;for(const t of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(t,s[o].key,c,i)]).data=t;for(o=0,a=Ka(e(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:Ga(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:Ga(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?fs:"function"==typeof t?t:Ga(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?us:t,i):n},i}().keys(i).order(ms)),12288&t.$$.dirty&&n(8,a=o(r))},[s,l,c,u,p,d,g,v,a,f,h,m,r,o,i]}class Bs extends Lt{constructor(t){super(),Et(this,t,Vs,Ys,a,{margins:0,caption:1,includeCaption:2,url:3,data:9,dataMap:10,categories:4,colors:5,rows:11,formatter:6,yDomain:7})}}const Ws=ti("%b-%y"),Zs=new Map([["non-news","Non news"],["news","News"],["other_news","Other news"],["facebook","Facebook"],["hard_news","Hard news"],["youtube","YouTube"],["twitter","Twitter"],["reddit","Reddit"],["fake_news","Fake News"]]);function Xs(t,e,n){const r=t.slice();return r[21]=e[n],r}function Gs(t,e,n){const r=t.slice();return r[24]=e[n],r}function Ks(e){let n,r,i,o=e[24].state+"";return{c(){n=T("option"),r=z(o),n.__value=i=e[24].abbr,n.value=n.__value},m(t,e){C(t,n,e),_(n,r)},p:t,d(t){t&&N(n)}}}function Qs(t){let e,n,r,i,o,a,s,l=Zs.get(t[21][1])+"";return{c(){e=T("div"),n=T("div"),i=D(),o=T("div"),a=z(l),s=D(),R(n,"class",r=d("legend-color")+" svelte-vp3koy"),O(n,"--color",t[21][0]),R(e,"class","legend-item svelte-vp3koy")},m(t,r){C(t,e,r),_(e,n),_(e,i),_(e,o),_(o,a),_(e,s)},p(t,e){4096&e&&O(n,"--color",t[21][0]),4096&e&&l!==(l=Zs.get(t[21][1])+"")&&I(a,l)},d(t){t&&N(e)}}}function Js(e){let n,r;return n=new Fa({props:{row:0}}),{c(){At(n.$$.fragment)},m(t,e){zt(n,t,e),r=!0},p:t,i(t){r||(_t(n.$$.fragment,t),r=!0)},o(t){kt(n.$$.fragment,t),r=!1},d(t){Dt(n,t)}}}function tl(t){let e,n;return e=new Bs({props:{dataMap:t[10].get(t[8]).get(t[5]).get(t[6]).get(t[7]),data:t[9],rows:t[11],categories:t[12].order,colors:t[12].colors,yDomain:t[12].yDomain,formatter:Ws,caption:t[3][0].value,url:nl}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};1504&n&&(r.dataMap=t[10].get(t[8]).get(t[5]).get(t[6]).get(t[7])),512&n&&(r.data=t[9]),2048&n&&(r.rows=t[11]),4096&n&&(r.categories=t[12].order),4096&n&&(r.colors=t[12].colors),4096&n&&(r.yDomain=t[12].yDomain),8&n&&(r.caption=t[3][0].value),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function el(t){let e,n,r,o,a,s,l,c,u,f,h,p,d,m,g,v,y,b,x,w,$,k,M,A,z,j,L,P,I,O,q,Y,U,H,V,B,W,Z,X,G,K,Q,J,tt,et;function nt(e){t[13](e)}r=new xa({props:{title:t[0]}}),a=new Sa({props:{standfirst:t[1]}}),l=new Ra({props:{authors:t[2]}});let rt={id:"medium",title:va.controls.medium.title,labels:["TV","Web"],info:va.controls.medium.description};void 0!==t[4]&&(rt.checked=t[4]),h=new Ua({props:rt}),ot.push((()=>Tt(h,"checked",nt)));let it=ga.sort(rl),at=[];for(let e=0;e<it.length;e+=1)at[e]=Ks(Gs(t,it,e));let st=$e(t[12].colors,t[12].order),lt=[];for(let e=0;e<st.length;e+=1)lt[e]=Qs(Xs(t,st,e));const ct=[tl,Js],ht=[];function pt(t,e){return t[9]?0:1}return K=pt(t),Q=ht[K]=ct[K](t),{c(){e=T("main"),n=T("div"),At(r.$$.fragment),o=D(),At(a.$$.fragment),s=D(),At(l.$$.fragment),c=D(),u=T("div"),f=T("div"),At(h.$$.fragment),d=D(),m=T("div"),g=T("div"),g.textContent="Location",v=D(),y=T("select"),b=T("option"),b.textContent="US";for(let t=0;t<at.length;t+=1)at[t].c();x=D(),w=T("div"),$=T("div"),$.textContent="Age group",k=D(),M=T("select"),A=T("option"),A.textContent="All",z=T("option"),z.textContent="18-24",j=T("option"),j.textContent="25-34",L=T("option"),L.textContent="35-44",P=T("option"),P.textContent="45-54",I=T("option"),I.textContent="55+",O=D(),q=T("div"),Y=T("div"),Y.textContent="Gender",U=D(),H=T("select"),V=T("option"),V.textContent="All",B=T("option"),B.textContent="Male",W=T("option"),W.textContent="Female",Z=D(),X=T("div");for(let t=0;t<lt.length;t+=1)lt[t].c();G=D(),Q.c(),R(n,"class","header-wrapper main-column svelte-vp3koy"),R(g,"class","control-title svelte-vp3koy"),b.__value="US",b.value=b.__value,R(y,"id","age-group-menu"),R(y,"name","location"),R(y,"class","svelte-vp3koy"),void 0===t[7]&&ut((()=>t[14].call(y))),R(m,"id","location"),R(m,"class","control control-menu svelte-vp3koy"),R($,"class","control-title svelte-vp3koy"),A.__value="All",A.value=A.__value,z.__value="18-24",z.value=z.__value,j.__value="25-34",j.value=j.__value,L.__value="35-44",L.value=L.__value,P.__value="45-54",P.value=P.__value,I.__value="55+",I.value=I.__value,R(M,"id","age-group-menu"),R(M,"name","age-group"),R(M,"class","svelte-vp3koy"),void 0===t[6]&&ut((()=>t[15].call(M))),R(w,"id","age-group"),R(w,"class","control control-menu svelte-vp3koy"),R(Y,"class","control-title svelte-vp3koy"),V.__value="All",V.value=V.__value,V.selected=!0,B.__value="Male",B.value=B.__value,W.__value="Female",W.value=W.__value,R(H,"id","gender-menu"),R(H,"name","location"),R(H,"class","svelte-vp3koy"),void 0===t[5]&&ut((()=>t[16].call(H))),R(q,"id","gender"),R(q,"class","control control-menu svelte-vp3koy"),R(f,"class","controls svelte-vp3koy"),R(X,"class","legend svelte-vp3koy"),R(u,"class","chart-wrapper"),R(e,"class","svelte-vp3koy")},m(i,p){C(i,e,p),_(e,n),zt(r,n,null),_(n,o),zt(a,n,null),_(n,s),zt(l,n,null),_(e,c),_(e,u),_(u,f),zt(h,f,null),_(f,d),_(f,m),_(m,g),_(m,v),_(m,y),_(y,b);for(let t=0;t<at.length;t+=1)at[t].m(y,null);F(y,t[7]),_(f,x),_(f,w),_(w,$),_(w,k),_(w,M),_(M,A),_(M,z),_(M,j),_(M,L),_(M,P),_(M,I),F(M,t[6]),_(f,O),_(f,q),_(q,Y),_(q,U),_(q,H),_(H,V),_(H,B),_(H,W),F(H,t[5]),_(u,Z),_(u,X);for(let t=0;t<lt.length;t+=1)lt[t].m(X,null);_(u,G),ht[K].m(u,null),J=!0,tt||(et=[E(y,"change",t[14]),E(M,"change",t[15]),E(H,"change",t[16])],tt=!0)},p(t,[e]){const n={};1&e&&(n.title=t[0]),r.$set(n);const i={};2&e&&(i.standfirst=t[1]),a.$set(i);const o={};4&e&&(o.authors=t[2]),l.$set(o);const s={};if(!p&&16&e&&(p=!0,s.checked=t[4],ft((()=>p=!1))),h.$set(s),0&e){let n;for(it=ga.sort(rl),n=0;n<it.length;n+=1){const r=Gs(t,it,n);at[n]?at[n].p(r,e):(at[n]=Ks(r),at[n].c(),at[n].m(y,null))}for(;n<at.length;n+=1)at[n].d(1);at.length=it.length}if(128&e&&F(y,t[7]),64&e&&F(M,t[6]),32&e&&F(H,t[5]),4096&e){let n;for(st=$e(t[12].colors,t[12].order),n=0;n<st.length;n+=1){const r=Xs(t,st,n);lt[n]?lt[n].p(r,e):(lt[n]=Qs(r),lt[n].c(),lt[n].m(X,null))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=st.length}let c=K;K=pt(t),K===c?ht[K].p(t,e):(wt(),kt(ht[c],1,1,(()=>{ht[c]=null})),$t(),Q=ht[K],Q?Q.p(t,e):(Q=ht[K]=ct[K](t),Q.c()),_t(Q,1),Q.m(u,null))},i(t){J||(_t(r.$$.fragment,t),_t(a.$$.fragment,t),_t(l.$$.fragment,t),_t(h.$$.fragment,t),_t(Q),J=!0)},o(t){kt(r.$$.fragment,t),kt(a.$$.fragment,t),kt(l.$$.fragment,t),kt(h.$$.fragment,t),kt(Q),J=!1},d(t){t&&N(e),Dt(r),Dt(a),Dt(l),Dt(h),S(at,t),S(lt,t),ht[K].d(),tt=!1,i(et)}}}const nl="assets/data/EchoCh-national_consumption_tv_and_web.csv",rl=(t,e)=>t.state.localeCompare(e.state);function il(t,e,n){let r,i,o,a,s,l,c,u,{title:f}=e,{standfirst:h=[{value:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Commodi consequatur inventore exercitationem ex perferendis provident, earum cumque maiores quam quidem labore, mollitia odit eaque laborum?"}]}=e,{authors:p}=e,{captions:d}=e,m=!1;et((async()=>{const t=await ma(nl,ua);n(9,l=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))).sort(((t,e)=>+t.date-+e.date))),n(10,c=se(l,(t=>t.medium),(t=>t.gender),(t=>t.age_group),(t=>t.state),(t=>+t.date),(t=>t.category))),n(11,u=Array.from(new Set(l.map((t=>+t.date)))))}));const g=new Map([["tv",{order:["non-news","news"],colors:["#33a02c","#b2df8a"],yDomain:[0,750]}],["web",{order:["other_news","facebook","hard_news","youtube","twitter","reddit","fake_news"],colors:["#a6cee3","#e31a1c","#fb9a99","#cab2d6","#fdbf6f","#ff7f00","#6a3d9a"],yDomain:[0,100]}]]);return t.$$set=t=>{"title"in t&&n(0,f=t.title),"standfirst"in t&&n(1,h=t.standfirst),"authors"in t&&n(2,p=t.authors),"captions"in t&&n(3,d=t.captions)},t.$$.update=()=>{16&t.$$.dirty&&n(8,r=m?"web":"tv"),256&t.$$.dirty&&n(12,s=g.get(r)),128&t.$$.dirty&&"US"!==a&&(n(5,i="All"),n(6,o="All")),96&t.$$.dirty&&("All"===o&&"All"===i||n(7,a="US"))},n(5,i="All"),n(6,o="All"),n(7,a="US"),[f,h,p,d,m,i,o,a,r,l,c,u,s,function(t){m=t,n(4,m)},function(){a=q(this),n(7,a)},function(){o=q(this),n(6,o)},function(){i=q(this),n(5,i)}]}class ol extends Lt{constructor(t){super(),Et(this,t,il,el,a,{title:0,standfirst:1,authors:2,captions:3})}}function al(t,e={}){let n;const r=r=>{const i=r[0].isIntersecting?"enter":"exit";"enter"===i&&t.dispatchEvent(new CustomEvent(i)),"enter"===i&&e.once&&n.disconnect()},i=({root:e,top:i,bottom:o})=>{const a={root:e,rootMargin:`${i?-1*i:0}px 0px ${o?-1*o:0}px 0px`};n&&n.disconnect(),n=new IntersectionObserver(r,a),n.observe(t)};return i(e),{update(t){i(t)},destroy(){n&&n.disconnect()}}}var sl=1e-6,ll=Math.PI,cl=ll/2,ul=ll/4,fl=2*ll,hl=180/ll,pl=ll/180,dl=Math.abs,ml=Math.atan,gl=Math.atan2,vl=Math.cos,yl=Math.sin,bl=Math.sign||function(t){return t>0?1:t<0?-1:0},xl=Math.sqrt;function wl(t){return t>1?cl:t<-1?-cl:Math.asin(t)}function $l(){}function _l(t,e){t&&Ml.hasOwnProperty(t.type)&&Ml[t.type](t,e)}var kl={Feature:function(t,e){_l(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)_l(n[r].geometry,e)}},Ml={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Cl(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Cl(n[r],e,0)},Polygon:function(t,e){Nl(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Nl(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)_l(n[r],e)}};function Cl(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Nl(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Cl(t[n],e,1);e.polygonEnd()}function Sl(t){return[gl(t[1],t[0]),wl(t[2])]}function Tl(t){var e=t[0],n=t[1],r=vl(n);return[r*vl(e),r*yl(e),yl(n)]}function Al(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zl(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Dl(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function jl(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function El(t){var e=xl(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ll(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Pl(t,e){return[dl(t)>ll?t+Math.round(-t/fl)*fl:t,e]}function Rl(t){return function(e,n){return[(e+=t)>ll?e-fl:e<-ll?e+fl:e,n]}}function Il(t){var e=Rl(t);return e.invert=Rl(-t),e}function Ol(t,e){var n=vl(t),r=yl(t),i=vl(e),o=yl(e);function a(t,e){var a=vl(e),s=vl(t)*a,l=yl(t)*a,c=yl(e),u=c*n+s*r;return[gl(l*i-u*o,s*n-c*r),wl(u*i+l*o)]}return a.invert=function(t,e){var a=vl(e),s=vl(t)*a,l=yl(t)*a,c=yl(e),u=c*i-l*o;return[gl(l*i+c*o,s*n+u*r),wl(u*n-s*r)]},a}function Fl(t,e){(e=Tl(e))[0]-=t,El(e);var n=function(t){return t>1?0:t<-1?ll:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+fl-sl)%fl}function ql(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:$l,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Yl(t,e){return dl(t[0]-e[0])<sl&&dl(t[1]-e[1])<sl}function Ul(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Hl(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Yl(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new Ul(r,t,null,!0)),l.push(n.o=new Ul(r,null,n,!1)),s.push(n=new Ul(a,t,null,!1)),l.push(n.o=new Ul(a,null,n,!0))}})),s.length){for(l.sort(e),Vl(s),Vl(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var c,u,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((u=c[o])[0],u[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((u=c[o])[0],u[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Vl(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Bl(t){return dl(t[0])<=ll?t[0]:bl(t[0])*((dl(t[0])+ll)%fl-ll)}function Wl(t,e,n,r){return function(i){var o,a,s,l=e(i),c=ql(),u=e(c),f=!1,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=y,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=g,a=ve(a);var t=function(t,e){var n=Bl(e),r=e[1],i=yl(r),o=[yl(n),-vl(n),0],a=0,s=0,l=new ne;1===i?r=cl+sl:-1===i&&(r=-cl-sl);for(var c=0,u=t.length;c<u;++c)if(h=(f=t[c]).length)for(var f,h,p=f[h-1],d=Bl(p),m=p[1]/2+ul,g=yl(m),v=vl(m),y=0;y<h;++y,d=x,g=$,v=_,p=b){var b=f[y],x=Bl(b),w=b[1]/2+ul,$=yl(w),_=vl(w),k=x-d,M=k>=0?1:-1,C=M*k,N=C>ll,S=g*$;if(l.add(gl(S*M*yl(C),v*_+S*vl(C))),a+=N?k+M*fl:k,N^d>=n^x>=n){var T=zl(Tl(p),Tl(b));El(T);var A=zl(o,T);El(A);var z=(N^k>=0?-1:1)*wl(A[2]);(r>z||r===z&&(T[0]||T[1]))&&(s+=N^k>=0?1:-1)}}return(a<-sl||a<sl&&l<-1e-12)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),Hl(a,Xl,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(e,n){t(e,n)&&i.point(e,n)}function d(t,e){l.point(t,e)}function m(){h.point=d,l.lineStart()}function g(){h.point=p,l.lineEnd()}function v(t,e){s.push([t,e]),u.point(t,e)}function y(){u.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),h=c.result(),p=h.length;if(s.pop(),o.push(s),s=null,p)if(1&l){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else p>1&&2&l&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Zl))}return h}}function Zl(t){return t.length>1}function Xl(t,e){return((t=t.x)[0]<0?t[1]-cl-sl:cl-t[1])-((e=e.x)[0]<0?e[1]-cl-sl:cl-e[1])}Pl.invert=Pl;var Gl=Wl((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?ll:-ll,l=dl(o-n);dl(l-ll)<sl?(t.point(n,r=(r+a)/2>0?cl:-cl),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=ll&&(dl(n-i)<sl&&(n-=i*sl),dl(o-s)<sl&&(o-=s*sl),r=function(t,e,n,r){var i,o,a=yl(t-n);return dl(a)>sl?ml((yl(e)*(o=vl(r))*yl(n)-yl(r)*(i=vl(e))*yl(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*cl,r.point(-ll,i),r.point(0,i),r.point(ll,i),r.point(ll,0),r.point(ll,-i),r.point(0,-i),r.point(-ll,-i),r.point(-ll,0),r.point(-ll,i);else if(dl(t[0]-e[0])>sl){var o=t[0]<e[0]?ll:-ll;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-ll,-cl]);function Kl(t){var e=vl(t),n=6*pl,r=e>0,i=dl(e)>sl;function o(t,n){return vl(t)*vl(n)>e}function a(t,n,r){var i=[1,0,0],o=zl(Tl(t),Tl(n)),a=Al(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var c=e*a/l,u=-e*s/l,f=zl(i,o),h=jl(i,c);Dl(h,jl(o,u));var p=f,d=Al(h,p),m=Al(p,p),g=d*d-m*(Al(h,h)-1);if(!(g<0)){var v=xl(g),y=jl(p,(-d-v)/m);if(Dl(y,h),y=Sl(y),!r)return y;var b,x=t[0],w=n[0],$=t[1],_=n[1];w<x&&(b=x,x=w,w=b);var k=w-x,M=dl(k-ll)<sl;if(!M&&_<$&&(b=$,$=_,_=b),M||k<sl?M?$+_>0^y[1]<(dl(y[0]-x)<sl?$:_):$<=y[1]&&y[1]<=_:k>ll^(x<=y[0]&&y[0]<=w)){var C=jl(p,(-d+v)/m);return Dl(C,h),[y,Sl(C)]}}}function s(e,n){var i=r?t:ll-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Wl(o,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(f,h){var p,d=[f,h],m=o(f,h),g=r?m?0:s(f,h):m?s(f+(f<0?ll:-ll),h):0;if(!e&&(c=l=m)&&t.lineStart(),m!==l&&(!(p=a(e,d))||Yl(e,p)||Yl(d,p))&&(d[2]=1),m!==l)u=0,m?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(i&&e&&r^m){var v;g&n||!(v=a(d,e,!0))||(u=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!m||e&&Yl(e,d)||t.point(d[0],d[1]),e=d,l=m,n=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var a=vl(e),s=yl(e),l=r*n;null==i?(i=e+r*fl,o=e-l/2):(i=Fl(a,i),o=Fl(a,o),(r>0?i<o:i>o)&&(i+=r*fl));for(var c,u=i;r>0?u>o:u<o;u-=l)c=Sl([a,-s*vl(u),-s*yl(u)]),t.point(c[0],c[1])}}(o,t,n,i,e,r)}),r?[0,-t]:[-ll,t-ll])}var Ql=1e9,Jl=-Ql;function tc(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var u=0,f=0;if(null==i||(u=a(i,s))!==(f=a(o,s))||l(i,o)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return dl(r[0]-t)<sl?i>0?0:3:dl(r[0]-n)<sl?i>0?2:1:dl(r[1]-e)<sl?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,c,u,f,h,p,d,m,g,v,y,b=a,x=ql(),w={point:$,lineStart:function(){w.point=_,c&&c.push(u=[]);v=!0,g=!1,d=m=NaN},lineEnd:function(){l&&(_(f,h),p&&g&&x.rejoin(),l.push(x.result()));w.point=$,g&&b.lineEnd()},polygonStart:function(){b=x,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],l=1,u=s.length,f=s[0],h=f[0],p=f[1];l<u;++l)o=h,a=p,h=(f=s[l])[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=y&&e,i=(l=ve(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Hl(l,s,e,o,a),a.polygonEnd());b=a,l=c=u=null}};function $(t,e){i(t,e)&&b.point(t,e)}function _(o,a){var s=i(o,a);if(c&&u.push([o,a]),v)f=o,h=a,p=s,v=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var l=[d=Math.max(Jl,Math.min(Ql,d)),m=Math.max(Jl,Math.min(Ql,m))],x=[o=Math.max(Jl,Math.min(Ql,o)),a=Math.max(Jl,Math.min(Ql,a))];!function(t,e,n,r,i,o){var a,s=t[0],l=t[1],c=0,u=1,f=e[0]-s,h=e[1]-l;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<u&&(u=a)}else if(f>0){if(a>u)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>u)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<u&&(u=a)}if(a=r-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=o-l,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}return c>0&&(t[0]=s+c*f,t[1]=l+c*h),u<1&&(e[0]=s+u*f,e[1]=l+u*h),!0}}}}}(l,x,t,e,n,r)?s&&(b.lineStart(),b.point(o,a),y=!1):(g||(b.lineStart(),b.point(l[0],l[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1)}d=o,m=a,g=s}return w}}var ec=t=>t,nc=1/0,rc=nc,ic=-nc,oc=ic,ac={point:function(t,e){t<nc&&(nc=t);t>ic&&(ic=t);e<rc&&(rc=e);e>oc&&(oc=e)},lineStart:$l,lineEnd:$l,polygonStart:$l,polygonEnd:$l,result:function(){var t=[[nc,rc],[ic,oc]];return ic=oc=-(rc=nc=1/0),t}};var sc=ac;function lc(t){return function(e){var n=new cc;for(var r in t)n[r]=t[r];return n.stream=e,n}}function cc(){}function uc(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),function(t,e){t&&kl.hasOwnProperty(t.type)?kl[t.type](t,e):_l(t,e)}(n,t.stream(sc)),e(sc.result()),null!=r&&t.clipExtent(r),t}function fc(t,e,n){return uc(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function hc(t,e,n){return fc(t,[[0,0],e],n)}function pc(t,e,n){return uc(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function dc(t,e,n){return uc(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}cc.prototype={constructor:cc,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var mc=vl(30*pl);function gc(t,e){return+e?function(t,e){function n(r,i,o,a,s,l,c,u,f,h,p,d,m,g){var v=c-r,y=u-i,b=v*v+y*y;if(b>4*e&&m--){var x=a+h,w=s+p,$=l+d,_=xl(x*x+w*w+$*$),k=wl($/=_),M=dl(dl($)-1)<sl||dl(o-f)<sl?(o+f)/2:gl(w,x),C=t(M,k),N=C[0],S=C[1],T=N-r,A=S-i,z=y*T-v*A;(z*z/b>e||dl((v*T+y*A)/b-.5)>.3||a*h+s*p+l*d<mc)&&(n(r,i,o,a,s,l,N,S,M,x/=_,w/=_,$,m,g),g.point(N,S),n(N,S,M,x,w,$,c,u,f,h,p,d,m,g))}}return function(e){var r,i,o,a,s,l,c,u,f,h,p,d,m={point:g,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){u=NaN,m.point=y,e.lineStart()}function y(r,i){var o=Tl([r,i]),a=t(r,i);n(u,f,c,h,p,d,u=a[0],f=a[1],c=r,h=o[0],p=o[1],d=o[2],16,e),e.point(u,f)}function b(){m.point=g,e.lineEnd()}function x(){v(),m.point=w,m.lineEnd=$}function w(t,e){y(r=t,e),i=u,o=f,a=h,s=p,l=d,m.point=y}function $(){n(u,f,c,h,p,d,i,o,r,a,s,l,16,e),m.lineEnd=b,b()}return m}}(t,e):function(t){return lc({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var vc=lc({point:function(t,e){this.stream.point(t*pl,e*pl)}});function yc(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=vl(o),s=yl(o),l=a*t,c=s*t,u=a/t,f=s/t,h=(s*n-a*e)/t,p=(s*e+a*n)/t;function d(t,o){return[l*(t*=r)-c*(o*=i)+e,n-c*t-l*o]}return d.invert=function(t,e){return[r*(u*t-f*e+h),i*(p-f*t-u*e)]},d}function bc(t){var e,n,r,i,o,a,s,l,c,u,f=150,h=480,p=250,d=0,m=0,g=0,v=0,y=0,b=0,x=1,w=1,$=null,_=Gl,k=null,M=ec,C=.5;function N(t){return l(t[0]*pl,t[1]*pl)}function S(t){return(t=l.invert(t[0],t[1]))&&[t[0]*hl,t[1]*hl]}function T(){var t=yc(f,0,0,x,w,b).apply(null,e(d,m)),r=yc(f,h-t[0],p-t[1],x,w,b);return n=function(t,e,n){return(t%=fl)?e||n?Ll(Il(t),Ol(e,n)):Il(t):e||n?Ol(e,n):Pl}(g,v,y),s=Ll(e,r),l=Ll(n,s),a=gc(s,C),A()}function A(){return c=u=null,N}return N.stream=function(t){return c&&u===t?c:c=vc(function(t){return lc({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(_(a(M(u=t)))))},N.preclip=function(t){return arguments.length?(_=t,$=void 0,A()):_},N.postclip=function(t){return arguments.length?(M=t,k=r=i=o=null,A()):M},N.clipAngle=function(t){return arguments.length?(_=+t?Kl($=t*pl):($=null,Gl),A()):$*hl},N.clipExtent=function(t){return arguments.length?(M=null==t?(k=r=i=o=null,ec):tc(k=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),A()):null==k?null:[[k,r],[i,o]]},N.scale=function(t){return arguments.length?(f=+t,T()):f},N.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],T()):[h,p]},N.center=function(t){return arguments.length?(d=t[0]%360*pl,m=t[1]%360*pl,T()):[d*hl,m*hl]},N.rotate=function(t){return arguments.length?(g=t[0]%360*pl,v=t[1]%360*pl,y=t.length>2?t[2]%360*pl:0,T()):[g*hl,v*hl,y*hl]},N.angle=function(t){return arguments.length?(b=t%360*pl,T()):b*hl},N.reflectX=function(t){return arguments.length?(x=t?-1:1,T()):x<0},N.reflectY=function(t){return arguments.length?(w=t?-1:1,T()):w<0},N.precision=function(t){return arguments.length?(a=gc(s,C=t*t),A()):xl(C)},N.fitExtent=function(t,e){return fc(N,t,e)},N.fitSize=function(t,e){return hc(N,t,e)},N.fitWidth=function(t,e){return pc(N,t,e)},N.fitHeight=function(t,e){return dc(N,t,e)},function(){return e=t.apply(this,arguments),N.invert=e.invert&&S,T()}}function xc(t,e){var n=yl(t),r=(n+yl(e))/2;if(dl(r)<sl)return function(t){var e=vl(t);function n(t,n){return[t*e,yl(n)/e]}return n.invert=function(t,n){return[t/e,wl(n*e)]},n}(t);var i=1+n*(2*r-n),o=xl(i)/r;function a(t,e){var n=xl(i-2*r*yl(e))/r;return[n*yl(t*=r),o-n*vl(t)]}return a.invert=function(t,e){var n=o-e,a=gl(t,dl(n))*bl(n);return n*r<0&&(a-=ll*bl(t)*bl(n)),[a/r,wl((i-(t*t+n*n)*r*r)/(2*r))]},a}function wc(){return function(t){var e=0,n=ll/3,r=bc(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*pl,n=t[1]*pl):[e*hl,n*hl]},i}(xc).scale(155.424).center([0,33.6442])}function $c(){var t,e,n,r,i,o,a=wc().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),s=wc().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=wc().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function u(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(t)},u.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),l.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},u.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),f()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],u=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,u-.238*e],[o+.455*e,u+.238*e]]).stream(c),r=s.translate([o-.307*e,u+.201*e]).clipExtent([[o-.425*e+sl,u+.12*e+sl],[o-.214*e-sl,u+.234*e-sl]]).stream(c),i=l.translate([o-.205*e,u+.212*e]).clipExtent([[o-.214*e+sl,u+.166*e+sl],[o-.115*e-sl,u+.234*e-sl]]).stream(c),f()},u.fitExtent=function(t,e){return fc(u,t,e)},u.fitSize=function(t,e){return hc(u,t,e)},u.fitWidth=function(t,e){return pc(u,t,e)},u.fitHeight=function(t,e){return dc(u,t,e)},u.scale(1070)}function _c(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,l,c,u,f,h,p=t._root,d={data:r},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+y)/2))?g=a:y=a,i=p,!(p=p[f=u<<1|c]))return i[f]=d,t;if(s=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===s&&n===l)return d.next=p,i?i[f]=d:t._root=d,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+y)/2))?g=a:y=a}while((f=u<<1|c)==(h=(l>=a)<<1|s>=o));return i[h]=p,i[f]=d,t}function kc(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Mc(t){return t[0]}function Cc(t){return t[1]}function Nc(t,e,n){var r=new Sc(null==e?Mc:e,null==n?Cc:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Sc(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Tc(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ac=Nc.prototype=Sc.prototype;function zc(t){return function(){return t}}function Dc(t){return 1e-6*(t()-.5)}function jc(t){return t.x+t.vx}function Ec(t){return t.y+t.vy}function Lc(t){var e,n,r,i=1,o=1;function a(){for(var t,a,l,c,u,f,h,p=e.length,d=0;d<o;++d)for(a=Nc(e,jc,Ec).visitAfter(s),t=0;t<p;++t)l=e[t],f=n[l.index],h=f*f,c=l.x+l.vx,u=l.y+l.vy,a.visit(m);function m(t,e,n,o,a){var s=t.data,p=t.r,d=f+p;if(!s)return e>c+d||o<c-d||n>u+d||a<u-d;if(s.index>l.index){var m=c-s.x-s.vx,g=u-s.y-s.vy,v=m*m+g*g;v<d*d&&(0===m&&(v+=(m=Dc(r))*m),0===g&&(v+=(g=Dc(r))*g),v=(d-(v=Math.sqrt(v)))/v*i,l.vx+=(m*=v)*(d=(p*=p)/(h+p)),l.vy+=(g*=v)*d,s.vx-=m*(d=1-d),s.vy-=g*d)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=zc(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,l()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:zc(+e),l(),a):t},a}Ac.copy=function(){var t,e,n=new Sc(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Tc(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Tc(e));return n},Ac.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return _c(this.cover(e,n),e,n,t)},Ac.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>f&&(f=i));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<o;++n)_c(this,a[n],s[n],t[n]);return this},Ac.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,l=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Ac.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Ac.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ac.find=function(t,e,n){var r,i,o,a,s,l,c,u=this._x0,f=this._y0,h=this._x1,p=this._y1,d=[],m=this._root;for(m&&d.push(new kc(m,u,f,h,p)),null==n?n=1/0:(u=t-n,f=e-n,h=t+n,p=e+n,n*=n);l=d.pop();)if(!(!(m=l.node)||(i=l.x0)>h||(o=l.y0)>p||(a=l.x1)<u||(s=l.y1)<f))if(m.length){var g=(i+a)/2,v=(o+s)/2;d.push(new kc(m[3],g,v,a,s),new kc(m[2],i,v,g,s),new kc(m[1],g,o,a,v),new kc(m[0],i,o,g,v)),(c=(e>=v)<<1|t>=g)&&(l=d[d.length-1],d[d.length-1]=d[d.length-1-c],d[d.length-1-c]=l)}else{var y=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);u=t-w,f=e-w,h=t+w,p=e+w,r=m.data}}return r},Ac.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,l,c,u,f,h,p=this._root,d=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(s=(d+g)/2))?d=s:g=s,(u=a>=(l=(m+v)/2))?m=l:v=l,e=p,!(p=p[f=u<<1|c]))return this;if(!p.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[h]=p:this._root=p),this):(this._root=i,this)},Ac.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Ac.root=function(){return this._root},Ac.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Ac.visit=function(t){var e,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new kc(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&l.length){var c=(r+o)/2,u=(i+a)/2;(n=l[3])&&s.push(new kc(n,c,u,o,a)),(n=l[2])&&s.push(new kc(n,r,u,c,a)),(n=l[1])&&s.push(new kc(n,c,i,o,u)),(n=l[0])&&s.push(new kc(n,r,i,c,u))}return this},Ac.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new kc(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(a+l)/2,f=(s+c)/2;(o=i[0])&&n.push(new kc(o,a,s,u,f)),(o=i[1])&&n.push(new kc(o,u,s,l,f)),(o=i[2])&&n.push(new kc(o,a,f,u,c)),(o=i[3])&&n.push(new kc(o,u,f,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ac.x=function(t){return arguments.length?(this._x=t,this):this._x},Ac.y=function(t){return arguments.length?(this._y=t,this):this._y};var Pc={value:()=>{}};function Rc(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ic(r)}function Ic(t){this._=t}function Oc(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Fc(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function qc(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Pc,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ic.prototype=Rc.prototype={constructor:Ic,on:function(t,e){var n,r=this._,i=Oc(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=qc(r[n],t.name,e);else if(null==e)for(n in r)r[n]=qc(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=Fc(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ic(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var Yc,Uc,Hc=0,Vc=0,Bc=0,Wc=0,Zc=0,Xc=0,Gc="object"==typeof performance&&performance.now?performance:Date,Kc="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qc(){return Zc||(Kc(Jc),Zc=Gc.now()+Xc)}function Jc(){Zc=0}function tu(){this._call=this._time=this._next=null}function eu(t,e,n){var r=new tu;return r.restart(t,e,n),r}function nu(){Zc=(Wc=Gc.now())+Xc,Hc=Vc=0;try{!function(){Qc(),++Hc;for(var t,e=Yc;e;)(t=Zc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Hc}()}finally{Hc=0,function(){var t,e,n=Yc,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Yc=e);Uc=t,iu(r)}(),Zc=0}}function ru(){var t=Gc.now(),e=t-Wc;e>1e3&&(Xc-=e,Wc=t)}function iu(t){Hc||(Vc&&(Vc=clearTimeout(Vc)),t-Zc>24?(t<1/0&&(Vc=setTimeout(nu,t-Gc.now()-Xc)),Bc&&(Bc=clearInterval(Bc))):(Bc||(Wc=Gc.now(),Bc=setInterval(ru,1e3)),Hc=1,Kc(nu)))}tu.prototype=eu.prototype={constructor:tu,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Qc():+n)+(null==e?0:+e),this._next||Uc===this||(Uc?Uc._next=this:Yc=this,Uc=this),this._call=t,this._time=n,iu()},stop:function(){this._call&&(this._call=null,this._time=1/0,iu())}};const ou=4294967296;function au(t){return t.x}function su(t){return t.y}var lu=Math.PI*(3-Math.sqrt(5));function cu(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=eu(f),c=Rc("tick","end"),u=function(){let t=1;return()=>(t=(1664525*t+1013904223)%ou)/ou}();function f(){h(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function h(r){var l,c,u=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),l=0;l<u;++l)null==(c=t[l]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*lu;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),p(),e={tick:h,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(u=t,s.forEach(d),e):u},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,l,c=0,u=t.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(l=s,r=a);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function uu(){var t,e,n,r,i,o=zc(-30),a=1,s=1/0,l=.81;function c(n){var i,o=t.length,a=Nc(t,au,su).visitAfter(f);for(r=n,i=0;i<o;++i)e=t[i],a.visit(h)}function u(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function f(t){var e,n,r,o,a,s=0,l=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,o+=n*e.y);t.x=r/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,o,c,u){if(!t.value)return!0;var f=t.x-e.x,h=t.y-e.y,p=u-o,d=f*f+h*h;if(p*p/l<d)return d<s&&(0===f&&(d+=(f=Dc(n))*f),0===h&&(d+=(h=Dc(n))*h),d<a&&(d=Math.sqrt(a*d)),e.vx+=f*t.value*r/d,e.vy+=h*t.value*r/d),!0;if(!(t.length||d>=s)){(t.data!==e||t.next)&&(0===f&&(d+=(f=Dc(n))*f),0===h&&(d+=(h=Dc(n))*h),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(p=i[t.data.index]*r/d,e.vx+=f*p,e.vy+=h*p)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,u()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:zc(+t),u(),c):o},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(l=t*t,c):Math.sqrt(l)},c}function fu(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function hu(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function pu(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function du(t,e,n){const r=t.slice();return r[9]=e[n],r[11]=n,r}function mu(t){let e,n,r,i,o,a,s,l=t[6],c=[];for(let e=0;e<l.length;e+=1)c[e]=gu(du(t,l,e));let u=t[7],f=[];for(let e=0;e<u.length;e+=1)f[e]=vu(pu(t,u,e));let h=t[6],p=[];for(let e=0;e<h.length;e+=1)p[e]=yu(hu(t,h,e));let d=t[7],m=[];for(let e=0;e<d.length;e+=1)m[e]=bu(fu(t,d,e));return{c(){e=A("g"),n=A("foreignObject"),r=T("div");for(let t=0;t<c.length;t+=1)c[t].c();i=D();for(let t=0;t<f.length;t+=1)f[t].c();o=D();for(let t=0;t<p.length;t+=1)p[t].c();a=j();for(let t=0;t<m.length;t+=1)m[t].c();R(r,"class","annotation-wrapper svelte-ryoqn6"),R(n,"width",t[1]),R(n,"height",t[2]),R(e,"class","intro-annotation"),R(e,"transform",s="translate(-35, 0)")},m(t,s){C(t,e,s),_(e,n),_(n,r);for(let t=0;t<c.length;t+=1)c[t].m(r,null);_(r,i);for(let t=0;t<f.length;t+=1)f[t].m(r,null);_(r,o);for(let t=0;t<p.length;t+=1)p[t].m(e,null);_(e,a);for(let t=0;t<m.length;t+=1)m[t].m(e,null)},p(t,s){if(64&s){let e;for(l=t[6],e=0;e<l.length;e+=1){const n=du(t,l,e);c[e]?c[e].p(n,s):(c[e]=gu(n),c[e].c(),c[e].m(r,i))}for(;e<c.length;e+=1)c[e].d(1);c.length=l.length}if(160&s){let e;for(u=t[7],e=0;e<u.length;e+=1){const n=pu(t,u,e);f[e]?f[e].p(n,s):(f[e]=vu(n),f[e].c(),f[e].m(r,o))}for(;e<f.length;e+=1)f[e].d(1);f.length=u.length}if(2&s&&R(n,"width",t[1]),4&s&&R(n,"height",t[2]),64&s){let n;for(h=t[6],n=0;n<h.length;n+=1){const r=hu(t,h,n);p[n]?p[n].p(r,s):(p[n]=yu(r),p[n].c(),p[n].m(e,a))}for(;n<p.length;n+=1)p[n].d(1);p.length=h.length}if(128&s){let n;for(d=t[7],n=0;n<d.length;n+=1){const r=fu(t,d,n);m[n]?m[n].p(r,s):(m[n]=bu(r),m[n].c(),m[n].m(e,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=d.length}},d(t){t&&N(e),S(c,t),S(f,t),S(p,t),S(m,t)}}}function gu(e){let n,r,i,o;return{c(){n=T("div"),r=z("In "),i=T("b"),i.textContent="NY",o=z(", 5 to 10% of the population\n            experience partisanship in their news\n            diets."),R(n,"class","annotation svelte-ryoqn6"),O(n,"top",e[9].y-(e[9].r_L+80)+"px"),O(n,"left",e[9].x-(e[9].r_L+80)+"px")},m(t,e){C(t,n,e),_(n,r),_(n,i),_(n,o)},p:t,d(t){t&&N(n)}}}function vu(e){let n,r,i,o,a,s;return{c(){n=T("div"),r=T("b"),r.textContent="ND",i=z("'s right-leaning echo chamber is\n            much more sizeable and intense: over \n            10% of the population.\n            "),o=T("div"),R(o,"class","close-button svelte-ryoqn6"),R(n,"class","annotation svelte-ryoqn6"),O(n,"top",e[9].y-(e[9].r_L+140)+"px"),O(n,"left",e[9].x+(e[9].r_R+20)+"px")},m(t,l){C(t,n,l),_(n,r),_(n,i),_(n,o),a||(s=E(o,"click",e[5]),a=!0)},p:t,d(t){t&&N(n),a=!1,s()}}}function yu(e){let n;return{c(){n=A("line"),R(n,"class","annotation-line svelte-ryoqn6"),R(n,"x1",e[9].x-(e[9].r_L+5)),R(n,"x2",e[9].x-(e[9].r_L-10)),R(n,"y1",e[9].y-(e[9].r_L+16)),R(n,"y2",e[9].y-(e[9].r_L-16))},m(t,e){C(t,n,e)},p:t,d(t){t&&N(n)}}}function bu(e){let n;return{c(){n=A("line"),R(n,"class","annotation-line svelte-ryoqn6"),R(n,"x1",e[9].x+(e[9].r_R+45)),R(n,"x2",e[9].x-(e[9].r_L-35)),R(n,"y1",e[9].y-(e[9].r_L+45)),R(n,"y2",e[9].y-e[9].r_L)},m(t,e){C(t,n,e)},p:t,d(t){t&&N(n)}}}function xu(e){let n,r=e[0]&&mu(e);return{c(){r&&r.c(),n=j()},m(t,e){r&&r.m(t,e),C(t,n,e)},p(t,[e]){t[0]?r?r.p(t,e):(r=mu(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&N(n)}}}function wu(t,e,n){let r,i,o;const{width:a,height:s}=rt("LayerCake");l(t,a,(t=>n(1,i=t))),l(t,s,(t=>n(2,o=t)));let{data:c}=e;const u=c.filter((t=>"NY"===t.abbr)),f=c.filter((t=>"ND"===t.abbr));return t.$$set=t=>{"data"in t&&n(8,c=t.data)},n(0,r=!0),[r,i,o,a,s,function(){n(0,r=!1)},u,f,c]}class $u extends Lt{constructor(t){super(),Et(this,t,wu,xu,a,{data:8})}}function _u(t,e,n){const r=t.slice();return r[26]=e[n],r}function ku(t){let e,n;return e=new $u({props:{data:t[1]}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.data=t[1]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function Mu(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,m,g,v,y,b,x,w,$=t[26].abbr+"";function k(...e){return t[18](t[26],...e)}return{c(){e=A("g"),n=A("path"),o=A("path"),l=A("path"),h=A("text"),p=z($),R(n,"class","node svelte-bbhs7x"),R(n,"fill",r=t[26].fillR),R(n,"d",i=t[26].rightPathString),R(o,"class","node svelte-bbhs7x"),R(o,"fill",a=t[26].fillL),R(o,"d",s=t[26].leftPathString),R(l,"class","node node-stroke svelte-bbhs7x"),R(l,"fill",c="none"),R(l,"stroke",u="black"),R(l,"d",f=t[26].fullPath),R(h,"class",m=d("state-label "+(t[2]?"active":""))+" svelte-bbhs7x"),R(h,"fill","black"),R(h,"dx",g=(t[26].r_L+3)*Math.cos(3*Math.PI/4)),R(h,"dy",v=-(t[26].r_L+3)*Math.cos(3*Math.PI/4)),R(e,"class",y=d(`node-group node-group-${t[26].abbr}`)+" svelte-bbhs7x"),R(e,"transform",b=`translate(${t[26].x}, ${t[26].y})`)},m(t,r){C(t,e,r),_(e,n),_(e,o),_(e,l),_(e,h),_(h,p),x||(w=E(e,"click",k),x=!0)},p(c,u){t=c,2&u&&r!==(r=t[26].fillR)&&R(n,"fill",r),2&u&&i!==(i=t[26].rightPathString)&&R(n,"d",i),2&u&&a!==(a=t[26].fillL)&&R(o,"fill",a),2&u&&s!==(s=t[26].leftPathString)&&R(o,"d",s),2&u&&f!==(f=t[26].fullPath)&&R(l,"d",f),2&u&&$!==($=t[26].abbr+"")&&I(p,$),4&u&&m!==(m=d("state-label "+(t[2]?"active":""))+" svelte-bbhs7x")&&R(h,"class",m),2&u&&g!==(g=(t[26].r_L+3)*Math.cos(3*Math.PI/4))&&R(h,"dx",g),2&u&&v!==(v=-(t[26].r_L+3)*Math.cos(3*Math.PI/4))&&R(h,"dy",v),2&u&&y!==(y=d(`node-group node-group-${t[26].abbr}`)+" svelte-bbhs7x")&&R(e,"class",y),2&u&&b!==(b=`translate(${t[26].x}, ${t[26].y})`)&&R(e,"transform",b)},d(t){t&&N(e),x=!1,w()}}}function Cu(t){let e,n,r,i=t[0]&&ku(t),o=t[1],a=[];for(let e=0;e<o.length;e+=1)a[e]=Mu(_u(t,o,e));return{c(){i&&i.c(),e=D(),n=A("g");for(let t=0;t<a.length;t+=1)a[t].c();R(n,"class","bee-group"),R(n,"transform","translate(-35, 0)")},m(t,o){i&&i.m(t,o),C(t,e,o),C(t,n,o);for(let t=0;t<a.length;t+=1)a[t].m(n,null);r=!0},p(t,[r]){if(t[0]?i?(i.p(t,r),1&r&&_t(i,1)):(i=ku(t),i.c(),_t(i,1),i.m(e.parentNode,e)):i&&(wt(),kt(i,1,1,(()=>{i=null})),$t()),262&r){let e;for(o=t[1],e=0;e<o.length;e+=1){const i=_u(t,o,e);a[e]?a[e].p(i,r):(a[e]=Mu(i),a[e].c(),a[e].m(n,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=o.length}},i(t){r||(_t(i),r=!0)},o(t){kt(i),r=!1},d(t){i&&i.d(t),t&&N(e),t&&N(n),S(a,t)}}}function Nu(t,e){return t.arc(0,0,e.r,e.start,e.end),t.closePath(),t}function Su(t,e,n){let r,i,o,a,s,c;const{height:u,width:f,rScale:h,zScale:p,data:d}=rt("LayerCake");l(t,u,(t=>n(16,o=t))),l(t,f,(t=>n(17,a=t))),l(t,h,(t=>n(21,c=t))),l(t,p,(t=>n(20,s=t))),l(t,d,(t=>n(15,i=t)));let{collideStrength:m=1}=e,{manyBodyStrength:g=1}=e,{medium:v}=e,{diet_threshold:y}=e,{partisanship_scenario:b}=e,{renderAnnotation:x}=e;const w=nt(),$=$c();function _(){M.alpha(1).restart()}$.translate([a/2,o/2]);let k=[],M=cu().alpha(0).alphaMin(.4).force("collide",Lc((t=>t.r+9.5)).strength(m).iterations(5)).force("charge",uu().strength(g));function C(t){return t.map(((t,e)=>{const[n,r]=$(t.coordinates),i=c(Math.abs(t.data.left_size)),o=c(Math.abs(t.data.right_size)),a=Nu(Xa(),{r:o,start:-Math.PI/2,end:Math.PI/2}),l=s(1*t.data.right_pct),u=Nu(Xa(),{r:i,start:Math.PI/2,end:-Math.PI/2}),f=s(-1*t.data.left_pct),h=(p=Xa(),d={r:o},m={r:i},p.arc(0,0,d.r,-Math.PI/2,Math.PI/2),p.arc(0,0,m.r,Math.PI/2,-Math.PI/2),p.closePath(),p);var p,d,m;return{...t,x:n,y:r,r:Math.max(i,o),r_L:i,r_R:o,rightPathString:a,fillR:l,leftPathString:u,fillL:f,fullPath:h}}))}function N(t,e){w("click",{target:t.target,node:e})}return t.$$set=t=>{"collideStrength"in t&&n(9,m=t.collideStrength),"manyBodyStrength"in t&&n(10,g=t.manyBodyStrength),"medium"in t&&n(11,v=t.medium),"diet_threshold"in t&&n(12,y=t.diet_threshold),"partisanship_scenario"in t&&n(13,b=t.partisanship_scenario),"renderAnnotation"in t&&n(0,x=t.renderAnnotation)},t.$$.update=()=>{32768&t.$$.dirty&&n(1,k=C(i)),16386&t.$$.dirty&&n(14,M=M.nodes(k).on("tick",(()=>{n(1,k=M.nodes())})).on("end",(()=>{n(2,r=!0)}))),14336&t.$$.dirty&&_(),229376&t.$$.dirty&&($.translate([a/2,o/2]),n(1,k=n(1,k=C(i))),_())},n(2,r=!1),[x,k,r,u,f,h,p,d,N,m,g,v,y,b,M,i,o,a,(t,e)=>N(e,t)]}class Tu extends Lt{constructor(t){super(),Et(this,t,Su,Cu,a,{collideStrength:9,manyBodyStrength:10,medium:11,diet_threshold:12,partisanship_scenario:13,renderAnnotation:0})}}function Au(t,e,n){const r=t.slice();r[28]=e[n];const i=r[2](r[28].data[`${r[1]}_pct`]);return r[29]=i,r}function zu(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,m=t[28].abbr+"";function g(...e){return t[23](t[28],...e)}return{c(){e=A("g"),n=A("circle"),s=A("text"),l=z(m),R(n,"class","node svelte-11jqfcd"),R(n,"fill",r=t[29]),R(n,"cx",i=0),R(n,"cy",o=0),R(n,"r",a=t[28].r),R(s,"class",c=d("state-label "+(t[4]?"active":""))+" svelte-11jqfcd"),R(s,"fill",u=t[3](t[29])),R(e,"class","node-group svelte-11jqfcd"),R(e,"transform",f=`translate(${t[28].x}, ${t[28].y})`)},m(t,r){C(t,e,r),_(e,n),_(e,s),_(s,l),h||(p=E(n,"click",g),h=!0)},p(i,o){t=i,7&o[0]&&r!==(r=t[29])&&R(n,"fill",r),1&o[0]&&a!==(a=t[28].r)&&R(n,"r",a),1&o[0]&&m!==(m=t[28].abbr+"")&&I(l,m),16&o[0]&&c!==(c=d("state-label "+(t[4]?"active":""))+" svelte-11jqfcd")&&R(s,"class",c),15&o[0]&&u!==(u=t[3](t[29]))&&R(s,"fill",u),1&o[0]&&f!==(f=`translate(${t[28].x}, ${t[28].y})`)&&R(e,"transform",f)},d(t){t&&N(e),h=!1,p()}}}function Du(e){let n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=zu(Au(e,r,t));return{c(){n=A("g");for(let t=0;t<i.length;t+=1)i[t].c();R(n,"class","bee-group")},m(t,e){C(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,e){if(1055&e[0]){let o;for(r=t[0],o=0;o<r.length;o+=1){const a=Au(t,r,o);i[o]?i[o].p(a,e):(i[o]=zu(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&N(n),S(i,t)}}}function ju(t,e,n){let r,i,o,a,s,c,u,f,h;const{height:p,width:d,rScale:m,zScale:g,data:v}=rt("LayerCake");l(t,p,(t=>n(21,f=t))),l(t,d,(t=>n(22,h=t))),l(t,m,(t=>n(19,c=t))),l(t,g,(t=>n(2,s=t))),l(t,v,(t=>n(20,u=t)));let{collideStrength:y=1}=e,{manyBodyStrength:b=1}=e,{medium:x}=e,{diet_threshold:w}=e,{partisanship_scenario:$}=e,{political_lean:_}=e;const k=nt(),M=$c();function C(){S.alpha(1).restart()}M.translate([h/2,f/2]);let N=[],S=cu().alpha(0).alphaMin(.4).force("collide",Lc((t=>t.r+10)).strength(y).iterations(2)).force("charge",uu().strength(b));function T(t,e){k("click",{target:t.target,node:e})}return t.$$set=t=>{"collideStrength"in t&&n(11,y=t.collideStrength),"manyBodyStrength"in t&&n(12,b=t.manyBodyStrength),"medium"in t&&n(13,x=t.medium),"diet_threshold"in t&&n(14,w=t.diet_threshold),"partisanship_scenario"in t&&n(15,$=t.partisanship_scenario),"political_lean"in t&&n(16,_=t.political_lean)},t.$$.update=()=>{65536&t.$$.dirty[0]&&n(1,i="R"===_?"right":"left"),1572866&t.$$.dirty[0]&&n(0,N=u.map(((t,e)=>{const[n,r]=M(t.coordinates);return{...t,x:n,y:r,r:c(t.data[`${i}_size`])}}))),131073&t.$$.dirty[0]&&n(17,S=S.nodes(N).on("tick",(()=>{n(0,N=S.nodes())})).on("end",(()=>{n(4,r=!0)}))),57344&t.$$.dirty[0]&&C(),7864322&t.$$.dirty[0]&&(M.translate([h/2,f/2]),n(0,N=u.map(((t,e)=>{const[n,r]=M(t.coordinates);return{...t,x:n,y:r,r:c(t.data[`${i}_size`])}}))),C()),65536&t.$$.dirty[0]&&n(18,o=["black","black","black","gainsboro","gainsboro"]),262148&t.$$.dirty[0]&&n(3,a=Ce().domain(s.range()).range(o))},n(4,r=!1),[N,i,s,a,r,p,d,m,g,v,T,y,b,x,w,$,_,S,o,c,u,f,h,(t,e)=>T(e,t)]}class Eu extends Lt{constructor(t){super(),Et(this,t,ju,Du,a,{collideStrength:11,manyBodyStrength:12,medium:13,diet_threshold:14,partisanship_scenario:15,political_lean:16},null,[-1,-1])}}function Lu(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Pu(t){const e=t-1;return e*e*e+1}function Ru(t,{delay:n=0,duration:r=400,easing:i=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>"opacity: "+t*o}}function Iu(t,{delay:e=0,duration:n=400,easing:r=Pu,start:i=0,opacity:o=0}={}){const a=getComputedStyle(t),s=+a.opacity,l="none"===a.transform?"":a.transform,c=1-i,u=s*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${l} scale(${1-c*e});\n\t\t\topacity: ${s-u*e}\n\t\t`}}function Ou(t,{delay:e=0,speed:n,duration:r,easing:i=Lu}={}){let o=t.getTotalLength();const a=getComputedStyle(t);return"butt"!==a.strokeLinecap&&(o+=parseInt(a.strokeWidth)),void 0===r?r=void 0===n?800:o/n:"function"==typeof r&&(r=r(o)),{delay:e,duration:r,easing:i,css:(t,e)=>`stroke-dasharray: ${t*o} ${e*o}`}}function Fu(t,e,n){const r=t.slice();r[14]=e[n],r[18]=n;const i=r[14][1][0][1].map(((t,e)=>({...t,value_2:r[14][1][1][1][e].value})));r[15]=i;const o=r[4](r[14][0]);return r[16]=o,r}function qu(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function Yu(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function Uu(e,n){let r,i,o,a,s,l=t;return{key:e,first:null,c(){r=A("path"),R(r,"class",i=d(`path-line path-line-${n[19][0]}`)+" svelte-bfpx4i"),R(r,"d",o=n[2](n[19][1])),R(r,"stroke",a=n[16]),this.first=r},m(t,e){C(t,r,e)},p(t,e){n=t,8&e&&i!==(i=d(`path-line path-line-${n[19][0]}`)+" svelte-bfpx4i")&&R(r,"class",i),12&e&&o!==(o=n[2](n[19][1]))&&R(r,"d",o),24&e&&a!==(a=n[16])&&R(r,"stroke",a)},r(){s=r.getBoundingClientRect()},f(){Q(r),l()},a(){l(),l=K(r,s,Wu,{delay:0,duration:500})},d(t){t&&N(r)}}}function Hu(e,n){let r,i,o,a,s,l=t;return{key:e,first:null,c(){r=A("path"),R(r,"class",i=d(`path-polygon path-polygon-${n[19][0]}`)+" svelte-bfpx4i"),R(r,"d",o=n[1](n[15])),R(r,"fill",a=n[16]),this.first=r},m(t,e){C(t,r,e)},p(t,e){n=t,8&e&&i!==(i=d(`path-polygon path-polygon-${n[19][0]}`)+" svelte-bfpx4i")&&R(r,"class",i),10&e&&o!==(o=n[1](n[15]))&&R(r,"d",o),24&e&&a!==(a=n[16])&&R(r,"fill",a)},r(){s=r.getBoundingClientRect()},f(){Q(r),l()},a(){l(),l=K(r,s,Zu,{delay:500,duration:500})},d(t){t&&N(r)}}}function Vu(t){let e,n,r,i=[],o=new Map,a=[],s=new Map,l=t[14][1].filter(Xu);const c=t=>t[19];for(let e=0;e<l.length;e+=1){let n=Yu(t,l,e),r=c(n);o.set(r,i[e]=Uu(r,n))}let u=t[14][1].filter(Gu);const f=t=>t[19];for(let e=0;e<u.length;e+=1){let n=qu(t,u,e),r=f(n);s.set(r,a[e]=Hu(r,n))}return{c(){e=A("g");for(let t=0;t<i.length;t+=1)i[t].c();n=j();for(let t=0;t<a.length;t+=1)a[t].c();R(e,"class",r="threshold-group threshold-group-"+t[14][0]+" svelte-bfpx4i")},m(t,r){C(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);_(e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null)},p(t,h){if(28&h){l=t[14][1].filter(Xu);for(let t=0;t<i.length;t+=1)i[t].r();i=St(i,h,c,1,t,l,o,e,Nt,Uu,n,Yu);for(let t=0;t<i.length;t+=1)i[t].a()}if(26&h){u=t[14][1].filter(Gu);for(let t=0;t<a.length;t+=1)a[t].r();a=St(a,h,f,1,t,u,s,e,Nt,Hu,null,qu);for(let t=0;t<a.length;t+=1)a[t].a()}8&h&&r!==(r="threshold-group threshold-group-"+t[14][0]+" svelte-bfpx4i")&&R(e,"class",r)},d(t){t&&N(e);for(let t=0;t<i.length;t+=1)i[t].d();for(let t=0;t<a.length;t+=1)a[t].d()}}}function Bu(e){let n,r,i=e[3],o=[];for(let t=0;t<i.length;t+=1)o[t]=Vu(Fu(e,i,t));return{c(){n=A("g");for(let t=0;t<o.length;t+=1)o[t].c();R(n,"class",r=d(`line-group line-group-${e[0]}`)+" svelte-bfpx4i")},m(t,e){C(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(30&e){let r;for(i=t[3],r=0;r<i.length;r+=1){const a=Fu(t,i,r);o[r]?o[r].p(a,e):(o[r]=Vu(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}1&e&&r!==(r=d(`line-group line-group-${t[0]}`)+" svelte-bfpx4i")&&R(n,"class",r)},i:t,o:t,d(t){t&&N(n),S(o,t)}}}function Wu(t,{from:e,to:n},{delay:r,duration:i}){const o=t.getTotalLength();return{delay:r,duration:i,css:(t,e)=>`stroke-dasharray: ${t*o} ${e*o}`}}function Zu(t,{from:e,to:n},{delay:r,duration:i}){return{delay:r,duration:i,css:(t,e)=>"opacity: "+1*t}}const Xu=t=>50===t[0],Gu=t=>50===t[0];function Ku(t,e,n){let r,i,o,a,s,c,u;const{data:f,xGet:h,yGet:p,xScale:d,yScale:m,zScale:g}=rt("LayerCake");l(t,f,(t=>n(3,c=t))),l(t,h,(t=>n(12,s=t))),l(t,p,(t=>n(11,a=t))),l(t,m,(t=>n(10,o=t))),l(t,g,(t=>n(4,u=t)));let{activeChart:v}=e;return t.$$set=t=>{"activeChart"in t&&n(0,v=t.activeChart)},t.$$.update=()=>{6144&t.$$.dirty&&n(2,r=ns().x((t=>s(t))).y((t=>a(t))).curve(as)),7168&t.$$.dirty&&n(1,i=rs().x((t=>s(t))).y0((t=>a(t))).y1((t=>o(t.value_2))).curve(as))},[v,i,r,c,u,f,h,p,m,g,o,a,s]}class Qu extends Lt{constructor(t){super(),Et(this,t,Ku,Bu,a,{activeChart:0})}}const Ju=new Map([["L","#011f5b"],["R","#990000"]]);function tf(t){let e,n;return e=new Yo({props:{padding:t[0],flatData:t[2].filter(t[23]),data:le(t[4].filter(t[24]),sf,lf),x:t[5],xScale:"date"===t[5]?$o():Gn(),y:t[6],yDomain:t[8],yNice:!0,z:t[7],zScale:Ce(),zDomain:t[18],zRange:t[19],$$slots:{default:[rf]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.padding=t[0]),196612&n&&(r.flatData=t[2].filter(t[23])),196624&n&&(r.data=le(t[4].filter(t[24]),sf,lf)),32&n&&(r.x=t[5]),32&n&&(r.xScale="date"===t[5]?$o():Gn()),64&n&&(r.y=t[6]),256&n&&(r.yDomain=t[8]),128&n&&(r.z=t[7]),33590784&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function ef(t){let e,n,r,i;return e=new As({props:{gridlines:!1,ticks:t[10],formatTick:t[9],snapTicks:!1,tickMarks:!0}}),r=new $s({props:{ticks:4,formatTick:t[11]}}),{c(){At(e.$$.fragment),n=D(),At(r.$$.fragment)},m(t,o){zt(e,t,o),C(t,n,o),zt(r,t,o),i=!0},p(t,n){const i={};1024&n&&(i.ticks=t[10]),512&n&&(i.formatTick=t[9]),e.$set(i);const o={};2048&n&&(o.formatTick=t[11]),r.$set(o)},i(t){i||(_t(e.$$.fragment,t),_t(r.$$.fragment,t),i=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){Dt(e,t),t&&N(n),Dt(r,t)}}}function nf(t){let e,n,r,i=t[15]&&ef(t);return n=new Qu({props:{activeChart:"test"}}),{c(){i&&i.c(),e=D(),At(n.$$.fragment)},m(t,o){i&&i.m(t,o),C(t,e,o),zt(n,t,o),r=!0},p(t,n){t[15]?i?(i.p(t,n),32768&n&&_t(i,1)):(i=ef(t),i.c(),_t(i,1),i.m(e.parentNode,e)):i&&(wt(),kt(i,1,1,(()=>{i=null})),$t())},i(t){r||(_t(i),_t(n.$$.fragment,t),r=!0)},o(t){kt(i),kt(n.$$.fragment,t),r=!1},d(t){i&&i.d(t),t&&N(e),Dt(n,t)}}}function rf(t){let e,n;return e=new ta({props:{$$slots:{default:[nf]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};33590784&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function of(t){let e,n;return e=new Is({props:{caption:t[1],url:t[3],type:12===t[13]?"split-cols":"single-cols"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),8&n&&(r.url=t[3]),8192&n&&(r.type=12===t[13]?"split-cols":"single-cols"),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function af(t){let e,n,r,i,o,a=t[2]&&t[2].length&&tf(t),s=t[12]&&of(t);return{c(){e=T("div"),a&&a.c(),r=D(),s&&s.c(),i=j(),R(e,"class",n="chart line-chart "+t[14])},m(t,n){C(t,e,n),a&&a.m(e,null),C(t,r,n),s&&s.m(t,n),C(t,i,n),o=!0},p(t,[r]){t[2]&&t[2].length?a?(a.p(t,r),4&r&&_t(a,1)):(a=tf(t),a.c(),_t(a,1),a.m(e,null)):a&&(wt(),kt(a,1,1,(()=>{a=null})),$t()),(!o||16384&r&&n!==(n="chart line-chart "+t[14]))&&R(e,"class",n),t[12]?s?(s.p(t,r),4096&r&&_t(s,1)):(s=of(t),s.c(),_t(s,1),s.m(i.parentNode,i)):s&&(wt(),kt(s,1,1,(()=>{s=null})),$t())},i(t){o||(_t(a),_t(s),o=!0)},o(t){kt(a),kt(s),o=!1},d(t){t&&N(e),a&&a.d(),t&&N(r),s&&s.d(t),t&&N(i)}}}const sf=t=>t.political_lean,lf=t=>t.diet_threshold;function cf(t,e,n){let r,i,{margins:o={top:20,right:10,bottom:20,left:45}}=e,{caption:a=""}=e,{data:s}=e,{url:l=""}=e,{groupedData:c}=e,{xKey:u}=e,{yKey:f}=e,{zKey:h}=e,{yDomain:p=[0,null]}=e,{formatTickX:d}=e,{xTicks:m=6}=e,{formatTickY:g=(t=>t.toLocaleString("en-NZ",{style:"percent"}))}=e,{includeCaption:v=!0}=e,{spanCol:y}=e,{customClass:b}=e,{includeAxis:x=!0}=e,{scaleRange:w}=e,{start:$}=e,{end:_}=e,k=Array.from(Ju).map((t=>t[0])),M=Array.from(Ju).map((t=>t[1]));return t.$$set=t=>{"margins"in t&&n(0,o=t.margins),"caption"in t&&n(1,a=t.caption),"data"in t&&n(2,s=t.data),"url"in t&&n(3,l=t.url),"groupedData"in t&&n(4,c=t.groupedData),"xKey"in t&&n(5,u=t.xKey),"yKey"in t&&n(6,f=t.yKey),"zKey"in t&&n(7,h=t.zKey),"yDomain"in t&&n(8,p=t.yDomain),"formatTickX"in t&&n(9,d=t.formatTickX),"xTicks"in t&&n(10,m=t.xTicks),"formatTickY"in t&&n(11,g=t.formatTickY),"includeCaption"in t&&n(12,v=t.includeCaption),"spanCol"in t&&n(13,y=t.spanCol),"customClass"in t&&n(14,b=t.customClass),"includeAxis"in t&&n(15,x=t.includeAxis),"scaleRange"in t&&n(20,w=t.scaleRange),"start"in t&&n(21,$=t.start),"end"in t&&n(22,_=t.end)},t.$$.update=()=>{3145728&t.$$.dirty&&n(17,r=w($)),5242880&t.$$.dirty&&n(16,i=w(_))},[o,a,s,l,c,u,f,h,p,d,m,g,v,y,b,x,i,r,k,M,w,$,_,t=>+t.date>=r&&+t.date<=i,t=>+t.date>=r&&+t.date<=i]}class uf extends Lt{constructor(t){super(),Et(this,t,cf,af,a,{margins:0,caption:1,data:2,url:3,groupedData:4,xKey:5,yKey:6,zKey:7,yDomain:8,formatTickX:9,xTicks:10,formatTickY:11,includeCaption:12,spanCol:13,customClass:14,includeAxis:15,scaleRange:20,start:21,end:22})}}function ff(t,e,n){const r=t.slice();return r[2]=e[n],r[4]=n,r}function hf(t){let e,n,r=t[2].domain+"";return{c(){e=T("div"),n=z(r),R(e,"class",d("row-value row-value-program")+" svelte-144oqk4")},m(t,r){C(t,e,r),_(e,n)},p(t,e){1&e&&r!==(r=t[2].domain+"")&&I(n,r)},d(t){t&&N(e)}}}function pf(t){let e,n,r,i,o,a=t[2].program+"",s=t[2].network+"";return{c(){e=T("div"),n=z(a),r=D(),i=T("span"),o=z(s),R(i,"class",d("row-value row-value-network")+" svelte-144oqk4"),R(e,"class",d("row-value row-value-program")+" svelte-144oqk4")},m(t,a){C(t,e,a),_(e,n),_(e,r),_(e,i),_(i,o)},p(t,e){1&e&&a!==(a=t[2].program+"")&&I(n,a),1&e&&s!==(s=t[2].network+"")&&I(o,s)},d(t){t&&N(e)}}}function df(t){let e,n,r,i,o,a,s,l=t[2].value.toLocaleString()+"";function c(t,e){return"tv"===t[1]?pf:hf}let u=c(t),f=u(t);return{c(){e=T("div"),f.c(),n=D(),r=T("div"),i=z(l),a=D(),R(r,"class",o=d("row-value row-value-audience")+" svelte-144oqk4"),R(e,"class",s=d("row-body")+" svelte-144oqk4")},m(t,o){C(t,e,o),f.m(e,null),_(e,n),_(e,r),_(r,i),_(e,a)},p(t,r){u===(u=c(t))&&f?f.p(t,r):(f.d(1),f=u(t),f&&(f.c(),f.m(e,n))),1&r&&l!==(l=t[2].value.toLocaleString()+"")&&I(i,l)},d(t){t&&N(e),f.d()}}}function mf(e){let n,r,i,o,a,s,l,c,u="tv"===e[1]?"Program":"Domain",f=e[0].filter(gf),h=[];for(let t=0;t<f.length;t+=1)h[t]=df(ff(e,f,t));return{c(){n=T("div"),r=T("div"),i=T("div"),o=T("div"),a=z(u),s=D(),l=T("div"),l.textContent="Audience",c=D();for(let t=0;t<h.length;t+=1)h[t].c();R(o,"class",d("row-header row-header-program")+" svelte-144oqk4"),R(l,"class",d("row-header row-header-audience")+" svelte-144oqk4"),R(i,"class",d("row-head")+" svelte-144oqk4"),R(r,"class",d("table-wrapper")+" svelte-144oqk4"),R(n,"class","table-container")},m(t,e){C(t,n,e),_(n,r),_(r,i),_(i,o),_(o,a),_(i,s),_(i,l),_(r,c);for(let t=0;t<h.length;t+=1)h[t].m(r,null)},p(t,[e]){if(2&e&&u!==(u="tv"===t[1]?"Program":"Domain")&&I(a,u),3&e){let n;for(f=t[0].filter(gf),n=0;n<f.length;n+=1){const i=ff(t,f,n);h[n]?h[n].p(i,e):(h[n]=df(i),h[n].c(),h[n].m(r,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=f.length}},i:t,o:t,d(t){t&&N(n),S(h,t)}}}const gf=t=>t.value>0;function vf(t,e,n){let{data:r}=e,{medium:i}=e;return t.$$set=t=>{"data"in t&&n(0,r=t.data),"medium"in t&&n(1,i=t.medium)},[r,i]}class yf extends Lt{constructor(t){super(),Et(this,t,vf,mf,a,{data:0,medium:1})}}Un(",.0s");const bf=Un(",.0f"),xf=Un("+,.2s");function wf(t){var e=["th","st","nd","rd"],n=t%100;return t+(e[(n-20)%10]||e[n]||e[0])}function $f(t){const e=t.slice(),n=e[6].get(e[1].detail.node.abbr)[0];e[17]=n.abbr,e[18]=n.state,e[19]=n.data;const r=e[4].get(e[17]).get(e[2]).map((t=>({...t,value:Math.max(t.right_pct,t.left_pct)})));e[20]=r;const i=ea(e[20].map((t=>[{...t,political_lean:"R",value:t.right_pct},{...t,political_lean:"L",value:t.left_pct}])));e[21]=i;const o=ee(e[20],(t=>+t.date));e[22]=o[0],e[23]=o[1];const a=e[5].get(e[3]).get(e[17]).get(e[2]);return e[24]=a,e}function _f(n){let r,a,s,l,c,u,f,h,p,d,m,g,v,b,x,w,k,M,S,A,j,E,L,P,O,F,q,Y,U,H,V,B,W,Z,K,Q,J,tt,et,nt,rt,it,ot,at,st,lt,ct,ft,ht,pt,dt,mt,gt,bt,wt,$t,Ct,Nt,St,Tt,jt,Et,Lt,Pt,Rt,It=n[17]+"",Ot=n[18]+"",Ft=n[8](n[19].left_pct)+"",qt=wf(n[19].left_pct_rk)+"",Yt=n[8](n[19].right_pct)+"",Ut=wf(n[19].right_pct_rk)+"",Ht=bf(n[19].left_size)+"",Vt=wf(n[19].left_size_rk)+"",Bt=bf(n[19].right_size)+"",Wt=wf(n[19].right_size_rk)+"",Zt="tv"===n[2]?"watched":"viewed";return mt=new uf({props:{data:n[20],groupedData:n[21],scaleRange:Gn().range([n[22],n[23]]),start:0,end:1,yKey:Cf,xKey:Mf,zKey:Nf,spanCol:12,customClass:"popup-overlay",formatTickX:Ws,url:"",includeCaption:!1}}),Ct=new yf({props:{data:n[24],medium:n[2]}}),{c(){r=T("h1"),a=T("span"),s=z(It),l=D(),c=z(Ot),f=D(),h=T("div"),p=T("div"),d=T("h6"),d.textContent="Partisan lean",m=D(),g=T("span"),v=T("span"),v.textContent="L",b=D(),x=T("span"),w=z(Ft),k=D(),M=T("span"),S=z(qt),A=D(),j=T("span"),E=T("span"),E.textContent="R",L=D(),P=T("span"),O=z(Yt),F=D(),q=T("span"),Y=z(Ut),U=D(),H=T("div"),V=T("h6"),V.textContent="Echo chamber sizes",B=D(),W=T("span"),Z=T("span"),Z.textContent="L",K=D(),Q=T("span"),J=z(Ht),tt=D(),et=T("span"),nt=z(Vt),rt=D(),it=T("span"),ot=T("span"),ot.textContent="R",at=D(),st=T("span"),lt=z(Bt),ct=D(),ft=T("span"),ht=z(Wt),pt=D(),dt=T("div"),At(mt.$$.fragment),gt=D(),bt=T("p"),bt.innerHTML='<span class="svelte-jyn7">TV &amp; Web news diet polarization</span> Lorem ipsum dolor sit amet consectetur \n      adipisicing elit. Odit, inventore impedit deleniti magnam eum eveniet \n      dolorum porro, saepe molestiae quis et, quia libero suscipit numquam?',wt=D(),$t=T("div"),At(Ct.$$.fragment),Nt=D(),St=T("p"),Tt=T("span"),jt=z("Most "),Et=z(Zt),Lt=z("."),Pt=z(" Lorem ipsum dolor sit amet consectetur \n      adipisicing elit. Odit, inventore impedit deleniti magnam eum eveniet \n      dolorum porro, saepe molestiae quis et, quia libero suscipit numquam?"),R(a,"class","svelte-jyn7"),R(r,"class","title svelte-jyn7"),R(d,"class","svelte-jyn7"),R(v,"class","info-label svelte-jyn7"),R(x,"class","info-value"),R(M,"class","info-rank svelte-jyn7"),R(g,"class","info-L info-pct svelte-jyn7"),R(E,"class","info-label svelte-jyn7"),R(P,"class","info-value"),R(q,"class","info-rank svelte-jyn7"),R(j,"class","info-R info-pct svelte-jyn7"),R(p,"class","info-inner"),R(V,"class","svelte-jyn7"),R(Z,"class","info-label svelte-jyn7"),R(Q,"class","info-value"),R(et,"class","info-rank svelte-jyn7"),R(W,"class","info-L info-size svelte-jyn7"),R(ot,"class","info-label svelte-jyn7"),R(st,"class","info-value"),R(ft,"class","info-rank svelte-jyn7"),R(it,"class","info-R info-size svelte-jyn7"),R(H,"class","info-inner"),R(h,"class","info svelte-jyn7"),R(dt,"class","overlay-col1-container svelte-jyn7"),R(bt,"class","caption overlay-col1-caption svelte-jyn7"),R($t,"class","overlay-col2-container svelte-jyn7"),R(Tt,"class","svelte-jyn7"),R(St,"class","caption overlay-col2-caption svelte-jyn7")},m(t,e){C(t,r,e),_(r,a),_(a,s),_(r,l),_(r,c),C(t,f,e),C(t,h,e),_(h,p),_(p,d),_(p,m),_(p,g),_(g,v),_(g,b),_(g,x),_(x,w),_(g,k),_(g,M),_(M,S),_(p,A),_(p,j),_(j,E),_(j,L),_(j,P),_(P,O),_(j,F),_(j,q),_(q,Y),_(h,U),_(h,H),_(H,V),_(H,B),_(H,W),_(W,Z),_(W,K),_(W,Q),_(Q,J),_(W,tt),_(W,et),_(et,nt),_(H,rt),_(H,it),_(it,ot),_(it,at),_(it,st),_(st,lt),_(it,ct),_(it,ft),_(ft,ht),C(t,pt,e),C(t,dt,e),zt(mt,dt,null),C(t,gt,e),C(t,bt,e),C(t,wt,e),C(t,$t,e),zt(Ct,$t,null),C(t,Nt,e),C(t,St,e),_(St,Tt),_(Tt,jt),_(Tt,Et),_(Tt,Lt),_(St,Pt),Rt=!0},p(t,e){(!Rt||66&e)&&It!==(It=t[17]+"")&&I(s,It),(!Rt||66&e)&&Ot!==(Ot=t[18]+"")&&I(c,Ot),(!Rt||66&e)&&Ft!==(Ft=t[8](t[19].left_pct)+"")&&I(w,Ft),(!Rt||66&e)&&qt!==(qt=wf(t[19].left_pct_rk)+"")&&I(S,qt),(!Rt||66&e)&&Yt!==(Yt=t[8](t[19].right_pct)+"")&&I(O,Yt),(!Rt||66&e)&&Ut!==(Ut=wf(t[19].right_pct_rk)+"")&&I(Y,Ut),(!Rt||66&e)&&Ht!==(Ht=bf(t[19].left_size)+"")&&I(J,Ht),(!Rt||66&e)&&Vt!==(Vt=wf(t[19].left_size_rk)+"")&&I(nt,Vt),(!Rt||66&e)&&Bt!==(Bt=bf(t[19].right_size)+"")&&I(lt,Bt),(!Rt||66&e)&&Wt!==(Wt=wf(t[19].right_size_rk)+"")&&I(ht,Wt);const n={};86&e&&(n.data=t[20]),86&e&&(n.groupedData=t[21]),86&e&&(n.scaleRange=Gn().range([t[22],t[23]])),mt.$set(n);const r={};110&e&&(r.data=t[24]),4&e&&(r.medium=t[2]),Ct.$set(r),(!Rt||4&e)&&Zt!==(Zt="tv"===t[2]?"watched":"viewed")&&I(Et,Zt)},i(t){Rt||(u&&u.end(1),_t(mt.$$.fragment,t),_t(Ct.$$.fragment,t),Rt=!0)},o(n){u=function(n,r,a){let s,l=r(n,a),c=!0;const u=xt;function f(){const{delay:r=0,duration:o=300,easing:a=e,tick:f=t,css:h}=l||Mt;h&&(s=X(n,1,0,o,r,a,h));const p=y()+r,d=p+o;ut((()=>yt(n,!1,"start"))),$((t=>{if(c){if(t>=d)return f(0,1),yt(n,!1,"end"),--u.r||i(u.c),!1;if(t>=p){const e=a((t-p)/o);f(1-e,e)}}return c}))}return u.r+=1,o(l)?vt().then((()=>{l=l(),f()})):f(),{end(t){t&&l.tick&&l.tick(1,0),c&&(s&&G(n,s),c=!1)}}}(r,Ru,{delay:300}),kt(mt.$$.fragment,n),kt(Ct.$$.fragment,n),Rt=!1},d(t){t&&N(r),t&&u&&u.end(),t&&N(f),t&&N(h),t&&N(pt),t&&N(dt),Dt(mt),t&&N(gt),t&&N(bt),t&&N(wt),t&&N($t),Dt(Ct),t&&N(Nt),t&&N(St)}}}function kf(t){let e,n,r,i,o,a,s,l=!t[0]&&_f($f(t));return{c(){e=T("div"),l&&l.c(),n=D(),r=T("div"),R(r,"class","close-button svelte-jyn7"),R(e,"class",i="overlay "+(t[0]?"":"active")+" svelte-jyn7")},m(i,c){C(i,e,c),l&&l.m(e,null),_(e,n),_(e,r),o=!0,a||(s=E(r,"click",t[13]),a=!0)},p(t,[r]){t[0]?l&&(wt(),kt(l,1,1,(()=>{l=null})),$t()):l?(l.p($f(t),r),1&r&&_t(l,1)):(l=_f($f(t)),l.c(),_t(l,1),l.m(e,n)),(!o||1&r&&i!==(i="overlay "+(t[0]?"":"active")+" svelte-jyn7"))&&R(e,"class",i)},i(t){o||(_t(l),o=!0)},o(t){kt(l),o=!1},d(t){t&&N(e),l&&l.d(),a=!1,s()}}}let Mf="date",Cf="value",Nf=0;function Sf(t,e,n){let r;const i=nt(),{data:o}=rt("LayerCake");l(t,o,(t=>n(12,r=t)));const a=Un(`.${1}~%`);let s,c,u,f,h,{hidePopup:p}=e,{popup:d}=e,{diet_threshold:m}=e,{partisanship_scenario:g}=e,{medium:v}=e,{period:y}=e;function b(){i("closePopup")}et((async()=>{const t=await ma("assets/data/EchoCh-by_state_full-timeseries.csv",ua);s=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))),n(4,c=se(s,(t=>t.state),(t=>t.medium))),u=await ma("assets/data/EchoCh-by_state_audiences.csv",ua),n(5,f=se(u,(t=>t.period),(t=>t.state),(t=>t.medium)))}));return t.$$set=t=>{"hidePopup"in t&&n(0,p=t.hidePopup),"popup"in t&&n(1,d=t.popup),"diet_threshold"in t&&n(10,m=t.diet_threshold),"partisanship_scenario"in t&&n(11,g=t.partisanship_scenario),"medium"in t&&n(2,v=t.medium),"period"in t&&n(3,y=t.period)},t.$$.update=()=>{4096&t.$$.dirty&&n(6,h=se(r,(t=>t.abbr)))},[p,d,v,y,c,f,h,o,a,b,m,g,r,()=>b()]}class Tf extends Lt{constructor(t){super(),Et(this,t,Sf,kf,a,{hidePopup:0,popup:1,diet_threshold:10,partisanship_scenario:11,medium:2,period:3})}}function Af(t,e,n){const r=t.slice();r[37]=e[n],r[40]=n;const i=r[18][r[40]];return r[38]=i,r}function zf(t,e,n){const r=t.slice();return r[41]=e[n],r[40]=n,r}function Df(e){let n,r,i,o,a=e[41]+"";return{c(){n=T("option"),r=z(a),i=D(),n.__value=o=e[41],n.value=n.__value},m(t,e){C(t,n,e),_(n,r),_(n,i)},p:t,d(t){t&&N(n)}}}function jf(t){let e;return{c(){e=T("span"),e.textContent="More left",R(e,"class","legend-block-label legend-block-label-L svelte-1dvny2v")},m(t,n){C(t,e,n)},d(t){t&&N(e)}}}function Ef(t){let e,n,r,i=Math.abs(t[38]).toLocaleString("en-NZ",{style:"percent",maximumFractionDigits:1,minimumFractionDigits:0})+"";return{c(){e=T("div"),n=z(i),R(e,"class",r=d("legend-anchor-label legend-anchor-label-"+(t[38]>0?"R":"L"))+" svelte-1dvny2v")},m(t,r){C(t,e,r),_(e,n)},p(t,o){262144&o[0]&&i!==(i=Math.abs(t[38]).toLocaleString("en-NZ",{style:"percent",maximumFractionDigits:1,minimumFractionDigits:0})+"")&&I(n,i),262144&o[0]&&r!==(r=d("legend-anchor-label legend-anchor-label-"+(t[38]>0?"R":"L"))+" svelte-1dvny2v")&&R(e,"class",r)},d(t){t&&N(e)}}}function Lf(t){let e,n=void 0!==t[38]&&Ef(t);return{c(){e=T("div"),n&&n.c(),R(e,"class","legend-block svelte-1dvny2v"),O(e,"--color",t[37])},m(t,r){C(t,e,r),n&&n.m(e,null)},p(t,r){void 0!==t[38]?n?n.p(t,r):(n=Ef(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),256&r[0]&&O(e,"--color",t[37])},d(t){t&&N(e),n&&n.d()}}}function Pf(t){let e,n,r,i="diverging"===t[1].type&&Rf(t),o="linear"===t[1].type&&If(t);return{c(){i&&i.c(),e=D(),o&&o.c(),n=j()},m(t,a){i&&i.m(t,a),C(t,e,a),o&&o.m(t,a),C(t,n,a),r=!0},p(t,r){"diverging"===t[1].type?i?(i.p(t,r),2&r[0]&&_t(i,1)):(i=Rf(t),i.c(),_t(i,1),i.m(e.parentNode,e)):i&&(wt(),kt(i,1,1,(()=>{i=null})),$t()),"linear"===t[1].type?o?(o.p(t,r),2&r[0]&&_t(o,1)):(o=If(t),o.c(),_t(o,1),o.m(n.parentNode,n)):o&&(wt(),kt(o,1,1,(()=>{o=null})),$t())},i(t){r||(_t(i),_t(o),r=!0)},o(t){kt(i),kt(o),r=!1},d(t){i&&i.d(t),t&&N(e),o&&o.d(t),t&&N(n)}}}function Rf(t){let e,n;return e=new Tu({props:{medium:t[12],diet_threshold:t[11],partisanship_scenario:t[10],collideStrength:.1,manyBodyStrength:-.5,renderAnnotation:t[15]}}),e.$on("mouseenter",t[21]),e.$on("mouseleave",t[22]),e.$on("click",t[23]),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};4096&n[0]&&(r.medium=t[12]),2048&n[0]&&(r.diet_threshold=t[11]),1024&n[0]&&(r.partisanship_scenario=t[10]),32768&n[0]&&(r.renderAnnotation=t[15]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function If(t){let e,n;return e=new Eu({props:{medium:t[12],diet_threshold:t[11],partisanship_scenario:t[10],political_lean:t[9],collideStrength:.1,manyBodyStrength:-.5}}),e.$on("mouseenter",t[21]),e.$on("mouseleave",t[22]),e.$on("click",t[23]),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};4096&n[0]&&(r.medium=t[12]),2048&n[0]&&(r.diet_threshold=t[11]),1024&n[0]&&(r.partisanship_scenario=t[10]),512&n[0]&&(r.political_lean=t[9]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function Of(t){let e,n,r=t[14]&&Pf(t);return{c(){r&&r.c(),e=j()},m(t,i){r&&r.m(t,i),C(t,e,i),n=!0},p(t,n){t[14]?r?(r.p(t,n),16384&n[0]&&_t(r,1)):(r=Pf(t),r.c(),_t(r,1),r.m(e.parentNode,e)):r&&(wt(),kt(r,1,1,(()=>{r=null})),$t())},i(t){n||(_t(r),n=!0)},o(t){kt(r),n=!1},d(t){r&&r.d(t),t&&N(e)}}}function Ff(t){let e,n;return e=new Tf({props:{hidePopup:t[13],diet_threshold:t[11],partisanship_scenario:t[10],medium:t[12],period:t[7]||Hf,popup:t[20]}}),e.$on("closePopup",t[24]),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};8192&n[0]&&(r.hidePopup=t[13]),2048&n[0]&&(r.diet_threshold=t[11]),1024&n[0]&&(r.partisanship_scenario=t[10]),4096&n[0]&&(r.medium=t[12]),128&n[0]&&(r.period=t[7]||Hf),1048576&n[0]&&(r.popup=t[20]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function qf(t){let e,n,r,i;return e=new ta({props:{$$slots:{default:[Of]},$$scope:{ctx:t}}}),r=new Wo({props:{pointerEvents:!t[13],$$slots:{default:[Ff]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment),n=D(),At(r.$$.fragment)},m(t,o){zt(e,t,o),C(t,n,o),zt(r,t,o),i=!0},p(t,n){const i={};56834&n[0]|4096&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i);const o={};8192&n[0]&&(o.pointerEvents=!t[13]),1064064&n[0]|4096&n[1]&&(o.$$scope={dirty:n,ctx:t}),r.$set(o)},i(t){i||(_t(e.$$.fragment,t),_t(r.$$.fragment,t),i=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){Dt(e,t),t&&N(n),Dt(r,t)}}}function Yf(t){let e,n;return e=new Is({props:{caption:t[2],url:t[3],type:"single-cols"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};4&n[0]&&(r.caption=t[2]),8&n[0]&&(r.url=t[3]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function Uf(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,d,m,g,v,y,b,x,w,$,k,M,L,P,O,q,Y,U,H,V,B,W,Z,X,G,K,Q,J,tt,et,nt,rt,it,at,st,lt,ct,ht,pt,dt,mt,gt,vt,yt,bt,xt,Mt,Ct,Nt,St,jt,Et,Lt="L"===t[9]?"left":"right",Pt=t[1].rDomain[0].toLocaleString("en-NZ",{notation:"compact"})+"",Rt=(t[1].rDomain[1]/18).toLocaleString("en-NZ",{notation:"compact"})+"",It=(t[1].rDomain[1]/4.5).toLocaleString("en-NZ",{notation:"compact"})+"",Ot=(t[1].rDomain[1]/2).toLocaleString("en-NZ",{notation:"compact"})+"";function Ft(e){t[31](e)}let qt={id:"medium",title:va.controls.medium.title,labels:["TV","Web"],info:va.controls.medium.description};function Yt(e){t[32](e)}void 0!==t[6]&&(qt.checked=t[6]),r=new Ua({props:qt}),ot.push((()=>Tt(r,"checked",Ft)));let Ut={id:"partisanship",title:va.controls.medium.title,labels:["Stringent","Lenient"],info:va.controls.partisanship.description};void 0!==t[5]&&(Ut.checked=t[5]),a=new Ua({props:Ut}),ot.push((()=>Tt(a,"checked",Yt)));let Ht=t[25],Vt=[];for(let e=0;e<Ht.length;e+=1)Vt[e]=Df(zf(t,Ht,e));let Bt="linear"!==t[1].type&&jf(),Wt=t[8],Zt=[];for(let e=0;e<Wt.length;e+=1)Zt[e]=Lf(Af(t,Wt,e));Mt=new Yo({props:{flatData:t[0],data:t[16],rScale:t[19],rDomain:t[19].domain(),rRange:t[19].range(),zScale:t[17],zDomain:t[17].domain(),zRange:t[17].range(),padding:{top:0,right:0,bottom:0,left:0},$$slots:{default:[qf]},$$scope:{ctx:t}}});let Xt=t[4]&&Yf(t);return{c(){e=T("div"),n=T("div"),At(r.$$.fragment),o=D(),At(a.$$.fragment),l=D(),c=T("div"),u=T("div"),u.textContent="Period",f=D(),h=T("select");for(let t=0;t<Vt.length;t+=1)Vt[t].c();p=D(),d=T("div"),m=T("div"),g=T("h5"),g.textContent="Partisan lean",v=D(),Bt&&Bt.c(),y=D();for(let t=0;t<Zt.length;t+=1)Zt[t].c();b=D(),x=T("span"),w=z("More "),$=z(Lt),k=D(),M=T("div"),L=T("h5"),L.textContent="Echo chamber size",P=D(),O=T("div"),q=A("svg"),Y=A("circle"),V=A("text"),B=z(Pt),X=A("circle"),Q=A("text"),J=z(Rt),nt=A("circle"),at=A("text"),st=z(It),ht=A("circle"),mt=A("text"),gt=z(Ot),bt=D(),xt=T("div"),At(Mt.$$.fragment),Ct=D(),Xt&&Xt.c(),Nt=j(),R(u,"class","control-title svelte-1dvny2v"),R(h,"id","period-menu"),R(h,"name","period"),R(h,"class","svelte-1dvny2v"),void 0===t[7]&&ut((()=>t[33].call(h))),R(c,"id","period"),R(c,"class","control control-menu svelte-1dvny2v"),R(n,"class","controls svelte-1dvny2v"),R(g,"class","svelte-1dvny2v"),R(x,"class","legend-block-label legend-block-label-R svelte-1dvny2v"),R(m,"class","legend-item legend-item-color svelte-1dvny2v"),R(L,"class","svelte-1dvny2v"),R(Y,"cy",0),R(Y,"cx",U=t[19](t[1].rDomain[1]/2)+1),R(Y,"r",H=t[19](t[1].rDomain[0])),R(Y,"fill","none"),R(Y,"stroke","black"),R(Y,"class","legend-circle"),R(V,"y",W=t[19](t[1].rDomain[0])+2),R(V,"x",Z=t[19](t[1].rDomain[1]/2)),R(V,"class","legend-circle-label svelte-1dvny2v"),R(X,"cy",0),R(X,"cx",G=t[19](t[1].rDomain[1]/2)+1),R(X,"r",K=t[19](t[1].rDomain[1]/18)),R(X,"fill","none"),R(X,"stroke","black"),R(X,"class","legend-circle"),R(Q,"y",tt=t[19](t[1].rDomain[1]/18)+2),R(Q,"x",et=t[19](t[1].rDomain[1]/2)),R(Q,"class","legend-circle-label svelte-1dvny2v"),R(nt,"cy",0),R(nt,"cx",rt=t[19](t[1].rDomain[1]/2)),R(nt,"r",it=t[19](t[1].rDomain[1]/4.5)),R(nt,"fill","none"),R(nt,"stroke","black"),R(nt,"class","legend-circle"),R(at,"y",lt=t[19](t[1].rDomain[1]/4.5)+2),R(at,"x",ct=t[19](t[1].rDomain[1]/2)),R(at,"class","legend-circle-label svelte-1dvny2v"),R(ht,"cy",0),R(ht,"cx",pt=t[19](t[1].rDomain[1]/2)),R(ht,"r",dt=t[19](t[1].rDomain[1]/2)),R(ht,"fill","none"),R(ht,"stroke","black"),R(ht,"class","legend-circle"),R(mt,"y",vt=t[19](t[1].rDomain[1]/2)+2),R(mt,"x",yt=t[19](t[1].rDomain[1]/2)),R(mt,"class","legend-circle-label svelte-1dvny2v"),R(q,"class","svelte-1dvny2v"),R(O,"class","svelte-1dvny2v"),R(M,"class","legend-item legend-item-size svelte-1dvny2v"),R(d,"class","legend svelte-1dvny2v"),R(e,"class","chart-info-wrapper main-column svelte-1dvny2v"),R(xt,"id","beeswarm"),R(xt,"class","chart beeswarm-chart svelte-1dvny2v")},m(i,s){C(i,e,s),_(e,n),zt(r,n,null),_(n,o),zt(a,n,null),_(n,l),_(n,c),_(c,u),_(c,f),_(c,h);for(let t=0;t<Vt.length;t+=1)Vt[t].m(h,null);F(h,t[7]),_(e,p),_(e,d),_(d,m),_(m,g),_(m,v),Bt&&Bt.m(m,null),_(m,y);for(let t=0;t<Zt.length;t+=1)Zt[t].m(m,null);_(m,b),_(m,x),_(x,w),_(x,$),_(d,k),_(d,M),_(M,L),_(M,P),_(M,O),_(O,q),_(q,Y),_(q,V),_(V,B),_(q,X),_(q,Q),_(Q,J),_(q,nt),_(q,at),_(at,st),_(q,ht),_(q,mt),_(mt,gt),C(i,bt,s),C(i,xt,s),zt(Mt,xt,null),C(i,Ct,s),Xt&&Xt.m(i,s),C(i,Nt,s),St=!0,jt||(Et=E(h,"change",t[33]),jt=!0)},p(t,e){const n={};!i&&64&e[0]&&(i=!0,n.checked=t[6],ft((()=>i=!1))),r.$set(n);const o={};if(!s&&32&e[0]&&(s=!0,o.checked=t[5],ft((()=>s=!1))),a.$set(o),33554432&e[0]){let n;for(Ht=t[25],n=0;n<Ht.length;n+=1){const r=zf(t,Ht,n);Vt[n]?Vt[n].p(r,e):(Vt[n]=Df(r),Vt[n].c(),Vt[n].m(h,null))}for(;n<Vt.length;n+=1)Vt[n].d(1);Vt.length=Ht.length}if(33554560&e[0]&&F(h,t[7]),"linear"!==t[1].type?Bt||(Bt=jf(),Bt.c(),Bt.m(m,y)):Bt&&(Bt.d(1),Bt=null),262400&e[0]){let n;for(Wt=t[8],n=0;n<Wt.length;n+=1){const r=Af(t,Wt,n);Zt[n]?Zt[n].p(r,e):(Zt[n]=Lf(r),Zt[n].c(),Zt[n].m(m,b))}for(;n<Zt.length;n+=1)Zt[n].d(1);Zt.length=Wt.length}(!St||512&e[0])&&Lt!==(Lt="L"===t[9]?"left":"right")&&I($,Lt),(!St||524290&e[0]&&U!==(U=t[19](t[1].rDomain[1]/2)+1))&&R(Y,"cx",U),(!St||524290&e[0]&&H!==(H=t[19](t[1].rDomain[0])))&&R(Y,"r",H),(!St||2&e[0])&&Pt!==(Pt=t[1].rDomain[0].toLocaleString("en-NZ",{notation:"compact"})+"")&&I(B,Pt),(!St||524290&e[0]&&W!==(W=t[19](t[1].rDomain[0])+2))&&R(V,"y",W),(!St||524290&e[0]&&Z!==(Z=t[19](t[1].rDomain[1]/2)))&&R(V,"x",Z),(!St||524290&e[0]&&G!==(G=t[19](t[1].rDomain[1]/2)+1))&&R(X,"cx",G),(!St||524290&e[0]&&K!==(K=t[19](t[1].rDomain[1]/18)))&&R(X,"r",K),(!St||2&e[0])&&Rt!==(Rt=(t[1].rDomain[1]/18).toLocaleString("en-NZ",{notation:"compact"})+"")&&I(J,Rt),(!St||524290&e[0]&&tt!==(tt=t[19](t[1].rDomain[1]/18)+2))&&R(Q,"y",tt),(!St||524290&e[0]&&et!==(et=t[19](t[1].rDomain[1]/2)))&&R(Q,"x",et),(!St||524290&e[0]&&rt!==(rt=t[19](t[1].rDomain[1]/2)))&&R(nt,"cx",rt),(!St||524290&e[0]&&it!==(it=t[19](t[1].rDomain[1]/4.5)))&&R(nt,"r",it),(!St||2&e[0])&&It!==(It=(t[1].rDomain[1]/4.5).toLocaleString("en-NZ",{notation:"compact"})+"")&&I(st,It),(!St||524290&e[0]&&lt!==(lt=t[19](t[1].rDomain[1]/4.5)+2))&&R(at,"y",lt),(!St||524290&e[0]&&ct!==(ct=t[19](t[1].rDomain[1]/2)))&&R(at,"x",ct),(!St||524290&e[0]&&pt!==(pt=t[19](t[1].rDomain[1]/2)))&&R(ht,"cx",pt),(!St||524290&e[0]&&dt!==(dt=t[19](t[1].rDomain[1]/2)))&&R(ht,"r",dt),(!St||2&e[0])&&Ot!==(Ot=(t[1].rDomain[1]/2).toLocaleString("en-NZ",{notation:"compact"})+"")&&I(gt,Ot),(!St||524290&e[0]&&vt!==(vt=t[19](t[1].rDomain[1]/2)+2))&&R(mt,"y",vt),(!St||524290&e[0]&&yt!==(yt=t[19](t[1].rDomain[1]/2)))&&R(mt,"x",yt);const l={};1&e[0]&&(l.flatData=t[0]),65536&e[0]&&(l.data=t[16]),524288&e[0]&&(l.rScale=t[19]),524288&e[0]&&(l.rDomain=t[19].domain()),524288&e[0]&&(l.rRange=t[19].range()),131072&e[0]&&(l.zScale=t[17]),131072&e[0]&&(l.zDomain=t[17].domain()),131072&e[0]&&(l.zRange=t[17].range()),1113730&e[0]|4096&e[1]&&(l.$$scope={dirty:e,ctx:t}),Mt.$set(l),t[4]?Xt?(Xt.p(t,e),16&e[0]&&_t(Xt,1)):(Xt=Yf(t),Xt.c(),_t(Xt,1),Xt.m(Nt.parentNode,Nt)):Xt&&(wt(),kt(Xt,1,1,(()=>{Xt=null})),$t())},i(t){St||(_t(r.$$.fragment,t),_t(a.$$.fragment,t),_t(Mt.$$.fragment,t),_t(Xt),St=!0)},o(t){kt(r.$$.fragment,t),kt(a.$$.fragment,t),kt(Mt.$$.fragment,t),kt(Xt),St=!1},d(t){t&&N(e),Dt(r),Dt(a),S(Vt,t),Bt&&Bt.d(),S(Zt,t),t&&N(bt),t&&N(xt),Dt(Mt),t&&N(Ct),Xt&&Xt.d(t),t&&N(Nt),jt=!1,Et()}}}let Hf="Since 2016";function Vf(t,e,n){let r,i,o,a,s,l,c,u,f;const h=new Map(ga.map((t=>[t.state,t])));let p,d,{data:m}=e,{states:g}=e,{dataMap:v}=e,{fullDataMap:y}=e,{activeChart:b}=e,{caption:x=""}=e,{url:w=""}=e,{includeCaption:$=!0}=e,{politicalChecked:_}=e,k=!0,M=!1,C=!0,N=!1,S=!1;et((()=>{n(14,N=!0)}));const T=["Since 2016","Last 3 months","Last 6 months","Last 12 months"];let A=Hf;return et((()=>{setTimeout((()=>n(15,S=!0)),2e3)})),t.$$set=t=>{"data"in t&&n(0,m=t.data),"states"in t&&n(26,g=t.states),"dataMap"in t&&n(27,v=t.dataMap),"fullDataMap"in t&&n(28,y=t.fullDataMap),"activeChart"in t&&n(1,b=t.activeChart),"caption"in t&&n(2,x=t.caption),"url"in t&&n(3,w=t.url),"includeCaption"in t&&n(4,$=t.includeCaption),"politicalChecked"in t&&n(29,_=t.politicalChecked)},t.$$.update=()=>{536870912&t.$$.dirty[0]&&n(9,r=_?"R":"L"),64&t.$$.dirty[0]&&n(12,i=M?"web":"tv"),32&t.$$.dirty[0]&&n(10,a=k?"lenient":"stringent"),201333888&t.$$.dirty[0]&&n(16,d=g.map((t=>{const{abbr:e}=h.get(t.state),n=v.get(A||Hf).get(e).get(i).get(o).get(a)[0];return Object.assign(Object.assign({},t),{abbr:e,data:n})}))),2&t.$$.dirty[0]&&n(19,l=b.rScale().domain(b.rDomain).range(b.rRange)),1073742338&t.$$.dirty[0]&&(n(30,p=b.colorInterpolator().domain(b.colorInterpolatorDomain)),"diverging"===b.type?p.interpolator(_n(hn.gamma(.5),b.colorInterpolatorScheme)):"linear"===b.type&&p.range([b.colorInterpolatorScheme,"R"===r?"#990000":"#011f5b"])),1073741826&t.$$.dirty[0]&&n(8,c=b.colorPaletteAnchors.map(p)),2&t.$$.dirty[0]&&n(18,u=b.zDomain),258&t.$$.dirty[0]&&n(17,f=b.zScale().domain(b.zDomain).range(c))},n(11,o=50),n(20,s=null),[m,b,x,w,$,k,M,A,c,r,a,o,i,C,N,S,d,f,u,l,s,function(t){},function(){},function(t){n(13,C=!1),n(20,s=t)},function(){n(13,C=!0),n(20,s=null)},T,g,v,y,_,p,function(t){M=t,n(6,M)},function(t){k=t,n(5,k)},function(){A=q(this),n(7,A),n(25,T)}]}class Bf extends Lt{constructor(t){super(),Et(this,t,Vf,Uf,a,{data:0,states:26,dataMap:27,fullDataMap:28,activeChart:1,caption:2,url:3,includeCaption:4,politicalChecked:29},null,[-1,-1])}}var Wf=[{coordinates:[-86.766233,33.001471],state:"Alabama",population:4447100},{coordinates:[-148.716968,61.288254],state:"Alaska",population:626932},{coordinates:[-111.828711,33.373506],state:"Arizona",population:5130632},{coordinates:[-92.576816,35.080251],state:"Arkansas",population:2673400},{coordinates:[-119.355165,35.458606],state:"California",population:33871648},{coordinates:[-105.203628,39.500656],state:"Colorado",population:4301261},{coordinates:[-72.874365,41.494852],state:"Connecticut",population:3405565},{coordinates:[-75.561908,39.397164],state:"Delaware",population:783600},{coordinates:[-77.014001,38.910092],state:"District of Columbia",population:572059},{coordinates:[-81.634622,27.79585],state:"Florida",population:15982378},{coordinates:[-83.868887,33.332208],state:"Georgia",population:8186453},{coordinates:[-157.524452,21.146768],state:"Hawaii",population:1211537},{coordinates:[-115.133222,44.242605],state:"Idaho",population:1293953},{coordinates:[-88.380238,41.278216],state:"Illinois",population:12419293},{coordinates:[-86.261515,40.163935],state:"Indiana",population:6080485},{coordinates:[-93.049161,41.960392],state:"Iowa",population:2926324},{coordinates:[-96.536052,38.454303],state:"Kansas",population:2688418},{coordinates:[-85.241819,37.808159],state:"Kentucky",population:4041769},{coordinates:[-91.457133,30.69927],state:"Louisiana",population:4468976},{coordinates:[-69.719931,44.313614],state:"Maine",population:1274923},{coordinates:[-76.797396,39.145653],state:"Maryland",population:5296486},{coordinates:[-71.363628,42.271831],state:"Massachusetts",population:6349097},{coordinates:[-84.170753,42.866412],state:"Michigan",population:9938444},{coordinates:[-93.583003,45.210782],state:"Minnesota",population:4919479},{coordinates:[-89.593164,32.56642],state:"Mississippi",population:2844658},{coordinates:[-92.15377,38.437715],state:"Missouri",population:5595211},{coordinates:[-111.209708,46.813302],state:"Montana",population:902195},{coordinates:[-97.403875,41.183753],state:"Nebraska",population:1711263},{coordinates:[-116.304648,37.165965],state:"Nevada",population:1998257},{coordinates:[-71.463342,43.153046],state:"New Hampshire",population:1235786},{coordinates:[-74.428055,40.438458],state:"New Jersey",population:8414350},{coordinates:[-106.342108,34.623012],state:"New Mexico",population:1819046},{coordinates:[-74.645228,41.507548],state:"New York",population:18976457},{coordinates:[-79.667654,35.553334],state:"North Carolina",population:8049313},{coordinates:[-99.334736,47.375168],state:"North Dakota",population:642200},{coordinates:[-82.749366,40.480854],state:"Ohio",population:11353140},{coordinates:[-96.834653,35.59794],state:"Oklahoma",population:3450654},{coordinates:[-122.579524,44.732273],state:"Oregon",population:3421399},{coordinates:[-77.075925,40.463528],state:"Pennsylvania",population:12281054},{coordinates:[-71.448902,41.753318],state:"Rhode Island",population:1048319},{coordinates:[-81.032387,34.034551],state:"South Carolina",population:4012012},{coordinates:[-99.043799,44.047502],state:"South Dakota",population:754844},{coordinates:[-86.397772,35.795862],state:"Tennessee",population:5689283},{coordinates:[-97.388631,30.943149],state:"Texas",population:20851820},{coordinates:[-111.90016,40.438987],state:"Utah",population:2233169},{coordinates:[-72.814309,44.081127],state:"Vermont",population:608827},{coordinates:[-77.835857,37.750345],state:"Virginia",population:7078515},{coordinates:[-121.624501,47.341728],state:"Washington",population:5894121},{coordinates:[-80.820221,38.767195],state:"West Virginia",population:1808344},{coordinates:[-89.001006,43.728544],state:"Wisconsin",population:5363675},{coordinates:[-107.008835,42.675762],state:"Wyoming",population:493782}];function Zf(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function Xf(t){let e,n,r,i=t[15].value+"";return{c(){e=T("p"),n=z(i),r=D()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){2&e&&i!==(i=t[15].value+"")&&I(n,i)},d(t){t&&N(e)}}}function Gf(t){let e,n,r,i;function o(e){t[12](e)}let a={id:"medium",title:"Political lean",labels:["L","R"],info:"Right or left leaning",colors:["#AA3737","#384E83"]};return void 0!==t[8]&&(a.checked=t[8]),n=new Ua({props:a}),ot.push((()=>Tt(n,"checked",o))),{c(){e=T("div"),At(n.$$.fragment),R(e,"class","controls svelte-x02mud")},m(t,r){C(t,e,r),zt(n,e,null),i=!0},p(t,e){const i={};!r&&256&e&&(r=!0,i.checked=t[8],ft((()=>r=!1))),n.$set(i)},i(t){i||(_t(n.$$.fragment,t),i=!0)},o(t){kt(n.$$.fragment,t),i=!1},d(t){t&&N(e),Dt(n)}}}function Kf(e){let n,r;return n=new Fa({props:{row:5}}),{c(){At(n.$$.fragment)},m(t,e){zt(n,t,e),r=!0},p:t,i(t){r||(_t(n.$$.fragment,t),r=!0)},o(t){kt(n.$$.fragment,t),r=!1},d(t){Dt(n,t)}}}function Qf(t){let e,n;return e=new Bf({props:{data:t[5],states:Wf,dataMap:t[6],fullDataMap:t[7],activeChart:t[9],politicalChecked:t[8],caption:t[2][0].value,url:th}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};32&n&&(r.data=t[5]),64&n&&(r.dataMap=t[6]),128&n&&(r.fullDataMap=t[7]),512&n&&(r.activeChart=t[9]),256&n&&(r.politicalChecked=t[8]),4&n&&(r.caption=t[2][0].value),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function Jf(t){let e,n,r,a,s,l,c,u,f,h,p,d,m,v,y,b,x,w,$,k=t[1],M=[];for(let e=0;e<k.length;e+=1)M[e]=Xf(Zf(t,k,e));let A="linear"===t[9].type&&Gf(t);const j=[Qf,Kf],L=[];function P(t,e){return t[4]&&t[5]&&t[5].length?0:1}return v=P(t),y=L[v]=j[v](t),{c(){e=T("div"),n=T("h1"),n.textContent="Section title",r=D(),a=T("div");for(let t=0;t<M.length;t+=1)M[t].c();s=D(),l=T("div"),c=T("h3"),u=z("Partisan Segregation in the US:\n\t\t\t\t"),f=T("select"),h=T("option"),h.textContent="Comparison view",p=T("option"),p.textContent="Single political lean view",d=D(),A&&A.c(),m=D(),y.c(),R(n,"class","section-title svelte-x02mud"),R(a,"class","copy svelte-x02mud"),h.__value="0",h.value=h.__value,p.__value="1",p.value=p.__value,R(f,"class","menu svelte-x02mud"),void 0===t[3]&&ut((()=>t[11].call(f))),R(c,"class","chart-title"),R(l,"class","title-container svelte-x02mud"),R(e,"class","section section-1 svelte-x02mud")},m(i,o){C(i,e,o),_(e,n),_(e,r),_(e,a);for(let t=0;t<M.length;t+=1)M[t].m(a,null);_(e,s),_(e,l),_(l,c),_(c,u),_(c,f),_(f,h),_(f,p),F(f,t[3]),_(l,d),A&&A.m(l,null),_(e,m),L[v].m(e,null),x=!0,w||($=[E(f,"change",t[11]),g(b=al.call(null,e,{once:t[0]})),E(e,"enter",t[13])],w=!0)},p(t,[n]){if(2&n){let e;for(k=t[1],e=0;e<k.length;e+=1){const r=Zf(t,k,e);M[e]?M[e].p(r,n):(M[e]=Xf(r),M[e].c(),M[e].m(a,null))}for(;e<M.length;e+=1)M[e].d(1);M.length=k.length}8&n&&F(f,t[3]),"linear"===t[9].type?A?(A.p(t,n),512&n&&_t(A,1)):(A=Gf(t),A.c(),_t(A,1),A.m(l,null)):A&&(wt(),kt(A,1,1,(()=>{A=null})),$t());let r=v;v=P(t),v===r?L[v].p(t,n):(wt(),kt(L[r],1,1,(()=>{L[r]=null})),$t(),y=L[v],y?y.p(t,n):(y=L[v]=j[v](t),y.c()),_t(y,1),y.m(e,null)),b&&o(b.update)&&1&n&&b.update.call(null,{once:t[0]})},i(t){x||(_t(A),_t(y),x=!0)},o(t){kt(A),kt(y),x=!1},d(t){t&&N(e),S(M,t),A&&A.d(),L[v].d(),w=!1,i($)}}}const th="assets/data/EchoCh-by_state.csv";function eh(t,e,n){let r,i,o,a,s,l,c=!1,{once:u}=e,{copy:f}=e,{refs:h}=e,{captions:p}=e;et((async()=>{const t=await ma(th,ua),e=["left_pct","right_pct","left_size","right_size"],r=ce(t,(t=>{const n={};return e.forEach((e=>{const r={},i=ye(t.map((t=>t[e])),Gt);t.forEach(((t,e)=>{r[t.state]=i[e]+1})),n[e]=r})),n}),(t=>t.period),(t=>t.medium),(t=>t.diet_threshold),(t=>t.partisanship_scenario));n(5,a=t.map((t=>Object.assign(Object.assign({},t),{left_pct_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).left_pct[t.state],right_pct_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).right_pct[t.state],left_size_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).left_size[t.state],right_size_rk:r.get(t.period).get(t.medium).get(t.diet_threshold).get(t.partisanship_scenario).right_size[t.state]})))),n(6,s=se(a,(t=>t.period),(t=>t.state),(t=>t.medium),(t=>t.diet_threshold),(t=>t.partisanship_scenario))),n(7,l=se(a,(t=>t.state),(t=>t.medium),(t=>t.partisanship_scenario)))}));const d=new Map([[0,{type:"diverging",rScale:nr,rDomain:[1e3,3e6],rRange:[8,80],zScale:rr,zDomain:[-.1,-.05,-.01,.01,.05,.1],colorInterpolator:Mo,colorInterpolatorDomain:[-.75,0,.75],colorInterpolatorScheme:["#011f5b","gainsboro","#990000"],colorPaletteAnchors:[-.7,-.35,-.18,0,.18,.35,.85]}],[1,{type:"linear",rScale:nr,rDomain:[1e3,3e6],rRange:[8,80],zScale:rr,zDomain:[0,.01,.025,.05],colorInterpolator:Gn,colorInterpolatorDomain:[0,1],colorInterpolatorScheme:"gainsboro",colorPaletteAnchors:[0,.25,.5,.75,1]}]]);return t.$$set=t=>{"once"in t&&n(0,u=t.once),"copy"in t&&n(1,f=t.copy),"refs"in t&&n(10,h=t.refs),"captions"in t&&n(2,p=t.captions)},t.$$.update=()=>{8&t.$$.dirty&&n(9,i=d.get(+r))},n(3,r="0"),n(8,o=!0),[u,f,p,r,c,a,s,l,o,i,h,function(){r=q(this),n(3,r)},function(t){o=t,n(8,o)},()=>n(4,c=!0)]}class nh extends Lt{constructor(t){super(),Et(this,t,eh,Jf,a,{once:0,copy:1,refs:10,captions:2})}}function rh(t,e,n){return t<e?e:t>n?n:t}function ih(e){let n,r,o,a,s,l,c,u,f;return{c(){n=T("div"),r=T("div"),o=T("div"),a=D(),s=T("div"),l=D(),c=T("div"),R(o,"class","body svelte-4z6zmw"),O(o,"left",100*e[0]+"%"),O(o,"right",100*(1-e[1])+"%"),R(s,"class","handle svelte-4z6zmw"),R(s,"data-which","start"),O(s,"left",100*e[0]+"%"),R(c,"class","handle svelte-4z6zmw"),R(c,"data-which","end"),O(c,"left",100*e[1]+"%"),R(r,"class","slider svelte-4z6zmw"),R(n,"class","double-range-container svelte-4z6zmw")},m(t,i){C(t,n,i),_(n,r),_(r,o),e[7](o),_(r,a),_(r,s),e[8](s),_(r,l),_(r,c),e[9](r),u||(f=[g(oh.call(null,o)),E(o,"dragmove",P(L(e[6]))),g(oh.call(null,s)),E(s,"dragmove",P(L(e[5]("start")))),g(oh.call(null,c)),E(c,"dragmove",P(L(e[5]("end"))))],u=!0)},p(t,[e]){1&e&&O(o,"left",100*t[0]+"%"),2&e&&O(o,"right",100*(1-t[1])+"%"),1&e&&O(s,"left",100*t[0]+"%"),2&e&&O(c,"left",100*t[1]+"%")},i:t,o:t,d(t){t&&N(n),e[7](null),e[8](null),e[9](null),u=!1,i(f)}}}function oh(t){let e,n;function r(r){"touchstart"===r.type&&(r=r.touches[0]),e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragstart",{detail:{x:e,y:n}})),window.addEventListener("mousemove",i),window.addEventListener("mouseup",o),window.addEventListener("touchmove",i),window.addEventListener("touchend",o)}function i(r){"touchmove"===r.type&&(r=r.changedTouches[0]);const i=r.clientX-e,o=r.clientY-n;e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragmove",{detail:{x:e,y:n,dx:i,dy:o}}))}function o(r){e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragend",{detail:{x:e,y:n}})),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o),window.removeEventListener("touchmove",i),window.removeEventListener("touchend",o)}return t.addEventListener("mousedown",r),t.addEventListener("touchstart",r),{destroy(){t.removeEventListener("mousedown",r),t.removeEventListener("touchstart",r)}}}function ah(t,e,n){let r,i,o,{start:a=0}=e,{end:s=1}=e;return t.$$set=t=>{"start"in t&&n(0,a=t.start),"end"in t&&n(1,s=t.end)},[a,s,r,i,o,function(t){return function(e){const{left:r,right:i}=o.getBoundingClientRect(),l=i-r,c=Math.min(Math.max((e.detail.x-r)/l,0),1);"start"===t?(n(0,a=c),n(1,s=Math.max(s,c))):(n(0,a=Math.min(c,a)),n(1,s=c))}},function(t){const{width:e}=i.getBoundingClientRect(),{left:l,right:c}=o.getBoundingClientRect(),u=c-l,f=rh(r.getBoundingClientRect().left+event.detail.dx-l,0,u-e),h=rh(f+e,e,u)/u;n(0,a=f/u),n(1,s=h)},function(t){ot[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},function(t){ot[t?"unshift":"push"]((()=>{r=t,n(2,r)}))},function(t){ot[t?"unshift":"push"]((()=>{o=t,n(4,o)}))}]}class sh extends Lt{constructor(t){super(),Et(this,t,ah,ih,a,{start:0,end:1})}}function lh(t,e,n){const r=t.slice();return r[24]=e[n],r}function ch(t,e,n){const r=t.slice();return r[24]=e[n],r[28]=n,r}function uh(t,e,n){const r=t.slice();return r[24]=e[n],r[28]=n,r}function fh(t){let e,n,r,i=t[24].value+"";return{c(){e=T("p"),n=z(i),r=D()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){2&e&&i!==(i=t[24].value+"")&&I(n,i)},d(t){t&&N(e)}}}function hh(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,d,m=Ws(t[15](t[11]))+"",g=Ws(t[15](t[12]))+"";function v(e){t[21](e)}function y(e){t[22](e)}let b={};return void 0!==t[11]&&(b.start=t[11]),void 0!==t[12]&&(b.end=t[12]),i=new sh({props:b}),ot.push((()=>Tt(i,"start",v))),ot.push((()=>Tt(i,"end",y))),{c(){e=T("div"),n=T("div"),n.textContent="Period",r=D(),At(i.$$.fragment),s=D(),l=T("div"),c=T("div"),u=z(m),f=D(),h=T("div"),p=z(g),R(n,"class","control-title svelte-l3oitp"),R(c,"class","label svelte-l3oitp"),R(h,"class","label svelte-l3oitp"),R(l,"class","labels svelte-l3oitp"),R(e,"id","period"),R(e,"class","control control-range svelte-l3oitp")},m(t,o){C(t,e,o),_(e,n),_(e,r),zt(i,e,null),_(e,s),_(e,l),_(l,c),_(c,u),_(l,f),_(l,h),_(h,p),d=!0},p(t,e){const n={};!o&&2048&e&&(o=!0,n.start=t[11],ft((()=>o=!1))),!a&&4096&e&&(a=!0,n.end=t[12],ft((()=>a=!1))),i.$set(n),(!d||2048&e)&&m!==(m=Ws(t[15](t[11]))+"")&&I(u,m),(!d||4096&e)&&g!==(g=Ws(t[15](t[12]))+"")&&I(p,g)},i(t){d||(_t(i.$$.fragment,t),d=!0)},o(t){kt(i.$$.fragment,t),d=!1},d(t){t&&N(e),Dt(i)}}}function ph(e){let n,r;return n=new Fa({props:{row:3}}),{c(){At(n.$$.fragment)},m(t,e){zt(n,t,e),r=!0},p:t,i(t){r||(_t(n.$$.fragment,t),r=!0)},o(t){kt(n.$$.fragment,t),r=!1},d(t){Dt(n,t)}}}function dh(t){let e,n;return e=new uf({props:{data:t[4],groupedData:t[8].get(t[13]).get(t[9]).get(t[10]).get(t[14]),scaleRange:t[16],start:t[11],end:t[12],yKey:xh,xKey:bh,zKey:wh,spanCol:12,customClass:"chart-medium",formatTickX:Ws,url:yh,caption:t[3][0].value}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};16&n&&(r.data=t[4]),26368&n&&(r.groupedData=t[8].get(t[13]).get(t[9]).get(t[10]).get(t[14])),2048&n&&(r.start=t[11]),4096&n&&(r.end=t[12]),8&n&&(r.caption=t[3][0].value),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function mh(t){let e,n,r,i=t[24].value+"";return{c(){e=T("p"),n=z(i),r=D()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){2&e&&i!==(i=t[24].value+"")&&I(n,i)},d(t){t&&N(e)}}}function gh(t){let e,n,r,i=t[24].value+"";return{c(){e=T("p"),n=z(i),r=D()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){4&e&&i!==(i=t[24].value+"")&&I(n,i)},d(t){t&&N(e)}}}function vh(t){let e,n,r,a,s,l,c,u,f,h,p,d,m,v,y,b,x,w,$,k,M,A,z,j,L,P,I,O,q,Y,U,H,V,B,W,Z,X,G,K,Q,J,tt,et,nt=t[1].slice(0,2),rt=[];for(let e=0;e<nt.length;e+=1)rt[e]=fh(uh(t,nt,e));function it(e){t[17](e)}let at={id:"medium",title:va.controls.medium.title,labels:["TV","Web"],info:va.controls.medium.description};function st(e){t[18](e)}void 0!==t[5]&&(at.checked=t[5]),u=new Ua({props:at}),ot.push((()=>Tt(u,"checked",it)));let lt={id:"partisanship",title:va.controls.partisanship.title,labels:["Lenient","Strict"],info:va.controls.partisanship.description};void 0!==t[6]&&(lt.checked=t[6]),p=new Ua({props:lt}),ot.push((()=>Tt(p,"checked",st)));let ct=t[7]&&t[4]&&hh(t);const ht=[dh,ph],pt=[];function dt(t,e){return t[7]&&t[4]?0:1}B=dt(t),W=pt[B]=ht[B](t);let mt=t[1].slice(2),gt=[];for(let e=0;e<mt.length;e+=1)gt[e]=mh(ch(t,mt,e));let vt=t[2],yt=[];for(let e=0;e<vt.length;e+=1)yt[e]=gh(lh(t,vt,e));return{c(){e=T("div"),n=T("h1"),n.textContent="Section title",r=D(),a=T("div");for(let t=0;t<rt.length;t+=1)rt[t].c();s=D(),l=T("div"),c=T("div"),At(u.$$.fragment),h=D(),At(p.$$.fragment),m=D(),v=T("div"),y=T("div"),y.textContent="Age group",b=D(),x=T("select"),w=T("option"),w.textContent="All",$=T("option"),$.textContent="18-24",k=T("option"),k.textContent="25-34",M=T("option"),M.textContent="35-44",A=T("option"),A.textContent="45-54",z=T("option"),z.textContent="55+",j=D(),L=T("div"),P=T("div"),P.textContent="Gender",I=D(),O=T("select"),q=T("option"),q.textContent="All",Y=T("option"),Y.textContent="Male",U=T("option"),U.textContent="Female",H=D(),ct&&ct.c(),V=D(),W.c(),Z=D(),X=T("div");for(let t=0;t<gt.length;t+=1)gt[t].c();G=D(),K=T("div");for(let t=0;t<yt.length;t+=1)yt[t].c();R(n,"class","section-title svelte-l3oitp"),R(a,"class","copy copy-1 svelte-l3oitp"),R(y,"class","control-title svelte-l3oitp"),w.__value="All",w.value=w.__value,$.__value="18-24",$.value=$.__value,k.__value="25-34",k.value=k.__value,M.__value="35-44",M.value=M.__value,A.__value="45-54",A.value=A.__value,z.__value="55+",z.value=z.__value,R(x,"id","age-group-menu"),R(x,"name","age-group"),R(x,"class","svelte-l3oitp"),void 0===t[14]&&ut((()=>t[19].call(x))),R(v,"id","age-group"),R(v,"class","control control-menu svelte-l3oitp"),R(P,"class","control-title svelte-l3oitp"),q.__value="All",q.value=q.__value,q.selected=!0,Y.__value="Male",Y.value=Y.__value,U.__value="Female",U.value=U.__value,R(O,"id","gender-menu"),R(O,"name","location"),R(O,"class","svelte-l3oitp"),void 0===t[13]&&ut((()=>t[20].call(O))),R(L,"id","gender"),R(L,"class","control control-menu svelte-l3oitp"),R(c,"class","controls svelte-l3oitp"),R(l,"class","chart-wrapper svelte-l3oitp"),R(X,"class","copy copy-2 svelte-l3oitp"),R(K,"class","references svelte-l3oitp"),R(e,"class","section section-2 svelte-l3oitp")},m(i,o){C(i,e,o),_(e,n),_(e,r),_(e,a);for(let t=0;t<rt.length;t+=1)rt[t].m(a,null);_(e,s),_(e,l),_(l,c),zt(u,c,null),_(c,h),zt(p,c,null),_(c,m),_(c,v),_(v,y),_(v,b),_(v,x),_(x,w),_(x,$),_(x,k),_(x,M),_(x,A),_(x,z),F(x,t[14]),_(c,j),_(c,L),_(L,P),_(L,I),_(L,O),_(O,q),_(O,Y),_(O,U),F(O,t[13]),_(c,H),ct&&ct.m(c,null),_(l,V),pt[B].m(l,null),_(e,Z),_(e,X);for(let t=0;t<gt.length;t+=1)gt[t].m(X,null);_(e,G),_(e,K);for(let t=0;t<yt.length;t+=1)yt[t].m(K,null);J=!0,tt||(et=[E(x,"change",t[19]),E(O,"change",t[20]),g(Q=al.call(null,e,{once:t[0]})),E(e,"enter",t[23])],tt=!0)},p(t,[e]){if(2&e){let n;for(nt=t[1].slice(0,2),n=0;n<nt.length;n+=1){const r=uh(t,nt,n);rt[n]?rt[n].p(r,e):(rt[n]=fh(r),rt[n].c(),rt[n].m(a,null))}for(;n<rt.length;n+=1)rt[n].d(1);rt.length=nt.length}const n={};!f&&32&e&&(f=!0,n.checked=t[5],ft((()=>f=!1))),u.$set(n);const r={};!d&&64&e&&(d=!0,r.checked=t[6],ft((()=>d=!1))),p.$set(r),16384&e&&F(x,t[14]),8192&e&&F(O,t[13]),t[7]&&t[4]?ct?(ct.p(t,e),144&e&&_t(ct,1)):(ct=hh(t),ct.c(),_t(ct,1),ct.m(c,null)):ct&&(wt(),kt(ct,1,1,(()=>{ct=null})),$t());let i=B;if(B=dt(t),B===i?pt[B].p(t,e):(wt(),kt(pt[i],1,1,(()=>{pt[i]=null})),$t(),W=pt[B],W?W.p(t,e):(W=pt[B]=ht[B](t),W.c()),_t(W,1),W.m(l,null)),2&e){let n;for(mt=t[1].slice(2),n=0;n<mt.length;n+=1){const r=ch(t,mt,n);gt[n]?gt[n].p(r,e):(gt[n]=mh(r),gt[n].c(),gt[n].m(X,null))}for(;n<gt.length;n+=1)gt[n].d(1);gt.length=mt.length}if(4&e){let n;for(vt=t[2],n=0;n<vt.length;n+=1){const r=lh(t,vt,n);yt[n]?yt[n].p(r,e):(yt[n]=gh(r),yt[n].c(),yt[n].m(K,null))}for(;n<yt.length;n+=1)yt[n].d(1);yt.length=vt.length}Q&&o(Q.update)&&1&e&&Q.update.call(null,{once:t[0]})},i(t){J||(_t(u.$$.fragment,t),_t(p.$$.fragment,t),_t(ct),_t(W),J=!0)},o(t){kt(u.$$.fragment,t),kt(p.$$.fragment,t),kt(ct),kt(W),J=!1},d(t){t&&N(e),S(rt,t),Dt(u),Dt(p),ct&&ct.d(),pt[B].d(),S(gt,t),S(yt,t),tt=!1,i(et)}}}let yh="assets/data/EchoCh-nationwide-by_gender-or-age_group.csv",bh="date",xh="value",wh=0;function $h(t,e,n){let r,i,o=!1,{once:a}=e,{copy:s}=e,{refs:l}=e,{captions:c}=e,u=!1,f=!0,h=u?"web":"tv",p=f?"stringent":"lenient";const d=Gn();let m=0,g=1,v="All",y="All";et((async()=>{const t=await ma(yh,ua);n(4,r=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))));const[e,i]=ee(r,(t=>+t.date));d.range([e,i])}));return t.$$set=t=>{"once"in t&&n(0,a=t.once),"copy"in t&&n(1,s=t.copy),"refs"in t&&n(2,l=t.refs),"captions"in t&&n(3,c=t.captions)},t.$$.update=()=>{16&t.$$.dirty&&r&&n(8,i=se(r,(t=>t.gender),(t=>t.medium),(t=>t.partisanship_scenario),(t=>t.age_group))),32&t.$$.dirty&&n(9,h=u?"web":"tv"),64&t.$$.dirty&&n(10,p=f?"stringent":"lenient")},n(13,v="All"),n(14,y="All"),[a,s,l,c,r,u,f,o,i,h,p,m,g,v,y,d,t=>{const e=new Date(d(t));return e.setDate(1),e.setHours(0,0,0),e.setMilliseconds(0),+e},function(t){u=t,n(5,u)},function(t){f=t,n(6,f)},function(){y=q(this),n(14,y)},function(){v=q(this),n(13,v)},function(t){m=t,n(11,m)},function(t){g=t,n(12,g)},()=>n(7,o=!0)]}class _h extends Lt{constructor(t){super(),Et(this,t,$h,vh,a,{once:0,copy:1,refs:2,captions:3})}}const kh={origin:[0,0,0],round:4},Mh="SVGPathCommander Error",Ch={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},Nh=t=>{let e=t.pathValue[t.segmentStart],n=e.toLowerCase();const{data:r}=t;for(;r.length>=Ch[n]&&("m"===n&&r.length>2?(t.segments.push([e,...r.splice(0,2)]),n="l",e="m"===e?"l":"L"):t.segments.push([e,...r.splice(0,Ch[n])]),Ch[n]););},Sh=t=>{const{index:e,pathValue:n}=t,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err=`${Mh}: invalid Arc flag "${n[e]}", expecting 0 or 1 at index ${e}`)},Th=t=>t>=48&&t<=57,Ah="Invalid path value",zh=t=>{const{max:e,pathValue:n,index:r}=t;let i,o=r,a=!1,s=!1,l=!1,c=!1;if(o>=e)t.err=`${Mh}: ${Ah} at index ${o}, "pathValue" is missing param`;else if(i=n.charCodeAt(o),(43===i||45===i)&&(o+=1,i=n.charCodeAt(o)),Th(i)||46===i){if(46!==i){if(a=48===i,o+=1,i=n.charCodeAt(o),a&&o<e&&i&&Th(i))return void(t.err=`${Mh}: ${Ah} at index ${r}, "${n[r]}" illegal number`);for(;o<e&&Th(n.charCodeAt(o));)o+=1,s=!0;i=n.charCodeAt(o)}if(46===i){for(c=!0,o+=1;Th(n.charCodeAt(o));)o+=1,l=!0;i=n.charCodeAt(o)}if(101===i||69===i){if(c&&!s&&!l)return void(t.err=`${Mh}: ${Ah} at index ${o}, "${n[o]}" invalid float exponent`);if(o+=1,i=n.charCodeAt(o),(43===i||45===i)&&(o+=1),!(o<e&&Th(n.charCodeAt(o))))return void(t.err=`${Mh}: ${Ah} at index ${o}, "${n[o]}" invalid integer exponent`);for(;o<e&&Th(n.charCodeAt(o));)o+=1}t.index=o,t.param=+t.pathValue.slice(r,o)}else t.err=`${Mh}: ${Ah} at index ${o}, "${n[o]}" is not a number`},Dh=t=>[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279,10,13,8232,8233,32,9,11,12,160].includes(t),jh=t=>{const{pathValue:e,max:n}=t;for(;t.index<n&&Dh(e.charCodeAt(t.index));)t.index+=1},Eh=t=>Th(t)||43===t||45===t||46===t,Lh=t=>97==(32|t),Ph=t=>{const{max:e,pathValue:n,index:r}=t,i=n.charCodeAt(r),o=Ch[n[r].toLowerCase()];if(t.segmentStart=r,(t=>{switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}})(i))if(t.index+=1,jh(t),t.data=[],o){for(;;){for(let r=o;r>0;r-=1){if(!Lh(i)||3!==r&&4!==r?zh(t):Sh(t),t.err.length)return;t.data.push(t.param),jh(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,jh(t))}if(t.index>=t.max||!Eh(n.charCodeAt(t.index)))break}Nh(t)}else Nh(t);else t.err=`${Mh}: ${Ah} "${n[r]}" is not a path command`};class Rh{constructor(t){this.segments=[],this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}}const Ih=t=>Array.isArray(t)&&t.every((t=>{const e=t[0].toLowerCase();return Ch[e]===t.length-1&&"achlmqstvz".includes(e)})),Oh=t=>{if(Ih(t))return[...t];const e=new Rh(t);for(jh(e);e.index<e.max&&!e.err.length;)Ph(e);if(e.err&&e.err.length)throw TypeError(e.err);return e.segments},Fh=t=>{const e=t.length;let n,r=-1,i=t[e-1],o=0;for(;++r<e;)n=i,i=t[r],o+=n[1]*i[0]-n[0]*i[1];return o/2},qh=(t,e)=>Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),Yh=t=>t.reduce(((e,n,r)=>r?e+qh(t[r-1],n):0),0);var Uh=Object.defineProperty,Hh=(t,e,n)=>(((t,e,n)=>{e in t?Uh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const Vh={a:1,b:0,c:0,d:1,e:0,f:0,m11:1,m12:0,m13:0,m14:0,m21:0,m22:1,m23:0,m24:0,m31:0,m32:0,m33:1,m34:0,m41:0,m42:0,m43:0,m44:1,is2D:!0,isIdentity:!0},Bh=t=>(t instanceof Float64Array||t instanceof Float32Array||Array.isArray(t)&&t.every((t=>"number"==typeof t)))&&[6,16].some((e=>t.length===e)),Wh=t=>t instanceof DOMMatrix||t instanceof ap||"object"==typeof t&&Object.keys(Vh).every((e=>t&&e in t)),Zh=t=>{const e=new ap,n=Array.from(t);if(!Bh(n))throw TypeError(`CSSMatrix: "${n.join(",")}" must be an array with 6/16 numbers.`);if(16===n.length){const[t,r,i,o,a,s,l,c,u,f,h,p,d,m,g,v]=n;e.m11=t,e.a=t,e.m21=a,e.c=a,e.m31=u,e.m41=d,e.e=d,e.m12=r,e.b=r,e.m22=s,e.d=s,e.m32=f,e.m42=m,e.f=m,e.m13=i,e.m23=l,e.m33=h,e.m43=g,e.m14=o,e.m24=c,e.m34=p,e.m44=v}else if(6===n.length){const[t,r,i,o,a,s]=n;e.m11=t,e.a=t,e.m12=r,e.b=r,e.m21=i,e.c=i,e.m22=o,e.d=o,e.m41=a,e.e=a,e.m42=s,e.f=s}return e},Xh=t=>{if(Wh(t))return Zh([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a DOMMatrix / CSSMatrix / JSON compatible object.`)},Gh=t=>{if("string"!=typeof t)throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a string.`);const e=String(t).replace(/\s/g,"");let n=new ap;const r=`CSSMatrix: invalid transform string "${t}"`;return e.split(")").filter((t=>t)).forEach((t=>{const[e,i]=t.split("(");if(!i)throw TypeError(r);const o=i.split(",").map((t=>t.includes("rad")?parseFloat(t)*(180/Math.PI):parseFloat(t))),[a,s,l,c]=o,u=[a,s,l],f=[a,s,l,c];if("perspective"===e&&a&&[s,l].every((t=>void 0===t)))n.m34=-1/a;else if(e.includes("matrix")&&[6,16].includes(o.length)&&o.every((t=>!Number.isNaN(+t)))){const t=o.map((t=>Math.abs(t)<1e-6?0:t));n=n.multiply(Zh(t))}else if("translate3d"===e&&u.every((t=>!Number.isNaN(+t))))n=n.translate(a,s,l);else if("translate"===e&&a&&void 0===l)n=n.translate(a,s||0,0);else if("rotate3d"===e&&f.every((t=>!Number.isNaN(+t)))&&c)n=n.rotateAxisAngle(a,s,l,c);else if("rotate"===e&&a&&[s,l].every((t=>void 0===t)))n=n.rotate(0,0,a);else if("scale3d"===e&&u.every((t=>!Number.isNaN(+t)))&&u.some((t=>1!==t)))n=n.scale(a,s,l);else if("scale"!==e||Number.isNaN(a)||1===a||void 0!==l)if("skew"===e&&(a||!Number.isNaN(a)&&s)&&void 0===l)n=n.skew(a,s||0);else{if(!(["translate","rotate","scale","skew"].some((t=>e.includes(t)))&&/[XYZ]/.test(e)&&a&&[s,l].every((t=>void 0===t))))throw TypeError(r);if("skewX"===e||"skewY"===e)n=n[e](a);else{const t=e.replace(/[XYZ]/,""),r=e.replace(t,""),i=["X","Y","Z"].indexOf(r),o="scale"===t?1:0,s=[0===i?a:o,1===i?a:o,2===i?a:o];n=n[t](...s)}}else{const t=Number.isNaN(+s)?a:s;n=n.scale(a,t,1)}})),n},Kh=(t,e)=>e?[t.a,t.b,t.c,t.d,t.e,t.f]:[t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44],Qh=(t,e,n)=>{const r=new ap;return r.m41=t,r.e=t,r.m42=e,r.f=e,r.m43=n,r},Jh=(t,e,n)=>{const r=new ap,i=Math.PI/180,o=t*i,a=e*i,s=n*i,l=Math.cos(o),c=-Math.sin(o),u=Math.cos(a),f=-Math.sin(a),h=Math.cos(s),p=-Math.sin(s),d=u*h,m=-u*p;r.m11=d,r.a=d,r.m12=m,r.b=m,r.m13=f;const g=c*f*h+l*p;r.m21=g,r.c=g;const v=l*h-c*f*p;return r.m22=v,r.d=v,r.m23=-c*u,r.m31=c*p-l*f*h,r.m32=c*h+l*f*p,r.m33=l*u,r},tp=(t,e,n,r)=>{const i=new ap,o=Math.sqrt(t*t+e*e+n*n);if(0===o)return i;const a=t/o,s=e/o,l=n/o,c=r*(Math.PI/360),u=Math.sin(c),f=Math.cos(c),h=u*u,p=a*a,d=s*s,m=l*l,g=1-2*(d+m)*h;i.m11=g,i.a=g;const v=2*(a*s*h+l*u*f);i.m12=v,i.b=v,i.m13=2*(a*l*h-s*u*f);const y=2*(s*a*h-l*u*f);i.m21=y,i.c=y;const b=1-2*(m+p)*h;return i.m22=b,i.d=b,i.m23=2*(s*l*h+a*u*f),i.m31=2*(l*a*h+s*u*f),i.m32=2*(l*s*h-a*u*f),i.m33=1-2*(p+d)*h,i},ep=(t,e,n)=>{const r=new ap;return r.m11=t,r.a=t,r.m22=e,r.d=e,r.m33=n,r},np=(t,e)=>{const n=new ap;if(t){const e=t*Math.PI/180,r=Math.tan(e);n.m21=r,n.c=r}if(e){const t=e*Math.PI/180,r=Math.tan(t);n.m12=r,n.b=r}return n},rp=t=>np(t,0),ip=t=>np(0,t),op=(t,e)=>{const n=e.m11*t.m11+e.m12*t.m21+e.m13*t.m31+e.m14*t.m41,r=e.m11*t.m12+e.m12*t.m22+e.m13*t.m32+e.m14*t.m42,i=e.m11*t.m13+e.m12*t.m23+e.m13*t.m33+e.m14*t.m43,o=e.m11*t.m14+e.m12*t.m24+e.m13*t.m34+e.m14*t.m44,a=e.m21*t.m11+e.m22*t.m21+e.m23*t.m31+e.m24*t.m41,s=e.m21*t.m12+e.m22*t.m22+e.m23*t.m32+e.m24*t.m42,l=e.m21*t.m13+e.m22*t.m23+e.m23*t.m33+e.m24*t.m43,c=e.m21*t.m14+e.m22*t.m24+e.m23*t.m34+e.m24*t.m44,u=e.m31*t.m11+e.m32*t.m21+e.m33*t.m31+e.m34*t.m41,f=e.m31*t.m12+e.m32*t.m22+e.m33*t.m32+e.m34*t.m42,h=e.m31*t.m13+e.m32*t.m23+e.m33*t.m33+e.m34*t.m43,p=e.m31*t.m14+e.m32*t.m24+e.m33*t.m34+e.m34*t.m44,d=e.m41*t.m11+e.m42*t.m21+e.m43*t.m31+e.m44*t.m41,m=e.m41*t.m12+e.m42*t.m22+e.m43*t.m32+e.m44*t.m42,g=e.m41*t.m13+e.m42*t.m23+e.m43*t.m33+e.m44*t.m43,v=e.m41*t.m14+e.m42*t.m24+e.m43*t.m34+e.m44*t.m44;return Zh([n,r,i,o,a,s,l,c,u,f,h,p,d,m,g,v])};class ap{constructor(t){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.m11=1,this.m12=0,this.m13=0,this.m14=0,this.m21=0,this.m22=1,this.m23=0,this.m24=0,this.m31=0,this.m32=0,this.m33=1,this.m34=0,this.m41=0,this.m42=0,this.m43=0,this.m44=1,t?this.setMatrixValue(t):this}get isIdentity(){return 1===this.m11&&0===this.m12&&0===this.m13&&0===this.m14&&0===this.m21&&1===this.m22&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m41&&0===this.m42&&0===this.m43&&1===this.m44}get is2D(){return 0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m43&&1===this.m44}setMatrixValue(t){return"string"==typeof t&&t.length&&"none"!==t?Gh(t):Array.isArray(t)||t instanceof Float64Array||t instanceof Float32Array?Zh(t):"object"==typeof t?Xh(t):this}toFloat32Array(t){return Float32Array.from(Kh(this,t))}toFloat64Array(t){return Float64Array.from(Kh(this,t))}toString(){const{is2D:t}=this;return`${t?"matrix":"matrix3d"}(${this.toFloat64Array(t).join(", ")})`}toJSON(){const{is2D:t,isIdentity:e}=this;return{...this,is2D:t,isIdentity:e}}multiply(t){return op(this,t)}translate(t,e,n){let r=e,i=n;return typeof r>"u"&&(r=0),typeof i>"u"&&(i=0),op(this,Qh(t,r,i))}scale(t,e,n){let r=e,i=n;return typeof r>"u"&&(r=t),typeof i>"u"&&(i=1),op(this,ep(t,r,i))}rotate(t,e,n){let r=t,i=e||0,o=n||0;return"number"==typeof t&&typeof e>"u"&&typeof n>"u"&&(o=r,r=0,i=0),op(this,Jh(r,i,o))}rotateAxisAngle(t,e,n,r){if([t,e,n,r].some((t=>Number.isNaN(+t))))throw new TypeError("CSSMatrix: expecting 4 values");return op(this,tp(t,e,n,r))}skewX(t){return op(this,rp(t))}skewY(t){return op(this,ip(t))}skew(t,e){return op(this,np(t,e))}transformPoint(t){const e=this.m11*t.x+this.m21*t.y+this.m31*t.z+this.m41*t.w,n=this.m12*t.x+this.m22*t.y+this.m32*t.z+this.m42*t.w,r=this.m13*t.x+this.m23*t.y+this.m33*t.z+this.m43*t.w,i=this.m14*t.x+this.m24*t.y+this.m34*t.z+this.m44*t.w;return t instanceof DOMPoint?new DOMPoint(e,n,r,i):{x:e,y:n,z:r,w:i}}}Hh(ap,"Translate",Qh),Hh(ap,"Rotate",Jh),Hh(ap,"RotateAxisAngle",tp),Hh(ap,"Scale",ep),Hh(ap,"SkewX",rp),Hh(ap,"SkewY",ip),Hh(ap,"Skew",np),Hh(ap,"Multiply",op),Hh(ap,"fromArray",Zh),Hh(ap,"fromMatrix",Xh),Hh(ap,"fromString",Gh),Hh(ap,"toArray",Kh),Hh(ap,"isCompatibleArray",Bh),Hh(ap,"isCompatibleObject",Wh);const sp=t=>Ih(t)&&t.every((([t])=>t===t.toUpperCase())),lp=t=>{if(sp(t))return[...t];const e=Oh(t);let n=0,r=0,i=0,o=0;return e.map((t=>{const e=t.slice(1).map(Number),[a]=t,s=a.toUpperCase();if("M"===a)return[n,r]=e,i=n,o=r,["M",n,r];let l=[];if(a!==s)if("A"===s)l=[s,e[0],e[1],e[2],e[3],e[4],e[5]+n,e[6]+r];else if("V"===s)l=[s,e[0]+r];else if("H"===s)l=[s,e[0]+n];else{const t=e.map(((t,e)=>t+(e%2?r:n)));l=[s,...t]}else l=[s,...e];return"Z"===s?(n=i,r=o):"H"===s?[,n]=l:"V"===s?[,r]=l:([n,r]=l.slice(-2),"M"===s&&(i=n,o=r)),l}))},cp=(t,e)=>{const[n]=t,{x1:r,y1:i,x2:o,y2:a}=e,s=t.slice(1).map(Number);let l=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)l=["L",t[1],i];else if("V"===n)l=["L",r,t[1]];else if("S"===n){const t=2*r-o,n=2*i-a;e.x1=t,e.y1=n,l=["C",t,n,...s]}else if("T"===n){const t=2*r-(e.qx?e.qx:0),n=2*i-(e.qy?e.qy:0);e.qx=t,e.qy=n,l=["Q",t,n,...s]}else if("Q"===n){const[t,n]=s;e.qx=t,e.qy=n}return l},up=t=>sp(t)&&t.every((([t])=>"ACLMQZ".includes(t))),fp={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},hp=t=>{if(up(t))return[...t];const e=lp(t),n={...fp},r=e.length;for(let t=0;t<r;t+=1){e[t],e[t]=cp(e[t],n);const r=e[t],i=r.length;n.x1=+r[i-2],n.y1=+r[i-1],n.x2=+r[i-4]||n.x1,n.y2=+r[i-3]||n.y1}return e},pp=(t,e,n)=>{const[r,i]=t,[o,a]=e;return[r+(o-r)*n,i+(a-i)*n]},dp=(t,e,n,r,i)=>{const o=qh([t,e],[n,r]);let a={x:0,y:0};if("number"==typeof i)if(i<=0)a={x:t,y:e};else if(i>=o)a={x:n,y:r};else{const[s,l]=pp([t,e],[n,r],i/o);a={x:s,y:l}}return{length:o,point:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}},mp=(t,e)=>{const{x:n,y:r}=t,{x:i,y:o}=e,a=n*i+r*o,s=Math.sqrt((n**2+r**2)*(i**2+o**2));return(n*o-r*i<0?-1:1)*Math.acos(a/s)},gp=(t,e,n,r,i,o,a,s,l,c)=>{const{abs:u,sin:f,cos:h,sqrt:p,PI:d}=Math;let m=u(n),g=u(r);const v=(i%360+360)%360*(d/180);if(t===s&&e===l)return{x:t,y:e};if(0===m||0===g)return dp(t,e,s,l,c).point;const y=(t-s)/2,b=(e-l)/2,x=h(v)*y+f(v)*b,w=-f(v)*y+h(v)*b,$=x**2/m**2+w**2/g**2;$>1&&(m*=p($),g*=p($));let _=(m**2*g**2-m**2*w**2-g**2*x**2)/(m**2*w**2+g**2*x**2);_=_<0?0:_;const k=(o!==a?1:-1)*p(_),M=k*(m*w/g),C=k*(-g*x/m),N=h(v)*M-f(v)*C+(t+s)/2,S=f(v)*M+h(v)*C+(e+l)/2,T={x:(x-M)/m,y:(w-C)/g},A=mp({x:1,y:0},T);let z=mp(T,{x:(-x-M)/m,y:(-w-C)/g});!a&&z>0?z-=2*d:a&&z<0&&(z+=2*d),z%=2*d;const D=A+z*c,j=m*h(D),E=g*f(D);return{x:h(v)*j-f(v)*E+N,y:f(v)*j+h(v)*E+S}},vp=(t,e,n,r,i,o,a,s,l,c)=>{const u="number"==typeof c;let f=t,h=e,p=0,d=[f,h,p],m=[f,h],g=0,v={x:0,y:0},y=[{x:f,y:h}];u&&c<=0&&(v={x:f,y:h});for(let b=0;b<=300;b+=1){if(g=b/300,({x:f,y:h}=gp(t,e,n,r,i,o,a,s,l,g)),y=[...y,{x:f,y:h}],p+=qh(m,[f,h]),m=[f,h],u&&p>c&&c>d[2]){const t=(p-c)/(p-d[2]);v={x:m[0]*(1-t)+d[0]*t,y:m[1]*(1-t)+d[1]*t}}d=[f,h,p]}return u&&c>=p&&(v={x:s,y:l}),{length:p,point:v,min:{x:Math.min(...y.map((t=>t.x))),y:Math.min(...y.map((t=>t.y)))},max:{x:Math.max(...y.map((t=>t.x))),y:Math.max(...y.map((t=>t.y)))}}},yp=(t,e,n,r,i,o,a,s,l)=>{const c=1-l;return{x:c**3*t+3*c**2*l*n+3*c*l**2*i+l**3*a,y:c**3*e+3*c**2*l*r+3*c*l**2*o+l**3*s}},bp=(t,e,n,r,i,o,a,s,l)=>{const c="number"==typeof l;let u=t,f=e,h=0,p=[u,f,h],d=[u,f],m=0,g={x:0,y:0},v=[{x:u,y:f}];c&&l<=0&&(g={x:u,y:f});for(let y=0;y<=300;y+=1){if(m=y/300,({x:u,y:f}=yp(t,e,n,r,i,o,a,s,m)),v=[...v,{x:u,y:f}],h+=qh(d,[u,f]),d=[u,f],c&&h>l&&l>p[2]){const t=(h-l)/(h-p[2]);g={x:d[0]*(1-t)+p[0]*t,y:d[1]*(1-t)+p[1]*t}}p=[u,f,h]}return c&&l>=h&&(g={x:a,y:s}),{length:h,point:g,min:{x:Math.min(...v.map((t=>t.x))),y:Math.min(...v.map((t=>t.y)))},max:{x:Math.max(...v.map((t=>t.x))),y:Math.max(...v.map((t=>t.y)))}}},xp=(t,e,n,r,i,o,a)=>{const s=1-a;return{x:s**2*t+2*s*a*n+a**2*i,y:s**2*e+2*s*a*r+a**2*o}},wp=(t,e,n,r,i,o,a)=>{const s="number"==typeof a;let l=t,c=e,u=0,f=[l,c,u],h=[l,c],p=0,d={x:0,y:0},m=[{x:l,y:c}];s&&a<=0&&(d={x:l,y:c});for(let g=0;g<=300;g+=1){if(p=g/300,({x:l,y:c}=xp(t,e,n,r,i,o,p)),m=[...m,{x:l,y:c}],u+=qh(h,[l,c]),h=[l,c],s&&u>a&&a>f[2]){const t=(u-a)/(u-f[2]);d={x:h[0]*(1-t)+f[0]*t,y:h[1]*(1-t)+f[1]*t}}f=[l,c,u]}return s&&a>=u&&(d={x:i,y:o}),{length:u,point:d,min:{x:Math.min(...m.map((t=>t.x))),y:Math.min(...m.map((t=>t.y)))},max:{x:Math.max(...m.map((t=>t.x))),y:Math.max(...m.map((t=>t.y)))}}},$p=(t,e)=>{const n=hp(t),r="number"==typeof e;let i,o,a,s=[],l=0,c=0,u=0,f=0,h=[],p=[],d=0,m={x:0,y:0},g=m,v=m,y=m,b=0;for(let t=0,x=n.length;t<x;t+=1)a=n[t],[o]=a,i="M"===o,s=i?s:[l,c,...a.slice(1)],i?([,u,f]=a,m={x:u,y:f},g=m,d=0,r&&e<.001&&(y=m)):"L"===o?({length:d,min:m,max:g,point:v}=dp(...s,(e||0)-b)):"A"===o?({length:d,min:m,max:g,point:v}=vp(...s,(e||0)-b)):"C"===o?({length:d,min:m,max:g,point:v}=bp(...s,(e||0)-b)):"Q"===o?({length:d,min:m,max:g,point:v}=wp(...s,(e||0)-b)):"Z"===o&&(s=[l,c,u,f],({length:d,min:m,max:g,point:v}=dp(...s,(e||0)-b))),r&&b<e&&b+d>=e&&(y=v),p=[...p,g],h=[...h,m],b+=d,[l,c]="Z"!==o?a.slice(-2):[u,f];return r&&e>=b&&(y={x:l,y:c}),{length:b,point:y,min:{x:Math.min(...h.map((t=>t.x))),y:Math.min(...h.map((t=>t.y)))},max:{x:Math.max(...p.map((t=>t.x))),y:Math.max(...p.map((t=>t.y)))}}},_p=t=>{if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};const{min:{x:e,y:n},max:{x:r,y:i}}=$p(t),o=r-e,a=i-n;return{width:o,height:a,x:e,y:n,x2:r,y2:i,cx:e+o/2,cy:n+a/2,cz:Math.max(o,a)+Math.min(o,a)/2}},kp=(t,e,n)=>{if(t[n].length>7){t[n].shift();const r=t[n];let i=n;for(;r.length;)e[n]="A",t.splice(i+=1,0,["C",...r.splice(0,6)]);t.splice(n,1)}},Mp=t=>up(t)&&t.every((([t])=>"MC".includes(t))),Cp=(t,e,n)=>({x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}),Np=(t,e,n,r,i,o,a,s,l,c)=>{let u=t,f=e,h=n,p=r,d=s,m=l;const g=120*Math.PI/180,v=Math.PI/180*(+i||0);let y,b,x,w,$,_=[];if(c)[b,x,w,$]=c;else{y=Cp(u,f,-v),u=y.x,f=y.y,y=Cp(d,m,-v),d=y.x,m=y.y;const t=(u-d)/2,e=(f-m)/2;let n=t*t/(h*h)+e*e/(p*p);n>1&&(n=Math.sqrt(n),h*=n,p*=n);const r=h*h,i=p*p,s=(o===a?-1:1)*Math.sqrt(Math.abs((r*i-r*e*e-i*t*t)/(r*e*e+i*t*t)));w=s*h*e/p+(u+d)/2,$=s*-p*t/h+(f+m)/2,b=Math.asin(((f-$)/p*10**9>>0)/10**9),x=Math.asin(((m-$)/p*10**9>>0)/10**9),b=u<w?Math.PI-b:b,x=d<w?Math.PI-x:x,b<0&&(b=2*Math.PI+b),x<0&&(x=2*Math.PI+x),a&&b>x&&(b-=2*Math.PI),!a&&x>b&&(x-=2*Math.PI)}let k=x-b;if(Math.abs(k)>g){const t=x,e=d,n=m;x=b+g*(a&&x>b?1:-1),d=w+h*Math.cos(x),m=$+p*Math.sin(x),_=Np(d,m,h,p,i,0,a,e,n,[x,t,w,$])}k=x-b;const M=Math.cos(b),C=Math.sin(b),N=Math.cos(x),S=Math.sin(x),T=Math.tan(k/4),A=4/3*h*T,z=4/3*p*T,D=[u,f],j=[u+A*C,f-z*M],E=[d+A*S,m-z*N],L=[d,m];if(j[0]=2*D[0]-j[0],j[1]=2*D[1]-j[1],c)return[...j,...E,...L,..._];_=[...j,...E,...L,..._];const P=[];for(let t=0,e=_.length;t<e;t+=1)P[t]=t%2?Cp(_[t-1],_[t],v).y:Cp(_[t],_[t+1],v).x;return P},Sp=(t,e,n,r,i,o)=>{const a=.3333333333333333,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},Tp=(t,e,n,r)=>[...pp([t,e],[n,r],.5),n,r,n,r],Ap=(t,e)=>{const[n]=t,r=t.slice(1).map(Number),[i,o]=r;let a;const{x1:s,y1:l,x:c,y:u}=e;return"TQ".includes(n)||(e.qx=null,e.qy=null),"M"===n?(e.x=i,e.y=o,t):"A"===n?(a=[s,l,...r],["C",...Np(...a)]):"Q"===n?(e.qx=i,e.qy=o,a=[s,l,...r],["C",...Sp(...a)]):"L"===n?["C",...Tp(s,l,i,o)]:"Z"===n?["C",...Tp(s,l,c,u)]:t},zp=t=>{if(Mp(t))return[...t];const e=hp(t),n={...fp},r=[];let i="",o=e.length;for(let t=0;t<o;t+=1){[i]=e[t],r[t]=i,e[t]=Ap(e[t],n),kp(e,r,t),o=e.length;const a=e[t],s=a.length;n.x1=+a[s-2],n.y1=+a[s-1],n.x2=+a[s-4]||n.x1,n.y2=+a[s-3]||n.y1}return e},Dp=t=>{let e=0,n=0,r=0;return zp(t).map((t=>"M"===t[0]?([,e,n]=t,0):(r=((t,e,n,r,i,o,a,s)=>3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20)(e,n,...t.slice(1)),[e,n]=t.slice(-2),r))).reduce(((t,e)=>t+e),0)},jp=t=>$p(t).length,Ep=t=>Dp(zp(t))>=0,Lp=(t,e)=>$p(t,e).point,Pp=(t,e)=>{const n=Oh(t);let r=[...n],i=jp(r),o=r.length-1,a=0,s=0,l=n[0];const[c,u]=l.slice(-2),f={x:c,y:u};if(o<=0||!e||!Number.isFinite(e))return{segment:l,index:0,length:s,point:f,lengthAtSegment:a};if(e>=i)return r=n.slice(0,-1),a=jp(r),s=i-a,{segment:n[o],index:o,length:s,lengthAtSegment:a};const h=[];for(;o>0;)l=r[o],r=r.slice(0,-1),a=jp(r),s=i-a,i=a,h.push({segment:l,index:o,length:s,lengthAtSegment:a}),o-=1;return h.find((({lengthAtSegment:t})=>t<=e))},Rp=(t,e)=>{const n=Oh(t),r=hp(n),i=jp(n),o=t=>{const n=t.x-e.x,r=t.y-e.y;return n*n+r*r};let a,s=8,l={x:0,y:0},c=0,u=0,f=1/0;for(let t=0;t<=i;t+=s)a=Lp(r,t),c=o(a),c<f&&(l=a,u=t,f=c);s/=2;let h,p,d=0,m=0,g=0,v=0;for(;s>.5;)d=u-s,h=Lp(r,d),g=o(h),m=u+s,p=Lp(r,m),v=o(p),d>=0&&g<f?(l=h,u=d,f=g):m<=i&&v<f?(l=p,u=m,f=v):s/=2;const y=Pp(n,u);return{closest:l,distance:Math.sqrt(f),segment:y}},Ip=(t,e)=>Rp(t,e).closest,Op=(t,e)=>Rp(t,e).segment,Fp=(t,e)=>Pp(t,e).segment,qp=(t,e)=>{const{distance:n}=Rp(t,e);return Math.abs(n)<.001},Yp=t=>{if("string"!=typeof t)return!1;const e=new Rh(t);for(jh(e);e.index<e.max&&!e.err.length;)Ph(e);return!e.err.length&&"mM".includes(e.segments[0][0])},Up=t=>Ih(t)&&t.slice(1).every((([t])=>t===t.toLowerCase())),Hp=(t,e)=>{let{round:n}=kh;if("off"===e||"off"===n)return[...t];n="number"==typeof e&&e>=0?e:n;const r="number"==typeof n&&n>=1?10**n:1;return t.map((t=>{const e=t.slice(1).map(Number).map((t=>n?Math.round(t*r)/r:Math.round(t)));return[t[0],...e]}))},Vp=(t,e)=>Hp(t,e).map((t=>t[0]+t.slice(1).join(" "))).join(""),Bp={line:["x1","y1","x2","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],rect:["width","height","x","y","rx","ry"],polygon:["points"],polyline:["points"],glyph:["d"]},Wp=(t,e,n)=>{const r=n||document,i=r.defaultView||window,o=Object.keys(Bp),a=t instanceof i.SVGElement,s=a?t.tagName:null;if(s&&o.every((t=>s!==t)))throw TypeError(`${Mh}: "${s}" is not SVGElement`);const l=r.createElementNS("http://www.w3.org/2000/svg","path"),c=a?s:t.type,u=Bp[c],f={type:c};a?(u.forEach((e=>{u.includes(e)&&(f[e]=t.getAttribute(e))})),Object.values(t.attributes).forEach((({name:t,value:e})=>{u.includes(t)||l.setAttribute(t,e)}))):(Object.assign(f,t),Object.keys(f).forEach((t=>{!u.includes(t)&&"type"!==t&&l.setAttribute(t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`)),f[t])})));let h="";const p=kh.round;return"circle"===c?h=Vp((t=>{const{cx:e,cy:n,r:r}=t;return[["M",e-r,n],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,-2*r,0]]})(f),p):"ellipse"===c?h=Vp((t=>{const{cx:e,cy:n,rx:r,ry:i}=t;return[["M",e-r,n],["a",r,i,0,1,0,2*r,0],["a",r,i,0,1,0,-2*r,0]]})(f),p):["polyline","polygon"].includes(c)?h=Vp((t=>{const e=[],n=(t.points||"").trim().split(/[\s|,]/).map(Number);let r=0;for(;r<n.length;)e.push([r?"L":"M",n[r],n[r+1]]),r+=2;return"polygon"===t.type?[...e,["z"]]:e})(f),p):"rect"===c?h=Vp((t=>{const e=+t.x||0,n=+t.y||0,r=+t.width,i=+t.height;let o=+t.rx,a=+t.ry;return o||a?(o=o||a,a=a||o,2*o>r&&(o-=(2*o-r)/2),2*a>i&&(a-=(2*a-i)/2),[["M",e+o,n],["h",r-2*o],["s",o,0,o,a],["v",i-2*a],["s",0,a,-o,a],["h",2*o-r],["s",-o,0,-o,-a],["v",2*a-i],["s",0,-a,o,-a]]):[["M",e,n],["h",r],["v",i],["H",e],["Z"]]})(f),p):"line"===c?h=Vp((t=>{const{x1:e,y1:n,x2:r,y2:i}=t;return[["M",e,n],["L",r,i]]})(f),p):"glyph"===c&&(h=a?t.getAttribute("d"):t.d),!!Yp(h)&&(l.setAttribute("d",h),e&&a&&(t.before(l,t),t.remove()),l)},Zp=t=>{const e=[];let n,r=-1;return t.forEach((t=>{"M"===t[0]?(n=[t],r+=1):n=[...n,t],e[r]=n})),e},Xp=t=>{if(Up(t))return[...t];const e=Oh(t);let n=0,r=0,i=0,o=0;return e.map((t=>{const e=t.slice(1).map(Number),[a]=t,s=a.toLowerCase();if("M"===a)return[n,r]=e,i=n,o=r,["M",n,r];let l=[];if(a!==s)if("a"===s)l=[s,e[0],e[1],e[2],e[3],e[4],e[5]-n,e[6]-r];else if("v"===s)l=[s,e[0]-r];else if("h"===s)l=[s,e[0]-n];else{l=[s,...e.map(((t,e)=>t-(e%2?r:n)))]}else"m"===a&&(i=e[0]+n,o=e[1]+r),l=[s,...e];const c=l.length;return"z"===s?(n=i,r=o):"h"===s?n+=l[1]:"v"===s?r+=l[1]:(n+=l[c-2],r+=l[c-1]),l}))},Gp=(t,e,n,r)=>{const[i]=t,o=t=>Math.round(1e4*t)/1e4,a=t.slice(1).map((t=>+t)),s=e.slice(1).map((t=>+t)),{x1:l,y1:c,x2:u,y2:f,x:h,y:p}=n;let d=t;const[m,g]=s.slice(-2);if("TQ".includes(i)||(n.qx=null,n.qy=null),["V","H","S","T","Z"].includes(i))d=[i,...a];else if("L"===i)o(h)===o(m)?d=["V",g]:o(p)===o(g)&&(d=["H",m]);else if("C"===i){const[t,e]=s;"CS".includes(r)&&(o(t)===o(2*l-u)&&o(e)===o(2*c-f)||o(l)===o(2*u-h)&&o(c)===o(2*f-p))&&(d=["S",...s.slice(-4)]),n.x1=t,n.y1=e}else if("Q"===i){const[t,e]=s;n.qx=t,n.qy=e,"QT".includes(r)&&(o(t)===o(2*l-u)&&o(e)===o(2*c-f)||o(l)===o(2*u-h)&&o(c)===o(2*f-p))&&(d=["T",...s.slice(-2)])}return d},Kp=(t,e)=>{const n=lp(t),r=hp(n),i={...fp},o=[],a=n.length;let s="",l="",c=0,u=0,f=0,h=0;for(let t=0;t<a;t+=1){[s]=n[t],o[t]=s,t&&(l=o[t-1]),n[t]=Gp(n[t],r[t],i,l);const e=n[t],a=e.length;switch(i.x1=+e[a-2],i.y1=+e[a-1],i.x2=+e[a-4]||i.x1,i.y2=+e[a-3]||i.y1,s){case"Z":c=f,u=h;break;case"H":[,c]=e;break;case"V":[,u]=e;break;default:[c,u]=e.slice(-2).map(Number),"M"===s&&(f=c,h=u)}i.x=c,i.y=u}const p=Hp(n,e),d=Hp(Xp(n),e);return p.map(((t,e)=>e?t.join("").length<d[e].join("").length?t:d[e]:t))},Qp=t=>{const e=t.slice(1).map(((e,n,r)=>n?[...r[n-1].slice(-2),...e.slice(1)]:[...t[0].slice(1),...e.slice(1)])).map((t=>t.map(((e,n)=>t[t.length-n-2*(1-n%2)])))).reverse();return[["M",...e[0].slice(0,2)],...e.map((t=>["C",...t.slice(2)]))]},Jp=t=>{const e=lp(t),n="Z"===e.slice(-1)[0][0],r=hp(e).map(((t,n)=>{const[r,i]=t.slice(-2).map(Number);return{seg:e[n],n:t,c:e[n][0],x:r,y:i}})).map(((t,e,r)=>{const i=t.seg,o=t.n,a=e&&r[e-1],s=r[e+1],l=t.c,c=r.length,u=e?r[e-1].x:r[c-1].x,f=e?r[e-1].y:r[c-1].y;let h=[];switch(l){case"M":h=n?["Z"]:[l,u,f];break;case"A":h=[l,...i.slice(1,-3),1===i[5]?0:1,u,f];break;case"C":h=s&&"S"===s.c?["S",i[1],i[2],u,f]:[l,i[3],i[4],i[1],i[2],u,f];break;case"S":h=!a||!"CS".includes(a.c)||s&&"S"===s.c?[l,o[1],o[2],u,f]:["C",o[3],o[4],o[1],o[2],u,f];break;case"Q":h=s&&"T"===s.c?["T",u,f]:[l,...i.slice(1,-2),u,f];break;case"T":h=!a||!"QT".includes(a.c)||s&&"T"===s.c?[l,u,f]:["Q",o[1],o[2],u,f];break;case"Z":h=["M",u,f];break;case"H":h=[l,u];break;case"V":h=[l,f];break;default:h=[l,...i.slice(1,-2),u,f]}return h}));return n?r.reverse():[r[0],...r.slice(1).reverse()]},td=(t,e,n)=>{const[r,i,o]=n,[a,s,l]=((t,e)=>{let n=ap.Translate(...e.slice(0,-1));return[,,,n.m44]=e,n=t.multiply(n),[n.m41,n.m42,n.m43,n.m44]})(t,[...e,0,1]),c=s-i,u=l-o;return[(a-r)*(Math.abs(o)/Math.abs(u)||1)+r,c*(Math.abs(o)/Math.abs(u)||1)+i]},ed=(t,e)=>{let n,r,i,o,a,s,l=0,c=0;const u=lp(t),f=e&&Object.keys(e);if(!e||f&&!f.length)return[...u];const h=hp(u);if(!e.origin){const{origin:t}=kh;Object.assign(e,{origin:t})}const p=(t=>{let e=new ap;const{origin:n}=t,[r,i]=n,{translate:o}=t,{rotate:a}=t,{skew:s}=t,{scale:l}=t;return Array.isArray(o)&&o.length>=2&&o.every((t=>!Number.isNaN(+t)))&&o.some((t=>0!==t))?e=e.translate(...o):"number"==typeof o&&!Number.isNaN(o)&&(e=e.translate(o)),(a||s||l)&&(e=e.translate(r,i),Array.isArray(a)&&a.length>=2&&a.every((t=>!Number.isNaN(+t)))&&a.some((t=>0!==t))?e=e.rotate(...a):"number"==typeof a&&!Number.isNaN(a)&&(e=e.rotate(a)),Array.isArray(s)&&2===s.length&&s.every((t=>!Number.isNaN(+t)))&&s.some((t=>0!==t))?(e=s[0]?e.skewX(s[0]):e,e=s[1]?e.skewY(s[1]):e):"number"==typeof s&&!Number.isNaN(s)&&(e=e.skewX(s)),Array.isArray(l)&&l.length>=2&&l.every((t=>!Number.isNaN(+t)))&&l.some((t=>1!==t))?e=e.scale(...l):"number"==typeof l&&!Number.isNaN(l)&&(e=e.scale(l)),e=e.translate(-r,-i)),e})(e),{origin:d}=e,m={...fp};let g=[],v=0,y="",b=[];const x=[];if(!p.isIdentity){for(n=0,i=u.length;n<i;n+=1){g=u[n],u[n]&&([y]=g),x[n]=y,"A"===y&&(g=Ap(h[n],m),u[n]=Ap(h[n],m),kp(u,x,n),h[n]=Ap(h[n],m),kp(h,x,n),i=Math.max(u.length,h.length)),g=h[n],v=g.length,m.x1=+g[v-2],m.y1=+g[v-1],m.x2=+g[v-4]||m.x1,m.y2=+g[v-3]||m.y1;const t={s:u[n],c:u[n][0],x:m.x1,y:m.y1};b=[...b,t]}return b.map((t=>{if(y=t.c,g=t.s,"L"===y||"H"===y||"V"===y)return[a,s]=td(p,[t.x,t.y],d),l!==a&&c!==s?g=["L",a,s]:c===s?g=["H",a]:l===a&&(g=["V",s]),l=a,c=s,g;for(r=1,o=g.length;r<o;r+=2)[l,c]=td(p,[+g[r],+g[r+1]],d),g[r]=l,g[r+1]=c;return g}))}return[...u]},nd=t=>{const e=t.slice(0,2),n=t.slice(2,4),r=t.slice(4,6),i=t.slice(6,8),o=pp(e,n,.5),a=pp(n,r,.5),s=pp(r,i,.5),l=pp(o,a,.5),c=pp(a,s,.5),u=pp(l,c,.5);return[["C",...o,...l,...u],["C",...c,...s,...i]]};class rd{static CSSMatrix=ap;static getPathBBox=_p;static getPathArea=Dp;static getTotalLength=jp;static getDrawDirection=Ep;static getPointAtLength=Lp;static pathLengthFactory=$p;static getPropertiesAtLength=Pp;static getPropertiesAtPoint=Rp;static polygonLength=Yh;static polygonArea=Fh;static getClosestPoint=Ip;static getSegmentOfPoint=Op;static getSegmentAtLength=Fp;static isPointInStroke=qp;static isValidPath=Yp;static isPathArray=Ih;static isAbsoluteArray=sp;static isRelativeArray=Up;static isCurveArray=Mp;static isNormalizedArray=up;static shapeToPath=Wp;static parsePathString=Oh;static roundPath=Hp;static splitPath=Zp;static splitCubic=nd;static optimizePath=Kp;static reverseCurve=Qp;static reversePath=Jp;static normalizePath=hp;static transformPath=ed;static pathToAbsolute=lp;static pathToRelative=Xp;static pathToCurve=zp;static pathToString=Vp;constructor(t,e){const n=e||{},r=typeof t>"u";if(r||!t.length)throw TypeError(`${Mh}: "pathValue" is ${r?"undefined":"empty"}`);const i=Oh(t);this.segments=i;const{width:o,height:a,cx:s,cy:l,cz:c}=this.getBBox(),{round:u,origin:f}=n;let h,p;if("auto"===u){const t=`${Math.floor(Math.max(o,a))}`.length;h=t>=4?0:4-t}else h=Number.isInteger(u)||"off"===u?u:kh.round;if(Array.isArray(f)&&f.length>=2){const[t,e,n]=f.map(Number);p=[Number.isNaN(t)?s:t,Number.isNaN(e)?l:e,Number.isNaN(n)?c:n]}else p=[s,l,c];return this.round=h,this.origin=p,this}getBBox(){return _p(this.segments)}getTotalLength(){return jp(this.segments)}getPointAtLength(t){return Lp(this.segments,t)}toAbsolute(){const{segments:t}=this;return this.segments=lp(t),this}toRelative(){const{segments:t}=this;return this.segments=Xp(t),this}toCurve(){const{segments:t}=this;return this.segments=zp(t),this}reverse(t){this.toAbsolute();const{segments:e}=this,n=Zp(e),r=n.length>1&&n,i=r?[...r].map(((e,n)=>t?n?Jp(e):[...e]:Jp(e))):[...e];let o=[];return o=r?i.flat(1):t?e:Jp(e),this.segments=[...o],this}normalize(){const{segments:t}=this;return this.segments=hp(t),this}optimize(){const{segments:t}=this;return this.segments=Kp(t,this.round),this}transform(t){if(!t||"object"!=typeof t||"object"==typeof t&&!["translate","rotate","skew","scale"].some((e=>e in t)))return this;const{segments:e,origin:[n,r,i]}=this,o={};for(const[e,n]of Object.entries(t))"skew"===e&&Array.isArray(n)||("rotate"===e||"translate"===e||"origin"===e||"scale"===e)&&Array.isArray(n)?o[e]=n.map(Number):"origin"!==e&&"number"==typeof Number(n)&&(o[e]=Number(n));const{origin:a}=o;if(Array.isArray(a)&&a.length>=2){const[t,e,s]=a.map(Number);o.origin=[Number.isNaN(t)?n:t,Number.isNaN(e)?r:e,s||i]}else o.origin=[n,r,i];return this.segments=ed(e,o),this}flipX(){return this.transform({rotate:[0,180,0]}),this}flipY(){return this.transform({rotate:[180,0,0]}),this}toString(){return Vp(this.segments,this.round)}}const id=new Map([["MSNBC",0],["CNN",1],["Other Cable",2],["Hard Broadcast News",3],["Soft Broadcast News",4],["Spanish News",5],["FOX",6],["Newsmax",7]]),od="àáäâèéëêìíïîòóöôùúüûñç·/_,:;";function ad(t){let e=t.replace(/^\s+|\s+$/g,"");e=e.toLowerCase();for(let t=0,n=od.length;t<n;t++)e=e.replace(new RegExp(od.charAt(t),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(t));return String(e).replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}function sd(t,e,n){const r=t.slice();return r[30]=e[n],r[32]=n,r}function ld(t,e,n){const r=t.slice();return r[30]=e[n],r[32]=n,r}function cd(t,e,n){const r=t.slice();return r[34]=e[n],r[32]=n,r}function ud(e){let n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=fd(cd(e,r,t));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=j()},m(t,e){for(let n=0;n<i.length;n+=1)i[n].m(t,e);C(t,n,e)},p(t,e){if(522&e[0]){let o;for(r=t[1],o=0;o<r.length;o+=1){const a=cd(t,r,o);i[o]?(i[o].p(a,e),_t(i[o],1)):(i[o]=fd(a),i[o].c(),_t(i[o],1),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i(t){for(let t=0;t<r.length;t+=1)_t(i[t])},o:t,d(t){S(i,t),t&&N(n)}}}function fd(e){let n,r,i,o,a,s,l,c,u,f;return{c(){n=A("path"),s=A("path"),R(n,"class",r="link linkTo-"+ad(e[34].to.node)+" linkFrom-"+ad(e[34].from.node)+" svelte-43oxmo"),R(n,"stroke-width",i=e[34].w),R(n,"d",o=e[34].pathString),R(s,"class",l="arrow arrowTo-"+ad(e[34].to.node)+" arrowFrom-"+ad(e[34].from.node)+" svelte-43oxmo"),R(s,"d",c=e[9]([e[34].start,e[34].midpoint,e[34].end])),R(s,"marker-end","url(#triangle)")},m(t,r){C(t,n,r),C(t,s,r),u||(f=E(n,"introend",e[18]),u=!0)},p(t,e){2&e[0]&&r!==(r="link linkTo-"+ad(t[34].to.node)+" linkFrom-"+ad(t[34].from.node)+" svelte-43oxmo")&&R(n,"class",r),2&e[0]&&i!==(i=t[34].w)&&R(n,"stroke-width",i),2&e[0]&&o!==(o=t[34].pathString)&&R(n,"d",o),2&e[0]&&l!==(l="arrow arrowTo-"+ad(t[34].to.node)+" arrowFrom-"+ad(t[34].from.node)+" svelte-43oxmo")&&R(s,"class",l),2&e[0]&&c!==(c=t[9]([t[34].start,t[34].midpoint,t[34].end]))&&R(s,"d",c)},i(t){a||ut((()=>{a=Ct(n,Ou,{duration:1e3,delay:210}),a.start()}))},o:t,d(t){t&&N(n),t&&N(s),u=!1,f()}}}function hd(e){let n,r,i=e[2].filter(yd),o=[];for(let t=0;t<i.length;t+=1)o[t]=dd(ld(e,i,t));let a=e[2].filter(bd),s=[];for(let t=0;t<a.length;t+=1)s[t]=gd(sd(e,a,t));return{c(){n=A("g");for(let t=0;t<o.length;t+=1)o[t].c();r=j();for(let t=0;t<s.length;t+=1)s[t].c();R(n,"class","node-group")},m(t,e){C(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);_(n,r);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,e){if(3125&e[0]){let a;for(i=t[2].filter(yd),a=0;a<i.length;a+=1){const s=ld(t,i,a);o[a]?(o[a].p(s,e),_t(o[a],1)):(o[a]=dd(s),o[a].c(),_t(o[a],1),o[a].m(n,r))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}if(3125&e[0]){let r;for(a=t[2].filter(bd),r=0;r<a.length;r+=1){const i=sd(t,a,r);s[r]?(s[r].p(i,e),_t(s[r],1)):(s[r]=gd(i),s[r].c(),_t(s[r],1),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},i(t){for(let t=0;t<i.length;t+=1)_t(o[t]);for(let t=0;t<a.length;t+=1)_t(s[t])},o:t,d(t){t&&N(n),S(o,t),S(s,t)}}}function pd(t){let e,n,r,i,o,a=xf(t[0].get(t[30].archetype))+"";return{c(){e=A("text"),n=z(a),R(e,"class",r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-43oxmo"),R(e,"dx",i=t[30].r+3),R(e,"dy",o=5)},m(t,r){C(t,e,r),_(e,n)},p(t,o){5&o[0]&&a!==(a=xf(t[0].get(t[30].archetype))+"")&&I(n,a),37&o[0]&&r!==(r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-43oxmo")&&R(e,"class",r),4&o[0]&&i!==(i=t[30].r+3)&&R(e,"dx",i)},d(t){t&&N(e)}}}function dd(e){let n,r,o,a,s,l,c,u,f,h,p,d=e[30].archetype+"";function m(...t){return e[19](e[30],...t)}function g(...t){return e[20](e[30],...t)}let v=e[5]&&pd(e);return{c(){n=A("g"),r=A("circle"),l=A("text"),c=z(d),v&&v.c(),R(r,"class",o="node "+(e[4]?"active":"")+" svelte-43oxmo"),R(r,"r",a=e[30].r),R(l,"class","node-label svelte-43oxmo"),R(l,"dy",u=-(e[30].r+3)),R(n,"transform",f="translate("+e[30].x+", "+e[30].y+")")},m(t,e){C(t,n,e),_(n,r),_(n,l),_(l,c),v&&v.m(n,null),h||(p=[E(r,"mouseenter",m),E(r,"mouseleave",g)],h=!0)},p(t,i){e=t,16&i[0]&&o!==(o="node "+(e[4]?"active":"")+" svelte-43oxmo")&&R(r,"class",o),4&i[0]&&a!==(a=e[30].r)&&R(r,"r",a),4&i[0]&&d!==(d=e[30].archetype+"")&&I(c,d),4&i[0]&&u!==(u=-(e[30].r+3))&&R(l,"dy",u),e[5]?v?v.p(e,i):(v=pd(e),v.c(),v.m(n,null)):v&&(v.d(1),v=null),4&i[0]&&f!==(f="translate("+e[30].x+", "+e[30].y+")")&&R(n,"transform",f)},i(t){s||ut((()=>{s=Ct(r,Iu,{duration:1e3}),s.start()}))},o:t,d(t){t&&N(n),v&&v.d(),h=!1,i(p)}}}function md(t){let e,n,r,i,o=xf(t[0].get(t[30].archetype))+"";return{c(){e=A("text"),n=z(o),R(e,"class",r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-43oxmo"),R(e,"dx",i=t[30].r+3)},m(t,r){C(t,e,r),_(e,n)},p(t,a){5&a[0]&&o!==(o=xf(t[0].get(t[30].archetype))+"")&&I(n,o),37&a[0]&&r!==(r="node-tooltip "+(t[5]===t[30].archetype?"active":"")+" "+(t[0].get(t[30].archetype)>=0?"positive":"negative")+" svelte-43oxmo")&&R(e,"class",r),4&a[0]&&i!==(i=t[30].r+3)&&R(e,"dx",i)},d(t){t&&N(e)}}}function gd(e){let n,r,o,a,s,l,c,u,f,h,p,d=e[30].archetype+"";function m(...t){return e[21](e[30],...t)}function g(...t){return e[22](e[30],...t)}let v=e[5]&&md(e);return{c(){n=A("g"),r=A("circle"),l=A("text"),c=z(d),v&&v.c(),R(r,"class",o="node "+(e[4]?"active":"")+" svelte-43oxmo"),R(r,"r",a=e[30].r),R(l,"class","node-label svelte-43oxmo"),R(l,"dy",u=e[30].r+18),R(n,"transform",f="translate("+e[30].x+", "+e[30].y+")")},m(t,e){C(t,n,e),_(n,r),_(n,l),_(l,c),v&&v.m(n,null),h||(p=[E(r,"mouseenter",m),E(r,"mouseleave",g)],h=!0)},p(t,i){e=t,16&i[0]&&o!==(o="node "+(e[4]?"active":"")+" svelte-43oxmo")&&R(r,"class",o),4&i[0]&&a!==(a=e[30].r)&&R(r,"r",a),4&i[0]&&d!==(d=e[30].archetype+"")&&I(c,d),4&i[0]&&u!==(u=e[30].r+18)&&R(l,"dy",u),e[5]?v?v.p(e,i):(v=md(e),v.c(),v.m(n,null)):v&&(v.d(1),v=null),4&i[0]&&f!==(f="translate("+e[30].x+", "+e[30].y+")")&&R(n,"transform",f)},i(t){s||ut((()=>{s=Ct(r,Iu,{duration:1e3}),s.start()}))},o:t,d(t){t&&N(n),v&&v.d(),h=!1,i(p)}}}function vd(e){let n,r,i,o=e[6]&&ud(e),a=e[6]&&hd(e);return{c(){n=A("g"),o&&o.c(),r=D(),a&&a.c(),i=j(),R(n,"class","link-group"),R(n,"id","link-group")},m(t,e){C(t,n,e),o&&o.m(n,null),C(t,r,e),a&&a.m(t,e),C(t,i,e)},p(t,e){t[6]?o?(o.p(t,e),64&e[0]&&_t(o,1)):(o=ud(t),o.c(),_t(o,1),o.m(n,null)):o&&(o.d(1),o=null),t[6]?a?(a.p(t,e),64&e[0]&&_t(a,1)):(a=hd(t),a.c(),_t(a,1),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(t){_t(o),_t(a)},o:t,d(t){t&&N(n),o&&o.d(),t&&N(r),a&&a.d(t),t&&N(i)}}}const yd=t=>"No or Minimal News"!==t.node,bd=t=>"No or Minimal News"===t.node;function xd(t,e,n){let r,i,o,a,s,c;const{width:u,height:f}=rt("LayerCake");l(t,u,(t=>n(17,c=t))),l(t,f,(t=>n(16,s=t)));let{nodes:h}=e,{links:p}=e,{flatLinks:d}=e,{netFlowMap:m}=e;const g=Gn().range([1,25]),v=nr().range([5,25]);let y=[];const b=c/1.75,x=Math.acos((2*Math.pow(b,2)-Math.pow(c,2))/(2*Math.pow(b,2))),w=x/(h.length-1),$=x/2-w/2;let _,k;function M(t,e){if(t.moveTo(e.from.x,e.from.y),"No or Minimal News"===e.link.to){const n=e.from.x>c/2?c:0;t.quadraticCurveTo(n,s/1.5,e.to.x,e.to.y)}else 1===Math.abs(+e.link.to-+e.link.from)?t.lineTo(e.to.x,e.to.y):t.quadraticCurveTo(c/2,.01+Math.random()*s,e.to.x,e.to.y);return t}const C=ns().x((t=>t.x)).y((t=>t.y)).curve(cs);function N(t,e){const r=ad(e.node),i=document.getElementById("link-group"),o=document.getElementsByClassName(`linkFrom-${r}`),s=document.getElementsByClassName(`arrowFrom-${r}`),l=document.getElementsByClassName(`linkTo-${r}`),c=document.getElementsByClassName(`arrowTo-${r}`),u=[];for(const t of o)t.classList.toggle("linkFrom"),u.push({selection:t});for(const t of l)t.classList.toggle("linkTo"),u.push({selection:t});for(const t of s)t.classList.toggle("arrowVisible"),u.push({selection:t});for(const t of c)t.classList.toggle("arrowVisible"),u.push({selection:t});for(const t of u)i.appendChild(t.selection);n(5,a=e.node)}function S(t,e){const r=ad(e.node),i=document.getElementsByClassName(`linkFrom-${r}`),o=document.getElementsByClassName(`arrowFrom-${r}`),s=document.getElementsByClassName(`linkTo-${r}`),l=document.getElementsByClassName(`arrowTo-${r}`);for(const t of i)t.classList.toggle("linkFrom");for(const t of s)t.classList.toggle("linkTo");for(const t of o)t.classList.toggle("arrowVisible");for(const t of l)t.classList.toggle("arrowVisible");n(5,a=!1)}et((()=>{v.domain(ee(h,(t=>t.value))),g.domain(ee(p,(t=>t.value))),n(2,_=h.map((t=>{const e=id.get(t.node);let n,r;const i=v(t.value);return"No or Minimal News"!==t.node?(n=c/2+b*Math.cos(w*e-Math.PI/2-$),r=(1+Math.sin(w*e-Math.PI/2-$))*b):(n=c/2,r=s-i),Object.assign(Object.assign({},t),{x:n,y:r,r:i})}))),n(15,k=new Map(_.map((t=>[t.node,t])))),n(1,y=p.map(((t,e)=>{const n=k.get(t.from),r=k.get(t.to),i=M(Xa(),{from:n,to:r,link:t}).toString(),o=new rd(i),a=+o.getTotalLength().toPrecision(2),s=o.getPointAtLength(.48*a),l=o.getPointAtLength(.5*a),c=o.getPointAtLength(.52*a);return Object.assign(Object.assign({},t),{to:r,from:n,pathString:i,pathInstance:o,totalLength:a,start:s,midpoint:l,end:c,w:g(t.value)})}))),n(6,r=!0)}));return t.$$set=t=>{"nodes"in t&&n(12,h=t.nodes),"links"in t&&n(13,p=t.links),"flatLinks"in t&&n(14,d=t.flatLinks),"netFlowMap"in t&&n(0,m=t.netFlowMap)},t.$$.update=()=>{241668&t.$$.dirty[0]&&(v.domain(ee(h,(t=>t.value))),g.domain(ee(p,(t=>t.value))),n(2,_=h.map((t=>{const e=id.get(t.node);let n,r;const i=v(t.value);return"No or Minimal News"!==t.node?(n=c/2+b*Math.cos(w*e-Math.PI/2-$),r=(1+Math.sin(w*e-Math.PI/2-$))*b):(n=c/2,r=s-i),Object.assign(Object.assign({},t),{x:n,y:r,r:i})}))),n(15,k=new Map(_.map((t=>[t.node,t])))),n(1,y=p.map(((t,e)=>{const n=k.get(t.from),r=k.get(t.to),i=M(Xa(),{from:n,to:r,link:t}).toString(),o=new rd(i),a=+o.getTotalLength().toPrecision(2),s=o.getPointAtLength(.48*a),l=o.getPointAtLength(.5*a),c=o.getPointAtLength(.52*a);return Object.assign(Object.assign({},t),{to:r,from:n,pathString:i,pathInstance:o,totalLength:a,start:s,midpoint:l,end:c,w:g(t.value)})})))),10&t.$$.dirty[0]&&y.length>0&&y.length===i&&n(4,o=!0)},n(6,r=!1),n(3,i=0),n(4,o=!1),n(5,a=!1),[m,y,_,i,o,a,r,u,f,C,N,S,h,p,d,k,s,c,()=>n(3,i+=1),(t,e)=>N(0,t),(t,e)=>S(0,t),(t,e)=>N(0,t),(t,e)=>S(0,t)]}class wd extends Lt{constructor(t){super(),Et(this,t,xd,vd,a,{nodes:12,links:13,flatLinks:14,netFlowMap:0},null,[-1,-1])}}function $d(t){let e,n;return e=new wd({props:{nodes:t[2],links:t[3],flatLinks:t[4],netFlowMap:t[9]}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.nodes=t[2]),8&n&&(r.links=t[3]),16&n&&(r.flatLinks=t[4]),512&n&&(r.netFlowMap=t[9]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function _d(t){let e,n,r,i,o,a,s=t[10]&&$d(t);return{c(){e=A("defs"),n=A("marker"),r=A("path"),i=D(),s&&s.c(),o=j(),R(r,"d","M 0 0 L 10 5 L 0 10 z"),R(r,"fill","black"),R(n,"id","triangle"),R(n,"viewBox","0 0 10 10"),R(n,"refX","1"),R(n,"refY","5"),R(n,"markerUnits","userSpaceOnUse"),R(n,"markerWidth","6"),R(n,"markerHeight","6"),R(n,"orient","auto")},m(t,l){C(t,e,l),_(e,n),_(n,r),C(t,i,l),s&&s.m(t,l),C(t,o,l),a=!0},p(t,e){t[10]?s?(s.p(t,e),1024&e&&_t(s,1)):(s=$d(t),s.c(),_t(s,1),s.m(o.parentNode,o)):s&&(wt(),kt(s,1,1,(()=>{s=null})),$t())},i(t){a||(_t(s),a=!0)},o(t){kt(s),a=!1},d(t){t&&N(e),t&&N(i),s&&s.d(t),t&&N(o)}}}function kd(t){let e,n;return e=new ta({props:{$$slots:{default:[_d]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};5660&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function Md(t){let e,n;return e=new Is({props:{caption:t[1],url:t[5],type:12===t[7]?"split-cols":"single-cols"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),32&n&&(r.url=t[5]),128&n&&(r.type=12===t[7]?"split-cols":"single-cols"),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function Cd(t){let e,n,r,i,o,a;n=new Yo({props:{padding:t[10]?t[0]:{},$$slots:{default:[kd]},$$scope:{ctx:t}}});let s=t[6]&&Md(t);return{c(){e=T("div"),At(n.$$.fragment),i=D(),s&&s.c(),o=j(),R(e,"class",r="chart flow-chart "+t[8])},m(t,r){C(t,e,r),zt(n,e,null),C(t,i,r),s&&s.m(t,r),C(t,o,r),a=!0},p(t,[i]){const l={};1025&i&&(l.padding=t[10]?t[0]:{}),5660&i&&(l.$$scope={dirty:i,ctx:t}),n.$set(l),(!a||256&i&&r!==(r="chart flow-chart "+t[8]))&&R(e,"class",r),t[6]?s?(s.p(t,i),64&i&&_t(s,1)):(s=Md(t),s.c(),_t(s,1),s.m(o.parentNode,o)):s&&(wt(),kt(s,1,1,(()=>{s=null})),$t())},i(t){a||(_t(n.$$.fragment,t),_t(s),a=!0)},o(t){kt(n.$$.fragment,t),kt(s),a=!1},d(t){t&&N(e),Dt(n),t&&N(i),s&&s.d(t),t&&N(o)}}}function Nd(t,e,n){let r,i,{margins:o={top:50,right:0,bottom:50,left:0}}=e,{caption:a=""}=e,{nodes:s}=e,{links:l}=e,{flatLinks:c}=e,{url:u=""}=e,{includeCaption:f=!0}=e,{spanCol:h}=e,{customClass:p=""}=e;return et((()=>{n(10,r=!0)})),t.$$set=t=>{"margins"in t&&n(0,o=t.margins),"caption"in t&&n(1,a=t.caption),"nodes"in t&&n(2,s=t.nodes),"links"in t&&n(3,l=t.links),"flatLinks"in t&&n(4,c=t.flatLinks),"url"in t&&n(5,u=t.url),"includeCaption"in t&&n(6,f=t.includeCaption),"spanCol"in t&&n(7,h=t.spanCol),"customClass"in t&&n(8,p=t.customClass)},t.$$.update=()=>{if(t.$$.dirty,12&t.$$.dirty){const t=ce(l,(t=>be(t,(t=>t.value))),(t=>t.to)),e=ce(l,(t=>be(t,(t=>t.value))),(t=>t.from));n(9,i=new Map(s.map((n=>[n.archetype,(t.has(n.archetype)?t.get(n.archetype):0)-(e.has(n.archetype)?e.get(n.archetype):0)]))))}},n(10,r=!1),[o,a,s,l,c,u,f,h,p,i,r]}class Sd extends Lt{constructor(t){super(),Et(this,t,Nd,Cd,a,{margins:0,caption:1,nodes:2,links:3,flatLinks:4,url:5,includeCaption:6,spanCol:7,customClass:8})}}function Td(t,e,n){const r=t.slice();return r[24]=e[n],r}function Ad(t,e,n){const r=t.slice();return r[24]=e[n],r[28]=n,r}function zd(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,d,m=Ws(t[12](t[6]))+"",g=Ws(t[12](t[5]))+"";function v(e){t[19](e)}function y(e){t[20](e)}let b={};return void 0!==t[6]&&(b.start=t[6]),void 0!==t[5]&&(b.end=t[5]),i=new sh({props:b}),ot.push((()=>Tt(i,"start",v))),ot.push((()=>Tt(i,"end",y))),{c(){e=T("div"),n=T("div"),n.textContent="Period",r=D(),At(i.$$.fragment),s=D(),l=T("div"),c=T("div"),u=z(m),f=D(),h=T("div"),p=z(g),R(n,"class","control-title svelte-1ubek5n"),R(c,"class","label svelte-1ubek5n"),R(h,"class","label svelte-1ubek5n"),R(l,"class","labels svelte-1ubek5n"),R(e,"id","period"),R(e,"class","control control-range svelte-1ubek5n")},m(t,o){C(t,e,o),_(e,n),_(e,r),zt(i,e,null),_(e,s),_(e,l),_(l,c),_(c,u),_(l,f),_(l,h),_(h,p),d=!0},p(t,e){const n={};!o&&64&e&&(o=!0,n.start=t[6],ft((()=>o=!1))),!a&&32&e&&(a=!0,n.end=t[5],ft((()=>a=!1))),i.$set(n),(!d||64&e)&&m!==(m=Ws(t[12](t[6]))+"")&&I(u,m),(!d||32&e)&&g!==(g=Ws(t[12](t[5]))+"")&&I(p,g)},i(t){d||(_t(i.$$.fragment,t),d=!0)},o(t){kt(i.$$.fragment,t),d=!1},d(t){t&&N(e),Dt(i)}}}function Dd(e){let n,r;return n=new Fa({props:{row:1}}),{c(){At(n.$$.fragment)},m(t,e){zt(n,t,e),r=!0},p:t,i(t){r||(_t(n.$$.fragment,t),r=!0)},o(t){kt(n.$$.fragment,t),r=!1},d(t){Dt(n,t)}}}function jd(t){let e,n;return e=new Sd({props:{nodes:t[9],links:t[11],flatLinks:t[10],spanCol:12,url:Rd,caption:t[3][0].value,customClass:"chart-large"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};512&n&&(r.nodes=t[9]),2048&n&&(r.links=t[11]),1024&n&&(r.flatLinks=t[10]),8&n&&(r.caption=t[3][0].value),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){Dt(e,t)}}}function Ed(t){let e,n,r,i=t[24].value+"";return{c(){e=T("p"),n=z(i),r=D()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){2&e&&i!==(i=t[24].value+"")&&I(n,i)},d(t){t&&N(e)}}}function Ld(t){let e,n,r,i=t[24].value+"";return{c(){e=T("p"),n=z(i),r=D()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){4&e&&i!==(i=t[24].value+"")&&I(n,i)},d(t){t&&N(e)}}}function Pd(t){let e,n,r,a,s,l,c,u,f,h,p,d,m,v,y,b,x;function w(e){t[18](e)}let $={id:"audience",title:va.controls["node-size"].title,labels:["Audience","Consumption"],info:va.controls["node-size"].description};void 0!==t[7]&&($.checked=t[7]),a=new Ua({props:$}),ot.push((()=>Tt(a,"checked",w)));let k=t[8]&&t[4]&&zd(t);const M=[jd,Dd],A=[];function z(t,e){return t[8]&&t[4]?0:1}u=z(t),f=A[u]=M[u](t);let j=t[1],L=[];for(let e=0;e<j.length;e+=1)L[e]=Ed(Ad(t,j,e));let P=t[2],I=[];for(let e=0;e<P.length;e+=1)I[e]=Ld(Td(t,P,e));return{c(){e=T("div"),n=T("div"),r=T("div"),At(a.$$.fragment),l=D(),k&&k.c(),c=D(),f.c(),h=D(),p=T("div");for(let t=0;t<L.length;t+=1)L[t].c();d=D(),m=T("div");for(let t=0;t<I.length;t+=1)I[t].c();R(r,"class","controls svelte-1ubek5n"),R(n,"class","chart-wrapper svelte-1ubek5n"),R(p,"class","copy svelte-1ubek5n"),R(m,"class","references svelte-1ubek5n"),R(e,"class","section section-3 svelte-1ubek5n")},m(i,o){C(i,e,o),_(e,n),_(n,r),zt(a,r,null),_(r,l),k&&k.m(r,null),_(n,c),A[u].m(n,null),_(e,h),_(e,p);for(let t=0;t<L.length;t+=1)L[t].m(p,null);_(e,d),_(e,m);for(let t=0;t<I.length;t+=1)I[t].m(m,null);y=!0,b||(x=[g(v=al.call(null,e,{once:t[0]})),E(e,"enter",t[21])],b=!0)},p(t,[e]){const i={};!s&&128&e&&(s=!0,i.checked=t[7],ft((()=>s=!1))),a.$set(i),t[8]&&t[4]?k?(k.p(t,e),272&e&&_t(k,1)):(k=zd(t),k.c(),_t(k,1),k.m(r,null)):k&&(wt(),kt(k,1,1,(()=>{k=null})),$t());let l=u;if(u=z(t),u===l?A[u].p(t,e):(wt(),kt(A[l],1,1,(()=>{A[l]=null})),$t(),f=A[u],f?f.p(t,e):(f=A[u]=M[u](t),f.c()),_t(f,1),f.m(n,null)),2&e){let n;for(j=t[1],n=0;n<j.length;n+=1){const r=Ad(t,j,n);L[n]?L[n].p(r,e):(L[n]=Ed(r),L[n].c(),L[n].m(p,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=j.length}if(4&e){let n;for(P=t[2],n=0;n<P.length;n+=1){const r=Td(t,P,n);I[n]?I[n].p(r,e):(I[n]=Ld(r),I[n].c(),I[n].m(m,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=P.length}v&&o(v.update)&&1&e&&v.update.call(null,{once:t[0]})},i(t){y||(_t(a.$$.fragment,t),_t(k),_t(f),y=!0)},o(t){kt(a.$$.fragment,t),kt(k),kt(f),y=!1},d(t){t&&N(e),Dt(a),k&&k.d(),A[u].d(),S(L,t),S(I,t),b=!1,i(x)}}}let Rd="assets/data/EchoCh-nodes.csv";function Id(t,e,n){let r,i,o,a,s,l,c,u,f,h,p,d,m,g=!1,{once:v}=e,{copy:y}=e,{refs:b}=e,{captions:x}=e;const w=Gn(),$=t=>{const e=new Date(w(t));return e.setDate(1),e.setHours(0,0,0),e.setMilliseconds(0),+e};et((async()=>{const t=await ma(Rd,ua);u=t.map((t=>Object.assign(Object.assign({},t),{node:t.archetype,date:new Date(t.year,t.month,1)}))),n(13,f=se(u,(t=>+t.date),(t=>t.variable)));const[e,i]=ee(Array.from(f).map((t=>t[0])));w.range([e,i]);const o=await ma("assets/data/EchoCh-links.csv",ua);n(10,p=o.map((t=>Object.assign(Object.assign({},t),{start_date:new Date(t["start year"],t["start month"],1),end_date:new Date(t["end year"],t["end month"],1)}))).reduce(((t,e)=>{const n=Object.entries(e),r=n.filter((t=>!["start year","end year","start month","end month","from","start_date","end_date"].includes(t[0])&&null!==t[1])),i=n.filter((t=>"from"===t[0]))[0][1];return r.forEach((n=>{t.push({from:i,to:n[0],value:n[1],start_date:e.start_date,end_date:e.end_date})})),t}),[])),n(14,d=se(p,(t=>+t.start_date),(t=>+t.end_date))),n(4,r=!0),n(16,l=$(0)),n(15,c=$(1))}));return t.$$set=t=>{"once"in t&&n(0,v=t.once),"copy"in t&&n(1,y=t.copy),"refs"in t&&n(2,b=t.refs),"captions"in t&&n(3,x=t.captions)},t.$$.update=()=>{128&t.$$.dirty&&n(17,o=i?"sizes":"mins_p_person"),64&t.$$.dirty&&n(16,l=$(a)),32&t.$$.dirty&&n(15,c=$(s)),253968&t.$$.dirty&&r&&(n(9,h=f.get(c).get(o)),n(11,m=d.get(l).get(c)))},n(4,r=!1),n(7,i=!0),n(6,a=0),n(5,s=1),[v,y,b,x,r,s,a,i,g,h,p,m,w,f,d,c,l,o,function(t){i=t,n(7,i)},function(t){a=t,n(6,a)},function(t){s=t,n(5,s)},()=>n(8,g=!0)]}class Od extends Lt{constructor(t){super(),Et(this,t,Id,Pd,a,{once:0,copy:1,refs:2,captions:3})}}function Fd(t){let e,n,r,i,o,a,s,l,c,u,f,h;return e=new It({}),r=new ol({props:{title:t[0].title,authors:t[1],standfirst:t[0].standfirst,captions:t[0]["main-section"].captions}}),o=new nh({props:{once:!0,copy:t[0]["section-one"].copy,refs:t[0]["section-one"].references,captions:t[0]["section-one"].captions}}),s=new _h({props:{once:!0,copy:t[0]["section-two"].copy,refs:t[0]["section-two"].references,captions:t[0]["section-two"].captions}}),c=new Od({props:{once:!0,copy:t[0]["section-three"].copy,refs:t[0]["section-three"].references,captions:t[0]["section-three"].captions}}),f=new Ft({}),{c(){At(e.$$.fragment),n=D(),At(r.$$.fragment),i=D(),At(o.$$.fragment),a=D(),At(s.$$.fragment),l=D(),At(c.$$.fragment),u=D(),At(f.$$.fragment)},m(t,p){zt(e,t,p),C(t,n,p),zt(r,t,p),C(t,i,p),zt(o,t,p),C(t,a,p),zt(s,t,p),C(t,l,p),zt(c,t,p),C(t,u,p),zt(f,t,p),h=!0},p(t,[e]){const n={};1&e&&(n.title=t[0].title),2&e&&(n.authors=t[1]),1&e&&(n.standfirst=t[0].standfirst),1&e&&(n.captions=t[0]["main-section"].captions),r.$set(n);const i={};1&e&&(i.copy=t[0]["section-one"].copy),1&e&&(i.refs=t[0]["section-one"].references),1&e&&(i.captions=t[0]["section-one"].captions),o.$set(i);const a={};1&e&&(a.copy=t[0]["section-two"].copy),1&e&&(a.refs=t[0]["section-two"].references),1&e&&(a.captions=t[0]["section-two"].captions),s.$set(a);const l={};1&e&&(l.copy=t[0]["section-three"].copy),1&e&&(l.refs=t[0]["section-three"].references),1&e&&(l.captions=t[0]["section-three"].captions),c.$set(l)},i(t){h||(_t(e.$$.fragment,t),_t(r.$$.fragment,t),_t(o.$$.fragment,t),_t(s.$$.fragment,t),_t(c.$$.fragment,t),_t(f.$$.fragment,t),h=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(o.$$.fragment,t),kt(s.$$.fragment,t),kt(c.$$.fragment,t),kt(f.$$.fragment,t),h=!1},d(t){Dt(e,t),t&&N(n),Dt(r,t),t&&N(i),Dt(o,t),t&&N(a),Dt(s,t),t&&N(l),Dt(c,t),t&&N(u),Dt(f,t)}}}function qd(t,e,n){let{data:r}=e,{authors:i}=e;return t.$$set=t=>{"data"in t&&n(0,r=t.data),"authors"in t&&n(1,i=t.authors)},[r,i]}return new class extends Lt{constructor(t){super(),Et(this,t,qd,Fd,a,{data:0,authors:1})}}({target:document.body,props:{data:va,authors:[{name:"Jenny Allen",detail:["MIT Sloan School of Management, 100 Main St., Cambridge, MA 02142"]},{name:"Homa Hosseinmardi",detail:["Department of Computer and Information Science, University of Pennsylvania, Philadelphia, PA 19104","homahm@seas.upenn.edu"]},{name:"Baird Howland",detail:["The Annenberg School for Communication, University of Pennsylvania, Philadelphia, PA 19104"]},{name:"Markus Mobius",detail:["Microsoft Research New England, Cambridge, MA 02142"]},{name:"Dan Muise",detail:["Department of Communication, Stanford University, Stanford, CA 94305","muise.dan@gmail.comm"]},{name:"David M. Rothschild",detail:["Microsoft Research New York, New York, NY 10012"]},{name:"Duncan J. Watts",detail:["Department of Computer and Information Science, University of Pennsylvania, Philadelphia, PA 19104","The Annenberg School of Communication, University of Pennsylvania, Philadelphia, PA 19104","Operations, Information, and Decisions Department, University of Pennsylvania, Philadelphia, PA 19104","djwatts@seas.upenn.edu"]}]}})}();
//# sourceMappingURL=bundle.js.map
