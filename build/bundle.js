var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t,e,n){t.$$.on_destroy.push(s(e,n))}function c(t,e,n,r){if(t){const i=u(t,e,n,r);return t[0](i)}}function u(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function f(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function h(t,e,n,r,i,o){if(i){const a=u(e,n,r,o);t.p(a,i)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function d(t){return null==t?"":t}function m(t,e,n){return t.set(n),e}function g(e){return e&&o(e.destroy)?e.destroy:t}const v="undefined"!=typeof window;let y=v?()=>window.performance.now():()=>Date.now(),b=v?t=>requestAnimationFrame(t):t;const x=new Set;function w(t){x.forEach((e=>{e.c(t)||(x.delete(e),e.f())})),0!==x.size&&b(w)}function $(t){let e;return 0===x.size&&b(w),{promise:new Promise((n=>{x.add(e={c:t,f:n})})),abort(){x.delete(e)}}}function _(t,e){t.appendChild(e)}function k(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function M(t){const e=N("style");return function(t,e){_(t.head||t,e)}(k(t),e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode.removeChild(t)}function S(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function N(t){return document.createElement(t)}function A(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function z(t){return document.createTextNode(t)}function j(){return z(" ")}function D(){return z("")}function E(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function P(t){return function(e){return e.preventDefault(),t.call(this,e)}}function L(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function R(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function I(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function q(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function F(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function Y(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let O;function H(){if(void 0===O){O=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){O=!0}}return O}function U(t,e,n){t.classList[n?"add":"remove"](e)}function V(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}const B=new Map;let W,K=0;function X(t,e,n,r,i,o,a,s=0){const l=16.666/r;let c="{\n";for(let t=0;t<=1;t+=l){const r=e+(n-e)*o(t);c+=100*t+`%{${a(r,1-r)}}\n`}const u=c+`100% {${a(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,h=k(t),{stylesheet:p,rules:d}=B.get(h)||function(t,e){const n={stylesheet:M(e),rules:{}};return B.set(t,n),n}(h,t);d[f]||(d[f]=!0,p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${i}ms 1 both`,K+=1,f}function Z(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),K-=i,K||b((()=>{K||(B.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),B.clear())})))}function G(n,r,i,o){if(!r)return t;const a=n.getBoundingClientRect();if(r.left===a.left&&r.right===a.right&&r.top===a.top&&r.bottom===a.bottom)return t;const{delay:s=0,duration:l=300,easing:c=e,start:u=y()+s,end:f=u+l,tick:h=t,css:p}=i(n,{from:r,to:a},o);let d,m=!0,g=!1;function v(){p&&Z(n,d),m=!1}return $((t=>{if(!g&&t>=u&&(g=!0),g&&t>=f&&(h(1,0),v()),!m)return!1;if(g){const e=0+1*c((t-u)/l);h(e,1-e)}return!0})),p&&(d=X(n,0,1,l,s,c,p)),s||(g=!0),h(0,1),v}function Q(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,function(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),i="none"===r.transform?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}(t,i)}}function J(t){W=t}function tt(){if(!W)throw new Error("Function called outside component initialization");return W}function et(t){tt().$$.on_mount.push(t)}function nt(){const t=tt();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=V(e,n,{cancelable:r});return i.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function rt(t){return tt().$$.context.get(t)}const it=[],ot=[],at=[],st=[],lt=Promise.resolve();let ct=!1;function ut(t){at.push(t)}function ft(t){st.push(t)}const ht=new Set;let pt,dt=0;function mt(){const t=W;do{for(;dt<it.length;){const t=it[dt];dt++,J(t),gt(t.$$)}for(J(null),it.length=0,dt=0;ot.length;)ot.pop()();for(let t=0;t<at.length;t+=1){const e=at[t];ht.has(e)||(ht.add(e),e())}at.length=0}while(it.length);for(;st.length;)st.pop()();ct=!1,ht.clear(),J(t)}function gt(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ut)}}function vt(){return pt||(pt=Promise.resolve(),pt.then((()=>{pt=null}))),pt}function yt(t,e,n){t.dispatchEvent(V(`${e?"intro":"outro"}${n}`))}const bt=new Set;let xt;function wt(){xt={r:0,c:[],p:xt}}function $t(){xt.r||i(xt.c),xt=xt.p}function _t(t,e){t&&t.i&&(bt.delete(t),t.i(e))}function kt(t,e,n,r){if(t&&t.o){if(bt.has(t))return;bt.add(t),xt.c.push((()=>{bt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const Mt={duration:0};function Ct(n,r,i){let a,s,l=r(n,i),c=!1,u=0;function f(){a&&Z(n,a)}function h(){const{delay:r=0,duration:i=300,easing:o=e,tick:h=t,css:p}=l||Mt;p&&(a=X(n,0,1,i,r,o,p,u++)),h(0,1);const d=y()+r,m=d+i;s&&s.abort(),c=!0,ut((()=>yt(n,!0,"start"))),s=$((t=>{if(c){if(t>=m)return h(1,0),yt(n,!0,"end"),f(),c=!1;if(t>=d){const e=o((t-d)/i);h(e,1-e)}}return c}))}let p=!1;return{start(){p||(p=!0,Z(n),o(l)?(l=l(),vt().then(h)):h())},invalidate(){p=!1},end(){c&&(f(),c=!1)}}}function Tt(t,e){t.f(),function(t,e){t.d(1),e.delete(t.key)}(t,e)}function St(t,e,n,r,i,o,a,s,l,c,u,f){let h=t.length,p=o.length,d=h;const m={};for(;d--;)m[t[d].key]=d;const g=[],v=new Map,y=new Map;for(d=p;d--;){const t=f(i,o,d),s=n(t);let l=a.get(s);l?r&&l.p(t,e):(l=c(s,t),l.c()),v.set(s,g[d]=l),s in m&&y.set(s,Math.abs(d-m[s]))}const b=new Set,x=new Set;function w(t){_t(t,1),t.m(s,u),a.set(t.key,t),u=t.first,p--}for(;h&&p;){const e=g[p-1],n=t[h-1],r=e.key,i=n.key;e===n?(u=e.first,h--,p--):v.has(i)?!a.has(r)||b.has(r)?w(e):x.has(i)?h--:y.get(r)>y.get(i)?(x.add(r),w(e)):(b.add(i),h--):(l(n,a),h--)}for(;h--;){const e=t[h];v.has(e.key)||l(e,a)}for(;p;)w(g[p-1]);return g}function Nt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function At(t){t&&t.c()}function zt(t,e,r,a){const{fragment:s,on_mount:l,on_destroy:c,after_update:u}=t.$$;s&&s.m(e,r),a||ut((()=>{const e=l.map(n).filter(o);c?c.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(ut)}function jt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Dt(t,e){-1===t.$$.dirty[0]&&(it.push(t),ct||(ct=!0,lt.then(mt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Et(e,n,o,a,s,l,c,u=[-1]){const f=W;J(e);const h=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||f.$$.root};c&&c(h.root);let p=!1;if(h.ctx=o?o(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),p&&Dt(e,t)),n})):[],h.update(),p=!0,i(h.before_update),h.fragment=!!a&&a(h.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);h.fragment&&h.fragment.l(t),t.forEach(T)}else h.fragment&&h.fragment.c();n.intro&&_t(e.$$.fragment),zt(e,n.target,n.anchor,n.customElement),mt()}J(f)}class Pt{$destroy(){jt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Lt(e){let n,r,i,o,a,s,l,c,u,f,h,p,d;return{c(){n=N("header"),r=N("div"),i=N("div"),i.innerHTML='<a class="logo_anchor svelte-14bps0i" href="https://css.seas.upenn.edu/"><img class="logo_img svelte-14bps0i" src="https://css.seas.upenn.edu/wp-content/uploads/2021/09/WEBSITE-LOGO.png" alt="Computational Social Science Lab" id="logo"/></a>',o=j(),a=N("div"),a.innerHTML='<nav id="top-menu-nav"><ul id="top-menu" class="nav svelte-14bps0i"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-2731 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/about/">About</a> \n                        <ul class="sub-menu svelte-14bps0i"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1554 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/about/lab/">The Lab</a></li> \n                            <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2232 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/about/community/">CSS Community</a></li></ul></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1747 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/people/">People</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-37 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/research/">Research</a> \n                        <ul class="sub-menu svelte-14bps0i"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-735 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/project/penn-map/">PennMAP</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-292 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/project/virtual-lab/">Group Dynamics</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-291 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/project/covid-philadelphia/">COVID-Philadelphia</a></li> \n                            <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-377 svelte-14bps0i"><a class="sub-menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/project/common-sense/">Common Sense</a></li></ul></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-344 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/partnerships/">Partners</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-58 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/publications/">Publications</a></li> \n                    <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-105 svelte-14bps0i"><a class="menu-item-anchor svelte-14bps0i" href="https://css.seas.upenn.edu/blog-news-events/">News</a></li></ul></nav>',s=j(),l=N("div"),c=N("nav"),u=N("div"),u.innerHTML='<div class="line svelte-14bps0i"></div> \n                    <div class="line svelte-14bps0i"></div> \n                    <div class="line svelte-14bps0i"></div>',f=j(),h=N("ul"),h.innerHTML='<li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/about/">About</a> \n                        <ul class="sub-menu-mobile"><li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/about/lab/">The Lab</a></li> \n                            <li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/about/community/">CSS Community</a></li></ul></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/people/">People</a></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/research/">Research</a> \n                        <ul class="sub-menu-mobile"><li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/project/penn-map/">PennMAP</a></li> \n                            <li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/project/virtual-lab/">Group Dynamics</a></li> \n                            <li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/project/covid-philadelphia/">COVID-Philadelphia</a></li> \n                            <li class="sub-menu-list-mobile svelte-14bps0i"><a class="sub-item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/project/common-sense/">Common Sense</a></li></ul></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/partnerships/">Partners</a></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/publications/">Publications</a></li> \n                    <li class="svelte-14bps0i"><a class="item-mobile svelte-14bps0i" href="https://css.seas.upenn.edu/blog-news-events/">News</a></li>',R(i,"class","logo_container svelte-14bps0i"),R(a,"id","et-top-navigation"),R(a,"class","svelte-14bps0i"),R(u,"class","icon svelte-14bps0i"),R(h,"id","nav-mobile"),R(h,"class","nav-mobile nav-mobile-hidden svelte-14bps0i"),R(c,"id","top-menu-nav-mobile"),R(c,"class","svelte-14bps0i"),R(l,"id","et-top-navigation-mobile"),R(l,"class","svelte-14bps0i"),R(r,"class","container clearfix et_menu_container svelte-14bps0i"),R(n,"id","main-header"),R(n,"data-height-onload","84"),R(n,"data-height-loaded","true"),R(n,"data-fixed-height-onload","84"),q(n,"top","0px"),R(n,"class","svelte-14bps0i")},m(t,m){C(t,n,m),_(n,r),_(r,i),_(r,o),_(r,a),_(r,s),_(r,l),_(l,c),_(c,u),_(c,f),_(c,h),p||(d=E(u,"click",e[0]),p=!0)},p:t,i:t,o:t,d(t){t&&T(n),p=!1,d()}}}function Rt(t){let e=null;return et((()=>{e=document.getElementById("nav-mobile")})),[function(t){const{classList:n}=e;n.contains("nav-mobile-active")?(n.remove("nav-mobile-active"),n.add("nav-mobile-hidden")):(n.add("nav-mobile-active"),n.remove("nav-mobile-hidden"))}]}class It extends Pt{constructor(t){super(),Et(this,t,Rt,Lt,a,{})}}function qt(e){let n;return{c(){n=N("footer"),n.innerHTML='<div class="et_builder_inner_content et_pb_gutters3"><div class="et_pb_section et_pb_section_0_tb_footer et_pb_with_background et_section_regular et_pb_section--with-menu svelte-16zif5j"><div class="et_pb_row et_pb_row_0_tb_footer et_pb_row--with-menu et_pb_row_4col svelte-16zif5j" style="z-index: 3;"><div class="et_pb_column et_pb_column_1_4 et_pb_column_0_tb_footer global-footer-column-1 et_pb_css_mix_blend_mode_passthrough svelte-16zif5j"><div class="et_pb_module et_pb_image et_pb_image_0_tb_footer et_pb_image_sticky svelte-16zif5j"><a href="https://www.seas.upenn.edu/" target="_blank" class="svelte-16zif5j"><span class="et_pb_image_wrap  svelte-16zif5j"><img loading="lazy" width="480" height="123" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-1-seas-300x77.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3438 svelte-16zif5j"/></span></a></div> \n                    <div class="et_pb_module et_pb_image et_pb_image_1_tb_footer et_pb_image_sticky svelte-16zif5j"><a href="https://www.asc.upenn.edu/" target="_blank" class="svelte-16zif5j"><span class="et_pb_image_wrap  svelte-16zif5j"><img loading="lazy" width="480" height="123" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-2-asc-300x77.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3440 svelte-16zif5j"/></span></a></div> \n                    <div class="et_pb_module et_pb_image et_pb_image_2_tb_footer et_pb_image_sticky svelte-16zif5j"><a href="https://www.wharton.upenn.edu/" target="_blank" class="svelte-16zif5j"><span class="et_pb_image_wrap  svelte-16zif5j"><img loading="lazy" width="480" height="111" src="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton.png" alt="Penn Engineering" title="Penn Engineering" srcset="https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton.png 480w, https://css.seas.upenn.edu/wp-content/uploads/2022/04/newfooter-3-wharton-300x69.png 300w" sizes="(max-width: 480px) 100vw, 480px" class="wp-image-3439 svelte-16zif5j"/></span></a></div></div> \n\n            <div class="et_pb_column et_pb_column_1_4 et_pb_column_1_tb_footer global-footer-column-2 et_pb_css_mix_blend_mode_passthrough et_pb_column--with-menu svelte-16zif5j"><div class="et_pb_module et_pb_text et_pb_text_0_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><h2 class="svelte-16zif5j">Navigate</h2></div></div> \n                <div class="et_pb_module et_pb_divider et_pb_divider_0_tb_footer et_pb_divider_position_ et_pb_space svelte-16zif5j"><div class="et_pb_divider_internal svelte-16zif5j"></div></div> \n                <div class="et_pb_module et_pb_menu et_pb_menu_0_tb_footer footer-vertical-menu et_pb_bg_layout_light et_pb_text_align_left et_dropdown_animation_fade et_pb_menu--without-logo et_pb_menu--style-left_aligned svelte-16zif5j"><div class="et_pb_menu_inner_container clearfix"><div class="et_pb_menu__wrap"><div class="et_pb_menu__menu svelte-16zif5j"><nav class="et-menu-nav svelte-16zif5j"><ul id="menu-footer-menu-new" class="et-menu nav svelte-16zif5j"><li id="menu-item-3425" class="et_pb_menu_page_id-2233 menu-item menu-item-type-post_type menu-item-object-page menu-item-3425 svelte-16zif5j"><a href="https://css.seas.upenn.edu/about/" class="svelte-16zif5j">About</a></li> \n                                        <li id="menu-item-3426" class="et_pb_menu_page_id-1732 menu-item menu-item-type-post_type menu-item-object-page menu-item-3426 svelte-16zif5j"><a href="https://css.seas.upenn.edu/people/" class="svelte-16zif5j">People</a></li> \n                                        <li id="menu-item-3430" class="et_pb_menu_page_id-22 menu-item menu-item-type-post_type menu-item-object-page menu-item-3430 svelte-16zif5j"><a href="https://css.seas.upenn.edu/research/" class="svelte-16zif5j">Research</a></li> \n                                        <li id="menu-item-3428" class="et_pb_menu_page_id-65 menu-item menu-item-type-post_type menu-item-object-page menu-item-3428 svelte-16zif5j"><a href="https://css.seas.upenn.edu/partnerships/" class="svelte-16zif5j">Partners</a></li> \n                                        <li id="menu-item-3429" class="et_pb_menu_page_id-52 menu-item menu-item-type-post_type menu-item-object-page menu-item-3429 svelte-16zif5j"><a href="https://css.seas.upenn.edu/publications/" class="svelte-16zif5j">Publications</a></li> \n                                        <li id="menu-item-3427" class="et_pb_menu_page_id-92 menu-item menu-item-type-post_type menu-item-object-page menu-item-3427 svelte-16zif5j"><a href="https://css.seas.upenn.edu/blog-news-events/" class="svelte-16zif5j">News</a></li></ul></nav></div></div></div></div></div> \n    \n    <div class="et_pb_column et_pb_column_1_4 et_pb_column_2_tb_footer global-footer-column-3 et_pb_css_mix_blend_mode_passthrough svelte-16zif5j"><div class="et_pb_module et_pb_text et_pb_text_1_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><h2 class="svelte-16zif5j">Contact</h2></div></div> \n        <div class="et_pb_module et_pb_divider et_pb_divider_1_tb_footer et_pb_divider_position_ et_pb_space svelte-16zif5j"><div class="et_pb_divider_internal svelte-16zif5j"></div></div> \n        <div class="et_pb_module et_pb_text et_pb_text_2_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><p class="svelte-16zif5j">3401 Walnut Street<br/>Suite 417B<br/>Philadelphia PA, 19104</p> \n                <p class="svelte-16zif5j">CSSLab@seas.upenn.edu</p> \n                <p class="svelte-16zif5j">(215) 573-7098</p></div></div></div></div> \n    <div class="et_pb_row et_pb_row_1_tb_footer et_pb_equal_columns svelte-16zif5j"><div class="et_pb_column et_pb_column_4_4 et_pb_column_4_tb_footer et_pb_css_mix_blend_mode_passthrough et-last-child"><div class="et_pb_module et_pb_text et_pb_text_4_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><p style="text-align: center;" class="svelte-16zif5j"><a href="https://www.upenn.edu/" class="svelte-16zif5j">Penn Homepage</a> \n                        <a href="https://www.upenn.edu/about/disclaimer" class="svelte-16zif5j">Disclaimer</a> \n                        <a href="https://www.publicsafety.upenn.edu/contact/" class="svelte-16zif5j">Emergency Services</a> \n                        <a href="https://www.upenn.edu/about/privacy-policy" class="svelte-16zif5j">Privacy Policy</a> \n                        <a href="https://accessibility.web-resources.upenn.edu/get-help" class="svelte-16zif5j">Report Accessibility Issues and Get Help</a> \n                        <a href="https://www.upenn.edu/about/report-copyright-infringement" class="svelte-16zif5j">Report Copyright Infringement</a></p></div></div> \n            <div class="et_pb_module et_pb_text et_pb_text_5_tb_footer et_pb_text_align_left et_pb_bg_layout_light svelte-16zif5j"><div class="et_pb_text_inner svelte-16zif5j"><p style="text-align: center;" class="svelte-16zif5j"><em><strong></strong></em></p> \n                    <p style="text-align: center;" class="svelte-16zif5j"><em><a href="https://css.seas.upenn.edu/research-assistant-positions/" class="svelte-16zif5j"><strong>Interested in working at the CSSLab?</strong> Click here to view opportunities for Penn students</a></em></p></div></div></div></div></div></div>',R(n,"class","et-l et-l--footer svelte-16zif5j")},m(t,e){C(t,n,e)},p:t,i:t,o:t,d(t){t&&T(n)}}}class Ft extends Pt{constructor(t){super(),Et(this,t,null,qt,a,{})}}var Yt={},Ot={};function Ht(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Ut(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Vt(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Bt(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+Vt(-t,6):t>9999?"+"+Vt(t,6):Vt(t,4)}(t.getUTCFullYear())+"-"+Vt(t.getUTCMonth()+1,2)+"-"+Vt(t.getUTCDate(),2)+(i?"T"+Vt(e,2)+":"+Vt(n,2)+":"+Vt(r,2)+"."+Vt(i,3)+"Z":r?"T"+Vt(e,2)+":"+Vt(n,2)+":"+Vt(r,2)+"Z":n||e?"T"+Vt(e,2)+":"+Vt(n,2)+"Z":"")}var Wt=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,l=o<=0,c=!1;function u(){if(l)return Ot;if(c)return c=!1,Yt;var e,r,i=a;if(34===t.charCodeAt(i)){for(;a++<o&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=o?l=!0:10===(r=t.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(a)&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=t.charCodeAt(e=a++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(i,e)}return l=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=u())!==Ot;){for(var f=[];r!==Yt&&r!==Ot;)f.push(r),r=u();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?Bt(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Ht(t);return function(r,i){return e(n(r),i,t)}}(t,e):Ht(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Ut(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Ut(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}(","),Kt=Wt.parse;function Xt(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;Zt&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const Zt=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function Gt(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Qt(t,e){return fetch(t,e).then(Gt)}var Jt,te=(Jt=Kt,function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),Qt(t,e).then((function(t){return Jt(t,n)}))});function ee(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ne(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function re(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=ee,n=(e,n)=>ee(t(e),n),r=(e,n)=>t(e)-n):(e=t===ee||t===ne?t:ie,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function ie(){return 0}const oe=re(ee).right;re((function(t){return null===t?NaN:+t})).center;var ae=oe;function se(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class le{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}class ce extends Map{constructor(t,e=fe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(ue(this,t))}has(t){return super.has(ue(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);t.has(r)&&(n=t.get(r),t.delete(r));return n}(this,t))}}function ue({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function fe(t){return null!==t&&"object"==typeof t?t.valueOf():t}function he(t){return t}function pe(t,...e){return me(t,he,he,e)}function de(t,...e){return me(t,Array.from,he,e)}function me(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new ce,s=r[o++];let l=-1;for(const t of i){const e=s(t,++l,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}var ge=Math.sqrt(50),ve=Math.sqrt(10),ye=Math.sqrt(2);function be(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ge?10:o>=ve?5:o>=ye?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ge?10:o>=ve?5:o>=ye?2:1)}function xe(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=ge?i*=10:o>=ve?i*=5:o>=ye&&(i*=2),e<t?-i:i}function we(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function $e(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function _e(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const ke=Symbol("implicit");function Me(){var t=new ce,e=[],n=[],r=ke;function i(i){let o=t.get(i);if(void 0===o){if(r!==ke)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new ce;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Me(e,n).unknown(r)},$e.apply(i,arguments),i}function Ce(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Te(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Se(){}var Ne=.7,Ae=1/Ne,ze="\\s*([+-]?\\d+)\\s*",je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",De="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ee=/^#([0-9a-f]{3,8})$/,Pe=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),Le=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),Re=new RegExp(`^rgba\\(${ze},${ze},${ze},${je}\\)$`),Ie=new RegExp(`^rgba\\(${De},${De},${De},${je}\\)$`),qe=new RegExp(`^hsl\\(${je},${De},${De}\\)$`),Fe=new RegExp(`^hsla\\(${je},${De},${De},${je}\\)$`),Ye={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Oe(){return this.rgb().formatHex()}function He(){return this.rgb().formatRgb()}function Ue(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ee.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Ve(e):3===n?new Xe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Be(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Be(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Pe.exec(t))?new Xe(e[1],e[2],e[3],1):(e=Le.exec(t))?new Xe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Re.exec(t))?Be(e[1],e[2],e[3],e[4]):(e=Ie.exec(t))?Be(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=qe.exec(t))?en(e[1],e[2]/100,e[3]/100,1):(e=Fe.exec(t))?en(e[1],e[2]/100,e[3]/100,e[4]):Ye.hasOwnProperty(t)?Ve(Ye[t]):"transparent"===t?new Xe(NaN,NaN,NaN,0):null}function Ve(t){return new Xe(t>>16&255,t>>8&255,255&t,1)}function Be(t,e,n,r){return r<=0&&(t=e=n=NaN),new Xe(t,e,n,r)}function We(t){return t instanceof Se||(t=Ue(t)),t?new Xe((t=t.rgb()).r,t.g,t.b,t.opacity):new Xe}function Ke(t,e,n,r){return 1===arguments.length?We(t):new Xe(t,e,n,null==r?1:r)}function Xe(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ze(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`}function Ge(){const t=Qe(this.opacity);return`${1===t?"rgb(":"rgba("}${Je(this.r)}, ${Je(this.g)}, ${Je(this.b)}${1===t?")":`, ${t})`}`}function Qe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Je(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tn(t){return((t=Je(t))<16?"0":"")+t.toString(16)}function en(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new rn(t,e,n,r)}function nn(t){if(t instanceof rn)return new rn(t.h,t.s,t.l,t.opacity);if(t instanceof Se||(t=Ue(t)),!t)return new rn;if(t instanceof rn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new rn(a,s,l,t.opacity)}function rn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function on(t){return(t=(t||0)%360)<0?t+360:t}function an(t){return Math.max(0,Math.min(1,t||0))}function sn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Ce(Se,Ue,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Oe,formatHex:Oe,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return nn(this).formatHsl()},formatRgb:He,toString:He}),Ce(Xe,Ke,Te(Se,{brighter(t){return t=null==t?Ae:Math.pow(Ae,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Ne:Math.pow(Ne,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xe(Je(this.r),Je(this.g),Je(this.b),Qe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ze,formatHex:Ze,formatHex8:function(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ge,toString:Ge})),Ce(rn,(function(t,e,n,r){return 1===arguments.length?nn(t):new rn(t,e,n,null==r?1:r)}),Te(Se,{brighter(t){return t=null==t?Ae:Math.pow(Ae,t),new rn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Ne:Math.pow(Ne,t),new rn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Xe(sn(t>=240?t-240:t+120,i,r),sn(t,i,r),sn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new rn(on(this.h),an(this.s),an(this.l),Qe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qe(this.opacity);return`${1===t?"hsl(":"hsla("}${on(this.h)}, ${100*an(this.s)}%, ${100*an(this.l)}%${1===t?")":`, ${t})`}`}}));var ln=t=>()=>t;function cn(t){return 1==(t=+t)?un:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ln(isNaN(e)?n:e)}}function un(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ln(isNaN(t)?e:t)}var fn=function t(e){var n=cn(e);function r(t,e){var r=n((t=Ke(t)).r,(e=Ke(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=un(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function hn(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function pn(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=xn(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function dn(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function mn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function gn(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=xn(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var vn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yn=new RegExp(vn.source,"g");function bn(t,e){var n,r,i,o=vn.lastIndex=yn.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=vn.exec(t))&&(r=yn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:mn(n,r)})),o=yn.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function xn(t,e){var n,r=typeof e;return null==e||"boolean"===r?ln(e):("number"===r?mn:"string"===r?(n=Ue(e))?(e=n,fn):bn:e instanceof Ue?fn:e instanceof Date?dn:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?hn:Array.isArray(e)?pn:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?gn:mn)(t,e)}function wn(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function $n(t,e){void 0===e&&(e=t,t=xn);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function _n(t){return+t}var kn=[0,1];function Mn(t){return t}function Cn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Tn(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Cn(i,r),o=n(a,o)):(r=Cn(r,i),o=n(o,a)),function(t){return o(r(t))}}function Sn(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Cn(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=ae(t,e,1,r)-1;return o[n](i[n](e))}}function Nn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function An(){var t,e,n,r,i,o,a=kn,s=kn,l=xn,c=Mn;function u(){var t=Math.min(a.length,s.length);return c!==Mn&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?Sn:Tn,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,l)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),mn)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,_n),u()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),l=wn,u()},f.clamp=function(t){return arguments.length?(c=!!t||Mn,u()):c!==Mn},f.interpolate=function(t){return arguments.length?(l=t,u()):l},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,u()}}function zn(){return An()(Mn,Mn)}function jn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Dn(t){return(t=jn(Math.abs(t)))?t[1]:NaN}var En,Pn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ln(t){if(!(e=Pn.exec(t)))throw new Error("invalid format: "+t);var e;return new Rn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Rn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function In(t,e){var n=jn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Ln.prototype=Rn.prototype,Rn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var qn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>In(100*t,e),r:In,s:function(t,e){var n=jn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(En=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+jn(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Fn(t){return t}var Yn,On,Hn,Un=Array.prototype.map,Vn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Bn(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Fn:(e=Un.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Fn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Un.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Ln(t)).fill,n=t.align,f=t.sign,h=t.symbol,p=t.zero,d=t.width,m=t.comma,g=t.precision,v=t.trim,y=t.type;"n"===y?(m=!0,y="g"):qn[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===h?o:/[%p]/.test(y)?l:"",w=qn[y],$=/[defgprs%]/.test(y);function _(t){var i,o,l,h=b,_=x;if("c"===y)_=w(t)+_,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),g),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==f&&(k=!1),h=(k?"("===f?f:c:"-"===f||"("===f?"":f)+h,_=("s"===y?Vn[8+En/3]:"")+_+(k&&"("===f?")":""),$)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){_=(46===l?a+t.slice(i+1):t.slice(i))+_,t=t.slice(0,i);break}}m&&!p&&(t=r(t,1/0));var M=h.length+t.length+_.length,C=M<d?new Array(d-M+1).join(e):"";switch(m&&p&&(t=r(C+t,C.length?d-_.length:1/0),C=""),n){case"<":t=h+t+_+C;break;case"=":t=h+C+t+_;break;case"^":t=C.slice(0,M=C.length>>1)+h+t+_+C.slice(M);break;default:t=C+h+t+_}return s(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),_.toString=function(){return t+""},_}return{format:f,formatPrefix:function(t,e){var n=f(((t=Ln(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Dn(e)/3))),i=Math.pow(10,-r),o=Vn[8+r/3];return function(t){return n(i*t)+o}}}}function Wn(t,e,n,r){var i,o=xe(t,e,n);switch((r=Ln(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Dn(e)/3)))-Dn(Math.abs(t)))}(o,a))||(r.precision=i),Hn(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Dn(e)-Dn(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Dn(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return On(r)}function Kn(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=be(t,e,n))||!isFinite(a))return[];if(a>0){let n=Math.round(t/a),r=Math.round(e/a);for(n*a<t&&++n,r*a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(t*a),r=Math.round(e*a);for(n/a<t&&++n,r/a>e&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Wn(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=be(l,c,n))===r)return o[a]=l,o[s]=c,e(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Xn(){var t=zn();return t.copy=function(){return Nn(t,Xn())},$e.apply(t,arguments),Kn(t)}function Zn(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Gn(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Qn(t){return t<0?-t*t:t*t}function Jn(t){var e=t(Mn,Mn),n=1;function r(){return 1===n?t(Mn,Mn):.5===n?t(Gn,Qn):t(Zn(n),Zn(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},Kn(e)}function tr(){var t=Jn(An());return t.copy=function(){return Nn(t,tr()).exponent(t.exponent())},$e.apply(t,arguments),t}function er(){return tr.apply(null,arguments).exponent(.5)}function nr(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[ae(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return nr().domain(e).range(n).unknown(t)},$e.apply(i,arguments)}Yn=Bn({thousands:",",grouping:[3],currency:["$",""]}),On=Yn.format,Hn=Yn.formatPrefix;var rr=new Date,ir=new Date;function or(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),e(n,o),t(n)}while(a<n&&n<r);return s},i.filter=function(n){return or((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return rr.setTime(+e),ir.setTime(+r),t(rr),t(ir),Math.floor(n(rr,ir))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ar=or((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));ar.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?or((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):ar:null};var sr=ar;ar.range;const lr=1e3,cr=6e4,ur=36e5,fr=864e5,hr=6048e5,pr=2592e6,dr=31536e6;var mr=or((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*lr)}),(function(t,e){return(e-t)/lr}),(function(t){return t.getUTCSeconds()})),gr=mr;mr.range;var vr=or((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*lr)}),(function(t,e){t.setTime(+t+e*cr)}),(function(t,e){return(e-t)/cr}),(function(t){return t.getMinutes()})),yr=vr;vr.range;var br=or((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*lr-t.getMinutes()*cr)}),(function(t,e){t.setTime(+t+e*ur)}),(function(t,e){return(e-t)/ur}),(function(t){return t.getHours()})),xr=br;br.range;var wr=or((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*cr)/fr),(t=>t.getDate()-1)),$r=wr;function _r(t){return or((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*cr)/hr}))}wr.range;var kr=_r(0),Mr=_r(1),Cr=_r(2),Tr=_r(3),Sr=_r(4),Nr=_r(5),Ar=_r(6);kr.range,Mr.range,Cr.range,Tr.range,Sr.range,Nr.range,Ar.range;var zr=or((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),jr=zr;zr.range;var Dr=or((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Dr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?or((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Er=Dr;Dr.range;var Pr=or((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/fr}),(function(t){return t.getUTCDate()-1})),Lr=Pr;function Rr(t){return or((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/hr}))}Pr.range;var Ir=Rr(0),qr=Rr(1),Fr=Rr(2),Yr=Rr(3),Or=Rr(4),Hr=Rr(5),Ur=Rr(6);Ir.range,qr.range,Fr.range,Yr.range,Or.range,Hr.range,Ur.range;var Vr=or((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Vr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?or((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Br=Vr;Vr.range;const[Wr,Kr]=function(t,e,n,r,i,o){const a=[[gr,1,lr],[gr,5,5e3],[gr,15,15e3],[gr,30,3e4],[o,1,cr],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,ur],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,fr],[r,2,1728e5],[n,1,hr],[e,1,pr],[e,3,7776e6],[t,1,dr]];function s(e,n,r){const i=Math.abs(n-e)/r,o=re((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(xe(e/dr,n/dr,r));if(0===o)return sr.every(Math.max(xe(e,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}(Er,jr,kr,$r,xr,yr);function Xr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Zr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Gr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Qr,Jr,ti={"-":"",_:" ",0:"0"},ei=/^\s*\d+/,ni=/^%/,ri=/[\\^$*+?|[\]().{}]/g;function ii(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function oi(t){return t.replace(ri,"\\$&")}function ai(t){return new RegExp("^(?:"+t.map(oi).join("|")+")","i")}function si(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function li(t,e,n){var r=ei.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ci(t,e,n){var r=ei.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ui(t,e,n){var r=ei.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function fi(t,e,n){var r=ei.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function hi(t,e,n){var r=ei.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function pi(t,e,n){var r=ei.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function di(t,e,n){var r=ei.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mi(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function gi(t,e,n){var r=ei.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function vi(t,e,n){var r=ei.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function yi(t,e,n){var r=ei.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function bi(t,e,n){var r=ei.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function xi(t,e,n){var r=ei.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function wi(t,e,n){var r=ei.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function $i(t,e,n){var r=ei.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function _i(t,e,n){var r=ei.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ki(t,e,n){var r=ei.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Mi(t,e,n){var r=ni.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ci(t,e,n){var r=ei.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ti(t,e,n){var r=ei.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Si(t,e){return ii(t.getDate(),e,2)}function Ni(t,e){return ii(t.getHours(),e,2)}function Ai(t,e){return ii(t.getHours()%12||12,e,2)}function zi(t,e){return ii(1+$r.count(Er(t),t),e,3)}function ji(t,e){return ii(t.getMilliseconds(),e,3)}function Di(t,e){return ji(t,e)+"000"}function Ei(t,e){return ii(t.getMonth()+1,e,2)}function Pi(t,e){return ii(t.getMinutes(),e,2)}function Li(t,e){return ii(t.getSeconds(),e,2)}function Ri(t){var e=t.getDay();return 0===e?7:e}function Ii(t,e){return ii(kr.count(Er(t)-1,t),e,2)}function qi(t){var e=t.getDay();return e>=4||0===e?Sr(t):Sr.ceil(t)}function Fi(t,e){return t=qi(t),ii(Sr.count(Er(t),t)+(4===Er(t).getDay()),e,2)}function Yi(t){return t.getDay()}function Oi(t,e){return ii(Mr.count(Er(t)-1,t),e,2)}function Hi(t,e){return ii(t.getFullYear()%100,e,2)}function Ui(t,e){return ii((t=qi(t)).getFullYear()%100,e,2)}function Vi(t,e){return ii(t.getFullYear()%1e4,e,4)}function Bi(t,e){var n=t.getDay();return ii((t=n>=4||0===n?Sr(t):Sr.ceil(t)).getFullYear()%1e4,e,4)}function Wi(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ii(e/60|0,"0",2)+ii(e%60,"0",2)}function Ki(t,e){return ii(t.getUTCDate(),e,2)}function Xi(t,e){return ii(t.getUTCHours(),e,2)}function Zi(t,e){return ii(t.getUTCHours()%12||12,e,2)}function Gi(t,e){return ii(1+Lr.count(Br(t),t),e,3)}function Qi(t,e){return ii(t.getUTCMilliseconds(),e,3)}function Ji(t,e){return Qi(t,e)+"000"}function to(t,e){return ii(t.getUTCMonth()+1,e,2)}function eo(t,e){return ii(t.getUTCMinutes(),e,2)}function no(t,e){return ii(t.getUTCSeconds(),e,2)}function ro(t){var e=t.getUTCDay();return 0===e?7:e}function io(t,e){return ii(Ir.count(Br(t)-1,t),e,2)}function oo(t){var e=t.getUTCDay();return e>=4||0===e?Or(t):Or.ceil(t)}function ao(t,e){return t=oo(t),ii(Or.count(Br(t),t)+(4===Br(t).getUTCDay()),e,2)}function so(t){return t.getUTCDay()}function lo(t,e){return ii(qr.count(Br(t)-1,t),e,2)}function co(t,e){return ii(t.getUTCFullYear()%100,e,2)}function uo(t,e){return ii((t=oo(t)).getUTCFullYear()%100,e,2)}function fo(t,e){return ii(t.getUTCFullYear()%1e4,e,4)}function ho(t,e){var n=t.getUTCDay();return ii((t=n>=4||0===n?Or(t):Or.ceil(t)).getUTCFullYear()%1e4,e,4)}function po(){return"+0000"}function mo(){return"%"}function go(t){return+t}function vo(t){return Math.floor(+t/1e3)}function yo(t){return new Date(t)}function bo(t){return t instanceof Date?+t:+new Date(+t)}function xo(t,e,n,r,i,o,a,s,l,c){var u=zn(),f=u.invert,h=u.domain,p=c(".%L"),d=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function w(t){return(l(t)<t?p:s(t)<t?d:a(t)<t?m:o(t)<t?g:r(t)<t?i(t)<t?v:y:n(t)<t?b:x)(t)}return u.invert=function(t){return new Date(f(t))},u.domain=function(t){return arguments.length?h(Array.from(t,bo)):h().map(yo)},u.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?w:c(e)},u.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h(function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}(n,t)):u},u.copy=function(){return Nn(u,xo(t,e,n,r,i,o,a,s,l,c))},u}function wo(){return $e.apply(xo(Wr,Kr,Er,jr,kr,$r,xr,yr,gr,Jr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $o(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function _o(){var t,e,n,r,i,o,a,s=0,l=.5,c=1,u=1,f=Mn,h=!1;function p(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(u*t<u*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function d(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=$n(t,[n,r,i]),p):[f(0),f(.5),f(1)]}}return p.domain=function(a){return arguments.length?([s,l,c]=a,t=o(s=+s),e=o(l=+l),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,p):[s,l,c]},p.clamp=function(t){return arguments.length?(h=!!t,p):h},p.interpolator=function(t){return arguments.length?(f=t,p):f},p.range=d(xn),p.rangeRound=d(wn),p.unknown=function(t){return arguments.length?(a=t,p):a},function(a){return o=a,t=a(s),e=a(l),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),u=e<t?-1:1,p}}function ko(){var t=Kn(_o()(Mn));return t.copy=function(){return $o(t,ko())},_e.apply(t,arguments)}function Mo(e){let n,r;return{c(){n=N("h1"),r=z(e[0]),R(n,"class","svelte-wev0vk")},m(t,e){C(t,n,e),_(n,r)},p(t,[e]){1&e&&I(r,t[0])},i:t,o:t,d(t){t&&T(n)}}}function Co(t,e,n){let{title:r}=e;return t.$$set=t=>{"title"in t&&n(0,r=t.title)},[r]}!function(t){Qr=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=ai(i),u=si(i),f=ai(o),h=si(o),p=ai(a),d=si(a),m=ai(s),g=si(s),v=ai(l),y=si(l),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Si,e:Si,f:Di,g:Ui,G:Bi,H:Ni,I:Ai,j:zi,L:ji,m:Ei,M:Pi,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:go,s:vo,S:Li,u:Ri,U:Ii,V:Fi,w:Yi,W:Oi,x:null,X:null,y:Hi,Y:Vi,Z:Wi,"%":mo},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ki,e:Ki,f:Ji,g:uo,G:ho,H:Xi,I:Zi,j:Gi,L:Qi,m:to,M:eo,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:go,s:vo,S:no,u:ro,U:io,V:ao,w:so,W:lo,x:null,X:null,y:co,Y:fo,Z:po,"%":mo},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return k(t,e,n,r)},d:yi,e:yi,f:ki,g:di,G:pi,H:xi,I:xi,j:bi,L:_i,m:vi,M:wi,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:gi,Q:Ci,s:Ti,S:$i,u:ci,U:ui,V:fi,w:li,W:hi,x:function(t,e,r){return k(t,n,e,r)},X:function(t,e,n){return k(t,r,e,n)},y:di,Y:pi,Z:mi,"%":Mi};function $(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=ti[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function _(t,e){return function(n){var r,i,o=Gr(1900,void 0,1);if(k(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Zr(Gr(o.y,0,1))).getUTCDay(),r=i>4||0===i?qr.ceil(r):qr(r),r=Lr.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Xr(Gr(o.y,0,1))).getDay(),r=i>4||0===i?Mr.ceil(r):Mr(r),r=$r.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Zr(Gr(o.y,0,1)).getUTCDay():Xr(Gr(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Zr(o)):Xr(o)}}function k(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in ti?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=$(n,b),b.X=$(r,b),b.c=$(e,b),x.x=$(n,x),x.X=$(r,x),x.c=$(e,x),{format:function(t){var e=$(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=_(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=$(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=_(t+="",!0);return e.toString=function(){return t},e}}}(t),Jr=Qr.format}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});class To extends Pt{constructor(t){super(),Et(this,t,Co,Mo,a,{title:0})}}function So(e){let n,r,i,o,a,s,l;return{c(){n=N("div"),r=N("a"),i=z("Read the original research\n    "),o=A("svg"),a=A("path"),s=A("polyline"),l=A("line"),R(a,"d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"),R(s,"points","15 3 21 3 21 9"),R(l,"x1","10"),R(l,"y1","14"),R(l,"x2","21"),R(l,"y2","3"),R(o,"xmlns","http://www.w3.org/2000/svg"),R(o,"viewBox","0 0 24 24"),R(o,"fill","none"),R(o,"stroke","currentColor"),R(o,"stroke-width","2"),R(o,"stroke-linecap","round"),R(o,"stroke-linejoin","round"),R(o,"class","feather feather-external-link svelte-mwaz07"),R(r,"class","btn svelte-mwaz07"),R(r,"href",e[0]),R(r,"target","_top"),R(n,"class","btn-container svelte-mwaz07")},m(t,e){C(t,n,e),_(n,r),_(r,i),_(r,o),_(o,a),_(o,s),_(o,l)},p(t,[e]){1&e&&R(r,"href",t[0])},i:t,o:t,d(t){t&&T(n)}}}function No(t,e,n){let{url:r}=e;return t.$$set=t=>{"url"in t&&n(0,r=t.url)},[r]}class Ao extends Pt{constructor(t){super(),Et(this,t,No,So,a,{url:0})}}function zo(t,e,n){const r=t.slice();return r[1]=e[n],r}function jo(t){let e,n,r=t[1].value+"";return{c(){e=N("p"),n=z(r),R(e,"class","svelte-hixzrs")},m(t,r){C(t,e,r),_(e,n)},p(t,e){1&e&&r!==(r=t[1].value+"")&&I(n,r)},d(t){t&&T(e)}}}function Do(t){let e,n,r,i,o=t[0],a=[];for(let e=0;e<o.length;e+=1)a[e]=jo(zo(t,o,e));return r=new Ao({props:{url:"https://www.pnas.org/doi/10.1073/pnas.2101967118"}}),{c(){e=N("div");for(let t=0;t<a.length;t+=1)a[t].c();n=j(),At(r.$$.fragment),R(e,"class","standfirst-wrapper svelte-hixzrs")},m(t,o){C(t,e,o);for(let t=0;t<a.length;t+=1)a[t].m(e,null);_(e,n),zt(r,e,null),i=!0},p(t,[r]){if(1&r){let i;for(o=t[0],i=0;i<o.length;i+=1){const s=zo(t,o,i);a[i]?a[i].p(s,r):(a[i]=jo(s),a[i].c(),a[i].m(e,n))}for(;i<a.length;i+=1)a[i].d(1);a.length=o.length}},i(t){i||(_t(r.$$.fragment,t),i=!0)},o(t){kt(r.$$.fragment,t),i=!1},d(t){t&&T(e),S(a,t),jt(r)}}}function Eo(t,e,n){let{standfirst:r}=e;return t.$$set=t=>{"standfirst"in t&&n(0,r=t.standfirst)},[r]}class Po extends Pt{constructor(t){super(),Et(this,t,Eo,Do,a,{standfirst:0})}}function Lo(t,e,n){const r=t.slice();return r[1]=e[n],r[3]=n,r}function Ro(t,e,n){const r=t.slice();return r[4]=e[n],r}function Io(t){let e,n,r=t[4]+"";return{c(){e=N("p"),n=z(r),R(e,"class","detail-list-value svelte-1vllag3")},m(t,r){C(t,e,r),_(e,n)},p(t,e){1&e&&r!==(r=t[4]+"")&&I(n,r)},d(t){t&&T(e)}}}function qo(t){let e,n,r,o,a,s,l,c,u,f=t[1].name+"",h=t[1].detail,p=[];for(let e=0;e<h.length;e+=1)p[e]=Io(Ro(t,h,e));return{c(){e=N("div"),n=N("p"),r=z(f),o=j(),a=N("div"),s=N("div");for(let t=0;t<p.length;t+=1)p[t].c();l=j(),R(n,"class","author-name svelte-1vllag3"),R(s,"class","detail-list svelte-1vllag3"),R(a,"class","detail svelte-1vllag3"),R(e,"class","author-container svelte-1vllag3")},m(t,i){C(t,e,i),_(e,n),_(n,r),_(e,o),_(e,a),_(a,s);for(let t=0;t<p.length;t+=1)p[t].m(s,null);_(e,l),c||(u=[E(e,"mouseover",Yo),E(e,"focus",Yo),E(e,"mouseout",Oo),E(e,"blur",Oo)],c=!0)},p(t,e){if(1&e&&f!==(f=t[1].name+"")&&I(r,f),1&e){let n;for(h=t[1].detail,n=0;n<h.length;n+=1){const r=Ro(t,h,n);p[n]?p[n].p(r,e):(p[n]=Io(r),p[n].c(),p[n].m(s,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=h.length}},d(t){t&&T(e),S(p,t),c=!1,i(u)}}}function Fo(e){let n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=qo(Lo(e,r,t));return{c(){n=N("div");for(let t=0;t<i.length;t+=1)i[t].c();R(n,"class","authors svelte-1vllag3")},m(t,e){C(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(1&e){let o;for(r=t[0],o=0;o<r.length;o+=1){const a=Lo(t,r,o);i[o]?i[o].p(a,e):(i[o]=qo(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&T(n),S(i,t)}}}function Yo(t){t.target.classList.add("active")}function Oo(t){t.target.classList.remove("active")}function Ho(t,e,n){let{authors:r}=e;return t.$$set=t=>{"authors"in t&&n(0,r=t.authors)},[r]}class Uo extends Pt{constructor(t){super(),Et(this,t,Ho,Fo,a,{authors:0})}}const Vo=[];function Bo(e,n=t){let r;const i=new Set;function o(t){if(a(e,t)&&(e=t,r)){const t=!Vo.length;for(const t of i)t[1](),Vo.push(t,e);if(t){for(let t=0;t<Vo.length;t+=2)Vo[t][0](Vo[t+1]);Vo.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,s=t){const l=[a,s];return i.add(l),1===i.size&&(r=n(o)||t),a(e),()=>{i.delete(l),0===i.size&&(r(),r=null)}}}}function Wo(e,n,r){const a=!Array.isArray(e),l=a?[e]:e,c=n.length<2;return u=e=>{let r=!1;const u=[];let f=0,h=t;const p=()=>{if(f)return;h();const r=n(a?u[0]:u,e);c?e(r):h=o(r)?r:t},d=l.map(((t,e)=>s(t,(t=>{u[e]=t,f&=~(1<<e),r&&p()}),(()=>{f|=1<<e}))));return r=!0,p(),function(){i(d),h()}},{subscribe:Bo(r,u).subscribe};var u}function Ko(t){return 0===(e=t)||e?Array.isArray(t)?e=>t.map((t=>"function"!=typeof t?e[t]:t(e))):"function"!=typeof t?e=>e[t]:t:null;var e}function Xo(t,e={}){return function(t){const e={};for(const n of t){if(Object(n)!==n)throw new TypeError("iterable for fromEntries should yield objects");const{0:t,1:r}=n;Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:r})}return e}(Object.entries(t).filter((([t,n])=>void 0!==n&&void 0===e[t])))}function Zo(t,e){if(!Array.isArray(t))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const n={},r=Object.keys(e),i=r.length;let o,a,s,l,c,u,f,h;const p=t.length;for(o=0;o<i;o+=1){for(l=r[o],f=e[l],c=null,u=null,a=0;a<p;a+=1)if(h=f(t[a]),Array.isArray(h)){const t=h.length;for(s=0;s<t;s+=1)!1!==h[s]&&void 0!==h[s]&&null!==h[s]&&!1===Number.isNaN(h[s])&&((null===c||h[s]<c)&&(c=h[s]),(null===u||h[s]>u)&&(u=h[s]))}else!1!==h&&null!=h&&!1===Number.isNaN(h)&&((null===c||h<c)&&(c=h),(null===u||h>u)&&(u=h));n[l]=[c,u]}return n}function Go(t,e,n){const r=Object.keys(n).reduce(((t,r)=>{const i=function(t){return"function"==typeof t.bandwidth?"ordinal":(e=Object.keys(t),n=["domain","range","unknown","copy"],e.length===n.length&&e.every((t=>n.includes(t)))?"ordinal":"other");var e,n}(n[r]);return t[i]||(t[i]={}),t[i][r]=e[r],t}),{ordinal:!1,other:!1});let i={};return r.ordinal&&(i=function(t,e,{sort:n=!1}={}){if(!Array.isArray(t))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof t}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(e)||null==e)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const r={},i=Object.keys(e),o=i.length;let a,s,l,c,u,f,h;const p=t.length;for(a=0;a<o;a+=1){for(h=new Set,c=i[a],u=e[c],s=0;s<p;s+=1)if(f=u(t[s]),Array.isArray(f)){const t=f.length;for(l=0;l<t;l+=1)h.add(f[l])}else h.add(f);const o=Array.from(h);r[c]=!0===n?o.sort():o}return r}(t,r.ordinal)),r.other&&(i={...i,...Zo(t,r.other)}),i}function Qo(t){return function([e,n]){return"function"==typeof n&&(n=n(e[t])),e?function(t=[],e){return!0===Array.isArray(e)?e.map(((e,n)=>null===e?t[n]:e)):t}(e[t],n):n}}var Jo={x:Xn,y:Xn,z:Xn,r:er};function ta(t){return t}function ea(t){return e=>Math.log(t*e)}function na(t){return e=>t*Math.exp(e)}function ra(t){return e=>Math.sign(e)*Math.log1p(Math.abs(e/t))}function ia(t){return e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}function oa(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function aa(t,e){if("function"!=typeof t.range)throw new Error("Scale method `range` must be a function");if("function"!=typeof t.domain)throw new Error("Scale method `domain` must be a function");if(!Array.isArray(e))return t.domain();2!==t.domain().length&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",t.domain()),2!==t.range().length&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",t.range());const{lift:n,ground:r}=function(t){const e=function(t){return t.constant?"symlog":t.base?"log":t.exponent?.5===t.exponent()?"sqrt":"pow":"other"}(t);if("log"===e){const n=Math.sign(t.domain()[0]);return{lift:ea(n),ground:na(n),scaleType:e}}if("pow"===e){const t=1;return{lift:oa(t),ground:oa(1/t),scaleType:e}}if("sqrt"===e){const t=.5;return{lift:oa(t),ground:oa(1/t),scaleType:e}}if("symlog"===e){const t=1;return{lift:ra(t),ground:ia(t),scaleType:e}}return{lift:ta,ground:ta,scaleType:e}}(t),i=t.domain()[0],o="[object Date]"===Object.prototype.toString.call(i),[a,s]=t.domain().map((t=>n(o?t.getTime():t))),[l,c]=t.range(),u=e[0]||0,f=e[1]||0,h=(s-a)/(Math.abs(c-l)-u-f);return[a-u*h,f*h+s].map((t=>r(o?new Date(t):t)))}function sa(t){return function([e,n,r,i,o,a,s,l,c,u]){if(null===n)return null;const f=function(t,e,n,r,i,o){return i?"function"==typeof i?i({width:e,height:n}):i:function(t,e,n,r,i){let o,a;return!0===i?(o=0,a=100):(o="r"===t?1:0,a="y"===t?n:"r"===t?25:e),!0===r?[a,o]:[o,a]}(t,e,n,r,o)}(t,s,l,a,c,u),h=e===Jo[t]?e():e.copy();return h.domain(r),(!h.interpolator||"function"==typeof h.interpolator&&h.interpolator().name.startsWith("identity"))&&h.range(f),i&&h.domain(aa(h,i)),!0!==o&&"number"!=typeof o||("function"==typeof h.nice?h.nice("number"==typeof o?o:void 0):console.error(`[Layer Cake] You set \`${t}Nice: true\` but the ${t}Scale does not have a \`.nice\` method. Ignoring...`)),h}}function la([t,e]){return n=>{const r=t(n);return Array.isArray(r)?r.map((t=>e(t))):e(r)}}function ca([t]){if("function"==typeof t){if("function"==typeof t.range)return t.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const ua=t=>({element:4&t[0],width:256&t[0],height:512&t[0],aspectRatio:1024&t[0],containerWidth:128&t[0],containerHeight:64&t[0]}),fa=t=>({element:t[2],width:t[8],height:t[9],aspectRatio:t[10],containerWidth:t[7],containerHeight:t[6]});function ha(t){let e,n,r;const i=t[90].default,o=c(i,t,t[89],fa);return{c(){e=N("div"),o&&o.c(),R(e,"class","layercake-container svelte-1ll0j6t"),ut((()=>t[92].call(e))),q(e,"position",t[5],!1),q(e,"top","absolute"===t[5]?"0":null,!1),q(e,"right","absolute"===t[5]?"0":null,!1),q(e,"bottom","absolute"===t[5]?"0":null,!1),q(e,"left","absolute"===t[5]?"0":null,!1),q(e,"pointer-events",!1===t[4]?"none":null,!1)},m(i,a){C(i,e,a),o&&o.m(e,null),t[91](e),n=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=N("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=H();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=E(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{i=E(n.contentWindow,"resize",e)}),_(t,n),()=>{(r||i&&n.contentWindow)&&i(),T(n)}}(e,t[92].bind(e)),r=!0},p(t,n){o&&o.p&&(!r||1988&n[0]|134217728&n[2])&&h(o,i,t,t[89],r?f(i,t[89],n,ua):p(t[89]),fa),32&n[0]&&q(e,"position",t[5],!1),32&n[0]&&q(e,"top","absolute"===t[5]?"0":null,!1),32&n[0]&&q(e,"right","absolute"===t[5]?"0":null,!1),32&n[0]&&q(e,"bottom","absolute"===t[5]?"0":null,!1),32&n[0]&&q(e,"left","absolute"===t[5]?"0":null,!1),16&n[0]&&q(e,"pointer-events",!1===t[4]?"none":null,!1)},i(t){r||(_t(o,t),r=!0)},o(t){kt(o,t),r=!1},d(r){r&&T(e),o&&o.d(r),t[91](null),n()}}}function pa(t){let e,n,r=(!0===t[3]||"undefined"!=typeof window)&&ha(t);return{c(){r&&r.c(),e=D()},m(t,i){r&&r.m(t,i),C(t,e,i),n=!0},p(t,n){!0===t[3]||"undefined"!=typeof window?r?(r.p(t,n),8&n[0]&&_t(r,1)):(r=ha(t),r.c(),_t(r,1),r.m(e.parentNode,e)):r&&(wt(),kt(r,1,1,(()=>{r=null})),$t())},i(t){n||(_t(r),n=!0)},o(t){kt(r),n=!1},d(t){r&&r.d(t),t&&T(e)}}}function da(t,e,n){let r,i,o,a,s,c,u,f,h,p,d,g,v,y,b,x,w,$,_,k,M,C,T,S,N,A,z,j,D,E,P,L,R,I,q,F,Y,O,H,U,V,{$$slots:B={},$$scope:W}=e,{ssr:K=!1}=e,{pointerEvents:X=!0}=e,{position:Z="relative"}=e,{percentRange:G=!1}=e,{width:Q}=e,{height:J}=e,{containerWidth:nt=Q||100}=e,{containerHeight:rt=J||100}=e,{element:it}=e,{x:at}=e,{y:st}=e,{z:lt}=e,{r:ct}=e,{data:ut=[]}=e,{xDomain:ft}=e,{yDomain:ht}=e,{zDomain:pt}=e,{rDomain:dt}=e,{xNice:mt=!1}=e,{yNice:gt=!1}=e,{zNice:vt=!1}=e,{rNice:yt=!1}=e,{xPadding:bt}=e,{yPadding:xt}=e,{zPadding:wt}=e,{rPadding:$t}=e,{xScale:_t=Jo.x}=e,{yScale:kt=Jo.y}=e,{zScale:Mt=Jo.z}=e,{rScale:Ct=Jo.r}=e,{xRange:Tt}=e,{yRange:St}=e,{zRange:Nt}=e,{rRange:At}=e,{xReverse:zt=!1}=e,{yReverse:jt="function"!=typeof kt.bandwidth}=e,{zReverse:Dt=!1}=e,{rReverse:Et=!1}=e,{padding:Pt={}}=e,{extents:Lt={}}=e,{flatData:Rt}=e,{custom:It={}}=e,qt=!1;et((()=>{qt=!0}));const Ft={},Yt=Bo(G);l(t,Yt,(t=>n(128,O=t)));const Ot=Bo(nt);l(t,Ot,(t=>n(7,Y=t)));const Ht=Bo(rt);l(t,Ht,(t=>n(6,F=t)));const Ut=Bo(Xo(Lt));l(t,Ut,(t=>n(127,q=t)));const Vt=Bo(ut);l(t,Vt,(t=>n(126,I=t)));const Bt=Bo(Rt||ut);l(t,Bt,(t=>n(125,R=t)));const Wt=Bo(Pt);l(t,Wt,(t=>n(124,L=t)));const Kt=Bo(Ko(at));l(t,Kt,(t=>n(123,P=t)));const Xt=Bo(Ko(st));l(t,Xt,(t=>n(122,E=t)));const Zt=Bo(Ko(lt));l(t,Zt,(t=>n(121,D=t)));const Gt=Bo(Ko(ct));l(t,Gt,(t=>n(120,j=t)));const Qt=Bo(ft);l(t,Qt,(t=>n(119,z=t)));const Jt=Bo(ht);l(t,Jt,(t=>n(118,A=t)));const te=Bo(pt);l(t,te,(t=>n(117,N=t)));const ee=Bo(dt);l(t,ee,(t=>n(116,S=t)));const ne=Bo(mt);l(t,ne,(t=>n(115,T=t)));const re=Bo(gt);l(t,re,(t=>n(114,C=t)));const ie=Bo(vt);l(t,ie,(t=>n(113,M=t)));const oe=Bo(yt);l(t,oe,(t=>n(112,k=t)));const ae=Bo(zt);l(t,ae,(t=>n(111,_=t)));const se=Bo(jt);l(t,se,(t=>n(110,$=t)));const le=Bo(Dt);l(t,le,(t=>n(109,w=t)));const ce=Bo(Et);l(t,ce,(t=>n(108,x=t)));const ue=Bo(bt);l(t,ue,(t=>n(107,b=t)));const fe=Bo(xt);l(t,fe,(t=>n(106,y=t)));const he=Bo(wt);l(t,he,(t=>n(105,v=t)));const pe=Bo($t);l(t,pe,(t=>n(104,g=t)));const de=Bo(Tt);l(t,de,(t=>n(103,d=t)));const me=Bo(St);l(t,me,(t=>n(102,p=t)));const ge=Bo(Nt);l(t,ge,(t=>n(101,h=t)));const ve=Bo(At);l(t,ve,(t=>n(100,f=t)));const ye=Bo(_t);l(t,ye,(t=>n(99,u=t)));const be=Bo(kt);l(t,be,(t=>n(98,c=t)));const xe=Bo(Mt);l(t,xe,(t=>n(97,s=t)));const we=Bo(Ct);l(t,we,(t=>n(96,a=t)));const $e=Bo(Ft);l(t,$e,(t=>n(94,i=t)));const _e=Bo(It);l(t,_e,(t=>n(95,o=t)));const ke=Wo([Kt,Xt,Zt,Gt],(([t,e,n,r])=>{const i={};return t&&(i.x=t),e&&(i.y=e),n&&(i.z=n),r&&(i.r=r),i})),Me=Wo([Wt,Ot,Ht],(([t])=>Object.assign({top:0,right:0,bottom:0,left:0},t))),Ce=Wo([Ot,Ht,Me],(([t,e,n])=>{const r={};return r.top=n.top,r.right=t-n.right,r.bottom=e-n.bottom,r.left=n.left,r.width=r.right-r.left,r.height=r.bottom-r.top,r.width<=0&&!0===qt&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),r.height<=0&&!0===qt&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),r})),Te=Wo([Ce],(([t])=>t.width));l(t,Te,(t=>n(8,H=t)));const Se=Wo([Ce],(([t])=>t.height));l(t,Se,(t=>n(9,U=t)));const Ne=Wo([Bt,ke,Ut,ye,be,we,xe],(([t,e,n,r,i,o,a])=>{const s={x:r,y:i,r:o,z:a},l=Xo(e,n),c=Object.fromEntries(Object.keys(l).map((t=>[t,s[t]])));if(Object.keys(l).length>0){return{...Go(t,l,c),...n}}return{}})),Ae=Wo([Ne,Qt],Qo("x")),ze=Wo([Ne,Jt],Qo("y")),je=Wo([Ne,te],Qo("z")),De=Wo([Ne,ee],Qo("r")),Ee=Wo([ye,Ne,Ae,ue,ne,ae,Te,Se,de,Yt],sa("x")),Pe=Wo([Kt,Ee],la),Le=Wo([be,Ne,ze,fe,re,se,Te,Se,me,Yt],sa("y")),Re=Wo([Xt,Le],la),Ie=Wo([xe,Ne,je,he,ie,le,Te,Se,ge,Yt],sa("z")),qe=Wo([Zt,Ie],la),Fe=Wo([we,Ne,De,pe,oe,ce,Te,Se,ve,Yt],sa("r")),Ye=Wo([Gt,Fe],la),Oe=Wo([Ee],ca),He=Wo([Le],ca),Ue=Wo([Ie],ca),Ve=Wo([Fe],ca),Be=Wo([Te,Se],(([t,e])=>t/e));return l(t,Be,(t=>n(10,V=t))),t.$$set=t=>{"ssr"in t&&n(3,K=t.ssr),"pointerEvents"in t&&n(4,X=t.pointerEvents),"position"in t&&n(5,Z=t.position),"percentRange"in t&&n(51,G=t.percentRange),"width"in t&&n(52,Q=t.width),"height"in t&&n(53,J=t.height),"containerWidth"in t&&n(0,nt=t.containerWidth),"containerHeight"in t&&n(1,rt=t.containerHeight),"element"in t&&n(2,it=t.element),"x"in t&&n(54,at=t.x),"y"in t&&n(55,st=t.y),"z"in t&&n(56,lt=t.z),"r"in t&&n(57,ct=t.r),"data"in t&&n(58,ut=t.data),"xDomain"in t&&n(59,ft=t.xDomain),"yDomain"in t&&n(60,ht=t.yDomain),"zDomain"in t&&n(61,pt=t.zDomain),"rDomain"in t&&n(62,dt=t.rDomain),"xNice"in t&&n(63,mt=t.xNice),"yNice"in t&&n(64,gt=t.yNice),"zNice"in t&&n(65,vt=t.zNice),"rNice"in t&&n(66,yt=t.rNice),"xPadding"in t&&n(67,bt=t.xPadding),"yPadding"in t&&n(68,xt=t.yPadding),"zPadding"in t&&n(69,wt=t.zPadding),"rPadding"in t&&n(70,$t=t.rPadding),"xScale"in t&&n(71,_t=t.xScale),"yScale"in t&&n(72,kt=t.yScale),"zScale"in t&&n(73,Mt=t.zScale),"rScale"in t&&n(74,Ct=t.rScale),"xRange"in t&&n(75,Tt=t.xRange),"yRange"in t&&n(76,St=t.yRange),"zRange"in t&&n(77,Nt=t.zRange),"rRange"in t&&n(78,At=t.rRange),"xReverse"in t&&n(79,zt=t.xReverse),"yReverse"in t&&n(80,jt=t.yReverse),"zReverse"in t&&n(81,Dt=t.zReverse),"rReverse"in t&&n(82,Et=t.rReverse),"padding"in t&&n(83,Pt=t.padding),"extents"in t&&n(84,Lt=t.extents),"flatData"in t&&n(85,Rt=t.flatData),"custom"in t&&n(86,It=t.custom),"$$scope"in t&&n(89,W=t.$$scope)},t.$$.update=()=>{8388608&t.$$.dirty[1]&&at&&n(87,Ft.x=at,Ft),16777216&t.$$.dirty[1]&&st&&n(87,Ft.y=st,Ft),33554432&t.$$.dirty[1]&&lt&&n(87,Ft.z=lt,Ft),67108864&t.$$.dirty[1]&&ct&&n(87,Ft.r=ct,Ft),268435456&t.$$.dirty[1]&&ft&&n(87,Ft.xDomain=ft,Ft),536870912&t.$$.dirty[1]&&ht&&n(87,Ft.yDomain=ht,Ft),1073741824&t.$$.dirty[1]&&pt&&n(87,Ft.zDomain=pt,Ft),1&t.$$.dirty[2]&&dt&&n(87,Ft.rDomain=dt,Ft),8192&t.$$.dirty[2]&&Tt&&n(87,Ft.xRange=Tt,Ft),16384&t.$$.dirty[2]&&St&&n(87,Ft.yRange=St,Ft),32768&t.$$.dirty[2]&&Nt&&n(87,Ft.zRange=Nt,Ft),65536&t.$$.dirty[2]&&At&&n(87,Ft.rRange=At,Ft),1048576&t.$$.dirty[1]&&m(Yt,O=G,O),1&t.$$.dirty[0]&&m(Ot,Y=nt,Y),2&t.$$.dirty[0]&&m(Ht,F=rt,F),4194304&t.$$.dirty[2]&&m(Ut,q=Xo(Lt),q),134217728&t.$$.dirty[1]&&m(Vt,I=ut,I),134217728&t.$$.dirty[1]|8388608&t.$$.dirty[2]&&m(Bt,R=Rt||ut,R),2097152&t.$$.dirty[2]&&m(Wt,L=Pt,L),8388608&t.$$.dirty[1]&&m(Kt,P=Ko(at),P),16777216&t.$$.dirty[1]&&m(Xt,E=Ko(st),E),33554432&t.$$.dirty[1]&&m(Zt,D=Ko(lt),D),67108864&t.$$.dirty[1]&&m(Gt,j=Ko(ct),j),268435456&t.$$.dirty[1]&&m(Qt,z=ft,z),536870912&t.$$.dirty[1]&&m(Jt,A=ht,A),1073741824&t.$$.dirty[1]&&m(te,N=pt,N),1&t.$$.dirty[2]&&m(ee,S=dt,S),2&t.$$.dirty[2]&&m(ne,T=mt,T),4&t.$$.dirty[2]&&m(re,C=gt,C),8&t.$$.dirty[2]&&m(ie,M=vt,M),16&t.$$.dirty[2]&&m(oe,k=yt,k),131072&t.$$.dirty[2]&&m(ae,_=zt,_),262144&t.$$.dirty[2]&&m(se,$=jt,$),524288&t.$$.dirty[2]&&m(le,w=Dt,w),1048576&t.$$.dirty[2]&&m(ce,x=Et,x),32&t.$$.dirty[2]&&m(ue,b=bt,b),64&t.$$.dirty[2]&&m(fe,y=xt,y),128&t.$$.dirty[2]&&m(he,v=wt,v),256&t.$$.dirty[2]&&m(pe,g=$t,g),8192&t.$$.dirty[2]&&m(de,d=Tt,d),16384&t.$$.dirty[2]&&m(me,p=St,p),32768&t.$$.dirty[2]&&m(ge,h=Nt,h),65536&t.$$.dirty[2]&&m(ve,f=At,f),512&t.$$.dirty[2]&&m(ye,u=_t,u),1024&t.$$.dirty[2]&&m(be,c=kt,c),2048&t.$$.dirty[2]&&m(xe,s=Mt,s),4096&t.$$.dirty[2]&&m(we,a=Ct,a),16777216&t.$$.dirty[2]&&m(_e,o=It,o),33554432&t.$$.dirty[2]&&m($e,i=Ft,i),67108864&t.$$.dirty[2]&&function(t,e){tt().$$.context.set(t,e)}("LayerCake",r)},n(88,r={activeGetters:ke,width:Te,height:Se,percentRange:Yt,aspectRatio:Be,containerWidth:Ot,containerHeight:Ht,x:Kt,y:Xt,z:Zt,r:Gt,custom:_e,data:Vt,xNice:ne,yNice:re,zNice:ie,rNice:oe,xReverse:ae,yReverse:se,zReverse:le,rReverse:ce,xPadding:ue,yPadding:fe,zPadding:he,rPadding:pe,padding:Me,flatData:Bt,extents:Ne,xDomain:Ae,yDomain:ze,zDomain:je,rDomain:De,xRange:Oe,yRange:He,zRange:Ue,rRange:Ve,config:$e,xScale:Ee,xGet:Pe,yScale:Le,yGet:Re,zScale:Ie,zGet:qe,rScale:Fe,rGet:Ye}),[nt,rt,it,K,X,Z,F,Y,H,U,V,Yt,Ot,Ht,Ut,Vt,Bt,Wt,Kt,Xt,Zt,Gt,Qt,Jt,te,ee,ne,re,ie,oe,ae,se,le,ce,ue,fe,he,pe,de,me,ge,ve,ye,be,xe,we,$e,_e,Te,Se,Be,G,Q,J,at,st,lt,ct,ut,ft,ht,pt,dt,mt,gt,vt,yt,bt,xt,wt,$t,_t,kt,Mt,Ct,Tt,St,Nt,At,zt,jt,Dt,Et,Pt,Lt,Rt,It,Ft,r,W,B,function(t){ot[t?"unshift":"push"]((()=>{it=t,n(2,it)}))},function(){nt=this.clientWidth,rt=this.clientHeight,n(0,nt),n(1,rt)}]}class ma extends Pt{constructor(t){super(),Et(this,t,da,pa,a,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const ga=t=>({element:1&t}),va=t=>({element:t[0]});function ya(t){let e,n;const r=t[6].default,i=c(r,t,t[5],va);return{c(){e=N("div"),i&&i.c(),R(e,"class","layercake-layout-html svelte-1u9nfei"),q(e,"z-index",t[1],!1),q(e,"pointer-events",!1===t[2]?"none":null,!1),q(e,"top",t[3].top+"px",!1),q(e,"right",t[3].right+"px",!1),q(e,"bottom",t[3].bottom+"px",!1),q(e,"left",t[3].left+"px",!1)},m(r,o){C(r,e,o),i&&i.m(e,null),t[7](e),n=!0},p(t,[o]){i&&i.p&&(!n||33&o)&&h(i,r,t,t[5],n?f(r,t[5],o,ga):p(t[5]),va),2&o&&q(e,"z-index",t[1],!1),4&o&&q(e,"pointer-events",!1===t[2]?"none":null,!1),8&o&&q(e,"top",t[3].top+"px",!1),8&o&&q(e,"right",t[3].right+"px",!1),8&o&&q(e,"bottom",t[3].bottom+"px",!1),8&o&&q(e,"left",t[3].left+"px",!1)},i(t){n||(_t(i,t),n=!0)},o(t){kt(i,t),n=!1},d(n){n&&T(e),i&&i.d(n),t[7](null)}}}function ba(t,e,n){let r,{$$slots:i={},$$scope:o}=e,{element:a}=e,{zIndex:s}=e,{pointerEvents:c}=e;const{padding:u}=rt("LayerCake");return l(t,u,(t=>n(3,r=t))),t.$$set=t=>{"element"in t&&n(0,a=t.element),"zIndex"in t&&n(1,s=t.zIndex),"pointerEvents"in t&&n(2,c=t.pointerEvents),"$$scope"in t&&n(5,o=t.$$scope)},[a,s,c,r,u,o,i,function(t){ot[t?"unshift":"push"]((()=>{a=t,n(0,a)}))}]}class xa extends Pt{constructor(t){super(),Et(this,t,ba,ya,a,{element:0,zIndex:1,pointerEvents:2})}}const wa=t=>({element:1&t}),$a=t=>({element:t[0]}),_a=t=>({element:1&t}),ka=t=>({element:t[0]});function Ma(t){let e,n,r,i,o;const a=t[12].defs,s=c(a,t,t[11],ka),l=t[12].default,u=c(l,t,t[11],$a);return{c(){e=A("svg"),n=A("defs"),s&&s.c(),r=A("g"),u&&u.c(),R(r,"class","layercake-layout-svg_g"),R(r,"transform",i="translate("+t[7].left+", "+t[7].top+")"),R(e,"class","layercake-layout-svg svelte-17l4rdd"),R(e,"viewBox",t[4]),R(e,"width",t[5]),R(e,"height",t[6]),q(e,"z-index",t[2],!1),q(e,"pointer-events",!1===t[3]?"none":null,!1)},m(i,a){C(i,e,a),_(e,n),s&&s.m(n,null),_(e,r),u&&u.m(r,null),t[13](r),t[14](e),o=!0},p(t,[n]){s&&s.p&&(!o||2049&n)&&h(s,a,t,t[11],o?f(a,t[11],n,_a):p(t[11]),ka),u&&u.p&&(!o||2049&n)&&h(u,l,t,t[11],o?f(l,t[11],n,wa):p(t[11]),$a),(!o||128&n&&i!==(i="translate("+t[7].left+", "+t[7].top+")"))&&R(r,"transform",i),(!o||16&n)&&R(e,"viewBox",t[4]),(!o||32&n)&&R(e,"width",t[5]),(!o||64&n)&&R(e,"height",t[6]),4&n&&q(e,"z-index",t[2],!1),8&n&&q(e,"pointer-events",!1===t[3]?"none":null,!1)},i(t){o||(_t(s,t),_t(u,t),o=!0)},o(t){kt(s,t),kt(u,t),o=!1},d(n){n&&T(e),s&&s.d(n),u&&u.d(n),t[13](null),t[14](null)}}}function Ca(t,e,n){let r,i,o,{$$slots:a={},$$scope:s}=e,{element:c}=e,{innerElement:u}=e,{zIndex:f}=e,{pointerEvents:h}=e,{viewBox:p}=e;const{containerWidth:d,containerHeight:m,padding:g}=rt("LayerCake");return l(t,d,(t=>n(5,r=t))),l(t,m,(t=>n(6,i=t))),l(t,g,(t=>n(7,o=t))),t.$$set=t=>{"element"in t&&n(0,c=t.element),"innerElement"in t&&n(1,u=t.innerElement),"zIndex"in t&&n(2,f=t.zIndex),"pointerEvents"in t&&n(3,h=t.pointerEvents),"viewBox"in t&&n(4,p=t.viewBox),"$$scope"in t&&n(11,s=t.$$scope)},[c,u,f,h,p,r,i,o,d,m,g,s,a,function(t){ot[t?"unshift":"push"]((()=>{u=t,n(1,u)}))},function(t){ot[t?"unshift":"push"]((()=>{c=t,n(0,c)}))}]}class Ta extends Pt{constructor(t){super(),Et(this,t,Ca,Ma,a,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}var Sa=1e-6,Na=Math.PI,Aa=Na/2,za=Na/4,ja=2*Na,Da=180/Na,Ea=Na/180,Pa=Math.abs,La=Math.atan,Ra=Math.atan2,Ia=Math.cos,qa=Math.sin,Fa=Math.sign||function(t){return t>0?1:t<0?-1:0},Ya=Math.sqrt;function Oa(t){return t>1?Aa:t<-1?-Aa:Math.asin(t)}function Ha(){}function Ua(t,e){t&&Ba.hasOwnProperty(t.type)&&Ba[t.type](t,e)}var Va={Feature:function(t,e){Ua(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ua(n[r].geometry,e)}},Ba={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Wa(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Wa(n[r],e,0)},Polygon:function(t,e){Ka(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ka(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ua(n[r],e)}};function Wa(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Ka(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Wa(t[n],e,1);e.polygonEnd()}function Xa(t){return[Ra(t[1],t[0]),Oa(t[2])]}function Za(t){var e=t[0],n=t[1],r=Ia(n);return[r*Ia(e),r*qa(e),qa(n)]}function Ga(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Qa(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ja(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ts(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function es(t){var e=Ya(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ns(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function rs(t,e){return[Pa(t)>Na?t+Math.round(-t/ja)*ja:t,e]}function is(t){return function(e,n){return[(e+=t)>Na?e-ja:e<-Na?e+ja:e,n]}}function os(t){var e=is(t);return e.invert=is(-t),e}function as(t,e){var n=Ia(t),r=qa(t),i=Ia(e),o=qa(e);function a(t,e){var a=Ia(e),s=Ia(t)*a,l=qa(t)*a,c=qa(e),u=c*n+s*r;return[Ra(l*i-u*o,s*n-c*r),Oa(u*i+l*o)]}return a.invert=function(t,e){var a=Ia(e),s=Ia(t)*a,l=qa(t)*a,c=qa(e),u=c*i-l*o;return[Ra(l*i+c*o,s*n+u*r),Oa(u*n-s*r)]},a}function ss(t,e){(e=Za(e))[0]-=t,es(e);var n=function(t){return t>1?0:t<-1?Na:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+ja-Sa)%ja}function ls(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Ha,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function cs(t,e){return Pa(t[0]-e[0])<Sa&&Pa(t[1]-e[1])<Sa}function us(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function fs(t,e,n,r,i){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(cs(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new us(r,t,null,!0)),l.push(n.o=new us(r,null,n,!1)),s.push(n=new us(a,t,null,!1)),l.push(n.o=new us(a,null,n,!0))}})),s.length){for(l.sort(e),hs(s),hs(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var c,u,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((u=c[o])[0],u[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((u=c[o])[0],u[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function hs(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ps(t){return Pa(t[0])<=Na?t[0]:Fa(t[0])*((Pa(t[0])+Na)%ja-Na)}function ds(t,e,n,r){return function(i){var o,a,s,l=e(i),c=ls(),u=e(c),f=!1,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=y,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=g,a=we(a);var t=function(t,e){var n=ps(e),r=e[1],i=qa(r),o=[qa(n),-Ia(n),0],a=0,s=0,l=new le;1===i?r=Aa+Sa:-1===i&&(r=-Aa-Sa);for(var c=0,u=t.length;c<u;++c)if(h=(f=t[c]).length)for(var f,h,p=f[h-1],d=ps(p),m=p[1]/2+za,g=qa(m),v=Ia(m),y=0;y<h;++y,d=x,g=$,v=_,p=b){var b=f[y],x=ps(b),w=b[1]/2+za,$=qa(w),_=Ia(w),k=x-d,M=k>=0?1:-1,C=M*k,T=C>Na,S=g*$;if(l.add(Ra(S*M*qa(C),v*_+S*Ia(C))),a+=T?k+M*ja:k,T^d>=n^x>=n){var N=Qa(Za(p),Za(b));es(N);var A=Qa(o,N);es(A);var z=(T^k>=0?-1:1)*Oa(A[2]);(r>z||r===z&&(N[0]||N[1]))&&(s+=T^k>=0?1:-1)}}return(a<-1e-6||a<Sa&&l<-1e-12)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),fs(a,gs,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(e,n){t(e,n)&&i.point(e,n)}function d(t,e){l.point(t,e)}function m(){h.point=d,l.lineStart()}function g(){h.point=p,l.lineEnd()}function v(t,e){s.push([t,e]),u.point(t,e)}function y(){u.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),h=c.result(),p=h.length;if(s.pop(),o.push(s),s=null,p)if(1&l){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else p>1&&2&l&&h.push(h.pop().concat(h.shift())),a.push(h.filter(ms))}return h}}function ms(t){return t.length>1}function gs(t,e){return((t=t.x)[0]<0?t[1]-Aa-Sa:Aa-t[1])-((e=e.x)[0]<0?e[1]-Aa-Sa:Aa-e[1])}rs.invert=rs;var vs=ds((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Na:-Na,l=Pa(o-n);Pa(l-Na)<Sa?(t.point(n,r=(r+a)/2>0?Aa:-Aa),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=Na&&(Pa(n-i)<Sa&&(n-=i*Sa),Pa(o-s)<Sa&&(o-=s*Sa),r=function(t,e,n,r){var i,o,a=qa(t-n);return Pa(a)>Sa?La((qa(e)*(o=Ia(r))*qa(n)-qa(r)*(i=Ia(e))*qa(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Aa,r.point(-Na,i),r.point(0,i),r.point(Na,i),r.point(Na,0),r.point(Na,-i),r.point(0,-i),r.point(-Na,-i),r.point(-Na,0),r.point(-Na,i);else if(Pa(t[0]-e[0])>Sa){var o=t[0]<e[0]?Na:-Na;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Na,-Aa]);function ys(t){var e=Ia(t),n=6*Ea,r=e>0,i=Pa(e)>Sa;function o(t,n){return Ia(t)*Ia(n)>e}function a(t,n,r){var i=[1,0,0],o=Qa(Za(t),Za(n)),a=Ga(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var c=e*a/l,u=-e*s/l,f=Qa(i,o),h=ts(i,c);Ja(h,ts(o,u));var p=f,d=Ga(h,p),m=Ga(p,p),g=d*d-m*(Ga(h,h)-1);if(!(g<0)){var v=Ya(g),y=ts(p,(-d-v)/m);if(Ja(y,h),y=Xa(y),!r)return y;var b,x=t[0],w=n[0],$=t[1],_=n[1];w<x&&(b=x,x=w,w=b);var k=w-x,M=Pa(k-Na)<Sa;if(!M&&_<$&&(b=$,$=_,_=b),M||k<Sa?M?$+_>0^y[1]<(Pa(y[0]-x)<Sa?$:_):$<=y[1]&&y[1]<=_:k>Na^(x<=y[0]&&y[0]<=w)){var C=ts(p,(-d+v)/m);return Ja(C,h),[y,Xa(C)]}}}function s(e,n){var i=r?t:Na-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return ds(o,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(f,h){var p,d=[f,h],m=o(f,h),g=r?m?0:s(f,h):m?s(f+(f<0?Na:-Na),h):0;if(!e&&(c=l=m)&&t.lineStart(),m!==l&&(!(p=a(e,d))||cs(e,p)||cs(d,p))&&(d[2]=1),m!==l)u=0,m?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(i&&e&&r^m){var v;g&n||!(v=a(d,e,!0))||(u=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!m||e&&cs(e,d)||t.point(d[0],d[1]),e=d,l=m,n=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var a=Ia(e),s=qa(e),l=r*n;null==i?(i=e+r*ja,o=e-l/2):(i=ss(a,i),o=ss(a,o),(r>0?i<o:i>o)&&(i+=r*ja));for(var c,u=i;r>0?u>o:u<o;u-=l)c=Xa([a,-s*Ia(u),-s*qa(u)]),t.point(c[0],c[1])}}(o,t,n,i,e,r)}),r?[0,-t]:[-Na,t-Na])}var bs=1e9,xs=-bs;function ws(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var u=0,f=0;if(null==i||(u=a(i,s))!==(f=a(o,s))||l(i,o)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return Pa(r[0]-t)<Sa?i>0?0:3:Pa(r[0]-n)<Sa?i>0?2:1:Pa(r[1]-e)<Sa?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,c,u,f,h,p,d,m,g,v,y,b=a,x=ls(),w={point:$,lineStart:function(){w.point=_,c&&c.push(u=[]);v=!0,g=!1,d=m=NaN},lineEnd:function(){l&&(_(f,h),p&&g&&x.rejoin(),l.push(x.result()));w.point=$,g&&b.lineEnd()},polygonStart:function(){b=x,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],l=1,u=s.length,f=s[0],h=f[0],p=f[1];l<u;++l)o=h,a=p,h=(f=s[l])[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=y&&e,i=(l=we(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&fs(l,s,e,o,a),a.polygonEnd());b=a,l=c=u=null}};function $(t,e){i(t,e)&&b.point(t,e)}function _(o,a){var s=i(o,a);if(c&&u.push([o,a]),v)f=o,h=a,p=s,v=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var l=[d=Math.max(xs,Math.min(bs,d)),m=Math.max(xs,Math.min(bs,m))],x=[o=Math.max(xs,Math.min(bs,o)),a=Math.max(xs,Math.min(bs,a))];!function(t,e,n,r,i,o){var a,s=t[0],l=t[1],c=0,u=1,f=e[0]-s,h=e[1]-l;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<u&&(u=a)}else if(f>0){if(a>u)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>u)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<u&&(u=a)}if(a=r-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=o-l,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}return c>0&&(t[0]=s+c*f,t[1]=l+c*h),u<1&&(e[0]=s+u*f,e[1]=l+u*h),!0}}}}}(l,x,t,e,n,r)?s&&(b.lineStart(),b.point(o,a),y=!1):(g||(b.lineStart(),b.point(l[0],l[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1)}d=o,m=a,g=s}return w}}var $s=t=>t,_s=1/0,ks=_s,Ms=-_s,Cs=Ms,Ts={point:function(t,e){t<_s&&(_s=t);t>Ms&&(Ms=t);e<ks&&(ks=e);e>Cs&&(Cs=e)},lineStart:Ha,lineEnd:Ha,polygonStart:Ha,polygonEnd:Ha,result:function(){var t=[[_s,ks],[Ms,Cs]];return Ms=Cs=-(ks=_s=1/0),t}};var Ss=Ts;function Ns(t){return function(e){var n=new As;for(var r in t)n[r]=t[r];return n.stream=e,n}}function As(){}function zs(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),function(t,e){t&&Va.hasOwnProperty(t.type)?Va[t.type](t,e):Ua(t,e)}(n,t.stream(Ss)),e(Ss.result()),null!=r&&t.clipExtent(r),t}function js(t,e,n){return zs(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function Ds(t,e,n){return js(t,[[0,0],e],n)}function Es(t,e,n){return zs(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function Ps(t,e,n){return zs(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}As.prototype={constructor:As,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ls=Ia(30*Ea);function Rs(t,e){return+e?function(t,e){function n(r,i,o,a,s,l,c,u,f,h,p,d,m,g){var v=c-r,y=u-i,b=v*v+y*y;if(b>4*e&&m--){var x=a+h,w=s+p,$=l+d,_=Ya(x*x+w*w+$*$),k=Oa($/=_),M=Pa(Pa($)-1)<Sa||Pa(o-f)<Sa?(o+f)/2:Ra(w,x),C=t(M,k),T=C[0],S=C[1],N=T-r,A=S-i,z=y*N-v*A;(z*z/b>e||Pa((v*N+y*A)/b-.5)>.3||a*h+s*p+l*d<Ls)&&(n(r,i,o,a,s,l,T,S,M,x/=_,w/=_,$,m,g),g.point(T,S),n(T,S,M,x,w,$,c,u,f,h,p,d,m,g))}}return function(e){var r,i,o,a,s,l,c,u,f,h,p,d,m={point:g,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=v}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){u=NaN,m.point=y,e.lineStart()}function y(r,i){var o=Za([r,i]),a=t(r,i);n(u,f,c,h,p,d,u=a[0],f=a[1],c=r,h=o[0],p=o[1],d=o[2],16,e),e.point(u,f)}function b(){m.point=g,e.lineEnd()}function x(){v(),m.point=w,m.lineEnd=$}function w(t,e){y(r=t,e),i=u,o=f,a=h,s=p,l=d,m.point=y}function $(){n(u,f,c,h,p,d,i,o,r,a,s,l,16,e),m.lineEnd=b,b()}return m}}(t,e):function(t){return Ns({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Is=Ns({point:function(t,e){this.stream.point(t*Ea,e*Ea)}});function qs(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=Ia(o),s=qa(o),l=a*t,c=s*t,u=a/t,f=s/t,h=(s*n-a*e)/t,p=(s*e+a*n)/t;function d(t,o){return[l*(t*=r)-c*(o*=i)+e,n-c*t-l*o]}return d.invert=function(t,e){return[r*(u*t-f*e+h),i*(p-f*t-u*e)]},d}function Fs(t){var e,n,r,i,o,a,s,l,c,u,f=150,h=480,p=250,d=0,m=0,g=0,v=0,y=0,b=0,x=1,w=1,$=null,_=vs,k=null,M=$s,C=.5;function T(t){return l(t[0]*Ea,t[1]*Ea)}function S(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Da,t[1]*Da]}function N(){var t=qs(f,0,0,x,w,b).apply(null,e(d,m)),r=qs(f,h-t[0],p-t[1],x,w,b);return n=function(t,e,n){return(t%=ja)?e||n?ns(os(t),as(e,n)):os(t):e||n?as(e,n):rs}(g,v,y),s=ns(e,r),l=ns(n,s),a=Rs(s,C),A()}function A(){return c=u=null,T}return T.stream=function(t){return c&&u===t?c:c=Is(function(t){return Ns({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(_(a(M(u=t)))))},T.preclip=function(t){return arguments.length?(_=t,$=void 0,A()):_},T.postclip=function(t){return arguments.length?(M=t,k=r=i=o=null,A()):M},T.clipAngle=function(t){return arguments.length?(_=+t?ys($=t*Ea):($=null,vs),A()):$*Da},T.clipExtent=function(t){return arguments.length?(M=null==t?(k=r=i=o=null,$s):ws(k=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),A()):null==k?null:[[k,r],[i,o]]},T.scale=function(t){return arguments.length?(f=+t,N()):f},T.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],N()):[h,p]},T.center=function(t){return arguments.length?(d=t[0]%360*Ea,m=t[1]%360*Ea,N()):[d*Da,m*Da]},T.rotate=function(t){return arguments.length?(g=t[0]%360*Ea,v=t[1]%360*Ea,y=t.length>2?t[2]%360*Ea:0,N()):[g*Da,v*Da,y*Da]},T.angle=function(t){return arguments.length?(b=t%360*Ea,N()):b*Da},T.reflectX=function(t){return arguments.length?(x=t?-1:1,N()):x<0},T.reflectY=function(t){return arguments.length?(w=t?-1:1,N()):w<0},T.precision=function(t){return arguments.length?(a=Rs(s,C=t*t),A()):Ya(C)},T.fitExtent=function(t,e){return js(T,t,e)},T.fitSize=function(t,e){return Ds(T,t,e)},T.fitWidth=function(t,e){return Es(T,t,e)},T.fitHeight=function(t,e){return Ps(T,t,e)},function(){return e=t.apply(this,arguments),T.invert=e.invert&&S,N()}}function Ys(t,e){var n=qa(t),r=(n+qa(e))/2;if(Pa(r)<Sa)return function(t){var e=Ia(t);function n(t,n){return[t*e,qa(n)/e]}return n.invert=function(t,n){return[t/e,Oa(n*e)]},n}(t);var i=1+n*(2*r-n),o=Ya(i)/r;function a(t,e){var n=Ya(i-2*r*qa(e))/r;return[n*qa(t*=r),o-n*Ia(t)]}return a.invert=function(t,e){var n=o-e,a=Ra(t,Pa(n))*Fa(n);return n*r<0&&(a-=Na*Fa(t)*Fa(n)),[a/r,Oa((i-(t*t+n*n)*r*r)/(2*r))]},a}function Os(){return function(t){var e=0,n=Na/3,r=Fs(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ea,n=t[1]*Ea):[e*Da,n*Da]},i}(Ys).scale(155.424).center([0,33.6442])}function Hs(){var t,e,n,r,i,o,a=Os().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]),s=Os().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Os().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function u(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(t)},u.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),l.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},u.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),f()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],u=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,u-.238*e],[o+.455*e,u+.238*e]]).stream(c),r=s.translate([o-.307*e,u+.201*e]).clipExtent([[o-.425*e+Sa,u+.12*e+Sa],[o-.214*e-Sa,u+.234*e-Sa]]).stream(c),i=l.translate([o-.205*e,u+.212*e]).clipExtent([[o-.214*e+Sa,u+.166*e+Sa],[o-.115*e-Sa,u+.234*e-Sa]]).stream(c),f()},u.fitExtent=function(t,e){return js(u,t,e)},u.fitSize=function(t,e){return Ds(u,t,e)},u.fitWidth=function(t,e){return Es(u,t,e)},u.fitHeight=function(t,e){return Ps(u,t,e)},u.scale(1070)}function Us(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,l,c,u,f,h,p=t._root,d={data:r},m=t._x0,g=t._y0,v=t._x1,y=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+y)/2))?g=a:y=a,i=p,!(p=p[f=u<<1|c]))return i[f]=d,t;if(s=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===s&&n===l)return d.next=p,i?i[f]=d:t._root=d,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+v)/2))?m=o:v=o,(u=n>=(a=(g+y)/2))?g=a:y=a}while((f=u<<1|c)==(h=(l>=a)<<1|s>=o));return i[h]=p,i[f]=d,t}function Vs(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Bs(t){return t[0]}function Ws(t){return t[1]}function Ks(t,e,n){var r=new Xs(null==e?Bs:e,null==n?Ws:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Xs(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Zs(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Gs=Ks.prototype=Xs.prototype;function Qs(t){return function(){return t}}function Js(t){return 1e-6*(t()-.5)}function tl(t){return t.x+t.vx}function el(t){return t.y+t.vy}function nl(t){var e,n,r,i=1,o=1;function a(){for(var t,a,l,c,u,f,h,p=e.length,d=0;d<o;++d)for(a=Ks(e,tl,el).visitAfter(s),t=0;t<p;++t)l=e[t],f=n[l.index],h=f*f,c=l.x+l.vx,u=l.y+l.vy,a.visit(m);function m(t,e,n,o,a){var s=t.data,p=t.r,d=f+p;if(!s)return e>c+d||o<c-d||n>u+d||a<u-d;if(s.index>l.index){var m=c-s.x-s.vx,g=u-s.y-s.vy,v=m*m+g*g;v<d*d&&(0===m&&(v+=(m=Js(r))*m),0===g&&(v+=(g=Js(r))*g),v=(d-(v=Math.sqrt(v)))/v*i,l.vx+=(m*=v)*(d=(p*=p)/(h+p)),l.vy+=(g*=v)*d,s.vx-=m*(d=1-d),s.vy-=g*d)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Qs(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,l()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Qs(+e),l(),a):t},a}Gs.copy=function(){var t,e,n=new Xs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Zs(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Zs(e));return n},Gs.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Us(this.cover(e,n),e,n,t)},Gs.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>f&&(f=i));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<o;++n)Us(this,a[n],s[n],t[n]);return this},Gs.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,l=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Gs.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Gs.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Gs.find=function(t,e,n){var r,i,o,a,s,l,c,u=this._x0,f=this._y0,h=this._x1,p=this._y1,d=[],m=this._root;for(m&&d.push(new Vs(m,u,f,h,p)),null==n?n=1/0:(u=t-n,f=e-n,h=t+n,p=e+n,n*=n);l=d.pop();)if(!(!(m=l.node)||(i=l.x0)>h||(o=l.y0)>p||(a=l.x1)<u||(s=l.y1)<f))if(m.length){var g=(i+a)/2,v=(o+s)/2;d.push(new Vs(m[3],g,v,a,s),new Vs(m[2],i,v,g,s),new Vs(m[1],g,o,a,v),new Vs(m[0],i,o,g,v)),(c=(e>=v)<<1|t>=g)&&(l=d[d.length-1],d[d.length-1]=d[d.length-1-c],d[d.length-1-c]=l)}else{var y=t-+this._x.call(null,m.data),b=e-+this._y.call(null,m.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);u=t-w,f=e-w,h=t+w,p=e+w,r=m.data}}return r},Gs.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,l,c,u,f,h,p=this._root,d=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(s=(d+g)/2))?d=s:g=s,(u=a>=(l=(m+v)/2))?m=l:v=l,e=p,!(p=p[f=u<<1|c]))return this;if(!p.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[h]=p:this._root=p),this):(this._root=i,this)},Gs.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Gs.root=function(){return this._root},Gs.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Gs.visit=function(t){var e,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new Vs(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&l.length){var c=(r+o)/2,u=(i+a)/2;(n=l[3])&&s.push(new Vs(n,c,u,o,a)),(n=l[2])&&s.push(new Vs(n,r,u,c,a)),(n=l[1])&&s.push(new Vs(n,c,i,o,u)),(n=l[0])&&s.push(new Vs(n,r,i,c,u))}return this},Gs.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Vs(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(a+l)/2,f=(s+c)/2;(o=i[0])&&n.push(new Vs(o,a,s,u,f)),(o=i[1])&&n.push(new Vs(o,u,s,l,f)),(o=i[2])&&n.push(new Vs(o,a,f,u,c)),(o=i[3])&&n.push(new Vs(o,u,f,l,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Gs.x=function(t){return arguments.length?(this._x=t,this):this._x},Gs.y=function(t){return arguments.length?(this._y=t,this):this._y};var rl={value:()=>{}};function il(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new ol(r)}function ol(t){this._=t}function al(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function sl(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function ll(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=rl,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}ol.prototype=il.prototype={constructor:ol,on:function(t,e){var n,r=this._,i=al(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=ll(r[n],t.name,e);else if(null==e)for(n in r)r[n]=ll(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=sl(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ol(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var cl,ul,fl=0,hl=0,pl=0,dl=0,ml=0,gl=0,vl="object"==typeof performance&&performance.now?performance:Date,yl="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function bl(){return ml||(yl(xl),ml=vl.now()+gl)}function xl(){ml=0}function wl(){this._call=this._time=this._next=null}function $l(t,e,n){var r=new wl;return r.restart(t,e,n),r}function _l(){ml=(dl=vl.now())+gl,fl=hl=0;try{!function(){bl(),++fl;for(var t,e=cl;e;)(t=ml-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fl}()}finally{fl=0,function(){var t,e,n=cl,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:cl=e);ul=t,Ml(r)}(),ml=0}}function kl(){var t=vl.now(),e=t-dl;e>1e3&&(gl-=e,dl=t)}function Ml(t){fl||(hl&&(hl=clearTimeout(hl)),t-ml>24?(t<1/0&&(hl=setTimeout(_l,t-vl.now()-gl)),pl&&(pl=clearInterval(pl))):(pl||(dl=vl.now(),pl=setInterval(kl,1e3)),fl=1,yl(_l)))}wl.prototype=$l.prototype={constructor:wl,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?bl():+n)+(null==e?0:+e),this._next||ul===this||(ul?ul._next=this:cl=this,ul=this),this._call=t,this._time=n,Ml()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ml())}};const Cl=4294967296;function Tl(t){return t.x}function Sl(t){return t.y}var Nl=Math.PI*(3-Math.sqrt(5));function Al(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=$l(f),c=il("tick","end"),u=function(){let t=1;return()=>(t=(1664525*t+1013904223)%Cl)/Cl}();function f(){h(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function h(r){var l,c,u=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),l=0;l<u;++l)null==(c=t[l]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*Nl;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t,u),e}return null==t&&(t=[]),p(),e={tick:h,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(u=t,s.forEach(d),e):u},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,l,c=0,u=t.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(l=s,r=a);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function zl(){var t,e,n,r,i,o=Qs(-30),a=1,s=1/0,l=.81;function c(n){var i,o=t.length,a=Ks(t,Tl,Sl).visitAfter(f);for(r=n,i=0;i<o;++i)e=t[i],a.visit(h)}function u(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function f(t){var e,n,r,o,a,s=0,l=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,l+=n,r+=n*e.x,o+=n*e.y);t.x=r/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,o,c,u){if(!t.value)return!0;var f=t.x-e.x,h=t.y-e.y,p=u-o,d=f*f+h*h;if(p*p/l<d)return d<s&&(0===f&&(d+=(f=Js(n))*f),0===h&&(d+=(h=Js(n))*h),d<a&&(d=Math.sqrt(a*d)),e.vx+=f*t.value*r/d,e.vy+=h*t.value*r/d),!0;if(!(t.length||d>=s)){(t.data!==e||t.next)&&(0===f&&(d+=(f=Js(n))*f),0===h&&(d+=(h=Js(n))*h),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(p=i[t.data.index]*r/d,e.vx+=f*p,e.vy+=h*p)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,u()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:Qs(+t),u(),c):o},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(l=t*t,c):Math.sqrt(l)},c}const jl=Math.PI,Dl=2*jl,El=1e-6,Pl=Dl-El;function Ll(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Rl(){return new Ll}function Il(t,e,n){const r=t.slice();return r[28]=e[n],r}function ql(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,m,g,v,y,b,x,w=t[28].abbr+"";function $(...e){return t[17](t[28],...e)}return{c(){e=A("g"),n=A("path"),o=A("path"),l=A("path"),h=A("text"),p=z(w),R(n,"class","node svelte-bbhs7x"),R(n,"fill",r=t[28].fillR),R(n,"d",i=t[28].rightPathString),R(o,"class","node svelte-bbhs7x"),R(o,"fill",a=t[28].fillL),R(o,"d",s=t[28].leftPathString),R(l,"class","node node-stroke svelte-bbhs7x"),R(l,"fill",c="none"),R(l,"stroke",u="black"),R(l,"d",f=t[28].fullPath),R(h,"class",m=d("state-label "+(t[1]?"active":""))+" svelte-bbhs7x"),R(h,"fill","black"),R(h,"dx",g=(t[28].r_L+3)*Math.cos(3*Math.PI/4)),R(h,"dy",v=-(t[28].r_L+3)*Math.cos(3*Math.PI/4)),R(e,"class","node-group svelte-bbhs7x"),R(e,"transform",y=`translate(${t[28].x}, ${t[28].y})`)},m(t,r){C(t,e,r),_(e,n),_(e,o),_(e,l),_(e,h),_(h,p),b||(x=E(e,"click",$),b=!0)},p(c,u){t=c,1&u&&r!==(r=t[28].fillR)&&R(n,"fill",r),1&u&&i!==(i=t[28].rightPathString)&&R(n,"d",i),1&u&&a!==(a=t[28].fillL)&&R(o,"fill",a),1&u&&s!==(s=t[28].leftPathString)&&R(o,"d",s),1&u&&f!==(f=t[28].fullPath)&&R(l,"d",f),1&u&&w!==(w=t[28].abbr+"")&&I(p,w),2&u&&m!==(m=d("state-label "+(t[1]?"active":""))+" svelte-bbhs7x")&&R(h,"class",m),1&u&&g!==(g=(t[28].r_L+3)*Math.cos(3*Math.PI/4))&&R(h,"dx",g),1&u&&v!==(v=-(t[28].r_L+3)*Math.cos(3*Math.PI/4))&&R(h,"dy",v),1&u&&y!==(y=`translate(${t[28].x}, ${t[28].y})`)&&R(e,"transform",y)},d(t){t&&T(e),b=!1,x()}}}function Fl(e){let n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=ql(Il(e,r,t));return{c(){n=A("g");for(let t=0;t<i.length;t+=1)i[t].c();R(n,"class","bee-group")},m(t,e){C(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,[e]){if(131&e){let o;for(r=t[0],o=0;o<r.length;o+=1){const a=Il(t,r,o);i[o]?i[o].p(a,e):(i[o]=ql(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&T(n),S(i,t)}}}Ll.prototype=Rl.prototype={constructor:Ll,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,l=r-e,c=o-t,u=a-e,f=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>El)if(Math.abs(u*s-l*c)>El&&i){var h=n-o,p=r-a,d=s*s+l*l,m=h*h+p*p,g=Math.sqrt(d),v=Math.sqrt(f),y=i*Math.tan((jl-Math.acos((d+f-m)/(2*g*v)))/2),b=y/v,x=y/g;Math.abs(b-1)>El&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+i+","+i+",0,0,"+ +(u*h>c*p)+","+(this._x1=t+x*s)+","+(this._y1=e+x*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,u=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>El||Math.abs(this._y1-c)>El)&&(this._+="L"+l+","+c),n&&(f<0&&(f=f%Dl+Dl),f>Pl?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):f>El&&(this._+="A"+n+","+n+",0,"+ +(f>=jl)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Yl(t,e){return t.arc(0,0,e.r,e.start,e.end),t.closePath(),t}function Ol(t,e,n){let r,i,o,a,s,c;const{height:u,width:f,rScale:h,zScale:p,data:d}=rt("LayerCake");l(t,u,(t=>n(15,a=t))),l(t,f,(t=>n(16,s=t))),l(t,h,(t=>n(20,c=t))),l(t,p,(t=>n(19,i=t))),l(t,d,(t=>n(14,o=t)));let{collideStrength:m=1}=e,{manyBodyStrength:g=1}=e,{medium:v}=e,{diet_threshold:y}=e,{partisanship_scenario:b}=e;const x=nt(),w=Hs();function $(){k.alpha(1).restart()}w.translate([s/2,a/2]);let _=[],k=Al().alpha(0).alphaMin(.4).force("collide",nl((t=>t.r+9.5)).strength(m).iterations(5)).force("charge",zl().strength(g));function M(t){return t.map(((t,e)=>{const[n,r]=w(t.coordinates);c(Math.abs(t.data.value));const o=c(Math.abs(t.data.left_pct)),a=c(Math.abs(t.data.right_pct)),s=Yl(Rl(),{r:a,start:-Math.PI/2,end:Math.PI/2}),l=i(1*t.data.right_pct),u=Yl(Rl(),{r:o,start:Math.PI/2,end:-Math.PI/2}),f=i(-1*t.data.left_pct),h=(p=Rl(),d={r:a},m={r:o},p.arc(0,0,d.r,-Math.PI/2,Math.PI/2),p.arc(0,0,m.r,Math.PI/2,-Math.PI/2),p.closePath(),p);var p,d,m;return{...t,FAKE_VALUE:Math.random()*t.population/1e6,x:n,y:r,r:Math.max(o,a),r_L:o,r_R:a,rightPathString:s,fillR:l,leftPathString:u,fillL:f,fullPath:h}}))}function C(t,e){x("click",{target:t.target,node:e})}Me().domain(i.range()).range(["gainsboro","gainsboro","black","gainsboro","gainsboro"]);return t.$$set=t=>{"collideStrength"in t&&n(8,m=t.collideStrength),"manyBodyStrength"in t&&n(9,g=t.manyBodyStrength),"medium"in t&&n(10,v=t.medium),"diet_threshold"in t&&n(11,y=t.diet_threshold),"partisanship_scenario"in t&&n(12,b=t.partisanship_scenario)},t.$$.update=()=>{16384&t.$$.dirty&&n(0,_=M(o)),8193&t.$$.dirty&&n(13,k=k.nodes(_).on("tick",(()=>{n(0,_=k.nodes())})).on("end",(()=>{n(1,r=!0)}))),7168&t.$$.dirty&&$(),114688&t.$$.dirty&&(w.translate([s/2,a/2]),n(0,_=n(0,_=M(o))),$())},n(1,r=!1),[_,r,u,f,h,p,d,C,m,g,v,y,b,k,o,a,s,(t,e)=>C(e,t)]}class Hl extends Pt{constructor(t){super(),Et(this,t,Ol,Fl,a,{collideStrength:8,manyBodyStrength:9,medium:10,diet_threshold:11,partisanship_scenario:12})}}function Ul(t,e,n){const r=t.slice();r[28]=e[n];const i=r[2](r[28].data[`${r[1]}_pct`]);return r[29]=i,r}function Vl(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,m=t[28].abbr+"";function g(...e){return t[23](t[28],...e)}return{c(){e=A("g"),n=A("circle"),s=A("text"),l=z(m),R(n,"class","node svelte-11jqfcd"),R(n,"fill",r=t[29]),R(n,"cx",i=0),R(n,"cy",o=0),R(n,"r",a=t[28].r),R(s,"class",c=d("state-label "+(t[4]?"active":""))+" svelte-11jqfcd"),R(s,"fill",u=t[3](t[29])),R(e,"class","node-group svelte-11jqfcd"),R(e,"transform",f=`translate(${t[28].x}, ${t[28].y})`)},m(t,r){C(t,e,r),_(e,n),_(e,s),_(s,l),h||(p=E(n,"click",g),h=!0)},p(i,o){t=i,7&o[0]&&r!==(r=t[29])&&R(n,"fill",r),1&o[0]&&a!==(a=t[28].r)&&R(n,"r",a),1&o[0]&&m!==(m=t[28].abbr+"")&&I(l,m),16&o[0]&&c!==(c=d("state-label "+(t[4]?"active":""))+" svelte-11jqfcd")&&R(s,"class",c),15&o[0]&&u!==(u=t[3](t[29]))&&R(s,"fill",u),1&o[0]&&f!==(f=`translate(${t[28].x}, ${t[28].y})`)&&R(e,"transform",f)},d(t){t&&T(e),h=!1,p()}}}function Bl(e){let n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=Vl(Ul(e,r,t));return{c(){n=A("g");for(let t=0;t<i.length;t+=1)i[t].c();R(n,"class","bee-group")},m(t,e){C(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,e){if(1055&e[0]){let o;for(r=t[0],o=0;o<r.length;o+=1){const a=Ul(t,r,o);i[o]?i[o].p(a,e):(i[o]=Vl(a),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&T(n),S(i,t)}}}function Wl(t,e,n){let r,i,o,a,s,c,u,f,h;const{height:p,width:d,rScale:m,zScale:g,data:v}=rt("LayerCake");l(t,p,(t=>n(21,f=t))),l(t,d,(t=>n(22,h=t))),l(t,m,(t=>n(19,c=t))),l(t,g,(t=>n(2,s=t))),l(t,v,(t=>n(20,u=t)));let{collideStrength:y=1}=e,{manyBodyStrength:b=1}=e,{medium:x}=e,{diet_threshold:w}=e,{partisanship_scenario:$}=e,{political_lean:_}=e;const k=nt(),M=Hs();function C(){S.alpha(1).restart()}M.translate([h/2,f/2]);let T=[],S=Al().alpha(0).alphaMin(.4).force("collide",nl((t=>t.r+10)).strength(y).iterations(2)).force("charge",zl().strength(b));function N(t,e){k("click",{target:t.target,node:e})}return t.$$set=t=>{"collideStrength"in t&&n(11,y=t.collideStrength),"manyBodyStrength"in t&&n(12,b=t.manyBodyStrength),"medium"in t&&n(13,x=t.medium),"diet_threshold"in t&&n(14,w=t.diet_threshold),"partisanship_scenario"in t&&n(15,$=t.partisanship_scenario),"political_lean"in t&&n(16,_=t.political_lean)},t.$$.update=()=>{65536&t.$$.dirty[0]&&n(1,i="R"===_?"right":"left"),1572866&t.$$.dirty[0]&&n(0,T=u.map(((t,e)=>{const[n,r]=M(t.coordinates);return{...t,x:n,y:r,r:c(t.data[`${i}_pct`])}}))),131073&t.$$.dirty[0]&&n(17,S=S.nodes(T).on("tick",(()=>{n(0,T=S.nodes())})).on("end",(()=>{n(4,r=!0)}))),57344&t.$$.dirty[0]&&C(),7864322&t.$$.dirty[0]&&(M.translate([h/2,f/2]),n(0,T=u.map(((t,e)=>{const[n,r]=M(t.coordinates);return{...t,x:n,y:r,r:c(t.data[`${i}_pct`])}}))),C()),65536&t.$$.dirty[0]&&n(18,o=["black","black","black","gainsboro","gainsboro"]),262148&t.$$.dirty[0]&&n(3,a=Me().domain(s.range()).range(o))},n(4,r=!1),[T,i,s,a,r,p,d,m,g,v,N,y,b,x,w,$,_,S,o,c,u,f,h,(t,e)=>N(e,t)]}class Kl extends Pt{constructor(t){super(),Et(this,t,Wl,Bl,a,{collideStrength:11,manyBodyStrength:12,medium:13,diet_threshold:14,partisanship_scenario:15,political_lean:16},null,[-1,-1])}}function Xl(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Zl(t){const e=t-1;return e*e*e+1}function Gl(t,{delay:n=0,duration:r=400,easing:i=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>"opacity: "+t*o}}function Ql(t,{delay:e=0,duration:n=400,easing:r=Zl,start:i=0,opacity:o=0}={}){const a=getComputedStyle(t),s=+a.opacity,l="none"===a.transform?"":a.transform,c=1-i,u=s*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${l} scale(${1-c*e});\n\t\t\topacity: ${s-u*e}\n\t\t`}}function Jl(t,{delay:e=0,speed:n,duration:r,easing:i=Xl}={}){let o=t.getTotalLength();const a=getComputedStyle(t);return"butt"!==a.strokeLinecap&&(o+=parseInt(a.strokeWidth)),void 0===r?r=void 0===n?800:o/n:"function"==typeof r&&(r=r(o)),{delay:e,duration:r,easing:i,css:(t,e)=>`stroke-dasharray: ${t*o} ${e*o}`}}function tc(t){return function(){return t}}function ec(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function nc(t){this._context=t}function rc(t){return new nc(t)}function ic(t){return t[0]}function oc(t){return t[1]}function ac(t,e){var n=tc(!0),r=null,i=rc,o=null;function a(a){var s,l,c,u=(a=ec(a)).length,f=!1;for(null==r&&(o=i(c=Rl())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(l,s,a),+e(l,s,a));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?ic:tc(t),e="function"==typeof e?e:void 0===e?oc:tc(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:tc(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:tc(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:tc(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function sc(t,e,n){var r=null,i=tc(!0),o=null,a=rc,s=null;function l(l){var c,u,f,h,p,d=(l=ec(l)).length,m=!1,g=new Array(d),v=new Array(d);for(null==o&&(s=a(p=Rl())),c=0;c<=d;++c){if(!(c<d&&i(h=l[c],c,l))===m)if(m=!m)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=u;--f)s.point(g[f],v[f]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+t(h,c,l),v[c]=+e(h,c,l),s.point(r?+r(h,c,l):g[c],n?+n(h,c,l):v[c]))}if(p)return s=null,p+""||null}function c(){return ac().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?ic:tc(+t),e="function"==typeof e?e:tc(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?oc:tc(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:tc(+e),r=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:tc(+e),l):t},l.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:tc(+t),l):r},l.y=function(t){return arguments.length?(e="function"==typeof t?t:tc(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:tc(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:tc(+t),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(t){return arguments.length?(i="function"==typeof t?t:tc(!!t),l):i},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l}function lc(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function cc(t){this._context=t}function uc(t){return new cc(t)}function fc(t){this._context=t}function hc(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function pc(t){return new fc(t)}function dc(t,e,n){const r=t.slice();r[14]=e[n],r[18]=n;const i=r[14][1][0][1].map(((t,e)=>({...t,value_2:r[14][1][1][1][e].value})));r[15]=i;const o=r[4](r[14][0]);return r[16]=o,r}function mc(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function gc(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function vc(e,n){let r,i,o,a,s,l=t;return{key:e,first:null,c(){r=A("path"),R(r,"class",i=d(`path-line path-line-${n[19][0]}`)+" svelte-bfpx4i"),R(r,"d",o=n[2](n[19][1])),R(r,"stroke",a=n[16]),this.first=r},m(t,e){C(t,r,e)},p(t,e){n=t,8&e&&i!==(i=d(`path-line path-line-${n[19][0]}`)+" svelte-bfpx4i")&&R(r,"class",i),12&e&&o!==(o=n[2](n[19][1]))&&R(r,"d",o),24&e&&a!==(a=n[16])&&R(r,"stroke",a)},r(){s=r.getBoundingClientRect()},f(){Q(r),l()},a(){l(),l=G(r,s,wc,{delay:0,duration:500})},d(t){t&&T(r)}}}function yc(e,n){let r,i,o,a,s,l=t;return{key:e,first:null,c(){r=A("path"),R(r,"class",i=d(`path-polygon path-polygon-${n[19][0]}`)+" svelte-bfpx4i"),R(r,"d",o=n[1](n[15])),R(r,"fill",a=n[16]),this.first=r},m(t,e){C(t,r,e)},p(t,e){n=t,8&e&&i!==(i=d(`path-polygon path-polygon-${n[19][0]}`)+" svelte-bfpx4i")&&R(r,"class",i),10&e&&o!==(o=n[1](n[15]))&&R(r,"d",o),24&e&&a!==(a=n[16])&&R(r,"fill",a)},r(){s=r.getBoundingClientRect()},f(){Q(r),l()},a(){l(),l=G(r,s,$c,{delay:500,duration:500})},d(t){t&&T(r)}}}function bc(t){let e,n,r,i=[],o=new Map,a=[],s=new Map,l=t[14][1].filter(_c);const c=t=>t[19];for(let e=0;e<l.length;e+=1){let n=gc(t,l,e),r=c(n);o.set(r,i[e]=vc(r,n))}let u=t[14][1].filter(kc);const f=t=>t[19];for(let e=0;e<u.length;e+=1){let n=mc(t,u,e),r=f(n);s.set(r,a[e]=yc(r,n))}return{c(){e=A("g");for(let t=0;t<i.length;t+=1)i[t].c();n=D();for(let t=0;t<a.length;t+=1)a[t].c();R(e,"class",r="threshold-group threshold-group-"+t[14][0]+" svelte-bfpx4i")},m(t,r){C(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);_(e,n);for(let t=0;t<a.length;t+=1)a[t].m(e,null)},p(t,h){if(28&h){l=t[14][1].filter(_c);for(let t=0;t<i.length;t+=1)i[t].r();i=St(i,h,c,1,t,l,o,e,Tt,vc,n,gc);for(let t=0;t<i.length;t+=1)i[t].a()}if(26&h){u=t[14][1].filter(kc);for(let t=0;t<a.length;t+=1)a[t].r();a=St(a,h,f,1,t,u,s,e,Tt,yc,null,mc);for(let t=0;t<a.length;t+=1)a[t].a()}8&h&&r!==(r="threshold-group threshold-group-"+t[14][0]+" svelte-bfpx4i")&&R(e,"class",r)},d(t){t&&T(e);for(let t=0;t<i.length;t+=1)i[t].d();for(let t=0;t<a.length;t+=1)a[t].d()}}}function xc(e){let n,r,i=e[3],o=[];for(let t=0;t<i.length;t+=1)o[t]=bc(dc(e,i,t));return{c(){n=A("g");for(let t=0;t<o.length;t+=1)o[t].c();R(n,"class",r=d(`line-group line-group-${e[0]}`)+" svelte-bfpx4i")},m(t,e){C(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(30&e){let r;for(i=t[3],r=0;r<i.length;r+=1){const a=dc(t,i,r);o[r]?o[r].p(a,e):(o[r]=bc(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}1&e&&r!==(r=d(`line-group line-group-${t[0]}`)+" svelte-bfpx4i")&&R(n,"class",r)},i:t,o:t,d(t){t&&T(n),S(o,t)}}}function wc(t,{from:e,to:n},{delay:r,duration:i}){const o=t.getTotalLength();return{delay:r,duration:i,css:(t,e)=>`stroke-dasharray: ${t*o} ${e*o}`}}function $c(t,{from:e,to:n},{delay:r,duration:i}){return{delay:r,duration:i,css:(t,e)=>"opacity: "+1*t}}nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},cc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:lc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lc(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},fc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=hc(t),i=hc(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const _c=t=>50===t[0],kc=t=>50===t[0];function Mc(t,e,n){let r,i,o,a,s,c,u;const{data:f,xGet:h,yGet:p,xScale:d,yScale:m,zScale:g}=rt("LayerCake");l(t,f,(t=>n(3,c=t))),l(t,h,(t=>n(12,s=t))),l(t,p,(t=>n(11,a=t))),l(t,m,(t=>n(10,o=t))),l(t,g,(t=>n(4,u=t)));let{activeChart:v}=e;return t.$$set=t=>{"activeChart"in t&&n(0,v=t.activeChart)},t.$$.update=()=>{6144&t.$$.dirty&&n(2,r=ac().x((t=>s(t))).y((t=>a(t))).curve(uc)),7168&t.$$.dirty&&n(1,i=sc().x((t=>s(t))).y0((t=>a(t))).y1((t=>o(t.value_2))).curve(uc))},[v,i,r,c,u,f,h,p,m,g,o,a,s]}class Cc extends Pt{constructor(t){super(),Et(this,t,Mc,xc,a,{activeChart:0})}}function Tc(t,e,n){const r=t.slice();return r[19]=e[n],r[21]=n,r}function Sc(t){let e,n;return{c(){e=A("line"),R(e,"class","gridline svelte-11s23aw"),R(e,"y1",n=-1*t[11]),R(e,"y2","0"),R(e,"x1","0"),R(e,"x2","0")},m(t,n){C(t,e,n)},p(t,r){2048&r&&n!==(n=-1*t[11])&&R(e,"y1",n)},d(t){t&&T(e)}}}function Nc(t){let e,n,r;return{c(){e=A("line"),R(e,"class","tick-mark svelte-11s23aw"),R(e,"y1",0),R(e,"y2",6),R(e,"x1",n=t[5]||t[7]?t[8].bandwidth()/2:0),R(e,"x2",r=t[5]||t[7]?t[8].bandwidth()/2:0)},m(t,n){C(t,e,n)},p(t,i){416&i&&n!==(n=t[5]||t[7]?t[8].bandwidth()/2:0)&&R(e,"x1",n),416&i&&r!==(r=t[5]||t[7]?t[8].bandwidth()/2:0)&&R(e,"x2",r)},d(t){t&&T(e)}}}function Ac(t){let e,n,r,i,o,a,s,l,c=t[4](t[19])+"",u=!1!==t[0]&&Sc(t),f=!0===t[1]&&Nc(t);return{c(){e=A("g"),u&&u.c(),n=D(),f&&f.c(),r=A("text"),i=z(c),R(r,"x",o=t[5]||t[7]?t[8].bandwidth()/2:0),R(r,"y",t[6]),R(r,"dx",""),R(r,"dy",""),R(r,"text-anchor",a=t[17](t[21])),R(r,"class","svelte-11s23aw"),R(e,"class",s="tick tick-"+t[21]+" svelte-11s23aw"),R(e,"transform",l="translate("+t[8](t[19])+","+t[10][0]+")")},m(t,o){C(t,e,o),u&&u.m(e,null),_(e,n),f&&f.m(e,null),_(e,r),_(r,i)},p(t,a){!1!==t[0]?u?u.p(t,a):(u=Sc(t),u.c(),u.m(e,n)):u&&(u.d(1),u=null),!0===t[1]?f?f.p(t,a):(f=Nc(t),f.c(),f.m(e,r)):f&&(f.d(1),f=null),528&a&&c!==(c=t[4](t[19])+"")&&I(i,c),416&a&&o!==(o=t[5]||t[7]?t[8].bandwidth()/2:0)&&R(r,"x",o),64&a&&R(r,"y",t[6]),1792&a&&l!==(l="translate("+t[8](t[19])+","+t[10][0]+")")&&R(e,"transform",l)},d(t){t&&T(e),u&&u.d(),f&&f.d()}}}function zc(t){let e,n,r;return{c(){e=A("line"),R(e,"class","baseline svelte-11s23aw"),R(e,"y1",n=t[11]+.5),R(e,"y2",r=t[11]+.5),R(e,"x1","0"),R(e,"x2",t[12])},m(t,n){C(t,e,n)},p(t,i){2048&i&&n!==(n=t[11]+.5)&&R(e,"y1",n),2048&i&&r!==(r=t[11]+.5)&&R(e,"y2",r),4096&i&&R(e,"x2",t[12])},d(t){t&&T(e)}}}function jc(e){let n,r,i=e[9],o=[];for(let t=0;t<i.length;t+=1)o[t]=Ac(Tc(e,i,t));let a=!0===e[2]&&zc(e);return{c(){n=A("g");for(let t=0;t<o.length;t+=1)o[t].c();r=D(),a&&a.c(),R(n,"class","axis x-axis svelte-11s23aw"),U(n,"snapTicks",e[3])},m(t,e){C(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);_(n,r),a&&a.m(n,null)},p(t,[e]){if(135155&e){let a;for(i=t[9],a=0;a<i.length;a+=1){const s=Tc(t,i,a);o[a]?o[a].p(s,e):(o[a]=Ac(s),o[a].c(),o[a].m(n,r))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}!0===t[2]?a?a.p(t,e):(a=zc(t),a.c(),a.m(n,null)):a&&(a.d(1),a=null),8&e&&U(n,"snapTicks",t[3])},i:t,o:t,d(t){t&&T(n),S(o,t),a&&a.d()}}}function Dc(t,e,n){let r,i,o,a,s,c;const{width:u,height:f,xScale:h,yRange:p}=rt("LayerCake");l(t,u,(t=>n(12,c=t))),l(t,f,(t=>n(11,s=t))),l(t,h,(t=>n(8,o=t))),l(t,p,(t=>n(10,a=t)));let{gridlines:d=!0}=e,{tickMarks:m=!1}=e,{baseline:g=!1}=e,{snapTicks:v=!1}=e,{formatTick:y=(t=>t)}=e,{ticks:b}=e,{xTick:x=0}=e,{yTick:w=16}=e;return t.$$set=t=>{"gridlines"in t&&n(0,d=t.gridlines),"tickMarks"in t&&n(1,m=t.tickMarks),"baseline"in t&&n(2,g=t.baseline),"snapTicks"in t&&n(3,v=t.snapTicks),"formatTick"in t&&n(4,y=t.formatTick),"ticks"in t&&n(18,b=t.ticks),"xTick"in t&&n(5,x=t.xTick),"yTick"in t&&n(6,w=t.yTick)},t.$$.update=()=>{256&t.$$.dirty&&n(7,r="function"==typeof o.bandwidth),262528&t.$$.dirty&&n(9,i=Array.isArray(b)?b:r?o.domain():"function"==typeof b?b(o.ticks()):o.ticks(b))},[d,m,g,v,y,x,w,r,o,i,a,s,c,u,f,h,p,function(t){if(!0===v){if(0===t)return"start";if(t===i.length-1)return"end"}return"middle"},b]}class Ec extends Pt{constructor(t){super(),Et(this,t,Dc,jc,a,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:18,xTick:5,yTick:6})}}function Pc(t,e,n){const r=t.slice();return r[17]=e[n],r[19]=n,r}function Lc(t){let e,n,r;return{c(){e=A("line"),R(e,"class","gridline svelte-6edweo"),R(e,"x2","100%"),R(e,"y1",n=t[4]+(t[8]?t[9].bandwidth()/2:0)),R(e,"y2",r=t[4]+(t[8]?t[9].bandwidth()/2:0))},m(t,n){C(t,e,n)},p(t,i){784&i&&n!==(n=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(e,"y1",n),784&i&&r!==(r=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(e,"y2",r)},d(t){t&&T(e)}}}function Rc(t){let e,n,r,i;return{c(){e=A("line"),R(e,"class","tick-mark svelte-6edweo"),R(e,"x1","0"),R(e,"x2",n=t[8]?-6:6),R(e,"y1",r=t[4]+(t[8]?t[9].bandwidth()/2:0)),R(e,"y2",i=t[4]+(t[8]?t[9].bandwidth()/2:0))},m(t,n){C(t,e,n)},p(t,o){256&o&&n!==(n=t[8]?-6:6)&&R(e,"x2",n),784&o&&r!==(r=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(e,"y1",r),784&o&&i!==(i=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(e,"y2",i)},d(t){t&&T(e)}}}function Ic(t){let e,n,r,i,o,a,s,l,c,u=t[2](t[17],t[19],t[10].length)+"",f=!1!==t[0]&&Lc(t),h=!0===t[1]&&Rc(t);return{c(){e=A("g"),f&&f.c(),n=D(),h&&h.c(),r=A("text"),i=z(u),R(r,"x",t[3]),R(r,"y",o=t[4]+(t[8]?t[9].bandwidth()/2:0)),R(r,"dx",a=t[8]?-9:t[5]),R(r,"dy",s=t[8]?4:t[6]),q(r,"text-anchor",t[8]?"end":t[7]),R(r,"class","svelte-6edweo"),R(e,"class",l="tick tick-"+t[17]+" svelte-6edweo"),R(e,"transform",c="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")},m(t,o){C(t,e,o),f&&f.m(e,null),_(e,n),h&&h.m(e,null),_(e,r),_(r,i)},p(t,p){!1!==t[0]?f?f.p(t,p):(f=Lc(t),f.c(),f.m(e,n)):f&&(f.d(1),f=null),!0===t[1]?h?h.p(t,p):(h=Rc(t),h.c(),h.m(e,r)):h&&(h.d(1),h=null),1028&p&&u!==(u=t[2](t[17],t[19],t[10].length)+"")&&I(i,u),8&p&&R(r,"x",t[3]),784&p&&o!==(o=t[4]+(t[8]?t[9].bandwidth()/2:0))&&R(r,"y",o),288&p&&a!==(a=t[8]?-9:t[5])&&R(r,"dx",a),320&p&&s!==(s=t[8]?4:t[6])&&R(r,"dy",s),384&p&&q(r,"text-anchor",t[8]?"end":t[7]),1024&p&&l!==(l="tick tick-"+t[17]+" svelte-6edweo")&&R(e,"class",l),7936&p&&c!==(c="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")&&R(e,"transform",c)},d(t){t&&T(e),f&&f.d(),h&&h.d()}}}function qc(e){let n,r,i=e[10],o=[];for(let t=0;t<i.length;t+=1)o[t]=Ic(Pc(e,i,t));return{c(){n=A("g");for(let t=0;t<o.length;t+=1)o[t].c();R(n,"class","axis y-axis"),R(n,"transform",r="translate("+-e[11].left+", 0)")},m(t,e){C(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(8191&e){let r;for(i=t[10],r=0;r<i.length;r+=1){const a=Pc(t,i,r);o[r]?o[r].p(a,e):(o[r]=Ic(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}2048&e&&r!==(r="translate("+-t[11].left+", 0)")&&R(n,"transform",r)},i:t,o:t,d(t){t&&T(n),S(o,t)}}}function Fc(t,e,n){let r,i,o,a,s;const{padding:c,xRange:u,yScale:f}=rt("LayerCake");l(t,c,(t=>n(11,a=t))),l(t,u,(t=>n(12,s=t))),l(t,f,(t=>n(9,o=t)));let{gridlines:h=!0}=e,{tickMarks:p=!1}=e,{formatTick:d=(t=>t)}=e,{ticks:m=4}=e,{xTick:g=0}=e,{yTick:v=0}=e,{dxTick:y=0}=e,{dyTick:b=-4}=e,{textAnchor:x="start"}=e;return t.$$set=t=>{"gridlines"in t&&n(0,h=t.gridlines),"tickMarks"in t&&n(1,p=t.tickMarks),"formatTick"in t&&n(2,d=t.formatTick),"ticks"in t&&n(16,m=t.ticks),"xTick"in t&&n(3,g=t.xTick),"yTick"in t&&n(4,v=t.yTick),"dxTick"in t&&n(5,y=t.dxTick),"dyTick"in t&&n(6,b=t.dyTick),"textAnchor"in t&&n(7,x=t.textAnchor)},t.$$.update=()=>{512&t.$$.dirty&&n(8,r="function"==typeof o.bandwidth),66304&t.$$.dirty&&n(10,i=Array.isArray(m)?m:r?o.domain():"function"==typeof m?m(o.ticks()):o.ticks(m))},[h,p,d,g,v,y,b,x,r,o,i,a,s,c,u,f,m]}class Yc extends Pt{constructor(t){super(),Et(this,t,Fc,qc,a,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}const Oc=new Map([["L","#011f5b"],["R","#990000"]]);function Hc(e){let n,r,i,o,a,s,l,c,u,f,h;return{c(){n=N("div"),r=N("span"),i=z(e[0]),o=j(),a=N("a"),s=z("Download data "),l=A("svg"),c=A("path"),u=A("polyline"),f=A("line"),R(r,"class","caption-text svelte-1m1lkwz"),R(c,"d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"),R(u,"points","7 10 12 15 17 10"),R(f,"x1","12"),R(f,"y1","15"),R(f,"x2","12"),R(f,"y2","3"),R(l,"xmlns","http://www.w3.org/2000/svg"),R(l,"width","24"),R(l,"height","24"),R(l,"viewBox","0 0 24 24"),R(l,"fill","none"),R(l,"stroke","currentColor"),R(l,"stroke-width","2"),R(l,"stroke-linecap","round"),R(l,"stroke-linejoin","round"),R(l,"class","feather feather-download svelte-1m1lkwz"),R(a,"class","download-button svelte-1m1lkwz"),R(a,"href",e[1]),R(a,"download",""),R(n,"class",h="caption caption-"+e[2]+" svelte-1m1lkwz")},m(t,e){C(t,n,e),_(n,r),_(r,i),_(n,o),_(n,a),_(a,s),_(a,l),_(l,c),_(l,u),_(l,f)},p(t,[e]){1&e&&I(i,t[0]),2&e&&R(a,"href",t[1]),4&e&&h!==(h="caption caption-"+t[2]+" svelte-1m1lkwz")&&R(n,"class",h)},i:t,o:t,d(t){t&&T(n)}}}function Uc(t,e,n){let{caption:r}=e,{url:i}=e,{type:o}=e;return t.$$set=t=>{"caption"in t&&n(0,r=t.caption),"url"in t&&n(1,i=t.url),"type"in t&&n(2,o=t.type)},[r,i,o]}class Vc extends Pt{constructor(t){super(),Et(this,t,Uc,Hc,a,{caption:0,url:1,type:2})}}function Bc(t){let e,n;return e=new ma({props:{padding:t[0],flatData:t[2].filter(t[23]),data:de(t[4].filter(t[24]),Qc,Jc),x:t[5],xScale:"date"===t[5]?wo():Xn(),y:t[6],yDomain:t[8],yNice:!0,z:t[7],zScale:Me(),zDomain:t[18],zRange:t[19],$$slots:{default:[Xc]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.padding=t[0]),196612&n&&(r.flatData=t[2].filter(t[23])),196624&n&&(r.data=de(t[4].filter(t[24]),Qc,Jc)),32&n&&(r.x=t[5]),32&n&&(r.xScale="date"===t[5]?wo():Xn()),64&n&&(r.y=t[6]),256&n&&(r.yDomain=t[8]),128&n&&(r.z=t[7]),33590784&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function Wc(t){let e,n,r,i;return e=new Ec({props:{gridlines:!1,ticks:t[10],formatTick:t[9],snapTicks:!1,tickMarks:!0}}),r=new Yc({props:{ticks:4,formatTick:t[11]}}),{c(){At(e.$$.fragment),n=j(),At(r.$$.fragment)},m(t,o){zt(e,t,o),C(t,n,o),zt(r,t,o),i=!0},p(t,n){const i={};1024&n&&(i.ticks=t[10]),512&n&&(i.formatTick=t[9]),e.$set(i);const o={};2048&n&&(o.formatTick=t[11]),r.$set(o)},i(t){i||(_t(e.$$.fragment,t),_t(r.$$.fragment,t),i=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){jt(e,t),t&&T(n),jt(r,t)}}}function Kc(t){let e,n,r,i=t[15]&&Wc(t);return n=new Cc({props:{activeChart:"test"}}),{c(){i&&i.c(),e=j(),At(n.$$.fragment)},m(t,o){i&&i.m(t,o),C(t,e,o),zt(n,t,o),r=!0},p(t,n){t[15]?i?(i.p(t,n),32768&n&&_t(i,1)):(i=Wc(t),i.c(),_t(i,1),i.m(e.parentNode,e)):i&&(wt(),kt(i,1,1,(()=>{i=null})),$t())},i(t){r||(_t(i),_t(n.$$.fragment,t),r=!0)},o(t){kt(i),kt(n.$$.fragment,t),r=!1},d(t){i&&i.d(t),t&&T(e),jt(n,t)}}}function Xc(t){let e,n,r,i;return e=new Ta({props:{$$slots:{default:[Kc]},$$scope:{ctx:t}}}),r=new xa({}),{c(){At(e.$$.fragment),n=j(),At(r.$$.fragment)},m(t,o){zt(e,t,o),C(t,n,o),zt(r,t,o),i=!0},p(t,n){const r={};33590784&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){i||(_t(e.$$.fragment,t),_t(r.$$.fragment,t),i=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){jt(e,t),t&&T(n),jt(r,t)}}}function Zc(t){let e,n;return e=new Vc({props:{caption:t[1],url:t[3],type:12===t[13]?"split-cols":"single-cols"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),8&n&&(r.url=t[3]),8192&n&&(r.type=12===t[13]?"split-cols":"single-cols"),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function Gc(t){let e,n,r,i,o,a=t[2]&&t[2].length&&Bc(t),s=t[12]&&Zc(t);return{c(){e=N("div"),a&&a.c(),r=j(),s&&s.c(),i=D(),R(e,"class",n="chart line-chart "+t[14])},m(t,n){C(t,e,n),a&&a.m(e,null),C(t,r,n),s&&s.m(t,n),C(t,i,n),o=!0},p(t,[r]){t[2]&&t[2].length?a?(a.p(t,r),4&r&&_t(a,1)):(a=Bc(t),a.c(),_t(a,1),a.m(e,null)):a&&(wt(),kt(a,1,1,(()=>{a=null})),$t()),(!o||16384&r&&n!==(n="chart line-chart "+t[14]))&&R(e,"class",n),t[12]?s?(s.p(t,r),4096&r&&_t(s,1)):(s=Zc(t),s.c(),_t(s,1),s.m(i.parentNode,i)):s&&(wt(),kt(s,1,1,(()=>{s=null})),$t())},i(t){o||(_t(a),_t(s),o=!0)},o(t){kt(a),kt(s),o=!1},d(t){t&&T(e),a&&a.d(),t&&T(r),s&&s.d(t),t&&T(i)}}}const Qc=t=>t.political_lean,Jc=t=>t.diet_threshold;function tu(t,e,n){let r,i,{margins:o={top:20,right:10,bottom:20,left:45}}=e,{caption:a=""}=e,{data:s}=e,{url:l=""}=e,{groupedData:c}=e,{xKey:u}=e,{yKey:f}=e,{zKey:h}=e,{yDomain:p=[0,null]}=e,{formatTickX:d}=e,{xTicks:m=6}=e,{formatTickY:g=(t=>t.toFixed(2))}=e,{includeCaption:v=!0}=e,{spanCol:y}=e,{customClass:b}=e,{includeAxis:x=!0}=e,{scaleRange:w}=e,{start:$}=e,{end:_}=e,k=Array.from(Oc).map((t=>t[0])),M=Array.from(Oc).map((t=>t[1]));return t.$$set=t=>{"margins"in t&&n(0,o=t.margins),"caption"in t&&n(1,a=t.caption),"data"in t&&n(2,s=t.data),"url"in t&&n(3,l=t.url),"groupedData"in t&&n(4,c=t.groupedData),"xKey"in t&&n(5,u=t.xKey),"yKey"in t&&n(6,f=t.yKey),"zKey"in t&&n(7,h=t.zKey),"yDomain"in t&&n(8,p=t.yDomain),"formatTickX"in t&&n(9,d=t.formatTickX),"xTicks"in t&&n(10,m=t.xTicks),"formatTickY"in t&&n(11,g=t.formatTickY),"includeCaption"in t&&n(12,v=t.includeCaption),"spanCol"in t&&n(13,y=t.spanCol),"customClass"in t&&n(14,b=t.customClass),"includeAxis"in t&&n(15,x=t.includeAxis),"scaleRange"in t&&n(20,w=t.scaleRange),"start"in t&&n(21,$=t.start),"end"in t&&n(22,_=t.end)},t.$$.update=()=>{3145728&t.$$.dirty&&n(17,r=w($)),5242880&t.$$.dirty&&n(16,i=w(_))},[o,a,s,l,c,u,f,h,p,d,m,g,v,y,b,x,i,r,k,M,w,$,_,t=>+t.date>=r&&+t.date<=i,t=>+t.date>=r&&+t.date<=i]}class eu extends Pt{constructor(t){super(),Et(this,t,tu,Gc,a,{margins:0,caption:1,data:2,url:3,groupedData:4,xKey:5,yKey:6,zKey:7,yDomain:8,formatTickX:9,xTicks:10,formatTickY:11,includeCaption:12,spanCol:13,customClass:14,includeAxis:15,scaleRange:20,start:21,end:22})}}function nu(t,e,n){const r=t.slice();return r[1]=e[n],r[3]=n,r}function ru(t){let e,n,r,i,o,a,s,l,c,u,f=t[1].program+"",h=t[1].value+"";return{c(){e=N("div"),n=N("div"),r=z(f),o=j(),a=N("div"),s=z(h),c=j(),R(n,"class",i=d("row-value row-value-program")+" svelte-152vz1q"),R(a,"class",l=d("row-value row-value-audience")+" svelte-152vz1q"),R(e,"class",u=d("row-body")+" svelte-152vz1q")},m(t,i){C(t,e,i),_(e,n),_(n,r),_(e,o),_(e,a),_(a,s),_(e,c)},p(t,e){1&e&&f!==(f=t[1].program+"")&&I(r,f),1&e&&h!==(h=t[1].value+"")&&I(s,h)},d(t){t&&T(e)}}}function iu(e){let n,r,i,o,a=e[0],s=[];for(let t=0;t<a.length;t+=1)s[t]=ru(nu(e,a,t));return{c(){n=N("div"),r=N("div"),i=N("div"),i.innerHTML='<div class="row-header row-header-program svelte-152vz1q">Program</div> \n      <div class="row-header row-header-audience svelte-152vz1q">Audience</div>',o=j();for(let t=0;t<s.length;t+=1)s[t].c();R(i,"class",d("row-head")+" svelte-152vz1q"),R(r,"class",d("table-wrapper")+" svelte-152vz1q"),R(n,"class","table-container")},m(t,e){C(t,n,e),_(n,r),_(r,i),_(r,o);for(let t=0;t<s.length;t+=1)s[t].m(r,null)},p(t,[e]){if(1&e){let n;for(a=t[0],n=0;n<a.length;n+=1){const i=nu(t,a,n);s[n]?s[n].p(i,e):(s[n]=ru(i),s[n].c(),s[n].m(r,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=a.length}},i:t,o:t,d(t){t&&T(n),S(s,t)}}}function ou(t,e,n){let{data:r}=e;return console.log(r),t.$$set=t=>{"data"in t&&n(0,r=t.data)},[r]}class au extends Pt{constructor(t){super(),Et(this,t,ou,iu,a,{data:0})}}const su=Jr("%b-%y");function lu(t){const e=t.slice(),n=e[5].get(e[3]).get(e[13]).get(e[2]);return e[19]=n,e}function cu(t){const e=t.slice(),n=e[1].detail.node;e[13]=n.abbr,e[14]=n.state;const r=e[4].get(e[13]).get(e[2]).map((t=>({...t,value:Math.max(t.right_pct,t.left_pct)})));e[15]=r;const i=function(t){if(Array.isArray(t)&&Array.isArray(t[0])){let e=[];const n=t.length;for(let r=0;r<n;r+=1)e=e.concat(t[r]);return e}return t}(e[15].map((t=>[{...t,political_lean:"R",value:t.right_pct},{...t,political_lean:"L",value:t.left_pct}])));e[16]=i;const o=se(e[15],(t=>+t.date));return e[17]=o[0],e[18]=o[1],e}function uu(n){let r,a,s,l,c,u,f,h,p,d,m,g,v,b,x,w=n[13]+"",k=n[14]+"";p=new eu({props:{data:n[15],groupedData:n[16],scaleRange:Xn().range([n[17],n[18]]),start:0,end:1,yKey:du,xKey:pu,zKey:mu,spanCol:12,customClass:"popup-overlay",formatTickX:su,url:"",includeCaption:!1}});let M="tv"===n[2]&&fu(lu(n));return{c(){r=N("h1"),a=N("span"),s=z(w),l=j(),c=z(k),f=j(),h=N("div"),At(p.$$.fragment),d=j(),m=N("p"),m.innerHTML='<span class="svelte-pi63pk">TV &amp; Web news diet polarization</span> Lorem ipsum dolor sit amet consectetur \n      adipisicing elit. Odit, inventore impedit deleniti magnam eum eveniet \n      dolorum porro, saepe molestiae quis et, quia libero suscipit numquam?',g=j(),M&&M.c(),v=j(),b=N("p"),b.innerHTML='<span class="svelte-pi63pk">Most watched.</span> Lorem ipsum dolor sit amet consectetur \n      adipisicing elit. Odit, inventore impedit deleniti magnam eum eveniet \n      dolorum porro, saepe molestiae quis et, quia libero suscipit numquam?',R(a,"class","svelte-pi63pk"),R(r,"class","title svelte-pi63pk"),R(h,"class","overlay-col1-container svelte-pi63pk"),R(m,"class","caption overlay-col1-caption svelte-pi63pk"),R(b,"class","caption overlay-col2-caption svelte-pi63pk")},m(t,e){C(t,r,e),_(r,a),_(a,s),_(r,l),_(r,c),C(t,f,e),C(t,h,e),zt(p,h,null),C(t,d,e),C(t,m,e),C(t,g,e),M&&M.m(t,e),C(t,v,e),C(t,b,e),x=!0},p(t,e){(!x||2&e)&&w!==(w=t[13]+"")&&I(s,w),(!x||2&e)&&k!==(k=t[14]+"")&&I(c,k);const n={};22&e&&(n.data=t[15]),22&e&&(n.groupedData=t[16]),22&e&&(n.scaleRange=Xn().range([t[17],t[18]])),p.$set(n),"tv"===t[2]?M?(M.p(lu(t),e),4&e&&_t(M,1)):(M=fu(lu(t)),M.c(),_t(M,1),M.m(v.parentNode,v)):M&&(wt(),kt(M,1,1,(()=>{M=null})),$t())},i(t){x||(u&&u.end(1),_t(p.$$.fragment,t),_t(M),x=!0)},o(n){u=function(n,r,a){let s,l=r(n,a),c=!0;const u=xt;function f(){const{delay:r=0,duration:o=300,easing:a=e,tick:f=t,css:h}=l||Mt;h&&(s=X(n,1,0,o,r,a,h));const p=y()+r,d=p+o;ut((()=>yt(n,!1,"start"))),$((t=>{if(c){if(t>=d)return f(0,1),yt(n,!1,"end"),--u.r||i(u.c),!1;if(t>=p){const e=a((t-p)/o);f(1-e,e)}}return c}))}return u.r+=1,o(l)?vt().then((()=>{l=l(),f()})):f(),{end(t){t&&l.tick&&l.tick(1,0),c&&(s&&Z(n,s),c=!1)}}}(r,Gl,{delay:300}),kt(p.$$.fragment,n),kt(M),x=!1},d(t){t&&T(r),t&&u&&u.end(),t&&T(f),t&&T(h),jt(p),t&&T(d),t&&T(m),t&&T(g),M&&M.d(t),t&&T(v),t&&T(b)}}}function fu(t){let e,n,r;return n=new au({props:{data:t[19]}}),{c(){e=N("div"),At(n.$$.fragment),R(e,"class","overlay-col2-container svelte-pi63pk")},m(t,i){C(t,e,i),zt(n,e,null),r=!0},p(t,e){const r={};46&e&&(r.data=t[19]),n.$set(r)},i(t){r||(_t(n.$$.fragment,t),r=!0)},o(t){kt(n.$$.fragment,t),r=!1},d(t){t&&T(e),jt(n)}}}function hu(t){let e,n,r,i,o,a,s,l=!t[0]&&uu(cu(t));return{c(){e=N("div"),l&&l.c(),n=j(),r=N("div"),R(r,"class","close-button svelte-pi63pk"),R(e,"class",i="overlay "+(t[0]?"":"active")+" svelte-pi63pk")},m(i,c){C(i,e,c),l&&l.m(e,null),_(e,n),_(e,r),o=!0,a||(s=E(r,"click",t[9]),a=!0)},p(t,[r]){t[0]?l&&(wt(),kt(l,1,1,(()=>{l=null})),$t()):l?(l.p(cu(t),r),1&r&&_t(l,1)):(l=uu(cu(t)),l.c(),_t(l,1),l.m(e,n)),(!o||1&r&&i!==(i="overlay "+(t[0]?"":"active")+" svelte-pi63pk"))&&R(e,"class",i)},i(t){o||(_t(l),o=!0)},o(t){kt(l),o=!1},d(t){t&&T(e),l&&l.d(),a=!1,s()}}}let pu="date",du="value",mu=0;function gu(t,e,n){const r=nt();let i,o,a,s,{hidePopup:l}=e,{popup:c}=e,{diet_threshold:u}=e,{partisanship_scenario:f}=e,{medium:h}=e,{period:p}=e;function d(){r("closePopup")}et((async()=>{const t=await te("assets/data/EchoCh-by_state_full-timeseries.csv",Xt);i=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))),n(4,o=pe(i,(t=>t.state),(t=>t.medium))),a=await te("assets/data/EchoCh-TV-by_state_audiences.csv",Xt),n(5,s=pe(a,(t=>t.period),(t=>t.state),(t=>t.medium)))}));return t.$$set=t=>{"hidePopup"in t&&n(0,l=t.hidePopup),"popup"in t&&n(1,c=t.popup),"diet_threshold"in t&&n(7,u=t.diet_threshold),"partisanship_scenario"in t&&n(8,f=t.partisanship_scenario),"medium"in t&&n(2,h=t.medium),"period"in t&&n(3,p=t.period)},[l,c,h,p,o,s,d,u,f,()=>d()]}class vu extends Pt{constructor(t){super(),Et(this,t,gu,hu,a,{hidePopup:0,popup:1,diet_threshold:7,partisanship_scenario:8,medium:2,period:3})}}function yu(e){let n,r,o,a,s,l,c,u,f,h,p,d,m,g,v,y,b,x,w,$,k,M,S,A,D=e[3][0]+"",P=e[3][1]+"";return{c(){n=N("div"),r=N("div"),o=z(e[2]),a=j(),s=N("span"),s.textContent="?",l=j(),c=N("div"),u=z(D),h=j(),p=N("label"),d=N("input"),m=j(),g=N("span"),v=j(),y=N("div"),b=z(P),w=j(),$=N("div"),k=z(e[4]),R(s,"class","info svelte-w9wtv0"),R(r,"class","control-title svelte-w9wtv0"),R(c,"class",f="control-label "+(e[0]?"":"active")+" svelte-w9wtv0"),R(d,"type","checkbox"),R(d,"id","medium"),R(d,"name","medium"),R(d,"class","svelte-w9wtv0"),R(g,"class","slider svelte-w9wtv0"),q(g,"--colorFalse",e[5][0]),q(g,"--colorTrue",e[5][1]),R(p,"class","switch svelte-w9wtv0"),R(y,"class",x="control-label "+(e[0]?"active":"")+" svelte-w9wtv0"),R($,"class",M="info-detail "+e[7]+" svelte-w9wtv0"),R(n,"id",e[1]),R(n,"class","control control-switch svelte-w9wtv0")},m(t,i){C(t,n,i),_(n,r),_(r,o),_(r,a),_(r,s),_(n,l),_(n,c),_(c,u),_(n,h),_(n,p),_(p,d),d.checked=e[0],_(p,m),_(p,g),_(n,v),_(n,y),_(y,b),_(n,w),_(n,$),_($,k),S||(A=[E(s,"mouseenter",e[8]),E(s,"mouseleave",e[9]),E(d,"change",e[10])],S=!0)},p(t,[e]){4&e&&I(o,t[2]),8&e&&D!==(D=t[3][0]+"")&&I(u,D),1&e&&f!==(f="control-label "+(t[0]?"":"active")+" svelte-w9wtv0")&&R(c,"class",f),1&e&&(d.checked=t[0]),32&e&&q(g,"--colorFalse",t[5][0]),32&e&&q(g,"--colorTrue",t[5][1]),8&e&&P!==(P=t[3][1]+"")&&I(b,P),1&e&&x!==(x="control-label "+(t[0]?"active":"")+" svelte-w9wtv0")&&R(y,"class",x),16&e&&I(k,t[4]),128&e&&M!==(M="info-detail "+t[7]+" svelte-w9wtv0")&&R($,"class",M),2&e&&R(n,"id",t[1])},i:t,o:t,d(t){t&&T(n),S=!1,i(A)}}}function bu(t,e,n){let r,i,{id:o=""}=e,{title:a="Title"}=e,{labels:s=["False","True"]}=e,{info:l=""}=e,{checked:c=!0}=e,{colors:u=["#555","#ccc"]}=e;return t.$$set=t=>{"id"in t&&n(1,o=t.id),"title"in t&&n(2,a=t.title),"labels"in t&&n(3,s=t.labels),"info"in t&&n(4,l=t.info),"checked"in t&&n(0,c=t.checked),"colors"in t&&n(5,u=t.colors)},t.$$.update=()=>{64&t.$$.dirty&&n(7,i=r?"active":"")},n(6,r=!1),[c,o,a,s,l,u,r,i,()=>{n(6,r=!0)},()=>{n(6,r=!1)},function(){c=this.checked,n(0,c)}]}class xu extends Pt{constructor(t){super(),Et(this,t,bu,yu,a,{id:1,title:2,labels:3,info:4,checked:0,colors:5})}}var wu=[{state:"Maine",abbr:"ME",row:1,col:11},{state:"Wisconsin",abbr:"WI",row:2,col:6},{state:"Vermont",abbr:"VT",row:2,col:10},{state:"New Hampshire",abbr:"NH",row:2,col:11},{state:"Washington",abbr:"WA",row:3,col:1},{state:"Idaho",abbr:"ID",row:3,col:2},{state:"Montana",abbr:"MT",row:3,col:3},{state:"North Dakota",abbr:"ND",row:3,col:4},{state:"Minnesota",abbr:"MN",row:3,col:5},{state:"Illinois",abbr:"IL",row:3,col:6},{state:"Michigan",abbr:"MI",row:3,col:7},{state:"New York",abbr:"NY",row:3,col:9},{state:"Massachusetts",abbr:"MA",row:3,col:10},{state:"Oregon",abbr:"OR",row:4,col:1},{state:"Nevada",abbr:"NV",row:4,col:2},{state:"Wyoming",abbr:"WY",row:4,col:3},{state:"South Dakota",abbr:"SD",row:4,col:4},{state:"Iowa",abbr:"IA",row:4,col:5},{state:"Indiana",abbr:"IN",row:4,col:6},{state:"Ohio",abbr:"OH",row:4,col:7},{state:"Pennsylvania",abbr:"PA",row:4,col:8},{state:"New Jersey",abbr:"NJ",row:4,col:9},{state:"Connecticut",abbr:"CT",row:4,col:10},{state:"Rhode Island",abbr:"RI",row:4,col:11},{state:"California",abbr:"CA",row:5,col:1},{state:"Utah",abbr:"UT",row:5,col:2},{state:"Colorado",abbr:"CO",row:5,col:3},{state:"Nebraska",abbr:"NE",row:5,col:4},{state:"Missouri",abbr:"MO",row:5,col:5},{state:"Kentucky",abbr:"KY",row:5,col:6},{state:"West Virginia",abbr:"WV",row:5,col:7},{state:"Virginia",abbr:"VA",row:5,col:8},{state:"Maryland",abbr:"MD",row:5,col:9},{state:"Delaware",abbr:"DE",row:5,col:10},{state:"Arizona",abbr:"AZ",row:6,col:2},{state:"New Mexico",abbr:"NM",row:6,col:3},{state:"Kansas",abbr:"KS",row:6,col:4},{state:"Arkansas",abbr:"AR",row:6,col:5},{state:"Tennessee",abbr:"TN",row:6,col:6},{state:"North Carolina",abbr:"NC",row:6,col:7},{state:"South Carolina",abbr:"SC",row:6,col:8},{state:"District of Columbia",abbr:"DC",row:6,col:9},{state:"Oklahoma",abbr:"OK",row:7,col:4},{state:"Louisiana",abbr:"LA",row:7,col:5},{state:"Mississippi",abbr:"MS",row:7,col:6},{state:"Alabama",abbr:"AL",row:7,col:7},{state:"Georgia",abbr:"GA",row:7,col:8},{state:"Hawaii",abbr:"HI",row:8,col:1},{state:"Alaska",abbr:"AK",row:8,col:2},{state:"Texas",abbr:"TX",row:8,col:4},{state:"Florida",abbr:"FL",row:8,col:9}];function $u(t,e,n){const r=t.slice();return r[34]=e[n],r}function _u(t,e,n){const r=t.slice();return r[37]=e[n],r[39]=n,r}function ku(e){let n,r,i,o,a=e[37]+"";return{c(){n=N("option"),r=z(a),i=j(),n.__value=o=e[37],n.value=n.__value},m(t,e){C(t,n,e),_(n,r),_(n,i)},p:t,d(t){t&&T(n)}}}function Mu(t){let e;return{c(){e=N("span"),e.textContent="More left",R(e,"class","svelte-fhe5kk")},m(t,n){C(t,e,n)},d(t){t&&T(e)}}}function Cu(t){let e;return{c(){e=N("div"),R(e,"class","legend-block svelte-fhe5kk"),q(e,"--color",t[34])},m(t,n){C(t,e,n)},p(t,n){64&n[0]&&q(e,"--color",t[34])},d(t){t&&T(e)}}}function Tu(t){let e,n,r,i="diverging"===t[1].type&&Su(t),o="linear"===t[1].type&&Nu(t);return{c(){i&&i.c(),e=j(),o&&o.c(),n=D()},m(t,a){i&&i.m(t,a),C(t,e,a),o&&o.m(t,a),C(t,n,a),r=!0},p(t,r){"diverging"===t[1].type?i?(i.p(t,r),2&r[0]&&_t(i,1)):(i=Su(t),i.c(),_t(i,1),i.m(e.parentNode,e)):i&&(wt(),kt(i,1,1,(()=>{i=null})),$t()),"linear"===t[1].type?o?(o.p(t,r),2&r[0]&&_t(o,1)):(o=Nu(t),o.c(),_t(o,1),o.m(n.parentNode,n)):o&&(wt(),kt(o,1,1,(()=>{o=null})),$t())},i(t){r||(_t(i),_t(o),r=!0)},o(t){kt(i),kt(o),r=!1},d(t){i&&i.d(t),t&&T(e),o&&o.d(t),t&&T(n)}}}function Su(t){let e,n;return e=new Hl({props:{medium:t[10],diet_threshold:t[9],partisanship_scenario:t[8],collideStrength:.1,manyBodyStrength:-.5}}),e.$on("mouseenter",t[17]),e.$on("mouseleave",t[18]),e.$on("click",t[19]),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};1024&n[0]&&(r.medium=t[10]),512&n[0]&&(r.diet_threshold=t[9]),256&n[0]&&(r.partisanship_scenario=t[8]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function Nu(t){let e,n;return e=new Kl({props:{medium:t[10],diet_threshold:t[9],partisanship_scenario:t[8],political_lean:t[7],collideStrength:.1,manyBodyStrength:-.5}}),e.$on("mouseenter",t[17]),e.$on("mouseleave",t[18]),e.$on("click",t[19]),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};1024&n[0]&&(r.medium=t[10]),512&n[0]&&(r.diet_threshold=t[9]),256&n[0]&&(r.partisanship_scenario=t[8]),128&n[0]&&(r.political_lean=t[7]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function Au(t){let e,n,r=t[12]&&Tu(t);return{c(){r&&r.c(),e=D()},m(t,i){r&&r.m(t,i),C(t,e,i),n=!0},p(t,n){t[12]?r?(r.p(t,n),4096&n[0]&&_t(r,1)):(r=Tu(t),r.c(),_t(r,1),r.m(e.parentNode,e)):r&&(wt(),kt(r,1,1,(()=>{r=null})),$t())},i(t){n||(_t(r),n=!0)},o(t){kt(r),n=!1},d(t){r&&r.d(t),t&&T(e)}}}function zu(t){let e,n;return e=new vu({props:{hidePopup:t[11],diet_threshold:t[9],partisanship_scenario:t[8],medium:t[10],period:t[5]||Eu,popup:t[16]}}),e.$on("closePopup",t[20]),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2048&n[0]&&(r.hidePopup=t[11]),512&n[0]&&(r.diet_threshold=t[9]),256&n[0]&&(r.partisanship_scenario=t[8]),1024&n[0]&&(r.medium=t[10]),32&n[0]&&(r.period=t[5]||Eu),65536&n[0]&&(r.popup=t[16]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function ju(t){let e,n,r,i;return e=new Ta({props:{$$slots:{default:[Au]},$$scope:{ctx:t}}}),r=new xa({props:{pointerEvents:!t[11],$$slots:{default:[zu]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment),n=j(),At(r.$$.fragment)},m(t,o){zt(e,t,o),C(t,n,o),zt(r,t,o),i=!0},p(t,n){const i={};6018&n[0]|512&n[1]&&(i.$$scope={dirty:n,ctx:t}),e.$set(i);const o={};2048&n[0]&&(o.pointerEvents=!t[11]),69408&n[0]|512&n[1]&&(o.$$scope={dirty:n,ctx:t}),r.$set(o)},i(t){i||(_t(e.$$.fragment,t),_t(r.$$.fragment,t),i=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),i=!1},d(t){jt(e,t),t&&T(n),jt(r,t)}}}function Du(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,d,m,g,v,y,b,x,w,$,k,M,A,D,P,L,q,Y,O,H,U,V="L"===t[7]?"left":"right";function B(e){t[27](e)}let W={id:"medium",title:"Medium",labels:["TV","Web"],info:"Internet or TV"};function K(e){t[28](e)}void 0!==t[4]&&(W.checked=t[4]),r=new xu({props:W}),ot.push((()=>Nt(r,"checked",B)));let X={id:"partisanship",title:"Partisanship",labels:["Stringent","Lenient"],info:"Lenient means that websites more partisan than TheGuardian.com (FoxNews.com) are counted as left (right), and CNN is counted as left-leaning. The stric definition means partisan content bounds are Slate.com (Breitbart.com) on the left (right)"};function Z(e){t[29](e)}void 0!==t[3]&&(X.checked=t[3]),a=new xu({props:X}),ot.push((()=>Nt(a,"checked",K)));let G={id:"diet",title:"Diet %",labels:["50%","75%"],info:"Percent of intra-individual news diets that must be partisan for partisan segregation"};void 0!==t[2]&&(G.checked=t[2]),c=new xu({props:G}),ot.push((()=>Nt(c,"checked",Z)));let Q=t[21],J=[];for(let e=0;e<Q.length;e+=1)J[e]=ku(_u(t,Q,e));let tt="linear"!==t[1].type&&Mu(),et=t[6],nt=[];for(let e=0;e<et.length;e+=1)nt[e]=Cu($u(t,et,e));return Y=new ma({props:{flatData:t[0],data:t[13],rScale:t[15],rDomain:t[15].domain(),rRange:t[15].range(),zScale:t[14],zDomain:t[14].domain(),zRange:t[14].range(),padding:{top:0,right:0,bottom:0,left:0},$$slots:{default:[ju]},$$scope:{ctx:t}}}),{c(){e=N("div"),n=N("div"),At(r.$$.fragment),o=j(),At(a.$$.fragment),l=j(),At(c.$$.fragment),f=j(),h=N("div"),p=N("div"),p.textContent="Period",d=j(),m=N("select");for(let t=0;t<J.length;t+=1)J[t].c();g=j(),v=N("div"),y=N("div"),b=N("h5"),b.textContent="Partisan lean",x=j(),tt&&tt.c(),w=j();for(let t=0;t<nt.length;t+=1)nt[t].c();$=j(),k=N("span"),M=z("More "),A=z(V),D=j(),P=N("div"),P.innerHTML='<h5 class="svelte-fhe5kk">How to read this chart?</h5> \n\t\t\t<div class="svelte-fhe5kk"></div>',L=j(),q=N("div"),At(Y.$$.fragment),R(p,"class","control-title svelte-fhe5kk"),R(m,"id","period-menu"),R(m,"name","period"),R(m,"class","svelte-fhe5kk"),void 0===t[5]&&ut((()=>t[30].call(m))),R(h,"id","period"),R(h,"class","control control-menu svelte-fhe5kk"),R(n,"class","controls svelte-fhe5kk"),R(b,"class","svelte-fhe5kk"),R(k,"class","svelte-fhe5kk"),R(y,"class","legend-item legend-item-color svelte-fhe5kk"),R(P,"class","legend-item legend-item-size svelte-fhe5kk"),R(v,"class","legend svelte-fhe5kk"),R(e,"class","chart-info-wrapper main-column svelte-fhe5kk"),R(q,"id","beeswarm"),R(q,"class","chart beeswarm-chart svelte-fhe5kk")},m(i,s){C(i,e,s),_(e,n),zt(r,n,null),_(n,o),zt(a,n,null),_(n,l),zt(c,n,null),_(n,f),_(n,h),_(h,p),_(h,d),_(h,m);for(let t=0;t<J.length;t+=1)J[t].m(m,null);F(m,t[5]),_(e,g),_(e,v),_(v,y),_(y,b),_(y,x),tt&&tt.m(y,null),_(y,w);for(let t=0;t<nt.length;t+=1)nt[t].m(y,null);_(y,$),_(y,k),_(k,M),_(k,A),_(v,D),_(v,P),C(i,L,s),C(i,q,s),zt(Y,q,null),O=!0,H||(U=E(m,"change",t[30]),H=!0)},p(t,e){const n={};!i&&16&e[0]&&(i=!0,n.checked=t[4],ft((()=>i=!1))),r.$set(n);const o={};!s&&8&e[0]&&(s=!0,o.checked=t[3],ft((()=>s=!1))),a.$set(o);const l={};if(!u&&4&e[0]&&(u=!0,l.checked=t[2],ft((()=>u=!1))),c.$set(l),2097152&e[0]){let n;for(Q=t[21],n=0;n<Q.length;n+=1){const r=_u(t,Q,n);J[n]?J[n].p(r,e):(J[n]=ku(r),J[n].c(),J[n].m(m,null))}for(;n<J.length;n+=1)J[n].d(1);J.length=Q.length}if(2097184&e[0]&&F(m,t[5]),"linear"!==t[1].type?tt||(tt=Mu(),tt.c(),tt.m(y,w)):tt&&(tt.d(1),tt=null),64&e[0]){let n;for(et=t[6],n=0;n<et.length;n+=1){const r=$u(t,et,n);nt[n]?nt[n].p(r,e):(nt[n]=Cu(r),nt[n].c(),nt[n].m(y,$))}for(;n<nt.length;n+=1)nt[n].d(1);nt.length=et.length}(!O||128&e[0])&&V!==(V="L"===t[7]?"left":"right")&&I(A,V);const f={};1&e[0]&&(f.flatData=t[0]),8192&e[0]&&(f.data=t[13]),32768&e[0]&&(f.rScale=t[15]),32768&e[0]&&(f.rDomain=t[15].domain()),32768&e[0]&&(f.rRange=t[15].range()),16384&e[0]&&(f.zScale=t[14]),16384&e[0]&&(f.zDomain=t[14].domain()),16384&e[0]&&(f.zRange=t[14].range()),73634&e[0]|512&e[1]&&(f.$$scope={dirty:e,ctx:t}),Y.$set(f)},i(t){O||(_t(r.$$.fragment,t),_t(a.$$.fragment,t),_t(c.$$.fragment,t),_t(Y.$$.fragment,t),O=!0)},o(t){kt(r.$$.fragment,t),kt(a.$$.fragment,t),kt(c.$$.fragment,t),kt(Y.$$.fragment,t),O=!1},d(t){t&&T(e),jt(r),jt(a),jt(c),S(J,t),tt&&tt.d(),S(nt,t),t&&T(L),t&&T(q),jt(Y),H=!1,U()}}}let Eu="Last month";function Pu(t,e,n){let r,i,o,a,s,l,c,u;const f=new Map(wu.map((t=>[t.state,t])));let h,p,{data:d}=e,{states:m}=e,{dataMap:g}=e,{fullDataMap:v}=e,{activeChart:y}=e,{politicalChecked:b}=e,x=!0,w=!0,$=!0,_=!0,k=!1;et((()=>{n(12,k=!0)}));const M=[...new Set(d.map((t=>t.period)))];let C=Eu;return t.$$set=t=>{"data"in t&&n(0,d=t.data),"states"in t&&n(22,m=t.states),"dataMap"in t&&n(23,g=t.dataMap),"fullDataMap"in t&&n(24,v=t.fullDataMap),"activeChart"in t&&n(1,y=t.activeChart),"politicalChecked"in t&&n(25,b=t.politicalChecked)},t.$$.update=()=>{33554432&t.$$.dirty[0]&&n(7,r=b?"R":"L"),16&t.$$.dirty[0]&&n(10,i=$?"web":"tv"),4&t.$$.dirty[0]&&n(9,o=x?75:50),8&t.$$.dirty[0]&&n(8,a=w?"lenient":"stringent"),12584736&t.$$.dirty[0]&&n(13,p=m.map((t=>{const{abbr:e}=f.get(t.state),n=g.get(C||Eu).get(e).get(i).get(o).get(a)[0];return Object.assign(Object.assign({},t),{abbr:e,data:n})}))),2&t.$$.dirty[0]&&n(15,l=y.rScale().domain(y.rDomain).range(y.rRange)),67108994&t.$$.dirty[0]&&(n(26,h=y.colorInterpolator().domain(y.colorInterpolatorDomain)),"diverging"===y.type?h.interpolator($n(fn.gamma(.5),y.colorInterpolatorScheme)):"linear"===y.type&&h.range([y.colorInterpolatorScheme,"R"===r?"#990000":"#011f5b"])),67108866&t.$$.dirty[0]&&n(6,c=y.colorPaletteAnchors.map(h)),66&t.$$.dirty[0]&&n(14,u=y.zScale().domain(y.zDomain).range(c))},n(16,s=null),[d,y,x,w,$,C,c,r,a,o,i,_,k,p,u,l,s,function(t){},function(){},function(t){n(11,_=!1),n(16,s=t)},function(){n(11,_=!0),n(16,s=null)},M,m,g,v,b,h,function(t){$=t,n(4,$)},function(t){w=t,n(3,w)},function(t){x=t,n(2,x)},function(){C=Y(this),n(5,C),n(21,M)}]}class Lu extends Pt{constructor(t){super(),Et(this,t,Pu,Du,a,{data:0,states:22,dataMap:23,fullDataMap:24,activeChart:1,politicalChecked:25},null,[-1,-1])}}function Ru(e){let n;return{c(){n=N("div"),n.innerHTML='<div class="lds-roller svelte-1j12haf"><div class="svelte-1j12haf"></div> \n    <div class="svelte-1j12haf"></div> \n    <div class="svelte-1j12haf"></div> \n    <div class="svelte-1j12haf"></div> \n    <div class="svelte-1j12haf"></div> \n    <div class="svelte-1j12haf"></div> \n    <div class="svelte-1j12haf"></div> \n    <div class="svelte-1j12haf"></div></div>',R(n,"class","chart-placeholder svelte-1j12haf")},m(t,e){C(t,n,e)},p:t,i:t,o:t,d(t){t&&T(n)}}}class Iu extends Pt{constructor(t){super(),Et(this,t,null,Ru,a,{})}}var qu=[{coordinates:[-86.766233,33.001471],state:"Alabama",population:4447100},{coordinates:[-148.716968,61.288254],state:"Alaska",population:626932},{coordinates:[-111.828711,33.373506],state:"Arizona",population:5130632},{coordinates:[-92.576816,35.080251],state:"Arkansas",population:2673400},{coordinates:[-119.355165,35.458606],state:"California",population:33871648},{coordinates:[-105.203628,39.500656],state:"Colorado",population:4301261},{coordinates:[-72.874365,41.494852],state:"Connecticut",population:3405565},{coordinates:[-75.561908,39.397164],state:"Delaware",population:783600},{coordinates:[-77.014001,38.910092],state:"District of Columbia",population:572059},{coordinates:[-81.634622,27.79585],state:"Florida",population:15982378},{coordinates:[-83.868887,33.332208],state:"Georgia",population:8186453},{coordinates:[-157.524452,21.146768],state:"Hawaii",population:1211537},{coordinates:[-115.133222,44.242605],state:"Idaho",population:1293953},{coordinates:[-88.380238,41.278216],state:"Illinois",population:12419293},{coordinates:[-86.261515,40.163935],state:"Indiana",population:6080485},{coordinates:[-93.049161,41.960392],state:"Iowa",population:2926324},{coordinates:[-96.536052,38.454303],state:"Kansas",population:2688418},{coordinates:[-85.241819,37.808159],state:"Kentucky",population:4041769},{coordinates:[-91.457133,30.69927],state:"Louisiana",population:4468976},{coordinates:[-69.719931,44.313614],state:"Maine",population:1274923},{coordinates:[-76.797396,39.145653],state:"Maryland",population:5296486},{coordinates:[-71.363628,42.271831],state:"Massachusetts",population:6349097},{coordinates:[-84.170753,42.866412],state:"Michigan",population:9938444},{coordinates:[-93.583003,45.210782],state:"Minnesota",population:4919479},{coordinates:[-89.593164,32.56642],state:"Mississippi",population:2844658},{coordinates:[-92.15377,38.437715],state:"Missouri",population:5595211},{coordinates:[-111.209708,46.813302],state:"Montana",population:902195},{coordinates:[-97.403875,41.183753],state:"Nebraska",population:1711263},{coordinates:[-116.304648,37.165965],state:"Nevada",population:1998257},{coordinates:[-71.463342,43.153046],state:"New Hampshire",population:1235786},{coordinates:[-74.428055,40.438458],state:"New Jersey",population:8414350},{coordinates:[-106.342108,34.623012],state:"New Mexico",population:1819046},{coordinates:[-74.645228,41.507548],state:"New York",population:18976457},{coordinates:[-79.667654,35.553334],state:"North Carolina",population:8049313},{coordinates:[-99.334736,47.375168],state:"North Dakota",population:642200},{coordinates:[-82.749366,40.480854],state:"Ohio",population:11353140},{coordinates:[-96.834653,35.59794],state:"Oklahoma",population:3450654},{coordinates:[-122.579524,44.732273],state:"Oregon",population:3421399},{coordinates:[-77.075925,40.463528],state:"Pennsylvania",population:12281054},{coordinates:[-71.448902,41.753318],state:"Rhode Island",population:1048319},{coordinates:[-81.032387,34.034551],state:"South Carolina",population:4012012},{coordinates:[-99.043799,44.047502],state:"South Dakota",population:754844},{coordinates:[-86.397772,35.795862],state:"Tennessee",population:5689283},{coordinates:[-97.388631,30.943149],state:"Texas",population:20851820},{coordinates:[-111.90016,40.438987],state:"Utah",population:2233169},{coordinates:[-72.814309,44.081127],state:"Vermont",population:608827},{coordinates:[-77.835857,37.750345],state:"Virginia",population:7078515},{coordinates:[-121.624501,47.341728],state:"Washington",population:5894121},{coordinates:[-80.820221,38.767195],state:"West Virginia",population:1808344},{coordinates:[-89.001006,43.728544],state:"Wisconsin",population:5363675},{coordinates:[-107.008835,42.675762],state:"Wyoming",population:493782}];function Fu(t){let e,n,r,i;function o(e){t[10](e)}let a={id:"medium",title:"Political lean",labels:["L","R"],info:"Right or left leaning",colors:["#AA3737","#384E83"]};return void 0!==t[7]&&(a.checked=t[7]),n=new xu({props:a}),ot.push((()=>Nt(n,"checked",o))),{c(){e=N("div"),At(n.$$.fragment),R(e,"class","controls svelte-1rb5c9w")},m(t,r){C(t,e,r),zt(n,e,null),i=!0},p(t,e){const i={};!r&&128&e&&(r=!0,i.checked=t[7],ft((()=>r=!1))),n.$set(i)},i(t){i||(_t(n.$$.fragment,t),i=!0)},o(t){kt(n.$$.fragment,t),i=!1},d(t){t&&T(e),jt(n)}}}function Yu(e){let n,r;return n=new Iu({}),{c(){At(n.$$.fragment)},m(t,e){zt(n,t,e),r=!0},p:t,i(t){r||(_t(n.$$.fragment,t),r=!0)},o(t){kt(n.$$.fragment,t),r=!1},d(t){jt(n,t)}}}function Ou(t){let e,n;return e=new Lu({props:{data:t[4],states:qu,dataMap:t[5],fullDataMap:t[6],activeChart:t[8],politicalChecked:t[7]}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};16&n&&(r.data=t[4]),32&n&&(r.dataMap=t[5]),64&n&&(r.fullDataMap=t[6]),256&n&&(r.activeChart=t[8]),128&n&&(r.politicalChecked=t[7]),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function Hu(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,d,m,g,v,y,b,x,w;r=new To({props:{title:t[0]}}),o=new Po({props:{standfirst:t[1]}}),s=new Uo({props:{authors:t[2]}});let $="linear"===t[8].type&&Fu(t);const k=[Ou,Yu],M=[];function S(t,e){return t[4]&&t[4].length?0:1}return v=S(t),y=M[v]=k[v](t),{c(){e=N("main"),n=N("div"),At(r.$$.fragment),i=j(),At(o.$$.fragment),a=j(),At(s.$$.fragment),l=j(),c=N("div"),u=N("h3"),f=z("Partisan Segregation in the US:\n\t\t\t\t"),h=N("select"),p=N("option"),p.textContent="Comparison view",d=N("option"),d.textContent="Single political lean view",m=j(),$&&$.c(),g=j(),y.c(),R(n,"class","header-wrapper main-column svelte-1rb5c9w"),p.__value="0",p.value=p.__value,d.__value="1",d.value=d.__value,R(h,"class","menu svelte-1rb5c9w"),void 0===t[3]&&ut((()=>t[9].call(h))),R(u,"class","chart-title"),R(c,"class","title-container main-column svelte-1rb5c9w"),R(e,"class","svelte-1rb5c9w")},m(y,k){C(y,e,k),_(e,n),zt(r,n,null),_(n,i),zt(o,n,null),_(n,a),zt(s,n,null),_(e,l),_(e,c),_(c,u),_(u,f),_(u,h),_(h,p),_(h,d),F(h,t[3]),_(c,m),$&&$.m(c,null),_(e,g),M[v].m(e,null),b=!0,x||(w=E(h,"change",t[9]),x=!0)},p(t,[n]){const i={};1&n&&(i.title=t[0]),r.$set(i);const a={};2&n&&(a.standfirst=t[1]),o.$set(a);const l={};4&n&&(l.authors=t[2]),s.$set(l),8&n&&F(h,t[3]),"linear"===t[8].type?$?($.p(t,n),256&n&&_t($,1)):($=Fu(t),$.c(),_t($,1),$.m(c,null)):$&&(wt(),kt($,1,1,(()=>{$=null})),$t());let u=v;v=S(t),v===u?M[v].p(t,n):(wt(),kt(M[u],1,1,(()=>{M[u]=null})),$t(),y=M[v],y?y.p(t,n):(y=M[v]=k[v](t),y.c()),_t(y,1),y.m(e,null))},i(t){b||(_t(r.$$.fragment,t),_t(o.$$.fragment,t),_t(s.$$.fragment,t),_t($),_t(y),b=!0)},o(t){kt(r.$$.fragment,t),kt(o.$$.fragment,t),kt(s.$$.fragment,t),kt($),kt(y),b=!1},d(t){t&&T(e),jt(r),jt(o),jt(s),$&&$.d(),M[v].d(),x=!1,w()}}}function Uu(t,e,n){let r,i,o,a,s,l,{title:c}=e,{standfirst:u=[{value:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Commodi consequatur inventore exercitationem ex perferendis provident, earum cumque maiores quam quidem labore, mollitia odit eaque laborum?"}]}=e,{authors:f}=e;et((async()=>{const t=await te("assets/data/EchoCh-by_state.csv",Xt);n(4,a=t),n(5,s=pe(a,(t=>t.period),(t=>t.state),(t=>t.medium),(t=>t.diet_threshold),(t=>t.partisanship_scenario))),n(6,l=pe(a,(t=>t.state),(t=>t.medium),(t=>t.partisanship_scenario)))}));const h=new Map([[0,{type:"diverging",rScale:er,rDomain:[0,.5],rRange:[5,100],zScale:nr,zDomain:[-.1,-.025,-.005,.005,.025,.1],colorInterpolator:ko,colorInterpolatorDomain:[-1,0,1],colorInterpolatorScheme:["#011f5b","gainsboro","#990000"],colorPaletteAnchors:[-.75,-.5,-.25,0,.25,.5,.75]}],[1,{type:"linear",rScale:er,rDomain:[0,.5],rRange:[8,100],zScale:nr,zDomain:[0,.01,.025,.05],colorInterpolator:Xn,colorInterpolatorDomain:[0,1],colorInterpolatorScheme:"gainsboro",colorPaletteAnchors:[0,.25,.5,.75,1]}]]);return t.$$set=t=>{"title"in t&&n(0,c=t.title),"standfirst"in t&&n(1,u=t.standfirst),"authors"in t&&n(2,f=t.authors)},t.$$.update=()=>{8&t.$$.dirty&&n(8,i=h.get(+r))},n(3,r="0"),n(7,o=!0),[c,u,f,r,a,s,l,o,i,function(){r=Y(this),n(3,r)},function(t){o=t,n(7,o)}]}class Vu extends Pt{constructor(t){super(),Et(this,t,Uu,Hu,a,{title:0,standfirst:1,authors:2})}}function Bu(t,e={}){let n;const r=r=>{const i=r[0].isIntersecting?"enter":"exit";"enter"===i&&t.dispatchEvent(new CustomEvent(i)),"enter"===i&&e.once&&n.disconnect()},i=({root:e,top:i,bottom:o})=>{const a={root:e,rootMargin:`${i?-1*i:0}px 0px ${o?-1*o:0}px 0px`};n&&n.disconnect(),n=new IntersectionObserver(r,a),n.observe(t)};return i(e),{update(t){i(t)},destroy(){n&&n.disconnect()}}}function Wu(t,e,n){return t<e?e:t>n?n:t}function Ku(e){let n,r,o,a,s,l,c,u,f;return{c(){n=N("div"),r=N("div"),o=N("div"),a=j(),s=N("div"),l=j(),c=N("div"),R(o,"class","body svelte-4z6zmw"),q(o,"left",100*e[0]+"%"),q(o,"right",100*(1-e[1])+"%"),R(s,"class","handle svelte-4z6zmw"),R(s,"data-which","start"),q(s,"left",100*e[0]+"%"),R(c,"class","handle svelte-4z6zmw"),R(c,"data-which","end"),q(c,"left",100*e[1]+"%"),R(r,"class","slider svelte-4z6zmw"),R(n,"class","double-range-container svelte-4z6zmw")},m(t,i){C(t,n,i),_(n,r),_(r,o),e[7](o),_(r,a),_(r,s),e[8](s),_(r,l),_(r,c),e[9](r),u||(f=[g(Xu.call(null,o)),E(o,"dragmove",L(P(e[6]))),g(Xu.call(null,s)),E(s,"dragmove",L(P(e[5]("start")))),g(Xu.call(null,c)),E(c,"dragmove",L(P(e[5]("end"))))],u=!0)},p(t,[e]){1&e&&q(o,"left",100*t[0]+"%"),2&e&&q(o,"right",100*(1-t[1])+"%"),1&e&&q(s,"left",100*t[0]+"%"),2&e&&q(c,"left",100*t[1]+"%")},i:t,o:t,d(t){t&&T(n),e[7](null),e[8](null),e[9](null),u=!1,i(f)}}}function Xu(t){let e,n;function r(r){"touchstart"===r.type&&(r=r.touches[0]),e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragstart",{detail:{x:e,y:n}})),window.addEventListener("mousemove",i),window.addEventListener("mouseup",o),window.addEventListener("touchmove",i),window.addEventListener("touchend",o)}function i(r){"touchmove"===r.type&&(r=r.changedTouches[0]);const i=r.clientX-e,o=r.clientY-n;e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragmove",{detail:{x:e,y:n,dx:i,dy:o}}))}function o(r){e=r.clientX,n=r.clientY,t.dispatchEvent(new CustomEvent("dragend",{detail:{x:e,y:n}})),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",o),window.removeEventListener("touchmove",i),window.removeEventListener("touchend",o)}return t.addEventListener("mousedown",r),t.addEventListener("touchstart",r),{destroy(){t.removeEventListener("mousedown",r),t.removeEventListener("touchstart",r)}}}function Zu(t,e,n){let r,i,o,{start:a=0}=e,{end:s=1}=e;return t.$$set=t=>{"start"in t&&n(0,a=t.start),"end"in t&&n(1,s=t.end)},[a,s,r,i,o,function(t){return function(e){const{left:r,right:i}=o.getBoundingClientRect(),l=i-r,c=Math.min(Math.max((e.detail.x-r)/l,0),1);"start"===t?(n(0,a=c),n(1,s=Math.max(s,c))):(n(0,a=Math.min(c,a)),n(1,s=c))}},function(t){const{width:e}=i.getBoundingClientRect(),{left:l,right:c}=o.getBoundingClientRect(),u=c-l,f=Wu(r.getBoundingClientRect().left+event.detail.dx-l,0,u-e),h=Wu(f+e,e,u)/u;n(0,a=f/u),n(1,s=h)},function(t){ot[t?"unshift":"push"]((()=>{i=t,n(3,i)}))},function(t){ot[t?"unshift":"push"]((()=>{r=t,n(2,r)}))},function(t){ot[t?"unshift":"push"]((()=>{o=t,n(4,o)}))}]}class Gu extends Pt{constructor(t){super(),Et(this,t,Zu,Ku,a,{start:0,end:1})}}function Qu(t,e,n){const r=t.slice();return r[29]=e[n],r}function Ju(t,e,n){const r=t.slice();return r[29]=e[n],r[33]=n,r}function tf(t,e,n){const r=t.slice();return r[29]=e[n],r[33]=n,r}function ef(t){let e,n,r,i=t[29].value+"";return{c(){e=N("p"),n=z(i),r=j()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){2&e[0]&&i!==(i=t[29].value+"")&&I(n,i)},d(t){t&&T(e)}}}function nf(t){let e,n,r,i,o,a,s,l,c,u,f,h,p,d,m=su(t[15](t[13]))+"",g=su(t[15](t[14]))+"";function v(e){t[23](e)}function y(e){t[24](e)}let b={};return void 0!==t[13]&&(b.start=t[13]),void 0!==t[14]&&(b.end=t[14]),i=new Gu({props:b}),ot.push((()=>Nt(i,"start",v))),ot.push((()=>Nt(i,"end",y))),{c(){e=N("div"),n=N("div"),n.textContent="Period",r=j(),At(i.$$.fragment),s=j(),l=N("div"),c=N("div"),u=z(m),f=j(),h=N("div"),p=z(g),R(n,"class","control-title svelte-jo790d"),R(c,"class","label svelte-jo790d"),R(h,"class","label svelte-jo790d"),R(l,"class","labels svelte-jo790d"),R(e,"id","period"),R(e,"class","control control-range svelte-jo790d")},m(t,o){C(t,e,o),_(e,n),_(e,r),zt(i,e,null),_(e,s),_(e,l),_(l,c),_(c,u),_(l,f),_(l,h),_(h,p),d=!0},p(t,e){const n={};!o&&8192&e[0]&&(o=!0,n.start=t[13],ft((()=>o=!1))),!a&&16384&e[0]&&(a=!0,n.end=t[14],ft((()=>a=!1))),i.$set(n),(!d||8192&e[0])&&m!==(m=su(t[15](t[13]))+"")&&I(u,m),(!d||16384&e[0])&&g!==(g=su(t[15](t[14]))+"")&&I(p,g)},i(t){d||(_t(i.$$.fragment,t),d=!0)},o(t){kt(i.$$.fragment,t),d=!1},d(t){t&&T(e),jt(i)}}}function rf(e){let n;return{c(){n=N("div"),R(n,"class","chart-placeholder svelte-jo790d")},m(t,e){C(t,n,e)},p:t,i:t,o:t,d(t){t&&T(n)}}}function of(t){let e,n;return e=new eu({props:{data:t[4],groupedData:t[10].get(t[7]).get(t[11]).get(t[12]).get(t[8]),scaleRange:t[16],start:t[13],end:t[14],yKey:ff,xKey:uf,zKey:hf,spanCol:12,customClass:"chart-medium",formatTickX:su,url:cf,caption:t[3][0].value}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};16&n[0]&&(r.data=t[4]),7552&n[0]&&(r.groupedData=t[10].get(t[7]).get(t[11]).get(t[12]).get(t[8])),8192&n[0]&&(r.start=t[13]),16384&n[0]&&(r.end=t[14]),8&n[0]&&(r.caption=t[3][0].value),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function af(t){let e,n,r,i=t[29].value+"";return{c(){e=N("p"),n=z(i),r=j()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){2&e[0]&&i!==(i=t[29].value+"")&&I(n,i)},d(t){t&&T(e)}}}function sf(t){let e,n,r,i=t[29].value+"";return{c(){e=N("p"),n=z(i),r=j()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){4&e[0]&&i!==(i=t[29].value+"")&&I(n,i)},d(t){t&&T(e)}}}function lf(t){let e,n,r,a,s,l,c,u,f,h,p,d,m,v,y,b,x,w,$,k,M,A,z,D,P,L,I,q,Y,O,H,U,V,B,W,K,X,Z,G,Q,J,tt,et,nt=t[1].slice(0,2),rt=[];for(let e=0;e<nt.length;e+=1)rt[e]=ef(tf(t,nt,e));function it(e){t[17](e)}let at={id:"medium",title:"Medium",labels:["TV","Web"],info:"Internet or TV"};function st(e){t[18](e)}void 0!==t[5]&&(at.checked=t[5]),u=new xu({props:at}),ot.push((()=>Nt(u,"checked",it)));let lt={id:"partisanship",title:"Partisanship",labels:["Lenient","Strict"],info:"Lenient means that websites more partisan than TheGuardian.com (FoxNews.com) are counted as left (right), and CNN is counted as left-leaning. The stric definition means partisan content bounds are Slate.com (Breitbart.com) on the left (right)"};void 0!==t[6]&&(lt.checked=t[6]),p=new xu({props:lt}),ot.push((()=>Nt(p,"checked",st)));let ct=t[9]&&t[4]&&nf(t);const ht=[of,rf],pt=[];function dt(t,e){return t[9]&&t[4]?0:1}B=dt(t),W=pt[B]=ht[B](t);let mt=t[1].slice(2),gt=[];for(let e=0;e<mt.length;e+=1)gt[e]=af(Ju(t,mt,e));let vt=t[2],yt=[];for(let e=0;e<vt.length;e+=1)yt[e]=sf(Qu(t,vt,e));return{c(){e=N("div"),n=N("h1"),n.textContent="Section title",r=j(),a=N("div");for(let t=0;t<rt.length;t+=1)rt[t].c();s=j(),l=N("div"),c=N("div"),At(u.$$.fragment),h=j(),At(p.$$.fragment),m=j(),v=N("div"),y=N("div"),y.textContent="Age group",b=j(),x=N("select"),w=N("option"),w.textContent="All",$=N("option"),$.textContent="18-24",k=N("option"),k.textContent="25-34",M=N("option"),M.textContent="35-44",A=N("option"),A.textContent="45-54",z=N("option"),z.textContent="55+",D=j(),P=N("div"),L=N("div"),L.textContent="Gender",I=j(),q=N("select"),Y=N("option"),Y.textContent="All",O=N("option"),O.textContent="Male",H=N("option"),H.textContent="Female",U=j(),ct&&ct.c(),V=j(),W.c(),K=j(),X=N("div");for(let t=0;t<gt.length;t+=1)gt[t].c();Z=j(),G=N("div");for(let t=0;t<yt.length;t+=1)yt[t].c();R(n,"class","section-title svelte-jo790d"),R(a,"class","copy copy-1 svelte-jo790d"),R(y,"class","control-title svelte-jo790d"),w.__value="All",w.value=w.__value,$.__value="18-24",$.value=$.__value,k.__value="25-34",k.value=k.__value,M.__value="35-44",M.value=M.__value,A.__value="45-54",A.value=A.__value,z.__value="55+",z.value=z.__value,R(x,"id","age-group-menu"),R(x,"name","age-group"),R(x,"class","svelte-jo790d"),void 0===t[8]&&ut((()=>t[19].call(x))),R(v,"id","age-group"),R(v,"class","control control-menu svelte-jo790d"),R(L,"class","control-title svelte-jo790d"),Y.__value="All",Y.value=Y.__value,Y.selected=!0,O.__value="Male",O.value=O.__value,H.__value="Female",H.value=H.__value,R(q,"id","gender-menu"),R(q,"name","location"),R(q,"class","svelte-jo790d"),void 0===t[7]&&ut((()=>t[21].call(q))),R(P,"id","gender"),R(P,"class","control control-menu svelte-jo790d"),R(c,"class","controls svelte-jo790d"),R(l,"class","chart-wrapper svelte-jo790d"),R(X,"class","copy copy-2 svelte-jo790d"),R(G,"class","references svelte-jo790d"),R(e,"class","section section-1 svelte-jo790d")},m(i,o){C(i,e,o),_(e,n),_(e,r),_(e,a);for(let t=0;t<rt.length;t+=1)rt[t].m(a,null);_(e,s),_(e,l),_(l,c),zt(u,c,null),_(c,h),zt(p,c,null),_(c,m),_(c,v),_(v,y),_(v,b),_(v,x),_(x,w),_(x,$),_(x,k),_(x,M),_(x,A),_(x,z),F(x,t[8]),_(c,D),_(c,P),_(P,L),_(P,I),_(P,q),_(q,Y),_(q,O),_(q,H),F(q,t[7]),_(c,U),ct&&ct.m(c,null),_(l,V),pt[B].m(l,null),_(e,K),_(e,X);for(let t=0;t<gt.length;t+=1)gt[t].m(X,null);_(e,Z),_(e,G);for(let t=0;t<yt.length;t+=1)yt[t].m(G,null);J=!0,tt||(et=[E(x,"change",t[19]),E(x,"change",t[20]),E(q,"change",t[21]),E(q,"change",t[22]),g(Q=Bu.call(null,e,{once:t[0]})),E(e,"enter",t[25])],tt=!0)},p(t,e){if(2&e[0]){let n;for(nt=t[1].slice(0,2),n=0;n<nt.length;n+=1){const r=tf(t,nt,n);rt[n]?rt[n].p(r,e):(rt[n]=ef(r),rt[n].c(),rt[n].m(a,null))}for(;n<rt.length;n+=1)rt[n].d(1);rt.length=nt.length}const n={};!f&&32&e[0]&&(f=!0,n.checked=t[5],ft((()=>f=!1))),u.$set(n);const r={};!d&&64&e[0]&&(d=!0,r.checked=t[6],ft((()=>d=!1))),p.$set(r),256&e[0]&&F(x,t[8]),128&e[0]&&F(q,t[7]),t[9]&&t[4]?ct?(ct.p(t,e),528&e[0]&&_t(ct,1)):(ct=nf(t),ct.c(),_t(ct,1),ct.m(c,null)):ct&&(wt(),kt(ct,1,1,(()=>{ct=null})),$t());let i=B;if(B=dt(t),B===i?pt[B].p(t,e):(wt(),kt(pt[i],1,1,(()=>{pt[i]=null})),$t(),W=pt[B],W?W.p(t,e):(W=pt[B]=ht[B](t),W.c()),_t(W,1),W.m(l,null)),2&e[0]){let n;for(mt=t[1].slice(2),n=0;n<mt.length;n+=1){const r=Ju(t,mt,n);gt[n]?gt[n].p(r,e):(gt[n]=af(r),gt[n].c(),gt[n].m(X,null))}for(;n<gt.length;n+=1)gt[n].d(1);gt.length=mt.length}if(4&e[0]){let n;for(vt=t[2],n=0;n<vt.length;n+=1){const r=Qu(t,vt,n);yt[n]?yt[n].p(r,e):(yt[n]=sf(r),yt[n].c(),yt[n].m(G,null))}for(;n<yt.length;n+=1)yt[n].d(1);yt.length=vt.length}Q&&o(Q.update)&&1&e[0]&&Q.update.call(null,{once:t[0]})},i(t){J||(_t(u.$$.fragment,t),_t(p.$$.fragment,t),_t(ct),_t(W),J=!0)},o(t){kt(u.$$.fragment,t),kt(p.$$.fragment,t),kt(ct),kt(W),J=!1},d(t){t&&T(e),S(rt,t),jt(u),jt(p),ct&&ct.d(),pt[B].d(),S(gt,t),S(yt,t),tt=!1,i(et)}}}let cf="assets/data/EchoCh-nationwide-by_gender-or-age_group.csv",uf="date",ff="value",hf=0;function pf(t,e,n){let r,i,o=!1,{once:a}=e,{copy:s}=e,{refs:l}=e,{captions:c}=e,u=!0,f=!0,h=u?"web":"tv",p=f?"lenient":"stringent";const d=Xn();let m=0,g=1,v="All",y="All";et((async()=>{const t=await te(cf,Xt);n(4,r=t.map((t=>Object.assign(Object.assign({},t),{date:new Date(t.year,t.month,1)}))));const[e,i]=se(r,(t=>+t.date));d.range([e,i])}));return t.$$set=t=>{"once"in t&&n(0,a=t.once),"copy"in t&&n(1,s=t.copy),"refs"in t&&n(2,l=t.refs),"captions"in t&&n(3,c=t.captions)},t.$$.update=()=>{16&t.$$.dirty[0]&&r&&n(10,i=pe(r,(t=>t.gender),(t=>t.medium),(t=>t.partisanship_scenario),(t=>t.age_group))),32&t.$$.dirty[0]&&n(11,h=u?"web":"tv"),64&t.$$.dirty[0]&&n(12,p=f?"lenient":"stringent"),256&t.$$.dirty[0]&&"All"!==y&&n(7,v="All"),128&t.$$.dirty[0]&&"All"!==v&&n(8,y="All")},n(7,v="All"),n(8,y="All"),[a,s,l,c,r,u,f,v,y,o,i,h,p,m,g,d,t=>{const e=new Date(d(t));return e.setDate(1),e.setHours(0,0,0),e.setMilliseconds(0),+e},function(t){u=t,n(5,u)},function(t){f=t,n(6,f)},function(){y=Y(this),n(8,y)},()=>console.log(y),function(){v=Y(this),n(7,v)},()=>console.log(v),function(t){m=t,n(13,m)},function(t){g=t,n(14,g)},()=>n(9,o=!0)]}class df extends Pt{constructor(t){super(),Et(this,t,pf,lf,a,{once:0,copy:1,refs:2,captions:3},null,[-1,-1])}}const mf={origin:[0,0,0],round:4},gf="SVGPathCommander Error",vf={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},yf=t=>{let e=t.pathValue[t.segmentStart],n=e.toLowerCase();const{data:r}=t;for(;r.length>=vf[n]&&("m"===n&&r.length>2?(t.segments.push([e,...r.splice(0,2)]),n="l",e="m"===e?"l":"L"):t.segments.push([e,...r.splice(0,vf[n])]),vf[n]););},bf=t=>{const{index:e,pathValue:n}=t,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err=`${gf}: invalid Arc flag "${n[e]}", expecting 0 or 1 at index ${e}`)},xf=t=>t>=48&&t<=57,wf="Invalid path value",$f=t=>{const{max:e,pathValue:n,index:r}=t;let i,o=r,a=!1,s=!1,l=!1,c=!1;if(o>=e)t.err=`${gf}: ${wf} at index ${o}, "pathValue" is missing param`;else if(i=n.charCodeAt(o),(43===i||45===i)&&(o+=1,i=n.charCodeAt(o)),xf(i)||46===i){if(46!==i){if(a=48===i,o+=1,i=n.charCodeAt(o),a&&o<e&&i&&xf(i))return void(t.err=`${gf}: ${wf} at index ${r}, "${n[r]}" illegal number`);for(;o<e&&xf(n.charCodeAt(o));)o+=1,s=!0;i=n.charCodeAt(o)}if(46===i){for(c=!0,o+=1;xf(n.charCodeAt(o));)o+=1,l=!0;i=n.charCodeAt(o)}if(101===i||69===i){if(c&&!s&&!l)return void(t.err=`${gf}: ${wf} at index ${o}, "${n[o]}" invalid float exponent`);if(o+=1,i=n.charCodeAt(o),(43===i||45===i)&&(o+=1),!(o<e&&xf(n.charCodeAt(o))))return void(t.err=`${gf}: ${wf} at index ${o}, "${n[o]}" invalid integer exponent`);for(;o<e&&xf(n.charCodeAt(o));)o+=1}t.index=o,t.param=+t.pathValue.slice(r,o)}else t.err=`${gf}: ${wf} at index ${o}, "${n[o]}" is not a number`},_f=t=>[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279,10,13,8232,8233,32,9,11,12,160].includes(t),kf=t=>{const{pathValue:e,max:n}=t;for(;t.index<n&&_f(e.charCodeAt(t.index));)t.index+=1},Mf=t=>xf(t)||43===t||45===t||46===t,Cf=t=>97==(32|t),Tf=t=>{const{max:e,pathValue:n,index:r}=t,i=n.charCodeAt(r),o=vf[n[r].toLowerCase()];if(t.segmentStart=r,(t=>{switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}})(i))if(t.index+=1,kf(t),t.data=[],o){for(;;){for(let r=o;r>0;r-=1){if(!Cf(i)||3!==r&&4!==r?$f(t):bf(t),t.err.length)return;t.data.push(t.param),kf(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,kf(t))}if(t.index>=t.max||!Mf(n.charCodeAt(t.index)))break}yf(t)}else yf(t);else t.err=`${gf}: ${wf} "${n[r]}" is not a path command`};class Sf{constructor(t){this.segments=[],this.pathValue=t,this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}}const Nf=t=>Array.isArray(t)&&t.every((t=>{const e=t[0].toLowerCase();return vf[e]===t.length-1&&"achlmqstvz".includes(e)})),Af=t=>{if(Nf(t))return[...t];const e=new Sf(t);for(kf(e);e.index<e.max&&!e.err.length;)Tf(e);if(e.err&&e.err.length)throw TypeError(e.err);return e.segments},zf=t=>{const e=t.length;let n,r=-1,i=t[e-1],o=0;for(;++r<e;)n=i,i=t[r],o+=n[1]*i[0]-n[0]*i[1];return o/2},jf=(t,e)=>Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),Df=t=>t.reduce(((e,n,r)=>r?e+jf(t[r-1],n):0),0);var Ef=Object.defineProperty,Pf=(t,e,n)=>(((t,e,n)=>{e in t?Ef(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const Lf={a:1,b:0,c:0,d:1,e:0,f:0,m11:1,m12:0,m13:0,m14:0,m21:0,m22:1,m23:0,m24:0,m31:0,m32:0,m33:1,m34:0,m41:0,m42:0,m43:0,m44:1,is2D:!0,isIdentity:!0},Rf=t=>(t instanceof Float64Array||t instanceof Float32Array||Array.isArray(t)&&t.every((t=>"number"==typeof t)))&&[6,16].some((e=>t.length===e)),If=t=>t instanceof DOMMatrix||t instanceof Gf||"object"==typeof t&&Object.keys(Lf).every((e=>t&&e in t)),qf=t=>{const e=new Gf,n=Array.from(t);if(!Rf(n))throw TypeError(`CSSMatrix: "${n.join(",")}" must be an array with 6/16 numbers.`);if(16===n.length){const[t,r,i,o,a,s,l,c,u,f,h,p,d,m,g,v]=n;e.m11=t,e.a=t,e.m21=a,e.c=a,e.m31=u,e.m41=d,e.e=d,e.m12=r,e.b=r,e.m22=s,e.d=s,e.m32=f,e.m42=m,e.f=m,e.m13=i,e.m23=l,e.m33=h,e.m43=g,e.m14=o,e.m24=c,e.m34=p,e.m44=v}else if(6===n.length){const[t,r,i,o,a,s]=n;e.m11=t,e.a=t,e.m12=r,e.b=r,e.m21=i,e.c=i,e.m22=o,e.d=o,e.m41=a,e.e=a,e.m42=s,e.f=s}return e},Ff=t=>{if(If(t))return qf([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a DOMMatrix / CSSMatrix / JSON compatible object.`)},Yf=t=>{if("string"!=typeof t)throw TypeError(`CSSMatrix: "${JSON.stringify(t)}" is not a string.`);const e=String(t).replace(/\s/g,"");let n=new Gf;const r=`CSSMatrix: invalid transform string "${t}"`;return e.split(")").filter((t=>t)).forEach((t=>{const[e,i]=t.split("(");if(!i)throw TypeError(r);const o=i.split(",").map((t=>t.includes("rad")?parseFloat(t)*(180/Math.PI):parseFloat(t))),[a,s,l,c]=o,u=[a,s,l],f=[a,s,l,c];if("perspective"===e&&a&&[s,l].every((t=>void 0===t)))n.m34=-1/a;else if(e.includes("matrix")&&[6,16].includes(o.length)&&o.every((t=>!Number.isNaN(+t)))){const t=o.map((t=>Math.abs(t)<1e-6?0:t));n=n.multiply(qf(t))}else if("translate3d"===e&&u.every((t=>!Number.isNaN(+t))))n=n.translate(a,s,l);else if("translate"===e&&a&&void 0===l)n=n.translate(a,s||0,0);else if("rotate3d"===e&&f.every((t=>!Number.isNaN(+t)))&&c)n=n.rotateAxisAngle(a,s,l,c);else if("rotate"===e&&a&&[s,l].every((t=>void 0===t)))n=n.rotate(0,0,a);else if("scale3d"===e&&u.every((t=>!Number.isNaN(+t)))&&u.some((t=>1!==t)))n=n.scale(a,s,l);else if("scale"!==e||Number.isNaN(a)||1===a||void 0!==l)if("skew"===e&&(a||!Number.isNaN(a)&&s)&&void 0===l)n=n.skew(a,s||0);else{if(!(["translate","rotate","scale","skew"].some((t=>e.includes(t)))&&/[XYZ]/.test(e)&&a&&[s,l].every((t=>void 0===t))))throw TypeError(r);if("skewX"===e||"skewY"===e)n=n[e](a);else{const t=e.replace(/[XYZ]/,""),r=e.replace(t,""),i=["X","Y","Z"].indexOf(r),o="scale"===t?1:0,s=[0===i?a:o,1===i?a:o,2===i?a:o];n=n[t](...s)}}else{const t=Number.isNaN(+s)?a:s;n=n.scale(a,t,1)}})),n},Of=(t,e)=>e?[t.a,t.b,t.c,t.d,t.e,t.f]:[t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44],Hf=(t,e,n)=>{const r=new Gf;return r.m41=t,r.e=t,r.m42=e,r.f=e,r.m43=n,r},Uf=(t,e,n)=>{const r=new Gf,i=Math.PI/180,o=t*i,a=e*i,s=n*i,l=Math.cos(o),c=-Math.sin(o),u=Math.cos(a),f=-Math.sin(a),h=Math.cos(s),p=-Math.sin(s),d=u*h,m=-u*p;r.m11=d,r.a=d,r.m12=m,r.b=m,r.m13=f;const g=c*f*h+l*p;r.m21=g,r.c=g;const v=l*h-c*f*p;return r.m22=v,r.d=v,r.m23=-c*u,r.m31=c*p-l*f*h,r.m32=c*h+l*f*p,r.m33=l*u,r},Vf=(t,e,n,r)=>{const i=new Gf,o=Math.sqrt(t*t+e*e+n*n);if(0===o)return i;const a=t/o,s=e/o,l=n/o,c=r*(Math.PI/360),u=Math.sin(c),f=Math.cos(c),h=u*u,p=a*a,d=s*s,m=l*l,g=1-2*(d+m)*h;i.m11=g,i.a=g;const v=2*(a*s*h+l*u*f);i.m12=v,i.b=v,i.m13=2*(a*l*h-s*u*f);const y=2*(s*a*h-l*u*f);i.m21=y,i.c=y;const b=1-2*(m+p)*h;return i.m22=b,i.d=b,i.m23=2*(s*l*h+a*u*f),i.m31=2*(l*a*h+s*u*f),i.m32=2*(l*s*h-a*u*f),i.m33=1-2*(p+d)*h,i},Bf=(t,e,n)=>{const r=new Gf;return r.m11=t,r.a=t,r.m22=e,r.d=e,r.m33=n,r},Wf=(t,e)=>{const n=new Gf;if(t){const e=t*Math.PI/180,r=Math.tan(e);n.m21=r,n.c=r}if(e){const t=e*Math.PI/180,r=Math.tan(t);n.m12=r,n.b=r}return n},Kf=t=>Wf(t,0),Xf=t=>Wf(0,t),Zf=(t,e)=>{const n=e.m11*t.m11+e.m12*t.m21+e.m13*t.m31+e.m14*t.m41,r=e.m11*t.m12+e.m12*t.m22+e.m13*t.m32+e.m14*t.m42,i=e.m11*t.m13+e.m12*t.m23+e.m13*t.m33+e.m14*t.m43,o=e.m11*t.m14+e.m12*t.m24+e.m13*t.m34+e.m14*t.m44,a=e.m21*t.m11+e.m22*t.m21+e.m23*t.m31+e.m24*t.m41,s=e.m21*t.m12+e.m22*t.m22+e.m23*t.m32+e.m24*t.m42,l=e.m21*t.m13+e.m22*t.m23+e.m23*t.m33+e.m24*t.m43,c=e.m21*t.m14+e.m22*t.m24+e.m23*t.m34+e.m24*t.m44,u=e.m31*t.m11+e.m32*t.m21+e.m33*t.m31+e.m34*t.m41,f=e.m31*t.m12+e.m32*t.m22+e.m33*t.m32+e.m34*t.m42,h=e.m31*t.m13+e.m32*t.m23+e.m33*t.m33+e.m34*t.m43,p=e.m31*t.m14+e.m32*t.m24+e.m33*t.m34+e.m34*t.m44,d=e.m41*t.m11+e.m42*t.m21+e.m43*t.m31+e.m44*t.m41,m=e.m41*t.m12+e.m42*t.m22+e.m43*t.m32+e.m44*t.m42,g=e.m41*t.m13+e.m42*t.m23+e.m43*t.m33+e.m44*t.m43,v=e.m41*t.m14+e.m42*t.m24+e.m43*t.m34+e.m44*t.m44;return qf([n,r,i,o,a,s,l,c,u,f,h,p,d,m,g,v])};class Gf{constructor(t){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this.m11=1,this.m12=0,this.m13=0,this.m14=0,this.m21=0,this.m22=1,this.m23=0,this.m24=0,this.m31=0,this.m32=0,this.m33=1,this.m34=0,this.m41=0,this.m42=0,this.m43=0,this.m44=1,t?this.setMatrixValue(t):this}get isIdentity(){return 1===this.m11&&0===this.m12&&0===this.m13&&0===this.m14&&0===this.m21&&1===this.m22&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m41&&0===this.m42&&0===this.m43&&1===this.m44}get is2D(){return 0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m43&&1===this.m44}setMatrixValue(t){return"string"==typeof t&&t.length&&"none"!==t?Yf(t):Array.isArray(t)||t instanceof Float64Array||t instanceof Float32Array?qf(t):"object"==typeof t?Ff(t):this}toFloat32Array(t){return Float32Array.from(Of(this,t))}toFloat64Array(t){return Float64Array.from(Of(this,t))}toString(){const{is2D:t}=this;return`${t?"matrix":"matrix3d"}(${this.toFloat64Array(t).join(", ")})`}toJSON(){const{is2D:t,isIdentity:e}=this;return{...this,is2D:t,isIdentity:e}}multiply(t){return Zf(this,t)}translate(t,e,n){let r=e,i=n;return typeof r>"u"&&(r=0),typeof i>"u"&&(i=0),Zf(this,Hf(t,r,i))}scale(t,e,n){let r=e,i=n;return typeof r>"u"&&(r=t),typeof i>"u"&&(i=1),Zf(this,Bf(t,r,i))}rotate(t,e,n){let r=t,i=e||0,o=n||0;return"number"==typeof t&&typeof e>"u"&&typeof n>"u"&&(o=r,r=0,i=0),Zf(this,Uf(r,i,o))}rotateAxisAngle(t,e,n,r){if([t,e,n,r].some((t=>Number.isNaN(+t))))throw new TypeError("CSSMatrix: expecting 4 values");return Zf(this,Vf(t,e,n,r))}skewX(t){return Zf(this,Kf(t))}skewY(t){return Zf(this,Xf(t))}skew(t,e){return Zf(this,Wf(t,e))}transformPoint(t){const e=this.m11*t.x+this.m21*t.y+this.m31*t.z+this.m41*t.w,n=this.m12*t.x+this.m22*t.y+this.m32*t.z+this.m42*t.w,r=this.m13*t.x+this.m23*t.y+this.m33*t.z+this.m43*t.w,i=this.m14*t.x+this.m24*t.y+this.m34*t.z+this.m44*t.w;return t instanceof DOMPoint?new DOMPoint(e,n,r,i):{x:e,y:n,z:r,w:i}}}Pf(Gf,"Translate",Hf),Pf(Gf,"Rotate",Uf),Pf(Gf,"RotateAxisAngle",Vf),Pf(Gf,"Scale",Bf),Pf(Gf,"SkewX",Kf),Pf(Gf,"SkewY",Xf),Pf(Gf,"Skew",Wf),Pf(Gf,"Multiply",Zf),Pf(Gf,"fromArray",qf),Pf(Gf,"fromMatrix",Ff),Pf(Gf,"fromString",Yf),Pf(Gf,"toArray",Of),Pf(Gf,"isCompatibleArray",Rf),Pf(Gf,"isCompatibleObject",If);const Qf=t=>Nf(t)&&t.every((([t])=>t===t.toUpperCase())),Jf=t=>{if(Qf(t))return[...t];const e=Af(t);let n=0,r=0,i=0,o=0;return e.map((t=>{const e=t.slice(1).map(Number),[a]=t,s=a.toUpperCase();if("M"===a)return[n,r]=e,i=n,o=r,["M",n,r];let l=[];if(a!==s)if("A"===s)l=[s,e[0],e[1],e[2],e[3],e[4],e[5]+n,e[6]+r];else if("V"===s)l=[s,e[0]+r];else if("H"===s)l=[s,e[0]+n];else{const t=e.map(((t,e)=>t+(e%2?r:n)));l=[s,...t]}else l=[s,...e];return"Z"===s?(n=i,r=o):"H"===s?[,n]=l:"V"===s?[,r]=l:([n,r]=l.slice(-2),"M"===s&&(i=n,o=r)),l}))},th=(t,e)=>{const[n]=t,{x1:r,y1:i,x2:o,y2:a}=e,s=t.slice(1).map(Number);let l=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)l=["L",t[1],i];else if("V"===n)l=["L",r,t[1]];else if("S"===n){const t=2*r-o,n=2*i-a;e.x1=t,e.y1=n,l=["C",t,n,...s]}else if("T"===n){const t=2*r-(e.qx?e.qx:0),n=2*i-(e.qy?e.qy:0);e.qx=t,e.qy=n,l=["Q",t,n,...s]}else if("Q"===n){const[t,n]=s;e.qx=t,e.qy=n}return l},eh=t=>Qf(t)&&t.every((([t])=>"ACLMQZ".includes(t))),nh={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},rh=t=>{if(eh(t))return[...t];const e=Jf(t),n={...nh},r=e.length;for(let t=0;t<r;t+=1){e[t],e[t]=th(e[t],n);const r=e[t],i=r.length;n.x1=+r[i-2],n.y1=+r[i-1],n.x2=+r[i-4]||n.x1,n.y2=+r[i-3]||n.y1}return e},ih=(t,e,n)=>{const[r,i]=t,[o,a]=e;return[r+(o-r)*n,i+(a-i)*n]},oh=(t,e,n,r,i)=>{const o=jf([t,e],[n,r]);let a={x:0,y:0};if("number"==typeof i)if(i<=0)a={x:t,y:e};else if(i>=o)a={x:n,y:r};else{const[s,l]=ih([t,e],[n,r],i/o);a={x:s,y:l}}return{length:o,point:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}},ah=(t,e)=>{const{x:n,y:r}=t,{x:i,y:o}=e,a=n*i+r*o,s=Math.sqrt((n**2+r**2)*(i**2+o**2));return(n*o-r*i<0?-1:1)*Math.acos(a/s)},sh=(t,e,n,r,i,o,a,s,l,c)=>{const{abs:u,sin:f,cos:h,sqrt:p,PI:d}=Math;let m=u(n),g=u(r);const v=(i%360+360)%360*(d/180);if(t===s&&e===l)return{x:t,y:e};if(0===m||0===g)return oh(t,e,s,l,c).point;const y=(t-s)/2,b=(e-l)/2,x=h(v)*y+f(v)*b,w=-f(v)*y+h(v)*b,$=x**2/m**2+w**2/g**2;$>1&&(m*=p($),g*=p($));let _=(m**2*g**2-m**2*w**2-g**2*x**2)/(m**2*w**2+g**2*x**2);_=_<0?0:_;const k=(o!==a?1:-1)*p(_),M=k*(m*w/g),C=k*(-g*x/m),T=h(v)*M-f(v)*C+(t+s)/2,S=f(v)*M+h(v)*C+(e+l)/2,N={x:(x-M)/m,y:(w-C)/g},A=ah({x:1,y:0},N);let z=ah(N,{x:(-x-M)/m,y:(-w-C)/g});!a&&z>0?z-=2*d:a&&z<0&&(z+=2*d),z%=2*d;const j=A+z*c,D=m*h(j),E=g*f(j);return{x:h(v)*D-f(v)*E+T,y:f(v)*D+h(v)*E+S}},lh=(t,e,n,r,i,o,a,s,l,c)=>{const u="number"==typeof c;let f=t,h=e,p=0,d=[f,h,p],m=[f,h],g=0,v={x:0,y:0},y=[{x:f,y:h}];u&&c<=0&&(v={x:f,y:h});for(let b=0;b<=300;b+=1){if(g=b/300,({x:f,y:h}=sh(t,e,n,r,i,o,a,s,l,g)),y=[...y,{x:f,y:h}],p+=jf(m,[f,h]),m=[f,h],u&&p>c&&c>d[2]){const t=(p-c)/(p-d[2]);v={x:m[0]*(1-t)+d[0]*t,y:m[1]*(1-t)+d[1]*t}}d=[f,h,p]}return u&&c>=p&&(v={x:s,y:l}),{length:p,point:v,min:{x:Math.min(...y.map((t=>t.x))),y:Math.min(...y.map((t=>t.y)))},max:{x:Math.max(...y.map((t=>t.x))),y:Math.max(...y.map((t=>t.y)))}}},ch=(t,e,n,r,i,o,a,s,l)=>{const c=1-l;return{x:c**3*t+3*c**2*l*n+3*c*l**2*i+l**3*a,y:c**3*e+3*c**2*l*r+3*c*l**2*o+l**3*s}},uh=(t,e,n,r,i,o,a,s,l)=>{const c="number"==typeof l;let u=t,f=e,h=0,p=[u,f,h],d=[u,f],m=0,g={x:0,y:0},v=[{x:u,y:f}];c&&l<=0&&(g={x:u,y:f});for(let y=0;y<=300;y+=1){if(m=y/300,({x:u,y:f}=ch(t,e,n,r,i,o,a,s,m)),v=[...v,{x:u,y:f}],h+=jf(d,[u,f]),d=[u,f],c&&h>l&&l>p[2]){const t=(h-l)/(h-p[2]);g={x:d[0]*(1-t)+p[0]*t,y:d[1]*(1-t)+p[1]*t}}p=[u,f,h]}return c&&l>=h&&(g={x:a,y:s}),{length:h,point:g,min:{x:Math.min(...v.map((t=>t.x))),y:Math.min(...v.map((t=>t.y)))},max:{x:Math.max(...v.map((t=>t.x))),y:Math.max(...v.map((t=>t.y)))}}},fh=(t,e,n,r,i,o,a)=>{const s=1-a;return{x:s**2*t+2*s*a*n+a**2*i,y:s**2*e+2*s*a*r+a**2*o}},hh=(t,e,n,r,i,o,a)=>{const s="number"==typeof a;let l=t,c=e,u=0,f=[l,c,u],h=[l,c],p=0,d={x:0,y:0},m=[{x:l,y:c}];s&&a<=0&&(d={x:l,y:c});for(let g=0;g<=300;g+=1){if(p=g/300,({x:l,y:c}=fh(t,e,n,r,i,o,p)),m=[...m,{x:l,y:c}],u+=jf(h,[l,c]),h=[l,c],s&&u>a&&a>f[2]){const t=(u-a)/(u-f[2]);d={x:h[0]*(1-t)+f[0]*t,y:h[1]*(1-t)+f[1]*t}}f=[l,c,u]}return s&&a>=u&&(d={x:i,y:o}),{length:u,point:d,min:{x:Math.min(...m.map((t=>t.x))),y:Math.min(...m.map((t=>t.y)))},max:{x:Math.max(...m.map((t=>t.x))),y:Math.max(...m.map((t=>t.y)))}}},ph=(t,e)=>{const n=rh(t),r="number"==typeof e;let i,o,a,s=[],l=0,c=0,u=0,f=0,h=[],p=[],d=0,m={x:0,y:0},g=m,v=m,y=m,b=0;for(let t=0,x=n.length;t<x;t+=1)a=n[t],[o]=a,i="M"===o,s=i?s:[l,c,...a.slice(1)],i?([,u,f]=a,m={x:u,y:f},g=m,d=0,r&&e<.001&&(y=m)):"L"===o?({length:d,min:m,max:g,point:v}=oh(...s,(e||0)-b)):"A"===o?({length:d,min:m,max:g,point:v}=lh(...s,(e||0)-b)):"C"===o?({length:d,min:m,max:g,point:v}=uh(...s,(e||0)-b)):"Q"===o?({length:d,min:m,max:g,point:v}=hh(...s,(e||0)-b)):"Z"===o&&(s=[l,c,u,f],({length:d,min:m,max:g,point:v}=oh(...s,(e||0)-b))),r&&b<e&&b+d>=e&&(y=v),p=[...p,g],h=[...h,m],b+=d,[l,c]="Z"!==o?a.slice(-2):[u,f];return r&&e>=b&&(y={x:l,y:c}),{length:b,point:y,min:{x:Math.min(...h.map((t=>t.x))),y:Math.min(...h.map((t=>t.y)))},max:{x:Math.max(...p.map((t=>t.x))),y:Math.max(...p.map((t=>t.y)))}}},dh=t=>{if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};const{min:{x:e,y:n},max:{x:r,y:i}}=ph(t),o=r-e,a=i-n;return{width:o,height:a,x:e,y:n,x2:r,y2:i,cx:e+o/2,cy:n+a/2,cz:Math.max(o,a)+Math.min(o,a)/2}},mh=(t,e,n)=>{if(t[n].length>7){t[n].shift();const r=t[n];let i=n;for(;r.length;)e[n]="A",t.splice(i+=1,0,["C",...r.splice(0,6)]);t.splice(n,1)}},gh=t=>eh(t)&&t.every((([t])=>"MC".includes(t))),vh=(t,e,n)=>({x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}),yh=(t,e,n,r,i,o,a,s,l,c)=>{let u=t,f=e,h=n,p=r,d=s,m=l;const g=120*Math.PI/180,v=Math.PI/180*(+i||0);let y,b,x,w,$,_=[];if(c)[b,x,w,$]=c;else{y=vh(u,f,-v),u=y.x,f=y.y,y=vh(d,m,-v),d=y.x,m=y.y;const t=(u-d)/2,e=(f-m)/2;let n=t*t/(h*h)+e*e/(p*p);n>1&&(n=Math.sqrt(n),h*=n,p*=n);const r=h*h,i=p*p,s=(o===a?-1:1)*Math.sqrt(Math.abs((r*i-r*e*e-i*t*t)/(r*e*e+i*t*t)));w=s*h*e/p+(u+d)/2,$=s*-p*t/h+(f+m)/2,b=Math.asin(((f-$)/p*10**9>>0)/10**9),x=Math.asin(((m-$)/p*10**9>>0)/10**9),b=u<w?Math.PI-b:b,x=d<w?Math.PI-x:x,b<0&&(b=2*Math.PI+b),x<0&&(x=2*Math.PI+x),a&&b>x&&(b-=2*Math.PI),!a&&x>b&&(x-=2*Math.PI)}let k=x-b;if(Math.abs(k)>g){const t=x,e=d,n=m;x=b+g*(a&&x>b?1:-1),d=w+h*Math.cos(x),m=$+p*Math.sin(x),_=yh(d,m,h,p,i,0,a,e,n,[x,t,w,$])}k=x-b;const M=Math.cos(b),C=Math.sin(b),T=Math.cos(x),S=Math.sin(x),N=Math.tan(k/4),A=4/3*h*N,z=4/3*p*N,j=[u,f],D=[u+A*C,f-z*M],E=[d+A*S,m-z*T],P=[d,m];if(D[0]=2*j[0]-D[0],D[1]=2*j[1]-D[1],c)return[...D,...E,...P,..._];_=[...D,...E,...P,..._];const L=[];for(let t=0,e=_.length;t<e;t+=1)L[t]=t%2?vh(_[t-1],_[t],v).y:vh(_[t],_[t+1],v).x;return L},bh=(t,e,n,r,i,o)=>{const a=.3333333333333333,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},xh=(t,e,n,r)=>[...ih([t,e],[n,r],.5),n,r,n,r],wh=(t,e)=>{const[n]=t,r=t.slice(1).map(Number),[i,o]=r;let a;const{x1:s,y1:l,x:c,y:u}=e;return"TQ".includes(n)||(e.qx=null,e.qy=null),"M"===n?(e.x=i,e.y=o,t):"A"===n?(a=[s,l,...r],["C",...yh(...a)]):"Q"===n?(e.qx=i,e.qy=o,a=[s,l,...r],["C",...bh(...a)]):"L"===n?["C",...xh(s,l,i,o)]:"Z"===n?["C",...xh(s,l,c,u)]:t},$h=t=>{if(gh(t))return[...t];const e=rh(t),n={...nh},r=[];let i="",o=e.length;for(let t=0;t<o;t+=1){[i]=e[t],r[t]=i,e[t]=wh(e[t],n),mh(e,r,t),o=e.length;const a=e[t],s=a.length;n.x1=+a[s-2],n.y1=+a[s-1],n.x2=+a[s-4]||n.x1,n.y2=+a[s-3]||n.y1}return e},_h=t=>{let e=0,n=0,r=0;return $h(t).map((t=>"M"===t[0]?([,e,n]=t,0):(r=((t,e,n,r,i,o,a,s)=>3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20)(e,n,...t.slice(1)),[e,n]=t.slice(-2),r))).reduce(((t,e)=>t+e),0)},kh=t=>ph(t).length,Mh=t=>_h($h(t))>=0,Ch=(t,e)=>ph(t,e).point,Th=(t,e)=>{const n=Af(t);let r=[...n],i=kh(r),o=r.length-1,a=0,s=0,l=n[0];const[c,u]=l.slice(-2),f={x:c,y:u};if(o<=0||!e||!Number.isFinite(e))return{segment:l,index:0,length:s,point:f,lengthAtSegment:a};if(e>=i)return r=n.slice(0,-1),a=kh(r),s=i-a,{segment:n[o],index:o,length:s,lengthAtSegment:a};const h=[];for(;o>0;)l=r[o],r=r.slice(0,-1),a=kh(r),s=i-a,i=a,h.push({segment:l,index:o,length:s,lengthAtSegment:a}),o-=1;return h.find((({lengthAtSegment:t})=>t<=e))},Sh=(t,e)=>{const n=Af(t),r=rh(n),i=kh(n),o=t=>{const n=t.x-e.x,r=t.y-e.y;return n*n+r*r};let a,s=8,l={x:0,y:0},c=0,u=0,f=1/0;for(let t=0;t<=i;t+=s)a=Ch(r,t),c=o(a),c<f&&(l=a,u=t,f=c);s/=2;let h,p,d=0,m=0,g=0,v=0;for(;s>.5;)d=u-s,h=Ch(r,d),g=o(h),m=u+s,p=Ch(r,m),v=o(p),d>=0&&g<f?(l=h,u=d,f=g):m<=i&&v<f?(l=p,u=m,f=v):s/=2;const y=Th(n,u);return{closest:l,distance:Math.sqrt(f),segment:y}},Nh=(t,e)=>Sh(t,e).closest,Ah=(t,e)=>Sh(t,e).segment,zh=(t,e)=>Th(t,e).segment,jh=(t,e)=>{const{distance:n}=Sh(t,e);return Math.abs(n)<.001},Dh=t=>{if("string"!=typeof t)return!1;const e=new Sf(t);for(kf(e);e.index<e.max&&!e.err.length;)Tf(e);return!e.err.length&&"mM".includes(e.segments[0][0])},Eh=t=>Nf(t)&&t.slice(1).every((([t])=>t===t.toLowerCase())),Ph=(t,e)=>{let{round:n}=mf;if("off"===e||"off"===n)return[...t];n="number"==typeof e&&e>=0?e:n;const r="number"==typeof n&&n>=1?10**n:1;return t.map((t=>{const e=t.slice(1).map(Number).map((t=>n?Math.round(t*r)/r:Math.round(t)));return[t[0],...e]}))},Lh=(t,e)=>Ph(t,e).map((t=>t[0]+t.slice(1).join(" "))).join(""),Rh={line:["x1","y1","x2","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],rect:["width","height","x","y","rx","ry"],polygon:["points"],polyline:["points"],glyph:["d"]},Ih=(t,e,n)=>{const r=n||document,i=r.defaultView||window,o=Object.keys(Rh),a=t instanceof i.SVGElement,s=a?t.tagName:null;if(s&&o.every((t=>s!==t)))throw TypeError(`${gf}: "${s}" is not SVGElement`);const l=r.createElementNS("http://www.w3.org/2000/svg","path"),c=a?s:t.type,u=Rh[c],f={type:c};a?(u.forEach((e=>{u.includes(e)&&(f[e]=t.getAttribute(e))})),Object.values(t.attributes).forEach((({name:t,value:e})=>{u.includes(t)||l.setAttribute(t,e)}))):(Object.assign(f,t),Object.keys(f).forEach((t=>{!u.includes(t)&&"type"!==t&&l.setAttribute(t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`)),f[t])})));let h="";const p=mf.round;return"circle"===c?h=Lh((t=>{const{cx:e,cy:n,r:r}=t;return[["M",e-r,n],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,-2*r,0]]})(f),p):"ellipse"===c?h=Lh((t=>{const{cx:e,cy:n,rx:r,ry:i}=t;return[["M",e-r,n],["a",r,i,0,1,0,2*r,0],["a",r,i,0,1,0,-2*r,0]]})(f),p):["polyline","polygon"].includes(c)?h=Lh((t=>{const e=[],n=(t.points||"").trim().split(/[\s|,]/).map(Number);let r=0;for(;r<n.length;)e.push([r?"L":"M",n[r],n[r+1]]),r+=2;return"polygon"===t.type?[...e,["z"]]:e})(f),p):"rect"===c?h=Lh((t=>{const e=+t.x||0,n=+t.y||0,r=+t.width,i=+t.height;let o=+t.rx,a=+t.ry;return o||a?(o=o||a,a=a||o,2*o>r&&(o-=(2*o-r)/2),2*a>i&&(a-=(2*a-i)/2),[["M",e+o,n],["h",r-2*o],["s",o,0,o,a],["v",i-2*a],["s",0,a,-o,a],["h",2*o-r],["s",-o,0,-o,-a],["v",2*a-i],["s",0,-a,o,-a]]):[["M",e,n],["h",r],["v",i],["H",e],["Z"]]})(f),p):"line"===c?h=Lh((t=>{const{x1:e,y1:n,x2:r,y2:i}=t;return[["M",e,n],["L",r,i]]})(f),p):"glyph"===c&&(h=a?t.getAttribute("d"):t.d),!!Dh(h)&&(l.setAttribute("d",h),e&&a&&(t.before(l,t),t.remove()),l)},qh=t=>{const e=[];let n,r=-1;return t.forEach((t=>{"M"===t[0]?(n=[t],r+=1):n=[...n,t],e[r]=n})),e},Fh=t=>{if(Eh(t))return[...t];const e=Af(t);let n=0,r=0,i=0,o=0;return e.map((t=>{const e=t.slice(1).map(Number),[a]=t,s=a.toLowerCase();if("M"===a)return[n,r]=e,i=n,o=r,["M",n,r];let l=[];if(a!==s)if("a"===s)l=[s,e[0],e[1],e[2],e[3],e[4],e[5]-n,e[6]-r];else if("v"===s)l=[s,e[0]-r];else if("h"===s)l=[s,e[0]-n];else{l=[s,...e.map(((t,e)=>t-(e%2?r:n)))]}else"m"===a&&(i=e[0]+n,o=e[1]+r),l=[s,...e];const c=l.length;return"z"===s?(n=i,r=o):"h"===s?n+=l[1]:"v"===s?r+=l[1]:(n+=l[c-2],r+=l[c-1]),l}))},Yh=(t,e,n,r)=>{const[i]=t,o=t=>Math.round(1e4*t)/1e4,a=t.slice(1).map((t=>+t)),s=e.slice(1).map((t=>+t)),{x1:l,y1:c,x2:u,y2:f,x:h,y:p}=n;let d=t;const[m,g]=s.slice(-2);if("TQ".includes(i)||(n.qx=null,n.qy=null),["V","H","S","T","Z"].includes(i))d=[i,...a];else if("L"===i)o(h)===o(m)?d=["V",g]:o(p)===o(g)&&(d=["H",m]);else if("C"===i){const[t,e]=s;"CS".includes(r)&&(o(t)===o(2*l-u)&&o(e)===o(2*c-f)||o(l)===o(2*u-h)&&o(c)===o(2*f-p))&&(d=["S",...s.slice(-4)]),n.x1=t,n.y1=e}else if("Q"===i){const[t,e]=s;n.qx=t,n.qy=e,"QT".includes(r)&&(o(t)===o(2*l-u)&&o(e)===o(2*c-f)||o(l)===o(2*u-h)&&o(c)===o(2*f-p))&&(d=["T",...s.slice(-2)])}return d},Oh=(t,e)=>{const n=Jf(t),r=rh(n),i={...nh},o=[],a=n.length;let s="",l="",c=0,u=0,f=0,h=0;for(let t=0;t<a;t+=1){[s]=n[t],o[t]=s,t&&(l=o[t-1]),n[t]=Yh(n[t],r[t],i,l);const e=n[t],a=e.length;switch(i.x1=+e[a-2],i.y1=+e[a-1],i.x2=+e[a-4]||i.x1,i.y2=+e[a-3]||i.y1,s){case"Z":c=f,u=h;break;case"H":[,c]=e;break;case"V":[,u]=e;break;default:[c,u]=e.slice(-2).map(Number),"M"===s&&(f=c,h=u)}i.x=c,i.y=u}const p=Ph(n,e),d=Ph(Fh(n),e);return p.map(((t,e)=>e?t.join("").length<d[e].join("").length?t:d[e]:t))},Hh=t=>{const e=t.slice(1).map(((e,n,r)=>n?[...r[n-1].slice(-2),...e.slice(1)]:[...t[0].slice(1),...e.slice(1)])).map((t=>t.map(((e,n)=>t[t.length-n-2*(1-n%2)])))).reverse();return[["M",...e[0].slice(0,2)],...e.map((t=>["C",...t.slice(2)]))]},Uh=t=>{const e=Jf(t),n="Z"===e.slice(-1)[0][0],r=rh(e).map(((t,n)=>{const[r,i]=t.slice(-2).map(Number);return{seg:e[n],n:t,c:e[n][0],x:r,y:i}})).map(((t,e,r)=>{const i=t.seg,o=t.n,a=e&&r[e-1],s=r[e+1],l=t.c,c=r.length,u=e?r[e-1].x:r[c-1].x,f=e?r[e-1].y:r[c-1].y;let h=[];switch(l){case"M":h=n?["Z"]:[l,u,f];break;case"A":h=[l,...i.slice(1,-3),1===i[5]?0:1,u,f];break;case"C":h=s&&"S"===s.c?["S",i[1],i[2],u,f]:[l,i[3],i[4],i[1],i[2],u,f];break;case"S":h=!a||!"CS".includes(a.c)||s&&"S"===s.c?[l,o[1],o[2],u,f]:["C",o[3],o[4],o[1],o[2],u,f];break;case"Q":h=s&&"T"===s.c?["T",u,f]:[l,...i.slice(1,-2),u,f];break;case"T":h=!a||!"QT".includes(a.c)||s&&"T"===s.c?[l,u,f]:["Q",o[1],o[2],u,f];break;case"Z":h=["M",u,f];break;case"H":h=[l,u];break;case"V":h=[l,f];break;default:h=[l,...i.slice(1,-2),u,f]}return h}));return n?r.reverse():[r[0],...r.slice(1).reverse()]},Vh=(t,e,n)=>{const[r,i,o]=n,[a,s,l]=((t,e)=>{let n=Gf.Translate(...e.slice(0,-1));return[,,,n.m44]=e,n=t.multiply(n),[n.m41,n.m42,n.m43,n.m44]})(t,[...e,0,1]),c=s-i,u=l-o;return[(a-r)*(Math.abs(o)/Math.abs(u)||1)+r,c*(Math.abs(o)/Math.abs(u)||1)+i]},Bh=(t,e)=>{let n,r,i,o,a,s,l=0,c=0;const u=Jf(t),f=e&&Object.keys(e);if(!e||f&&!f.length)return[...u];const h=rh(u);if(!e.origin){const{origin:t}=mf;Object.assign(e,{origin:t})}const p=(t=>{let e=new Gf;const{origin:n}=t,[r,i]=n,{translate:o}=t,{rotate:a}=t,{skew:s}=t,{scale:l}=t;return Array.isArray(o)&&o.length>=2&&o.every((t=>!Number.isNaN(+t)))&&o.some((t=>0!==t))?e=e.translate(...o):"number"==typeof o&&!Number.isNaN(o)&&(e=e.translate(o)),(a||s||l)&&(e=e.translate(r,i),Array.isArray(a)&&a.length>=2&&a.every((t=>!Number.isNaN(+t)))&&a.some((t=>0!==t))?e=e.rotate(...a):"number"==typeof a&&!Number.isNaN(a)&&(e=e.rotate(a)),Array.isArray(s)&&2===s.length&&s.every((t=>!Number.isNaN(+t)))&&s.some((t=>0!==t))?(e=s[0]?e.skewX(s[0]):e,e=s[1]?e.skewY(s[1]):e):"number"==typeof s&&!Number.isNaN(s)&&(e=e.skewX(s)),Array.isArray(l)&&l.length>=2&&l.every((t=>!Number.isNaN(+t)))&&l.some((t=>1!==t))?e=e.scale(...l):"number"==typeof l&&!Number.isNaN(l)&&(e=e.scale(l)),e=e.translate(-r,-i)),e})(e),{origin:d}=e,m={...nh};let g=[],v=0,y="",b=[];const x=[];if(!p.isIdentity){for(n=0,i=u.length;n<i;n+=1){g=u[n],u[n]&&([y]=g),x[n]=y,"A"===y&&(g=wh(h[n],m),u[n]=wh(h[n],m),mh(u,x,n),h[n]=wh(h[n],m),mh(h,x,n),i=Math.max(u.length,h.length)),g=h[n],v=g.length,m.x1=+g[v-2],m.y1=+g[v-1],m.x2=+g[v-4]||m.x1,m.y2=+g[v-3]||m.y1;const t={s:u[n],c:u[n][0],x:m.x1,y:m.y1};b=[...b,t]}return b.map((t=>{if(y=t.c,g=t.s,"L"===y||"H"===y||"V"===y)return[a,s]=Vh(p,[t.x,t.y],d),l!==a&&c!==s?g=["L",a,s]:c===s?g=["H",a]:l===a&&(g=["V",s]),l=a,c=s,g;for(r=1,o=g.length;r<o;r+=2)[l,c]=Vh(p,[+g[r],+g[r+1]],d),g[r]=l,g[r+1]=c;return g}))}return[...u]},Wh=t=>{const e=t.slice(0,2),n=t.slice(2,4),r=t.slice(4,6),i=t.slice(6,8),o=ih(e,n,.5),a=ih(n,r,.5),s=ih(r,i,.5),l=ih(o,a,.5),c=ih(a,s,.5),u=ih(l,c,.5);return[["C",...o,...l,...u],["C",...c,...s,...i]]};class Kh{static CSSMatrix=Gf;static getPathBBox=dh;static getPathArea=_h;static getTotalLength=kh;static getDrawDirection=Mh;static getPointAtLength=Ch;static pathLengthFactory=ph;static getPropertiesAtLength=Th;static getPropertiesAtPoint=Sh;static polygonLength=Df;static polygonArea=zf;static getClosestPoint=Nh;static getSegmentOfPoint=Ah;static getSegmentAtLength=zh;static isPointInStroke=jh;static isValidPath=Dh;static isPathArray=Nf;static isAbsoluteArray=Qf;static isRelativeArray=Eh;static isCurveArray=gh;static isNormalizedArray=eh;static shapeToPath=Ih;static parsePathString=Af;static roundPath=Ph;static splitPath=qh;static splitCubic=Wh;static optimizePath=Oh;static reverseCurve=Hh;static reversePath=Uh;static normalizePath=rh;static transformPath=Bh;static pathToAbsolute=Jf;static pathToRelative=Fh;static pathToCurve=$h;static pathToString=Lh;constructor(t,e){const n=e||{},r=typeof t>"u";if(r||!t.length)throw TypeError(`${gf}: "pathValue" is ${r?"undefined":"empty"}`);const i=Af(t);this.segments=i;const{width:o,height:a,cx:s,cy:l,cz:c}=this.getBBox(),{round:u,origin:f}=n;let h,p;if("auto"===u){const t=`${Math.floor(Math.max(o,a))}`.length;h=t>=4?0:4-t}else h=Number.isInteger(u)||"off"===u?u:mf.round;if(Array.isArray(f)&&f.length>=2){const[t,e,n]=f.map(Number);p=[Number.isNaN(t)?s:t,Number.isNaN(e)?l:e,Number.isNaN(n)?c:n]}else p=[s,l,c];return this.round=h,this.origin=p,this}getBBox(){return dh(this.segments)}getTotalLength(){return kh(this.segments)}getPointAtLength(t){return Ch(this.segments,t)}toAbsolute(){const{segments:t}=this;return this.segments=Jf(t),this}toRelative(){const{segments:t}=this;return this.segments=Fh(t),this}toCurve(){const{segments:t}=this;return this.segments=$h(t),this}reverse(t){this.toAbsolute();const{segments:e}=this,n=qh(e),r=n.length>1&&n,i=r?[...r].map(((e,n)=>t?n?Uh(e):[...e]:Uh(e))):[...e];let o=[];return o=r?i.flat(1):t?e:Uh(e),this.segments=[...o],this}normalize(){const{segments:t}=this;return this.segments=rh(t),this}optimize(){const{segments:t}=this;return this.segments=Oh(t,this.round),this}transform(t){if(!t||"object"!=typeof t||"object"==typeof t&&!["translate","rotate","skew","scale"].some((e=>e in t)))return this;const{segments:e,origin:[n,r,i]}=this,o={};for(const[e,n]of Object.entries(t))"skew"===e&&Array.isArray(n)||("rotate"===e||"translate"===e||"origin"===e||"scale"===e)&&Array.isArray(n)?o[e]=n.map(Number):"origin"!==e&&"number"==typeof Number(n)&&(o[e]=Number(n));const{origin:a}=o;if(Array.isArray(a)&&a.length>=2){const[t,e,s]=a.map(Number);o.origin=[Number.isNaN(t)?n:t,Number.isNaN(e)?r:e,s||i]}else o.origin=[n,r,i];return this.segments=Bh(e,o),this}flipX(){return this.transform({rotate:[0,180,0]}),this}flipY(){return this.transform({rotate:[180,0,0]}),this}toString(){return Lh(this.segments,this.round)}}function Xh(t,e,n){const r=t.slice();return r[25]=e[n],r[27]=n,r}function Zh(t,e,n){const r=t.slice();return r[25]=e[n],r[27]=n,r}function Gh(t,e,n){const r=t.slice();return r[29]=e[n],r[27]=n,r}function Qh(e){let n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=Jh(Gh(e,r,t));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=D()},m(t,e){for(let n=0;n<i.length;n+=1)i[n].m(t,e);C(t,n,e)},p(t,e){if(259&e){let o;for(r=t[0],o=0;o<r.length;o+=1){const a=Gh(t,r,o);i[o]?(i[o].p(a,e),_t(i[o],1)):(i[o]=Jh(a),i[o].c(),_t(i[o],1),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i(t){for(let t=0;t<r.length;t+=1)_t(i[t])},o:t,d(t){S(i,t),t&&T(n)}}}function Jh(e){let n,r,i,o,a,s,l,c,u,f;return{c(){n=A("path"),s=A("path"),R(n,"class",r="link linkTo-"+e[29].to.node+" linkFrom-"+e[29].from.node+" svelte-11wszn8"),R(n,"stroke-width",i=e[29].value),R(n,"d",o=e[29].pathString),R(s,"class",l="arrow arrowTo-"+e[29].to.node+" arrowFrom-"+e[29].from.node+" svelte-11wszn8"),R(s,"d",c=e[8]([e[29].start,e[29].midpoint,e[29].end])),R(s,"marker-end","url(#triangle)")},m(t,r){C(t,n,r),C(t,s,r),u||(f=E(n,"introend",e[9]),u=!0)},p(t,a){e=t,1&a&&r!==(r="link linkTo-"+e[29].to.node+" linkFrom-"+e[29].from.node+" svelte-11wszn8")&&R(n,"class",r),1&a&&i!==(i=e[29].value)&&R(n,"stroke-width",i),1&a&&o!==(o=e[29].pathString)&&R(n,"d",o),1&a&&l!==(l="arrow arrowTo-"+e[29].to.node+" arrowFrom-"+e[29].from.node+" svelte-11wszn8")&&R(s,"class",l),1&a&&c!==(c=e[8]([e[29].start,e[29].midpoint,e[29].end]))&&R(s,"d",c)},i(t){a||ut((()=>{a=Ct(n,Jl,{duration:1e3,delay:200+10*e[29].value}),a.start()}))},o:t,d(t){t&&T(n),t&&T(s),u=!1,f()}}}function tp(e){let n,r,i=e[7].filter(ap),o=[];for(let t=0;t<i.length;t+=1)o[t]=ep(Zh(e,i,t));let a=e[7].filter(sp),s=[];for(let t=0;t<a.length;t+=1)s[t]=np(Xh(e,a,t));return{c(){n=A("g");for(let t=0;t<o.length;t+=1)o[t].c();r=D();for(let t=0;t<s.length;t+=1)s[t].c();R(n,"class","node-group")},m(t,e){C(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null);_(n,r);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,e){if(132&e){let a;for(i=t[7].filter(ap),a=0;a<i.length;a+=1){const s=Zh(t,i,a);o[a]?(o[a].p(s,e),_t(o[a],1)):(o[a]=ep(s),o[a].c(),_t(o[a],1),o[a].m(n,r))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}if(132&e){let r;for(a=t[7].filter(sp),r=0;r<a.length;r+=1){const i=Xh(t,a,r);s[r]?(s[r].p(i,e),_t(s[r],1)):(s[r]=np(i),s[r].c(),_t(s[r],1),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=a.length}},i(t){for(let t=0;t<i.length;t+=1)_t(o[t]);for(let t=0;t<a.length;t+=1)_t(s[t])},o:t,d(t){t&&T(n),S(o,t),S(s,t)}}}function ep(e){let n,r,o,a,s,l,c,u,f,h,p=e[25].archetype+"";function d(...t){return e[10](e[25],...t)}function m(...t){return e[11](e[25],...t)}return{c(){n=A("g"),r=A("circle"),s=A("text"),l=z(p),R(r,"class",o="node "+(e[2]?"active":"")+" svelte-11wszn8"),R(r,"r",e[25].r),R(s,"class","node-label svelte-11wszn8"),R(s,"dy",c=-(e[25].r+3)),R(n,"transform",u="translate("+e[25].x+", "+e[25].y+")")},m(t,e){C(t,n,e),_(n,r),_(n,s),_(s,l),f||(h=[E(r,"mouseenter",d),E(r,"mouseleave",m)],f=!0)},p(t,n){e=t,4&n&&o!==(o="node "+(e[2]?"active":"")+" svelte-11wszn8")&&R(r,"class",o)},i(t){a||ut((()=>{a=Ct(r,Ql,{duration:1e3}),a.start()}))},o:t,d(t){t&&T(n),f=!1,i(h)}}}function np(e){let n,r,o,a,s,l,c,u,f,h,p=e[25].archetype+"";function d(...t){return e[12](e[25],...t)}function m(...t){return e[13](e[25],...t)}return{c(){n=A("g"),r=A("circle"),s=A("text"),l=z(p),R(r,"class",o="node "+(e[2]?"active":"")+" svelte-11wszn8"),R(r,"r",e[25].r),R(s,"class","node-label svelte-11wszn8"),R(s,"dy",c=e[25].r+18),R(n,"transform",u="translate("+e[25].x+", "+e[25].y+")")},m(t,e){C(t,n,e),_(n,r),_(n,s),_(s,l),f||(h=[E(r,"mouseenter",d),E(r,"mouseleave",m)],f=!0)},p(t,n){e=t,4&n&&o!==(o="node "+(e[2]?"active":"")+" svelte-11wszn8")&&R(r,"class",o)},i(t){a||ut((()=>{a=Ct(r,Ql,{duration:1e3}),a.start()}))},o:t,d(t){t&&T(n),f=!1,i(h)}}}function rp(e){let n,r,i,o=e[3]&&Qh(e),a=e[3]&&tp(e);return{c(){n=A("g"),o&&o.c(),r=j(),a&&a.c(),i=D(),R(n,"class","link-group"),R(n,"id","link-group")},m(t,e){C(t,n,e),o&&o.m(n,null),C(t,r,e),a&&a.m(t,e),C(t,i,e)},p(t,[e]){t[3]?o?(o.p(t,e),8&e&&_t(o,1)):(o=Qh(t),o.c(),_t(o,1),o.m(n,null)):o&&(o.d(1),o=null),t[3]?a?(a.p(t,e),8&e&&_t(a,1)):(a=tp(t),a.c(),_t(a,1),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(t){_t(o),_t(a)},o:t,d(t){t&&T(n),o&&o.d(),t&&T(r),a&&a.d(t),t&&T(i)}}}function ip(t,e){const n=document.getElementById("link-group"),r=document.getElementsByClassName(`linkFrom-${e.node}`),i=document.getElementsByClassName(`arrowFrom-${e.node}`),o=document.getElementsByClassName(`linkTo-${e.node}`),a=document.getElementsByClassName(`arrowTo-${e.node}`),s=[];for(const t of r)t.classList.toggle("linkFrom"),s.push({selection:t});for(const t of o)t.classList.toggle("linkTo"),s.push({selection:t});for(const t of i)t.classList.toggle("arrowVisible"),s.push({selection:t});for(const t of a)t.classList.toggle("arrowVisible"),s.push({selection:t});for(const t of s)n.appendChild(t.selection)}function op(t,e){const n=document.getElementsByClassName(`linkFrom-${e.node}`),r=document.getElementsByClassName(`arrowFrom-${e.node}`),i=document.getElementsByClassName(`linkTo-${e.node}`),o=document.getElementsByClassName(`arrowTo-${e.node}`);for(const t of n)t.classList.toggle("linkFrom");for(const t of i)t.classList.toggle("linkTo");for(const t of r)t.classList.toggle("arrowVisible");for(const t of o)t.classList.toggle("arrowVisible")}const ap=t=>t.node<9,sp=t=>9===t.node;function lp(t,e,n){let r,i,o,a,s,c;const{custom:u,width:f,height:h}=rt("LayerCake");l(t,u,(t=>n(16,c=t))),l(t,f,(t=>n(15,s=t))),l(t,h,(t=>n(14,a=t)));const{nodes:p,links:d}=c;let m=[];const g=s/1.75,v=Math.acos((2*Math.pow(g,2)-Math.pow(s,2))/(2*Math.pow(g,2))),y=v/(p.length-1),b=v/2-y/2,x=p.map(((t,e)=>{let n,r,i;return t.node<9?(n=s/2+g*Math.cos(y*e-Math.PI/2-b),r=(1+Math.sin(y*e-Math.PI/2-b))*g,i=t.population_size/(1+4*Math.random())):(i=20,n=s/2,r=a-i),Object.assign(Object.assign({},t),{x:n,y:r,r:i})})),w=new Map(x.map((t=>[t.node.toFixed(0),t])));const $=ac().x((t=>t.x)).y((t=>t.y)).curve(pc);et((()=>{n(0,m=d.map(((t,e)=>{const n=w.get(t.from),r=w.get(t.to),i=function(t,e){if(t.moveTo(e.from.x,e.from.y),"9"===e.link.to){const n=e.from.x>s/2?s:0;t.quadraticCurveTo(n,a/1.5,e.to.x,e.to.y)}else 1===Math.abs(+e.link.to-+e.link.from)?t.lineTo(e.to.x,e.to.y):t.quadraticCurveTo(s/2,.1+Math.random()*a,e.to.x,e.to.y);return t}(Rl(),{from:n,to:r,link:t}).toString(),o=new Kh(i),l=+o.getTotalLength().toPrecision(2),c=o.getPointAtLength(.48*l),u=o.getPointAtLength(.5*l),f=o.getPointAtLength(.52*l);return Object.assign(Object.assign({},t),{to:r,from:n,pathString:i,pathInstance:o,totalLength:l,start:c,midpoint:u,end:f})}))),n(3,r=!0)}));return t.$$.update=()=>{3&t.$$.dirty&&m.length>0&&m.length===i&&n(2,o=!0)},n(3,r=!1),n(1,i=0),n(2,o=!1),[m,i,o,r,u,f,h,x,$,()=>n(1,i+=1),(t,e)=>ip(0,t),(t,e)=>op(0,t),(t,e)=>ip(0,t),(t,e)=>op(0,t)]}class cp extends Pt{constructor(t){super(),Et(this,t,lp,rp,a,{})}}function up(t){let e,n;return e=new cp({}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function fp(t){let e,n,r,i,o,a,s=t[8]&&up();return{c(){e=A("defs"),n=A("marker"),r=A("path"),i=j(),s&&s.c(),o=D(),R(r,"d","M 0 0 L 10 5 L 0 10 z"),R(r,"fill","black"),R(n,"id","triangle"),R(n,"viewBox","0 0 10 10"),R(n,"refX","1"),R(n,"refY","5"),R(n,"markerUnits","userSpaceOnUse"),R(n,"markerWidth","6"),R(n,"markerHeight","6"),R(n,"orient","auto")},m(t,l){C(t,e,l),_(e,n),_(n,r),C(t,i,l),s&&s.m(t,l),C(t,o,l),a=!0},p(t,e){t[8]?s?256&e&&_t(s,1):(s=up(),s.c(),_t(s,1),s.m(o.parentNode,o)):s&&(wt(),kt(s,1,1,(()=>{s=null})),$t())},i(t){a||(_t(s),a=!0)},o(t){kt(s),a=!1},d(t){t&&T(e),t&&T(i),s&&s.d(t),t&&T(o)}}}function hp(t){let e,n;return e=new Ta({props:{$$slots:{default:[fp]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};768&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function pp(t){let e,n;return e=new Vc({props:{caption:t[1],url:t[4],type:12===t[6]?"split-cols":"single-cols"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.caption=t[1]),16&n&&(r.url=t[4]),64&n&&(r.type=12===t[6]?"split-cols":"single-cols"),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function dp(t){let e,n,r,i,o,a;n=new ma({props:{padding:t[8]?t[0]:{},custom:{nodes:t[2],links:t[3]},$$slots:{default:[hp]},$$scope:{ctx:t}}});let s=t[5]&&pp(t);return{c(){e=N("div"),At(n.$$.fragment),i=j(),s&&s.c(),o=D(),R(e,"class",r="chart flow-chart "+t[7])},m(t,r){C(t,e,r),zt(n,e,null),C(t,i,r),s&&s.m(t,r),C(t,o,r),a=!0},p(t,[i]){const l={};257&i&&(l.padding=t[8]?t[0]:{}),12&i&&(l.custom={nodes:t[2],links:t[3]}),768&i&&(l.$$scope={dirty:i,ctx:t}),n.$set(l),(!a||128&i&&r!==(r="chart flow-chart "+t[7]))&&R(e,"class",r),t[5]?s?(s.p(t,i),32&i&&_t(s,1)):(s=pp(t),s.c(),_t(s,1),s.m(o.parentNode,o)):s&&(wt(),kt(s,1,1,(()=>{s=null})),$t())},i(t){a||(_t(n.$$.fragment,t),_t(s),a=!0)},o(t){kt(n.$$.fragment,t),kt(s),a=!1},d(t){t&&T(e),jt(n),t&&T(i),s&&s.d(t),t&&T(o)}}}function mp(t,e,n){let r,{margins:i={top:50,right:0,bottom:50,left:0}}=e,{caption:o=""}=e,{nodes:a}=e,{links:s}=e,{url:l=""}=e,{includeCaption:c=!0}=e,{spanCol:u}=e,{customClass:f=""}=e;return et((()=>{n(8,r=!0)})),t.$$set=t=>{"margins"in t&&n(0,i=t.margins),"caption"in t&&n(1,o=t.caption),"nodes"in t&&n(2,a=t.nodes),"links"in t&&n(3,s=t.links),"url"in t&&n(4,l=t.url),"includeCaption"in t&&n(5,c=t.includeCaption),"spanCol"in t&&n(6,u=t.spanCol),"customClass"in t&&n(7,f=t.customClass)},n(8,r=!1),[i,o,a,s,l,c,u,f,r]}class gp extends Pt{constructor(t){super(),Et(this,t,mp,dp,a,{margins:0,caption:1,nodes:2,links:3,url:4,includeCaption:5,spanCol:6,customClass:7})}}function vp(t,e,n){const r=t.slice();return r[9]=e[n],r}function yp(t,e,n){const r=t.slice();return r[9]=e[n],r[13]=n,r}function bp(t){let e,n;return e=new gp({props:{nodes:t[5],links:t[6],spanCol:12,url:_p,caption:t[3][0].value,customClass:"chart-large"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};32&n&&(r.nodes=t[5]),64&n&&(r.links=t[6]),8&n&&(r.caption=t[3][0].value),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function xp(t){let e,n,r,i=t[9].value+"";return{c(){e=N("p"),n=z(i),r=j()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){2&e&&i!==(i=t[9].value+"")&&I(n,i)},d(t){t&&T(e)}}}function wp(t){let e,n,r,i=t[9].value+"";return{c(){e=N("p"),n=z(i),r=j()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){4&e&&i!==(i=t[9].value+"")&&I(n,i)},d(t){t&&T(e)}}}function $p(t){let e,n,r,a,s,l,c,u,f,h,p=t[4]&&t[7]&&bp(t),d=t[1],m=[];for(let e=0;e<d.length;e+=1)m[e]=xp(yp(t,d,e));let v=t[2],y=[];for(let e=0;e<v.length;e+=1)y[e]=wp(vp(t,v,e));return{c(){e=N("div"),n=N("div"),p&&p.c(),r=j(),a=N("div");for(let t=0;t<m.length;t+=1)m[t].c();s=j(),l=N("div");for(let t=0;t<y.length;t+=1)y[t].c();R(n,"class","chart-wrapper svelte-1p8225q"),R(a,"class","copy svelte-1p8225q"),R(l,"class","references svelte-1p8225q"),R(e,"class","section section-2 svelte-1p8225q")},m(i,o){C(i,e,o),_(e,n),p&&p.m(n,null),_(e,r),_(e,a);for(let t=0;t<m.length;t+=1)m[t].m(a,null);_(e,s),_(e,l);for(let t=0;t<y.length;t+=1)y[t].m(l,null);u=!0,f||(h=[g(c=Bu.call(null,e,{once:t[0]})),E(e,"enter",t[8])],f=!0)},p(t,[e]){if(t[4]&&t[7]?p?(p.p(t,e),144&e&&_t(p,1)):(p=bp(t),p.c(),_t(p,1),p.m(n,null)):p&&(wt(),kt(p,1,1,(()=>{p=null})),$t()),2&e){let n;for(d=t[1],n=0;n<d.length;n+=1){const r=yp(t,d,n);m[n]?m[n].p(r,e):(m[n]=xp(r),m[n].c(),m[n].m(a,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=d.length}if(4&e){let n;for(v=t[2],n=0;n<v.length;n+=1){const r=vp(t,v,n);y[n]?y[n].p(r,e):(y[n]=wp(r),y[n].c(),y[n].m(l,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=v.length}c&&o(c.update)&&1&e&&c.update.call(null,{once:t[0]})},i(t){u||(_t(p),u=!0)},o(t){kt(p),u=!1},d(t){t&&T(e),p&&p.d(),S(m,t),S(y,t),f=!1,i(h)}}}let _p="assets/data/nodes.csv";function kp(t,e,n){let r,i,o,a=!1,{once:s}=e,{copy:l}=e,{refs:c}=e,{captions:u}=e;et((async()=>{const t=await te(_p,Xt);n(5,i=t.map((t=>Object.assign({},t))));const e=await te("assets/data/links.csv",Xt);n(6,o=e.reduce(((t,e)=>{const n=Object.entries(e),r=n.filter((t=>"from"!==t[0]&&null!==t[1])),i=n.filter((t=>"from"===t[0]))[0][1].toFixed(0);return r.forEach((e=>{t.push({from:i,to:e[0],value:e[1]})})),t}),[])),n(7,r=!0)}));return t.$$set=t=>{"once"in t&&n(0,s=t.once),"copy"in t&&n(1,l=t.copy),"refs"in t&&n(2,c=t.refs),"captions"in t&&n(3,u=t.captions)},n(7,r=!1),[s,l,c,u,a,i,o,r,()=>n(4,a=!0)]}class Mp extends Pt{constructor(t){super(),Et(this,t,kp,$p,a,{once:0,copy:1,refs:2,captions:3})}}function Cp(t,e,n){const r=t.slice();r[11]=e[n],r[14]=n;const i=r[11][1][0][1].map(((t,e)=>({...t,value_2:r[11][1][1][1][e].value})));return r[12]=i,r}function Tp(t,e,n){const r=t.slice();return r[15]=e[n],r[17]=n,r}function Sp(e,n){let r,i,o,a,s=t;return{key:e,first:null,c(){r=A("path"),R(r,"class",i=d(`path-line path-line-${n[15][0]}`)+" svelte-fg1arv"),R(r,"d",o=n[1](n[15][1])),this.first=r},m(t,e){C(t,r,e)},p(t,e){n=t,4&e&&i!==(i=d(`path-line path-line-${n[15][0]}`)+" svelte-fg1arv")&&R(r,"class",i),6&e&&o!==(o=n[1](n[15][1]))&&R(r,"d",o)},r(){a=r.getBoundingClientRect()},f(){Q(r),s()},a(){s(),s=G(r,a,zp,{delay:0,duration:500})},d(t){t&&T(r)}}}function Np(t){let e,n,r=[],i=new Map,o=t[11][1];const a=t=>t[15];for(let e=0;e<o.length;e+=1){let n=Tp(t,o,e),s=a(n);i.set(s,r[e]=Sp(s,n))}return{c(){e=A("g");for(let t=0;t<r.length;t+=1)r[t].c();R(e,"class",n="threshold-group threshold-group-"+t[11][0]+" svelte-fg1arv")},m(t,n){C(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,s){if(6&s){o=t[11][1];for(let t=0;t<r.length;t+=1)r[t].r();r=St(r,s,a,1,t,o,i,e,Tt,Sp,null,Tp);for(let t=0;t<r.length;t+=1)r[t].a()}4&s&&n!==(n="threshold-group threshold-group-"+t[11][0]+" svelte-fg1arv")&&R(e,"class",n)},d(t){t&&T(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Ap(e){let n,r,i=e[2],o=[];for(let t=0;t<i.length;t+=1)o[t]=Np(Cp(e,i,t));return{c(){n=A("g");for(let t=0;t<o.length;t+=1)o[t].c();R(n,"class",r=d(`line-group line-group-${e[0]}`)+" svelte-fg1arv")},m(t,e){C(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,[e]){if(6&e){let r;for(i=t[2],r=0;r<i.length;r+=1){const a=Cp(t,i,r);o[r]?o[r].p(a,e):(o[r]=Np(a),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}1&e&&r!==(r=d(`line-group line-group-${t[0]}`)+" svelte-fg1arv")&&R(n,"class",r)},i:t,o:t,d(t){t&&T(n),S(o,t)}}}function zp(t,{from:e,to:n},{delay:r,duration:i}){const o=t.getTotalLength();return{delay:r,duration:i,css:(t,e)=>`stroke-dasharray: ${t*o} ${e*o}`}}function jp(t,e,n){let r,i,o,a;const{data:s,xGet:c,yGet:u,xScale:f,yScale:h,zScale:p}=rt("LayerCake");l(t,s,(t=>n(2,a=t))),l(t,c,(t=>n(7,o=t))),l(t,u,(t=>n(6,i=t)));let{activeChart:d}=e;return t.$$set=t=>{"activeChart"in t&&n(0,d=t.activeChart)},t.$$.update=()=>{192&t.$$.dirty&&n(1,r=ac().x((t=>o(t))).y((t=>i(t))).curve(uc))},[d,r,a,s,c,u,i,o]}class Dp extends Pt{constructor(t){super(),Et(this,t,jp,Ap,a,{activeChart:0})}}function Ep(t){let e,n,r,i,o,a;return e=new Ec({props:{gridlines:!1,ticks:t[9],formatTick:t[8],snapTicks:!1,tickMarks:!0}}),r=new Yc({props:{ticks:4,formatTick:t[10]}}),o=new Dp({props:{activeChart:t[1]}}),{c(){At(e.$$.fragment),n=j(),At(r.$$.fragment),i=j(),At(o.$$.fragment)},m(t,s){zt(e,t,s),C(t,n,s),zt(r,t,s),C(t,i,s),zt(o,t,s),a=!0},p(t,n){const i={};512&n&&(i.ticks=t[9]),256&n&&(i.formatTick=t[8]),e.$set(i);const a={};1024&n&&(a.formatTick=t[10]),r.$set(a);const s={};2&n&&(s.activeChart=t[1]),o.$set(s)},i(t){a||(_t(e.$$.fragment,t),_t(r.$$.fragment,t),_t(o.$$.fragment,t),a=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(o.$$.fragment,t),a=!1},d(t){jt(e,t),t&&T(n),jt(r,t),t&&T(i),jt(o,t)}}}function Pp(t){let e,n;return e=new Ta({props:{$$slots:{default:[Ep]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};34562&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function Lp(t){let e,n;return e=new Vc({props:{caption:t[0],url:t[3],type:12===t[12]?"split-cols":"single-cols"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.caption=t[0]),8&n&&(r.url=t[3]),4096&n&&(r.type=12===t[12]?"split-cols":"single-cols"),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function Rp(t){let e,n,r,i,o;n=new ma({props:{padding:{top:20,right:10,bottom:20,left:45},flatData:t[2],data:t[4],x:t[5],xScale:"date"===t[5]?wo():Xn(),y:t[6],yDomain:t[7],yNice:!0,$$slots:{default:[Pp]},$$scope:{ctx:t}}});let a=t[11]&&Lp(t);return{c(){e=N("div"),At(n.$$.fragment),r=j(),a&&a.c(),i=D(),R(e,"class","chart line-chart")},m(t,s){C(t,e,s),zt(n,e,null),C(t,r,s),a&&a.m(t,s),C(t,i,s),o=!0},p(t,[e]){const r={};4&e&&(r.flatData=t[2]),16&e&&(r.data=t[4]),32&e&&(r.x=t[5]),32&e&&(r.xScale="date"===t[5]?wo():Xn()),64&e&&(r.y=t[6]),128&e&&(r.yDomain=t[7]),34562&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r),t[11]?a?(a.p(t,e),2048&e&&_t(a,1)):(a=Lp(t),a.c(),_t(a,1),a.m(i.parentNode,i)):a&&(wt(),kt(a,1,1,(()=>{a=null})),$t())},i(t){o||(_t(n.$$.fragment,t),_t(a),o=!0)},o(t){kt(n.$$.fragment,t),kt(a),o=!1},d(t){t&&T(e),jt(n),t&&T(r),a&&a.d(t),t&&T(i)}}}function Ip(t,e,n){let{caption:r}=e,{activeChart:i}=e,{data:o}=e,{url:a}=e,{groupedData:s}=e,{xKey:l}=e,{yKey:c}=e,{zKey:u}=e,{yDomain:f=[0,100]}=e,{formatTickX:h}=e,{xTicks:p=6}=e,{formatTickY:d=(t=>t.toFixed(0))}=e,{includeCaption:m=!0}=e,{spanCol:g}=e,{markers:v}=e;return t.$$set=t=>{"caption"in t&&n(0,r=t.caption),"activeChart"in t&&n(1,i=t.activeChart),"data"in t&&n(2,o=t.data),"url"in t&&n(3,a=t.url),"groupedData"in t&&n(4,s=t.groupedData),"xKey"in t&&n(5,l=t.xKey),"yKey"in t&&n(6,c=t.yKey),"zKey"in t&&n(13,u=t.zKey),"yDomain"in t&&n(7,f=t.yDomain),"formatTickX"in t&&n(8,h=t.formatTickX),"xTicks"in t&&n(9,p=t.xTicks),"formatTickY"in t&&n(10,d=t.formatTickY),"includeCaption"in t&&n(11,m=t.includeCaption),"spanCol"in t&&n(12,g=t.spanCol),"markers"in t&&n(14,v=t.markers)},[r,i,o,a,s,l,c,f,h,p,d,m,g,u,v]}class qp extends Pt{constructor(t){super(),Et(this,t,Ip,Rp,a,{caption:0,activeChart:1,data:2,url:3,groupedData:4,xKey:5,yKey:6,zKey:13,yDomain:7,formatTickX:8,xTicks:9,formatTickY:10,includeCaption:11,spanCol:12,markers:14})}}function Fp(t,e,n){const r=t.slice();return r[12]=e[n],r[14]=n,r}function Yp(t,e,n){const r=t.slice();return r[12]=e[n],r[14]=n,r}function Op(e){let n;return{c(){n=N("div"),R(n,"class","chart-placeholder svelte-1rjzzrs")},m(t,e){C(t,n,e)},p:t,i:t,o:t,d(t){t&&T(n)}}}function Hp(t){let e,n;var r;return e=new qp({props:{data:t[4],groupedData:de(t[7].get(t[8]),Gp,Qp),yKey:Xp,xKey:Kp,zKey:Zp,formatter:(r=2,On(`.${r}~%`)),url:Wp,spanCol:12,customClass:"chart-medium",tooltipType:"community",caption:t[3][0].value,title:"Survival curves"}}),{c(){At(e.$$.fragment)},m(t,r){zt(e,t,r),n=!0},p(t,n){const r={};16&n&&(r.data=t[4]),384&n&&(r.groupedData=de(t[7].get(t[8]),Gp,Qp)),8&n&&(r.caption=t[3][0].value),e.$set(r)},i(t){n||(_t(e.$$.fragment,t),n=!0)},o(t){kt(e.$$.fragment,t),n=!1},d(t){jt(e,t)}}}function Up(t){let e,n,r,i=t[12].value+"";return{c(){e=N("p"),n=z(i),r=j()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){2&e&&i!==(i=t[12].value+"")&&I(n,i)},d(t){t&&T(e)}}}function Vp(t){let e,n,r,i=t[12].value+"";return{c(){e=N("p"),n=z(i),r=j()},m(t,i){C(t,e,i),_(e,n),_(e,r)},p(t,e){4&e&&i!==(i=t[12].value+"")&&I(n,i)},d(t){t&&T(e)}}}function Bp(t){let e,n,r,a,s,l,c,u,f,h,p,d,m,v,y,b;function x(e){t[9](e)}let w={id:"medium",title:"Medium",labels:["TV","Web"],info:"Internet or TV"};void 0!==t[5]&&(w.checked=t[5]),r=new xu({props:w}),ot.push((()=>Nt(r,"checked",x)));const $=[Hp,Op],k=[];function M(t,e){return t[6]&&t[4]?0:1}c=M(t),u=k[c]=$[c](t);let A=t[1],z=[];for(let e=0;e<A.length;e+=1)z[e]=Up(Yp(t,A,e));let D=t[2],P=[];for(let e=0;e<D.length;e+=1)P[e]=Vp(Fp(t,D,e));return{c(){e=N("div"),n=N("div"),At(r.$$.fragment),s=j(),l=N("div"),u.c(),f=j(),h=N("div");for(let t=0;t<z.length;t+=1)z[t].c();p=j(),d=N("div");for(let t=0;t<P.length;t+=1)P[t].c();R(n,"class","controls svelte-1rjzzrs"),R(l,"class","chart-wrapper svelte-1rjzzrs"),R(h,"class","copy svelte-1rjzzrs"),R(d,"class","references svelte-1rjzzrs"),R(e,"class","section section-3 svelte-1rjzzrs")},m(i,o){C(i,e,o),_(e,n),zt(r,n,null),_(e,s),_(e,l),k[c].m(l,null),_(e,f),_(e,h);for(let t=0;t<z.length;t+=1)z[t].m(h,null);_(e,p),_(e,d);for(let t=0;t<P.length;t+=1)P[t].m(d,null);v=!0,y||(b=[g(m=Bu.call(null,e,{once:t[0]})),E(e,"enter",t[10])],y=!0)},p(t,[e]){const n={};!a&&32&e&&(a=!0,n.checked=t[5],ft((()=>a=!1))),r.$set(n);let i=c;if(c=M(t),c===i?k[c].p(t,e):(wt(),kt(k[i],1,1,(()=>{k[i]=null})),$t(),u=k[c],u?u.p(t,e):(u=k[c]=$[c](t),u.c()),_t(u,1),u.m(l,null)),2&e){let n;for(A=t[1],n=0;n<A.length;n+=1){const r=Yp(t,A,n);z[n]?z[n].p(r,e):(z[n]=Up(r),z[n].c(),z[n].m(h,null))}for(;n<z.length;n+=1)z[n].d(1);z.length=A.length}if(4&e){let n;for(D=t[2],n=0;n<D.length;n+=1){const r=Fp(t,D,n);P[n]?P[n].p(r,e):(P[n]=Vp(r),P[n].c(),P[n].m(d,null))}for(;n<P.length;n+=1)P[n].d(1);P.length=D.length}m&&o(m.update)&&1&e&&m.update.call(null,{once:t[0]})},i(t){v||(_t(r.$$.fragment,t),_t(u),v=!0)},o(t){kt(r.$$.fragment,t),kt(u),v=!1},d(t){t&&T(e),jt(r),k[c].d(),S(z,t),S(P,t),y=!1,i(b)}}}On(",.0s"),On(",.0f");let Wp="assets/data/segregation-survival.csv",Kp="month",Xp="value",Zp="political_lean";const Gp=t=>t.medium,Qp=t=>t.political_lean;function Jp(t,e,n){let r,i,o=!1,{once:a}=e,{copy:s}=e,{refs:l}=e,{captions:c}=e,u=!0,f=u?"tv":"online";et((async()=>{const t=await te(Wp,Xt);n(4,r=t)}));return t.$$set=t=>{"once"in t&&n(0,a=t.once),"copy"in t&&n(1,s=t.copy),"refs"in t&&n(2,l=t.refs),"captions"in t&&n(3,c=t.captions)},t.$$.update=()=>{16&t.$$.dirty&&r&&n(7,i=pe(r,(t=>t.medium))),32&t.$$.dirty&&n(8,f=u?"tv":"online")},[a,s,l,c,r,u,o,i,f,function(t){u=t,n(5,u)},()=>n(6,o=!0)]}class td extends Pt{constructor(t){super(),Et(this,t,Jp,Bp,a,{once:0,copy:1,refs:2,captions:3})}}function ed(t){let e,n,r,i,o,a,s,l,c,u,f,h;return e=new It({}),r=new Vu({props:{title:t[0].title,authors:t[1],standfirst:t[0].standfirst}}),o=new df({props:{once:!0,copy:t[0]["section-one"].copy,refs:t[0]["section-one"].references,captions:t[0]["section-one"].captions}}),s=new Mp({props:{once:!0,copy:t[0]["section-two"].copy,refs:t[0]["section-two"].references,captions:t[0]["section-two"].captions}}),c=new td({props:{once:!0,copy:t[0]["section-three"].copy,refs:t[0]["section-three"].references,captions:t[0]["section-three"].captions}}),f=new Ft({}),{c(){At(e.$$.fragment),n=j(),At(r.$$.fragment),i=j(),At(o.$$.fragment),a=j(),At(s.$$.fragment),l=j(),At(c.$$.fragment),u=j(),At(f.$$.fragment)},m(t,p){zt(e,t,p),C(t,n,p),zt(r,t,p),C(t,i,p),zt(o,t,p),C(t,a,p),zt(s,t,p),C(t,l,p),zt(c,t,p),C(t,u,p),zt(f,t,p),h=!0},p(t,[e]){const n={};1&e&&(n.title=t[0].title),2&e&&(n.authors=t[1]),1&e&&(n.standfirst=t[0].standfirst),r.$set(n);const i={};1&e&&(i.copy=t[0]["section-one"].copy),1&e&&(i.refs=t[0]["section-one"].references),1&e&&(i.captions=t[0]["section-one"].captions),o.$set(i);const a={};1&e&&(a.copy=t[0]["section-two"].copy),1&e&&(a.refs=t[0]["section-two"].references),1&e&&(a.captions=t[0]["section-two"].captions),s.$set(a);const l={};1&e&&(l.copy=t[0]["section-three"].copy),1&e&&(l.refs=t[0]["section-three"].references),1&e&&(l.captions=t[0]["section-three"].captions),c.$set(l)},i(t){h||(_t(e.$$.fragment,t),_t(r.$$.fragment,t),_t(o.$$.fragment,t),_t(s.$$.fragment,t),_t(c.$$.fragment,t),_t(f.$$.fragment,t),h=!0)},o(t){kt(e.$$.fragment,t),kt(r.$$.fragment,t),kt(o.$$.fragment,t),kt(s.$$.fragment,t),kt(c.$$.fragment,t),kt(f.$$.fragment,t),h=!1},d(t){jt(e,t),t&&T(n),jt(r,t),t&&T(i),jt(o,t),t&&T(a),jt(s,t),t&&T(l),jt(c,t),t&&T(u),jt(f,t)}}}function nd(t,e,n){let{data:r}=e,{authors:i}=e;return t.$$set=t=>{"data"in t&&n(0,r=t.data),"authors"in t&&n(1,i=t.authors)},[r,i]}var rd={title:"Information ecosystem",standfirst:[{type:"text",value:"YouTube is arguably the largest and most engaging online media platform in the world. Its scale has fueled concerns that YouTube users are being radicalized by biased recommendations and professedly apolitical “anti-woke” channels."},{type:"text",value:"Here we test this hypothesis using a panel of more than 300,000 Americans and their individual-level browsing behavior, on and off YouTube, from January 2016 to September 2021. The dashboards below present key findings from our analysis."}],"section-one":{copy:[{type:"text",value:"To check for overall trends in political category preferences, we examine changes in the six viewing clusters’ total consumption. Here, we track how many YouTube users fall into each political cluster over time, which tells us whether these communities are growing or shrinking."},{type:"text",value:"Selecting “User share” from the dropdown above shows the percentages of the total number of YouTube users who fall into each of our six defined viewing clusters, corresponding to the political content categories."},{type:"text",value:"Selecting “Total consumption share” shows the percentages of the total amount (in minutes) of viewed YouTube content which fall into each of the six categories of news content."},{type:"text",value:"Our results reveal that news, in general, makes up only a small portion of YouTube consumption. However, even a small percentage of users can mean large absolute numbers at the scale of YouTube. For example, averaged over the 4-year period, 764,405 Americans consumed anti-woke content at least once in a given month, with that number growing steadily over time."}],references:[{type:"text",value:"Iyengar et al, The origins and consequences of affective polarization in the United States, 2019"},{type:"text",value:"Jones, Declining trust in congress: Effects of polarization and consequences for Democracy, 2015"}],captions:[{type:"text",value:"Percent of YouTube users falling into the six political categories. In other words, out of all American YouTube viewers, 1.3% were in the left cluster in February 2020. This shows how large YouTube’s political communities are relative to the entire platform."},{type:"text",value:"Consumption share of the six political channel categories. For example, out of the total minutes of content that Americans viewed across the platform in October 2018, 1.76% of those minutes were far-right content. These statistics shed light on the amount of political content being consumed, and not necessarily the communities that consume it."}]},"section-two":{copy:[{type:"text",value:"To check for overall trends in political category preferences, we examine changes in the six viewing clusters’ total consumption. Here, we track how many YouTube users fall into each political cluster over time, which tells us whether these communities are growing or shrinking."},{type:"text",value:"Selecting “User share” from the dropdown above shows the percentages of the total number of YouTube users who fall into each of our six defined viewing clusters, corresponding to the political content categories."},{type:"text",value:"Selecting “Total consumption share” shows the percentages of the total amount (in minutes) of viewed YouTube content which fall into each of the six categories of news content."},{type:"text",value:"Our results reveal that news, in general, makes up only a small portion of YouTube consumption. However, even a small percentage of users can mean large absolute numbers at the scale of YouTube. For example, averaged over the 4-year period, 764,405 Americans consumed anti-woke content at least once in a given month, with that number growing steadily over time."}],references:[{type:"text",value:"Iyengar et al, The origins and consequences of affective polarization in the United States, 2019"},{type:"text",value:"Jones, Declining trust in congress: Effects of polarization and consequences for Democracy, 2015"}],captions:[{type:"text",value:"Percent of YouTube users falling into the six political categories. In other words, out of all American YouTube viewers, 1.3% were in the left cluster in February 2020. This shows how large YouTube’s political communities are relative to the entire platform."},{type:"text",value:"Consumption share of the six political channel categories. For example, out of the total minutes of content that Americans viewed across the platform in October 2018, 1.76% of those minutes were far-right content. These statistics shed light on the amount of political content being consumed, and not necessarily the communities that consume it."}]},"section-three":{copy:[{type:"text",value:"To check for overall trends in political category preferences, we examine changes in the six viewing clusters’ total consumption. Here, we track how many YouTube users fall into each political cluster over time, which tells us whether these communities are growing or shrinking."},{type:"text",value:"Selecting “User share” from the dropdown above shows the percentages of the total number of YouTube users who fall into each of our six defined viewing clusters, corresponding to the political content categories."},{type:"text",value:"Selecting “Total consumption share” shows the percentages of the total amount (in minutes) of viewed YouTube content which fall into each of the six categories of news content."},{type:"text",value:"Our results reveal that news, in general, makes up only a small portion of YouTube consumption. However, even a small percentage of users can mean large absolute numbers at the scale of YouTube. For example, averaged over the 4-year period, 764,405 Americans consumed anti-woke content at least once in a given month, with that number growing steadily over time."}],references:[{type:"text",value:"Iyengar et al, The origins and consequences of affective polarization in the United States, 2019"},{type:"text",value:"Jones, Declining trust in congress: Effects of polarization and consequences for Democracy, 2015"}],captions:[{type:"text",value:"Percent of YouTube users falling into the six political categories. In other words, out of all American YouTube viewers, 1.3% were in the left cluster in February 2020. This shows how large YouTube’s political communities are relative to the entire platform."},{type:"text",value:"Consumption share of the six political channel categories. For example, out of the total minutes of content that Americans viewed across the platform in October 2018, 1.76% of those minutes were far-right content. These statistics shed light on the amount of political content being consumed, and not necessarily the communities that consume it."}]}};return new class extends Pt{constructor(t){super(),Et(this,t,nd,ed,a,{data:0,authors:1})}}({target:document.body,props:{data:rd,authors:[{name:"Homa Hosseinmardi",detail:["Department of Computer and Information Science, University of Pennsylvania, Philadelphia, PA 19104","homahm@seas.upenn.edu"]},{name:"Amir Ghasemian",detail:["Department of Statistics, Harvard University, Cambridge, MA 02138","Department of Statistical Science, Fox School of Business, Temple University, Philadelphia, PA 19122"]},{name:"Aaron Clauset",detail:["Department of Computer Science, University of Colorado Boulder, Boulder, CO 80309","BioFrontiers Institute, University of Colorado Boulder, Boulder, CO 80303","Santa Fe Institute, Santa Fe, NM 87501"]},{name:"Markus Mobius",detail:["Microsoft Research New England, Cambridge, MA 02142"]},{name:"David M. Rothschild",detail:["Microsoft Research New York, New York, NY 10012"]},{name:"Duncan J. Watts",detail:["Department of Computer and Information Science, University of Pennsylvania, Philadelphia, PA 19104","The Annenberg School of Communication, University of Pennsylvania, Philadelphia, PA 19104","Operations, Information, and Decisions Department, University of Pennsylvania, Philadelphia, PA 19104","djwatts@seas.upenn.edu"]}]}})}();
//# sourceMappingURL=bundle.js.map
